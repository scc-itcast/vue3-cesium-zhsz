/*! Vue Cesium v3.0.12 */(function(O,a){typeof exports=="object"&&typeof module!="undefined"?a(exports,require("vue"),require("echarts")):typeof define=="function"&&define.amd?define(["exports","vue","echarts"],a):(O=typeof globalThis!="undefined"?globalThis:O||self,a(O.VueCesium={},O.Vue,O.echarts))})(this,function(O,a,Rb){"use strict";function Lb(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(i){if(i!=="default"){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}}),t.default=e,Object.freeze(t)}var vr=Lb(Rb);const Bb="3.0.12",cu=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Ji=cu?Symbol("VueCesium"):"VueCesium",uu=cu?Symbol("_vc_f_"):"_vc_f_",du=Symbol(),jb=Object.prototype.hasOwnProperty,Re=(e,t)=>jb.call(e,t),He=Array.isArray,pt=e=>typeof e=="function",si=e=>typeof e=="string",en=e=>e!==null&&typeof e=="object",Fb=Object.prototype.toString,Vb=e=>Fb.call(e),Ye=e=>Vb(e)==="[object Object]",ts=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},Nb=/-(\w)/g,At=ts(e=>e.replace(Nb,(t,i)=>i?i.toUpperCase():"")),kb=/\B([A-Z])/g,zb=ts(e=>e.replace(kb,"-$1").toLowerCase()),yr=ts(e=>e.charAt(0).toUpperCase()+e.slice(1));var $b=typeof global=="object"&&global&&global.Object===Object&&global,mu=$b,Gb=typeof self=="object"&&self&&self.Object===Object&&self,Ub=mu||Gb||Function("return this")(),gi=Ub,Hb=gi.Symbol,li=Hb,hu=Object.prototype,Wb=hu.hasOwnProperty,qb=hu.toString,Oo=li?li.toStringTag:void 0;function Zb(e){var t=Wb.call(e,Oo),i=e[Oo];try{e[Oo]=void 0;var n=!0}catch(r){}var o=qb.call(e);return n&&(t?e[Oo]=i:delete e[Oo]),o}var Xb=Object.prototype,Yb=Xb.toString;function Qb(e){return Yb.call(e)}var Kb="[object Null]",Jb="[object Undefined]",fu=li?li.toStringTag:void 0;function kn(e){return e==null?e===void 0?Jb:Kb:fu&&fu in Object(e)?Zb(e):Qb(e)}function ji(e){return e!=null&&typeof e=="object"}var e1="[object Symbol]";function Cr(e){return typeof e=="symbol"||ji(e)&&kn(e)==e1}function pu(e,t){for(var i=-1,n=e==null?0:e.length,o=Array(n);++i<n;)o[i]=t(e[i],i,e);return o}var t1=Array.isArray,vi=t1,i1=1/0,gu=li?li.prototype:void 0,vu=gu?gu.toString:void 0;function yu(e){if(typeof e=="string")return e;if(vi(e))return pu(e,yu)+"";if(Cr(e))return vu?vu.call(e):"";var t=e+"";return t=="0"&&1/e==-i1?"-0":t}var n1=/\s/;function o1(e){for(var t=e.length;t--&&n1.test(e.charAt(t)););return t}var r1=/^\s+/;function a1(e){return e&&e.slice(0,o1(e)+1).replace(r1,"")}function Fi(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Cu=0/0,s1=/^[-+]0x[0-9a-f]+$/i,l1=/^0b[01]+$/i,c1=/^0o[0-7]+$/i,u1=parseInt;function is(e){if(typeof e=="number")return e;if(Cr(e))return Cu;if(Fi(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Fi(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=a1(e);var i=l1.test(e);return i||c1.test(e)?u1(e.slice(2),i?2:8):s1.test(e)?Cu:+e}var bu=1/0,d1=17976931348623157e292;function m1(e){if(!e)return e===0?e:0;if(e=is(e),e===bu||e===-bu){var t=e<0?-1:1;return t*d1}return e===e?e:0}function h1(e){var t=m1(e),i=t%1;return t===t?i?t-i:t:0}function ns(e){return e}var f1="[object AsyncFunction]",p1="[object Function]",g1="[object GeneratorFunction]",v1="[object Proxy]";function wu(e){if(!Fi(e))return!1;var t=kn(e);return t==p1||t==g1||t==f1||t==v1}var y1=gi["__core-js_shared__"],os=y1,_u=function(){var e=/[^.]+$/.exec(os&&os.keys&&os.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function C1(e){return!!_u&&_u in e}var b1=Function.prototype,w1=b1.toString;function yn(e){if(e!=null){try{return w1.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var _1=/[\\^$.*+?()[\]{}|]/g,P1=/^\[object .+?Constructor\]$/,O1=Function.prototype,E1=Object.prototype,M1=O1.toString,S1=E1.hasOwnProperty,x1=RegExp("^"+M1.call(S1).replace(_1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function T1(e){if(!Fi(e)||C1(e))return!1;var t=wu(e)?x1:P1;return t.test(yn(e))}function A1(e,t){return e==null?void 0:e[t]}function Cn(e,t){var i=A1(e,t);return T1(i)?i:void 0}var I1=Cn(gi,"WeakMap"),rs=I1,Pu=Object.create,D1=function(){function e(){}return function(t){if(!Fi(t))return{};if(Pu)return Pu(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}(),R1=D1;function L1(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function B1(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}var j1=800,F1=16,V1=Date.now;function N1(e){var t=0,i=0;return function(){var n=V1(),o=F1-(n-i);if(i=n,o>0){if(++t>=j1)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function k1(e){return function(){return e}}var z1=function(){try{var e=Cn(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),br=z1,$1=br?function(e,t){return br(e,"toString",{configurable:!0,enumerable:!1,value:k1(t),writable:!0})}:ns,G1=$1,U1=N1(G1),H1=U1;function W1(e,t){for(var i=-1,n=e==null?0:e.length;++i<n&&t(e[i],i,e)!==!1;);return e}function Ou(e,t,i,n){for(var o=e.length,r=i+(n?1:-1);n?r--:++r<o;)if(t(e[r],r,e))return r;return-1}function q1(e){return e!==e}function Z1(e,t,i){for(var n=i-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function X1(e,t,i){return t===t?Z1(e,t,i):Ou(e,q1,i)}function Y1(e,t){var i=e==null?0:e.length;return!!i&&X1(e,t,0)>-1}var Q1=9007199254740991,K1=/^(?:0|[1-9]\d*)$/;function as(e,t){var i=typeof e;return t=t==null?Q1:t,!!t&&(i=="number"||i!="symbol"&&K1.test(e))&&e>-1&&e%1==0&&e<t}function Eu(e,t,i){t=="__proto__"&&br?br(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function ss(e,t){return e===t||e!==e&&t!==t}var J1=Object.prototype,ew=J1.hasOwnProperty;function Mu(e,t,i){var n=e[t];(!(ew.call(e,t)&&ss(n,i))||i===void 0&&!(t in e))&&Eu(e,t,i)}function wr(e,t,i,n){var o=!i;i||(i={});for(var r=-1,s=t.length;++r<s;){var l=t[r],c=n?n(i[l],e[l],l,i,e):void 0;c===void 0&&(c=e[l]),o?Eu(i,l,c):Mu(i,l,c)}return i}var Su=Math.max;function tw(e,t,i){return t=Su(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,r=Su(n.length-t,0),s=Array(r);++o<r;)s[o]=n[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=n[o];return l[t]=i(s),L1(e,this,l)}}function iw(e,t){return H1(tw(e,t,ns),e+"")}var nw=9007199254740991;function ls(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=nw}function _r(e){return e!=null&&ls(e.length)&&!wu(e)}var ow=Object.prototype;function cs(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||ow;return e===i}function rw(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}var aw="[object Arguments]";function xu(e){return ji(e)&&kn(e)==aw}var Tu=Object.prototype,sw=Tu.hasOwnProperty,lw=Tu.propertyIsEnumerable,cw=xu(function(){return arguments}())?xu:function(e){return ji(e)&&sw.call(e,"callee")&&!lw.call(e,"callee")},us=cw;function uw(){return!1}var Au=typeof O=="object"&&O&&!O.nodeType&&O,Iu=Au&&typeof module=="object"&&module&&!module.nodeType&&module,dw=Iu&&Iu.exports===Au,Du=dw?gi.Buffer:void 0,mw=Du?Du.isBuffer:void 0,hw=mw||uw,Pr=hw,fw="[object Arguments]",pw="[object Array]",gw="[object Boolean]",vw="[object Date]",yw="[object Error]",Cw="[object Function]",bw="[object Map]",ww="[object Number]",_w="[object Object]",Pw="[object RegExp]",Ow="[object Set]",Ew="[object String]",Mw="[object WeakMap]",Sw="[object ArrayBuffer]",xw="[object DataView]",Tw="[object Float32Array]",Aw="[object Float64Array]",Iw="[object Int8Array]",Dw="[object Int16Array]",Rw="[object Int32Array]",Lw="[object Uint8Array]",Bw="[object Uint8ClampedArray]",jw="[object Uint16Array]",Fw="[object Uint32Array]",Qe={};Qe[Tw]=Qe[Aw]=Qe[Iw]=Qe[Dw]=Qe[Rw]=Qe[Lw]=Qe[Bw]=Qe[jw]=Qe[Fw]=!0,Qe[fw]=Qe[pw]=Qe[Sw]=Qe[gw]=Qe[xw]=Qe[vw]=Qe[yw]=Qe[Cw]=Qe[bw]=Qe[ww]=Qe[_w]=Qe[Pw]=Qe[Ow]=Qe[Ew]=Qe[Mw]=!1;function Vw(e){return ji(e)&&ls(e.length)&&!!Qe[kn(e)]}function Or(e){return function(t){return e(t)}}var Ru=typeof O=="object"&&O&&!O.nodeType&&O,Eo=Ru&&typeof module=="object"&&module&&!module.nodeType&&module,Nw=Eo&&Eo.exports===Ru,ds=Nw&&mu.process,kw=function(){try{var e=Eo&&Eo.require&&Eo.require("util").types;return e||ds&&ds.binding&&ds.binding("util")}catch(t){}}(),zn=kw,Lu=zn&&zn.isTypedArray,zw=Lu?Or(Lu):Vw,Bu=zw,$w=Object.prototype,Gw=$w.hasOwnProperty;function ju(e,t){var i=vi(e),n=!i&&us(e),o=!i&&!n&&Pr(e),r=!i&&!n&&!o&&Bu(e),s=i||n||o||r,l=s?rw(e.length,String):[],c=l.length;for(var u in e)(t||Gw.call(e,u))&&!(s&&(u=="length"||o&&(u=="offset"||u=="parent")||r&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||as(u,c)))&&l.push(u);return l}function Fu(e,t){return function(i){return e(t(i))}}var Uw=Fu(Object.keys,Object),Hw=Uw,Ww=Object.prototype,qw=Ww.hasOwnProperty;function Zw(e){if(!cs(e))return Hw(e);var t=[];for(var i in Object(e))qw.call(e,i)&&i!="constructor"&&t.push(i);return t}function Mo(e){return _r(e)?ju(e):Zw(e)}function Xw(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var Yw=Object.prototype,Qw=Yw.hasOwnProperty;function Kw(e){if(!Fi(e))return Xw(e);var t=cs(e),i=[];for(var n in e)n=="constructor"&&(t||!Qw.call(e,n))||i.push(n);return i}function ms(e){return _r(e)?ju(e,!0):Kw(e)}var Jw=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,e2=/^\w*$/;function hs(e,t){if(vi(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||Cr(e)?!0:e2.test(e)||!Jw.test(e)||t!=null&&e in Object(t)}var t2=Cn(Object,"create"),So=t2;function i2(){this.__data__=So?So(null):{},this.size=0}function n2(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var o2="__lodash_hash_undefined__",r2=Object.prototype,a2=r2.hasOwnProperty;function s2(e){var t=this.__data__;if(So){var i=t[e];return i===o2?void 0:i}return a2.call(t,e)?t[e]:void 0}var l2=Object.prototype,c2=l2.hasOwnProperty;function u2(e){var t=this.__data__;return So?t[e]!==void 0:c2.call(t,e)}var d2="__lodash_hash_undefined__";function m2(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=So&&t===void 0?d2:t,this}function bn(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}bn.prototype.clear=i2,bn.prototype.delete=n2,bn.prototype.get=s2,bn.prototype.has=u2,bn.prototype.set=m2;function h2(){this.__data__=[],this.size=0}function Er(e,t){for(var i=e.length;i--;)if(ss(e[i][0],t))return i;return-1}var f2=Array.prototype,p2=f2.splice;function g2(e){var t=this.__data__,i=Er(t,e);if(i<0)return!1;var n=t.length-1;return i==n?t.pop():p2.call(t,i,1),--this.size,!0}function v2(e){var t=this.__data__,i=Er(t,e);return i<0?void 0:t[i][1]}function y2(e){return Er(this.__data__,e)>-1}function C2(e,t){var i=this.__data__,n=Er(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this}function Vi(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Vi.prototype.clear=h2,Vi.prototype.delete=g2,Vi.prototype.get=v2,Vi.prototype.has=y2,Vi.prototype.set=C2;var b2=Cn(gi,"Map"),xo=b2;function w2(){this.size=0,this.__data__={hash:new bn,map:new(xo||Vi),string:new bn}}function _2(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Mr(e,t){var i=e.__data__;return _2(t)?i[typeof t=="string"?"string":"hash"]:i.map}function P2(e){var t=Mr(this,e).delete(e);return this.size-=t?1:0,t}function O2(e){return Mr(this,e).get(e)}function E2(e){return Mr(this,e).has(e)}function M2(e,t){var i=Mr(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this}function Ni(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Ni.prototype.clear=w2,Ni.prototype.delete=P2,Ni.prototype.get=O2,Ni.prototype.has=E2,Ni.prototype.set=M2;var S2="Expected a function";function fs(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(S2);var i=function(){var n=arguments,o=t?t.apply(this,n):n[0],r=i.cache;if(r.has(o))return r.get(o);var s=e.apply(this,n);return i.cache=r.set(o,s)||r,s};return i.cache=new(fs.Cache||Ni),i}fs.Cache=Ni;var x2=500;function T2(e){var t=fs(e,function(n){return i.size===x2&&i.clear(),n}),i=t.cache;return t}var A2=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,I2=/\\(\\)?/g,D2=T2(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(A2,function(i,n,o,r){t.push(o?r.replace(I2,"$1"):n||i)}),t}),R2=D2;function To(e){return e==null?"":yu(e)}function ps(e,t){return vi(e)?e:hs(e,t)?[e]:R2(To(e))}var L2=1/0;function Ao(e){if(typeof e=="string"||Cr(e))return e;var t=e+"";return t=="0"&&1/e==-L2?"-0":t}function gs(e,t){t=ps(t,e);for(var i=0,n=t.length;e!=null&&i<n;)e=e[Ao(t[i++])];return i&&i==n?e:void 0}function Vu(e,t,i){var n=e==null?void 0:gs(e,t);return n===void 0?i:n}function vs(e,t){for(var i=-1,n=t.length,o=e.length;++i<n;)e[o+i]=t[i];return e}var Nu=li?li.isConcatSpreadable:void 0;function B2(e){return vi(e)||us(e)||!!(Nu&&e&&e[Nu])}function ku(e,t,i,n,o){var r=-1,s=e.length;for(i||(i=B2),o||(o=[]);++r<s;){var l=e[r];t>0&&i(l)?t>1?ku(l,t-1,i,n,o):vs(o,l):n||(o[o.length]=l)}return o}var j2=Fu(Object.getPrototypeOf,Object),zu=j2;function $u(e,t,i){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),i=i>o?o:i,i<0&&(i+=o),o=t>i?0:i-t>>>0,t>>>=0;for(var r=Array(o);++n<o;)r[n]=e[n+t];return r}function F2(e,t,i){var n=e.length;return i=i===void 0?n:i,!t&&i>=n?e:$u(e,t,i)}var V2="\\ud800-\\udfff",N2="\\u0300-\\u036f",k2="\\ufe20-\\ufe2f",z2="\\u20d0-\\u20ff",$2=N2+k2+z2,G2="\\ufe0e\\ufe0f",U2="\\u200d",H2=RegExp("["+U2+V2+$2+G2+"]");function Gu(e){return H2.test(e)}function W2(e){return e.split("")}var Uu="\\ud800-\\udfff",q2="\\u0300-\\u036f",Z2="\\ufe20-\\ufe2f",X2="\\u20d0-\\u20ff",Y2=q2+Z2+X2,Q2="\\ufe0e\\ufe0f",K2="["+Uu+"]",ys="["+Y2+"]",Cs="\\ud83c[\\udffb-\\udfff]",J2="(?:"+ys+"|"+Cs+")",Hu="[^"+Uu+"]",Wu="(?:\\ud83c[\\udde6-\\uddff]){2}",qu="[\\ud800-\\udbff][\\udc00-\\udfff]",e_="\\u200d",Zu=J2+"?",Xu="["+Q2+"]?",t_="(?:"+e_+"(?:"+[Hu,Wu,qu].join("|")+")"+Xu+Zu+")*",i_=Xu+Zu+t_,n_="(?:"+[Hu+ys+"?",ys,Wu,qu,K2].join("|")+")",o_=RegExp(Cs+"(?="+Cs+")|"+n_+i_,"g");function r_(e){return e.match(o_)||[]}function a_(e){return Gu(e)?r_(e):W2(e)}function s_(e){return function(t){t=To(t);var i=Gu(t)?a_(t):void 0,n=i?i[0]:t.charAt(0),o=i?F2(i,1).join(""):t.slice(1);return n[e]()+o}}var l_=s_("toUpperCase"),c_=l_;function u_(e){return c_(To(e).toLowerCase())}function d_(e,t,i,n){var o=-1,r=e==null?0:e.length;for(n&&r&&(i=e[++o]);++o<r;)i=t(i,e[o],o,e);return i}function m_(e){return function(t){return e==null?void 0:e[t]}}var h_={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},f_=m_(h_),p_=f_,g_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,v_="\\u0300-\\u036f",y_="\\ufe20-\\ufe2f",C_="\\u20d0-\\u20ff",b_=v_+y_+C_,w_="["+b_+"]",__=RegExp(w_,"g");function P_(e){return e=To(e),e&&e.replace(g_,p_).replace(__,"")}var O_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function E_(e){return e.match(O_)||[]}var M_=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function S_(e){return M_.test(e)}var Yu="\\ud800-\\udfff",x_="\\u0300-\\u036f",T_="\\ufe20-\\ufe2f",A_="\\u20d0-\\u20ff",I_=x_+T_+A_,Qu="\\u2700-\\u27bf",Ku="a-z\\xdf-\\xf6\\xf8-\\xff",D_="\\xac\\xb1\\xd7\\xf7",R_="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",L_="\\u2000-\\u206f",B_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ju="A-Z\\xc0-\\xd6\\xd8-\\xde",j_="\\ufe0e\\ufe0f",ed=D_+R_+L_+B_,td="['\u2019]",id="["+ed+"]",F_="["+I_+"]",nd="\\d+",V_="["+Qu+"]",od="["+Ku+"]",rd="[^"+Yu+ed+nd+Qu+Ku+Ju+"]",N_="\\ud83c[\\udffb-\\udfff]",k_="(?:"+F_+"|"+N_+")",z_="[^"+Yu+"]",ad="(?:\\ud83c[\\udde6-\\uddff]){2}",sd="[\\ud800-\\udbff][\\udc00-\\udfff]",$n="["+Ju+"]",$_="\\u200d",ld="(?:"+od+"|"+rd+")",G_="(?:"+$n+"|"+rd+")",cd="(?:"+td+"(?:d|ll|m|re|s|t|ve))?",ud="(?:"+td+"(?:D|LL|M|RE|S|T|VE))?",dd=k_+"?",md="["+j_+"]?",U_="(?:"+$_+"(?:"+[z_,ad,sd].join("|")+")"+md+dd+")*",H_="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",W_="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",q_=md+dd+U_,Z_="(?:"+[V_,ad,sd].join("|")+")"+q_,X_=RegExp([$n+"?"+od+"+"+cd+"(?="+[id,$n,"$"].join("|")+")",G_+"+"+ud+"(?="+[id,$n+ld,"$"].join("|")+")",$n+"?"+ld+"+"+cd,$n+"+"+ud,W_,H_,nd,Z_].join("|"),"g");function Y_(e){return e.match(X_)||[]}function Q_(e,t,i){return e=To(e),t=i?void 0:t,t===void 0?S_(e)?Y_(e):E_(e):e.match(t)||[]}var K_="['\u2019]",J_=RegExp(K_,"g");function eP(e){return function(t){return d_(Q_(P_(t).replace(J_,"")),e,"")}}var tP=eP(function(e,t,i){return t=t.toLowerCase(),e+(i?u_(t):t)}),hd=tP;function iP(){this.__data__=new Vi,this.size=0}function nP(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function oP(e){return this.__data__.get(e)}function rP(e){return this.__data__.has(e)}var aP=200;function sP(e,t){var i=this.__data__;if(i instanceof Vi){var n=i.__data__;if(!xo||n.length<aP-1)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Ni(n)}return i.set(e,t),this.size=i.size,this}function Si(e){var t=this.__data__=new Vi(e);this.size=t.size}Si.prototype.clear=iP,Si.prototype.delete=nP,Si.prototype.get=oP,Si.prototype.has=rP,Si.prototype.set=sP;function lP(e,t){return e&&wr(t,Mo(t),e)}function cP(e,t){return e&&wr(t,ms(t),e)}var fd=typeof O=="object"&&O&&!O.nodeType&&O,pd=fd&&typeof module=="object"&&module&&!module.nodeType&&module,uP=pd&&pd.exports===fd,gd=uP?gi.Buffer:void 0,vd=gd?gd.allocUnsafe:void 0;function dP(e,t){if(t)return e.slice();var i=e.length,n=vd?vd(i):new e.constructor(i);return e.copy(n),n}function mP(e,t){for(var i=-1,n=e==null?0:e.length,o=0,r=[];++i<n;){var s=e[i];t(s,i,e)&&(r[o++]=s)}return r}function yd(){return[]}var hP=Object.prototype,fP=hP.propertyIsEnumerable,Cd=Object.getOwnPropertySymbols,pP=Cd?function(e){return e==null?[]:(e=Object(e),mP(Cd(e),function(t){return fP.call(e,t)}))}:yd,bs=pP;function gP(e,t){return wr(e,bs(e),t)}var vP=Object.getOwnPropertySymbols,yP=vP?function(e){for(var t=[];e;)vs(t,bs(e)),e=zu(e);return t}:yd,bd=yP;function CP(e,t){return wr(e,bd(e),t)}function wd(e,t,i){var n=t(e);return vi(e)?n:vs(n,i(e))}function ws(e){return wd(e,Mo,bs)}function bP(e){return wd(e,ms,bd)}var wP=Cn(gi,"DataView"),_s=wP,_P=Cn(gi,"Promise"),Ps=_P,PP=Cn(gi,"Set"),Os=PP,_d="[object Map]",OP="[object Object]",Pd="[object Promise]",Od="[object Set]",Ed="[object WeakMap]",Md="[object DataView]",EP=yn(_s),MP=yn(xo),SP=yn(Ps),xP=yn(Os),TP=yn(rs),wn=kn;(_s&&wn(new _s(new ArrayBuffer(1)))!=Md||xo&&wn(new xo)!=_d||Ps&&wn(Ps.resolve())!=Pd||Os&&wn(new Os)!=Od||rs&&wn(new rs)!=Ed)&&(wn=function(e){var t=kn(e),i=t==OP?e.constructor:void 0,n=i?yn(i):"";if(n)switch(n){case EP:return Md;case MP:return _d;case SP:return Pd;case xP:return Od;case TP:return Ed}return t});var Io=wn,AP=Object.prototype,IP=AP.hasOwnProperty;function DP(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&IP.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var RP=gi.Uint8Array,Sr=RP;function Es(e){var t=new e.constructor(e.byteLength);return new Sr(t).set(new Sr(e)),t}function LP(e,t){var i=t?Es(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}var BP=/\w*$/;function jP(e){var t=new e.constructor(e.source,BP.exec(e));return t.lastIndex=e.lastIndex,t}var Sd=li?li.prototype:void 0,xd=Sd?Sd.valueOf:void 0;function FP(e){return xd?Object(xd.call(e)):{}}function VP(e,t){var i=t?Es(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var NP="[object Boolean]",kP="[object Date]",zP="[object Map]",$P="[object Number]",GP="[object RegExp]",UP="[object Set]",HP="[object String]",WP="[object Symbol]",qP="[object ArrayBuffer]",ZP="[object DataView]",XP="[object Float32Array]",YP="[object Float64Array]",QP="[object Int8Array]",KP="[object Int16Array]",JP="[object Int32Array]",eO="[object Uint8Array]",tO="[object Uint8ClampedArray]",iO="[object Uint16Array]",nO="[object Uint32Array]";function oO(e,t,i){var n=e.constructor;switch(t){case qP:return Es(e);case NP:case kP:return new n(+e);case ZP:return LP(e,i);case XP:case YP:case QP:case KP:case JP:case eO:case tO:case iO:case nO:return VP(e,i);case zP:return new n;case $P:case HP:return new n(e);case GP:return jP(e);case UP:return new n;case WP:return FP(e)}}function rO(e){return typeof e.constructor=="function"&&!cs(e)?R1(zu(e)):{}}var aO="[object Map]";function sO(e){return ji(e)&&Io(e)==aO}var Td=zn&&zn.isMap,lO=Td?Or(Td):sO,cO=lO,uO="[object Set]";function dO(e){return ji(e)&&Io(e)==uO}var Ad=zn&&zn.isSet,mO=Ad?Or(Ad):dO,hO=mO,fO=1,pO=2,gO=4,Id="[object Arguments]",vO="[object Array]",yO="[object Boolean]",CO="[object Date]",bO="[object Error]",Dd="[object Function]",wO="[object GeneratorFunction]",_O="[object Map]",PO="[object Number]",Rd="[object Object]",OO="[object RegExp]",EO="[object Set]",MO="[object String]",SO="[object Symbol]",xO="[object WeakMap]",TO="[object ArrayBuffer]",AO="[object DataView]",IO="[object Float32Array]",DO="[object Float64Array]",RO="[object Int8Array]",LO="[object Int16Array]",BO="[object Int32Array]",jO="[object Uint8Array]",FO="[object Uint8ClampedArray]",VO="[object Uint16Array]",NO="[object Uint32Array]",qe={};qe[Id]=qe[vO]=qe[TO]=qe[AO]=qe[yO]=qe[CO]=qe[IO]=qe[DO]=qe[RO]=qe[LO]=qe[BO]=qe[_O]=qe[PO]=qe[Rd]=qe[OO]=qe[EO]=qe[MO]=qe[SO]=qe[jO]=qe[FO]=qe[VO]=qe[NO]=!0,qe[bO]=qe[Dd]=qe[xO]=!1;function xr(e,t,i,n,o,r){var s,l=t&fO,c=t&pO,u=t&gO;if(i&&(s=o?i(e,n,o,r):i(e)),s!==void 0)return s;if(!Fi(e))return e;var d=vi(e);if(d){if(s=DP(e),!l)return B1(e,s)}else{var m=Io(e),h=m==Dd||m==wO;if(Pr(e))return dP(e,l);if(m==Rd||m==Id||h&&!o){if(s=c||h?{}:rO(e),!l)return c?CP(e,cP(s,e)):gP(e,lP(s,e))}else{if(!qe[m])return o?e:{};s=oO(e,m,l)}}r||(r=new Si);var f=r.get(e);if(f)return f;r.set(e,s),hO(e)?e.forEach(function(g){s.add(xr(g,t,i,g,e,r))}):cO(e)&&e.forEach(function(g,v){s.set(v,xr(g,t,i,v,e,r))});var p=u?c?bP:ws:c?ms:Mo,y=d?void 0:p(e);return W1(y||e,function(g,v){y&&(v=g,g=e[v]),Mu(s,v,xr(g,t,i,v,e,r))}),s}var kO=1,zO=4;function tn(e){return xr(e,kO|zO)}var $O="__lodash_hash_undefined__";function GO(e){return this.__data__.set(e,$O),this}function UO(e){return this.__data__.has(e)}function Do(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new Ni;++t<i;)this.add(e[t])}Do.prototype.add=Do.prototype.push=GO,Do.prototype.has=UO;function HO(e,t){for(var i=-1,n=e==null?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}function Ld(e,t){return e.has(t)}var WO=1,qO=2;function Bd(e,t,i,n,o,r){var s=i&WO,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=r.get(e),d=r.get(t);if(u&&d)return u==t&&d==e;var m=-1,h=!0,f=i&qO?new Do:void 0;for(r.set(e,t),r.set(t,e);++m<l;){var p=e[m],y=t[m];if(n)var g=s?n(y,p,m,t,e,r):n(p,y,m,e,t,r);if(g!==void 0){if(g)continue;h=!1;break}if(f){if(!HO(t,function(v,w){if(!Ld(f,w)&&(p===v||o(p,v,i,n,r)))return f.push(w)})){h=!1;break}}else if(!(p===y||o(p,y,i,n,r))){h=!1;break}}return r.delete(e),r.delete(t),h}function ZO(e){var t=-1,i=Array(e.size);return e.forEach(function(n,o){i[++t]=[o,n]}),i}function XO(e){var t=-1,i=Array(e.size);return e.forEach(function(n){i[++t]=n}),i}var YO=1,QO=2,KO="[object Boolean]",JO="[object Date]",eE="[object Error]",tE="[object Map]",iE="[object Number]",nE="[object RegExp]",oE="[object Set]",rE="[object String]",aE="[object Symbol]",sE="[object ArrayBuffer]",lE="[object DataView]",jd=li?li.prototype:void 0,Ms=jd?jd.valueOf:void 0;function cE(e,t,i,n,o,r,s){switch(i){case lE:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case sE:return!(e.byteLength!=t.byteLength||!r(new Sr(e),new Sr(t)));case KO:case JO:case iE:return ss(+e,+t);case eE:return e.name==t.name&&e.message==t.message;case nE:case rE:return e==t+"";case tE:var l=ZO;case oE:var c=n&YO;if(l||(l=XO),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=QO,s.set(e,t);var d=Bd(l(e),l(t),n,o,r,s);return s.delete(e),d;case aE:if(Ms)return Ms.call(e)==Ms.call(t)}return!1}var uE=1,dE=Object.prototype,mE=dE.hasOwnProperty;function hE(e,t,i,n,o,r){var s=i&uE,l=ws(e),c=l.length,u=ws(t),d=u.length;if(c!=d&&!s)return!1;for(var m=c;m--;){var h=l[m];if(!(s?h in t:mE.call(t,h)))return!1}var f=r.get(e),p=r.get(t);if(f&&p)return f==t&&p==e;var y=!0;r.set(e,t),r.set(t,e);for(var g=s;++m<c;){h=l[m];var v=e[h],w=t[h];if(n)var C=s?n(w,v,h,t,e,r):n(v,w,h,e,t,r);if(!(C===void 0?v===w||o(v,w,i,n,r):C)){y=!1;break}g||(g=h=="constructor")}if(y&&!g){var P=e.constructor,_=t.constructor;P!=_&&"constructor"in e&&"constructor"in t&&!(typeof P=="function"&&P instanceof P&&typeof _=="function"&&_ instanceof _)&&(y=!1)}return r.delete(e),r.delete(t),y}var fE=1,Fd="[object Arguments]",Vd="[object Array]",Tr="[object Object]",pE=Object.prototype,Nd=pE.hasOwnProperty;function gE(e,t,i,n,o,r){var s=vi(e),l=vi(t),c=s?Vd:Io(e),u=l?Vd:Io(t);c=c==Fd?Tr:c,u=u==Fd?Tr:u;var d=c==Tr,m=u==Tr,h=c==u;if(h&&Pr(e)){if(!Pr(t))return!1;s=!0,d=!1}if(h&&!d)return r||(r=new Si),s||Bu(e)?Bd(e,t,i,n,o,r):cE(e,t,c,i,n,o,r);if(!(i&fE)){var f=d&&Nd.call(e,"__wrapped__"),p=m&&Nd.call(t,"__wrapped__");if(f||p){var y=f?e.value():e,g=p?t.value():t;return r||(r=new Si),o(y,g,i,n,r)}}return h?(r||(r=new Si),hE(e,t,i,n,o,r)):!1}function Ar(e,t,i,n,o){return e===t?!0:e==null||t==null||!ji(e)&&!ji(t)?e!==e&&t!==t:gE(e,t,i,n,Ar,o)}var vE=1,yE=2;function CE(e,t,i,n){var o=i.length,r=o,s=!n;if(e==null)return!r;for(e=Object(e);o--;){var l=i[o];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<r;){l=i[o];var c=l[0],u=e[c],d=l[1];if(s&&l[2]){if(u===void 0&&!(c in e))return!1}else{var m=new Si;if(n)var h=n(u,d,c,e,t,m);if(!(h===void 0?Ar(d,u,vE|yE,n,m):h))return!1}}return!0}function kd(e){return e===e&&!Fi(e)}function bE(e){for(var t=Mo(e),i=t.length;i--;){var n=t[i],o=e[n];t[i]=[n,o,kd(o)]}return t}function zd(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}function wE(e){var t=bE(e);return t.length==1&&t[0][2]?zd(t[0][0],t[0][1]):function(i){return i===e||CE(i,e,t)}}function _E(e,t){return e!=null&&t in Object(e)}function PE(e,t,i){t=ps(t,e);for(var n=-1,o=t.length,r=!1;++n<o;){var s=Ao(t[n]);if(!(r=e!=null&&i(e,s)))break;e=e[s]}return r||++n!=o?r:(o=e==null?0:e.length,!!o&&ls(o)&&as(s,o)&&(vi(e)||us(e)))}function OE(e,t){return e!=null&&PE(e,t,_E)}var EE=1,ME=2;function SE(e,t){return hs(e)&&kd(t)?zd(Ao(e),t):function(i){var n=Vu(i,e);return n===void 0&&n===t?OE(i,e):Ar(t,n,EE|ME)}}function xE(e){return function(t){return t==null?void 0:t[e]}}function TE(e){return function(t){return gs(t,e)}}function AE(e){return hs(e)?xE(Ao(e)):TE(e)}function Ir(e){return typeof e=="function"?e:e==null?ns:typeof e=="object"?vi(e)?SE(e[0],e[1]):wE(e):AE(e)}var IE=function(){return gi.Date.now()},Ss=IE,DE="Expected a function",RE=Math.max,LE=Math.min;function BE(e,t,i){var n,o,r,s,l,c,u=0,d=!1,m=!1,h=!0;if(typeof e!="function")throw new TypeError(DE);t=is(t)||0,Fi(i)&&(d=!!i.leading,m="maxWait"in i,r=m?RE(is(i.maxWait)||0,t):r,h="trailing"in i?!!i.trailing:h);function f(E){var S=n,x=o;return n=o=void 0,u=E,s=e.apply(x,S),s}function p(E){return u=E,l=setTimeout(v,t),d?f(E):s}function y(E){var S=E-c,x=E-u,T=t-S;return m?LE(T,r-x):T}function g(E){var S=E-c,x=E-u;return c===void 0||S>=t||S<0||m&&x>=r}function v(){var E=Ss();if(g(E))return w(E);l=setTimeout(v,y(E))}function w(E){return l=void 0,h&&n?f(E):(n=o=void 0,s)}function C(){l!==void 0&&clearTimeout(l),u=0,n=c=o=l=void 0}function P(){return l===void 0?s:w(Ss())}function _(){var E=Ss(),S=g(E);if(n=arguments,o=this,c=E,S){if(l===void 0)return p(c);if(m)return clearTimeout(l),l=setTimeout(v,t),f(c)}return l===void 0&&(l=setTimeout(v,t)),s}return _.cancel=C,_.flush=P,_}function xs(e){return ji(e)&&_r(e)}function jE(e,t,i){for(var n=-1,o=e==null?0:e.length;++n<o;)if(i(t,e[n]))return!0;return!1}var FE=200;function VE(e,t,i,n){var o=-1,r=Y1,s=!0,l=e.length,c=[],u=t.length;if(!l)return c;i&&(t=pu(t,Or(i))),n?(r=jE,s=!1):t.length>=FE&&(r=Ld,s=!1,t=new Do(t));e:for(;++o<l;){var d=e[o],m=i==null?d:i(d);if(d=n||d!==0?d:0,s&&m===m){for(var h=u;h--;)if(t[h]===m)continue e;c.push(d)}else r(t,m,n)||c.push(d)}return c}function $d(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var NE=iw(function(e,t){var i=$d(t);return xs(i)&&(i=void 0),xs(e)?VE(e,ku(t,1,xs,!0),Ir(i)):[]}),Pt=NE;function kE(e){return function(t,i,n){var o=Object(t);if(!_r(t)){var r=Ir(i);t=Mo(t),i=function(l){return r(o[l],l,o)}}var s=e(t,i,n);return s>-1?o[r?t[s]:s]:void 0}}var zE=Math.max;function Gd(e,t,i){var n=e==null?0:e.length;if(!n)return-1;var o=i==null?0:h1(i);return o<0&&(o=zE(n+o,0)),Ou(e,Ir(t),o)}var $E=kE(Gd),Ts=$E;function GE(e,t){return t.length<2?e:gs(e,$u(t,0,-1))}function UE(e,t){return Ar(e,t)}function HE(e){return e===null}function ii(e){return e===void 0}function WE(e,t){return t=ps(t,e),e=GE(e,t),e==null||delete e[Ao($d(t))]}var qE=Array.prototype,ZE=qE.splice;function XE(e,t){for(var i=e?t.length:0,n=i-1;i--;){var o=t[i];if(i==n||o!==r){var r=o;as(o)?ZE.call(e,o,1):WE(e,o)}}return e}function Ud(e,t){var i=[];if(!(e&&e.length))return i;var n=-1,o=[],r=e.length;for(t=Ir(t);++n<r;){var s=e[n];t(s,n,e)&&(i.push(s),o.push(n))}return XE(e,o),i}function YE(e){if(typeof e!="string"&&(e=e+""),e.length===0)return".";let t=e.charCodeAt(0);const i=t===47;let n=-1,o=!0;for(let r=e.length-1;r>=1;--r)if(t=e.charCodeAt(r),t===47){if(!o){n=r;break}}else o=!1;return n===-1?i?"/":".":i&&n===1?"/":e.slice(0,n)}function As(e){const t=Object.getPrototypeOf(e),i={};return Object.setPrototypeOf(i,t),Object.keys(e).forEach(n=>{const o=Gn(e[n]);if(e[n]&&He(e[n])||e[n]instanceof Element)i[n]=e[n];else if(e[n]&&typeof e[n]=="object"&&!Cesium[o]){const r=As(e[n]);Object.keys(r).length&&(i[n]=r)}else e[n]!==""&&e[n]!==void 0&&e[n]!==null&&(i[n]=e[n])}),i}function Dr(e){return ii(e)||HE(e)?!0:e instanceof Element?!1:Object.keys(e).length===0}const ne=zb;function Gn(e){if(e&&e.constructor){const t=e.constructor.toString();let i=t.substr(0,t.indexOf("("));return i=i.replace("function",""),i.replace(/(^\s*)|(\s*$)/gi,"")}return typeof e}function Un(e,t){return e!=null?e:t}function ci(e,t=[]){const i={};return Object.keys(e).forEach(n=>{if(t.indexOf(n)===-1){const o=e[n];i[n]=pt(o)?void 0:Ye(o)?pt(o.default)?o.default():o.default:o}}),i}const nn=(e,t,i=[])=>{for(const n in t)!e[n]&&i.indexOf(n)===-1&&(e[n]=t[n])},QE=(e,t)=>{var i;const n=[...new Set([...Object.keys(e),...Object.keys(t)])],o={};for(const r of n)o[r]=(i=t[r])!=null?i:e[r];return o};function KE(e){if(Array.isArray(e))return!0;if(typeof e!="object"||!e)return!1;const t=e.length;return typeof t=="number"&&t>=0}const Hd=a.ref({});function Is(e){const t=a.inject(du,Hd);return e?en(t.value)&&Re(t.value,e)?a.computed(()=>t.value[e]):a.ref(void 0):t}const Wd=(e,t)=>{var i;const n=!!a.getCurrentInstance(),o=n?Is():void 0,r=(i=t==null?void 0:t.provide)!=null?i:n?a.provide:void 0;if(!r){console.warn("provideGlobalConfig","provideGlobalConfig() can only be used inside setup().");return}const s=a.computed(()=>{const l=a.unref(e);return o?QE(o.value,l):l});return r(du,s),Hd.value=s.value,s};function Rr(e){var t,i,n,o;const r=(g="")=>function(...v){g&&(si(v[0])?v[0]=g.trim()+" "+v[0]:v=[g.trim(),...v]),console.log(...v)},s=(g="")=>function(...v){g&&(si(v[0])?v[0]=g.trim()+" "+v[0]:v=[g.trim(),...v]),console.warn(...v)},l=(g="")=>function(...v){g&&(si(v[0])?v[0]=g.trim()+" "+v[0]:v=[g.trim(),...v]),console.error(...v)},c=(g="")=>function(...v){g&&(si(v[0])?v[0]=g.trim()+" "+v[0]:v=[g.trim(),...v])},u=(g="default")=>{let v="";switch(g){case"default":v="#35495E";break;case"primary":v="#3488ff";break;case"success":v="#43B883";break;case"warning":v="#e6a23c";break;case"danger":v="#f56c6c";break}return v},d=(g,v,w="primary")=>{console.log(`%c ${g} %c ${v} %c`,"background:#35495E; padding: 1px; border-radius: 3px 0 0 3px; color: #fff;",`background:${u(w)}; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff;`,"background:transparent")},m=g=>{console.log(`%c${g.map(v=>v.text||"").join("%c")}`,...g.map(v=>`color: ${u(v.type)};`))},h=g=>{m([{text:g,type:"success"}])},f=g=>{m([{text:g,type:"warning"}])},p=g=>{m([{text:g,type:"danger"}])},y=g=>{m([{text:g,type:"primary"}])};return{log:r(`[VueCesium] ${(t=e==null?void 0:e.proxy)==null?void 0:t.$options.name}`),warn:s(`[VueCesium] WARN ${(i=e==null?void 0:e.proxy)==null?void 0:i.$options.name}`),error:l(`[VueCesium] ERR ${(n=e==null?void 0:e.proxy)==null?void 0:n.$options.name}`),debug:c(`[VueCesium] Debug ${(o=e==null?void 0:e.proxy)==null?void 0:o.$options.name}`),capsule:d,success:h,warning:f,danger:p,primary:y}}Rr(void 0);const qd=Symbol("INSTALLED_KEY");var Zd=(e=[])=>({version:Bb,install:(i,n)=>{if(i[qd])return;const o={cesiumPath:"https://cdn.jsdelivr.net/npm/cesium@latest/Build/Cesium/Cesium.js",accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"};i[qd]=!0,e.forEach(s=>{i.use(s,n)});const r=Object.assign(o,n);Wd(r,i)}});function Xd(e){return{all:e=e||new Map,on:function(t,i){var n=e.get(t);n?n.push(i):e.set(t,[i])},off:function(t,i){var n=e.get(t);n&&(i?n.splice(n.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var n=e.get(t);n&&n.slice().map(function(o){o(i)}),(n=e.get("*"))&&n.slice().map(function(o){o(t,i)})}}}/*!
 * merge-descriptors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */const JE=Object.prototype.hasOwnProperty;function e5(e,t,i){if(!e)throw new TypeError("argument dest is required");if(!t)throw new TypeError("argument src is required");return i===void 0&&(i=!0),Object.getOwnPropertyNames(t).forEach(function(o){if(!i&&JE.call(e,o))return;const r=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(e,o,r)}),e}function _n(...e){let t;return typeof e[e.length-1]!="object"&&(t=e.pop()),e.slice(1).reduce((i,n,o)=>e5(i,n,t),e[0])}function t5(e){return e.appContext.config.globalProperties.$router!==void 0}function Ds(e,t){return e.vnode.props!==null&&e.vnode.props[t]!==void 0}function Ee(e,t){const i=e.vnode.props;if(i===null)return;const n=Object.keys(i),o=Gd(n,s=>s.includes(`on${yr(t)}`)||s.includes(`on${yr(hd(t))}`));return i[n[o]]}function ie(e){return e.value}function Ct(e){var t;const i=e.parent;return!i.cesiumClass&&((t=i.proxy)==null?void 0:t.$options.name)!=="VcViewer"?Ct(i):i}function lt(e,t=!1){const{Cartesian2:i,CallbackProperty:n}=Cesium;if(e instanceof Cesium.Cartesian2||e instanceof n)return e;if(Ye(e)&&Re(e,"x")&&Re(e,"y")){const o=e;return new i(o.x,o.y)}if(He(e))return new i(e[0],e[1]);if(pt(e))return new n(e,t)}function Ze(e,t,i=!1){const{CallbackProperty:n,Cartesian3:o,Ellipsoid:r,SampledPositionProperty:s,CompositePositionProperty:l,ConstantPositionProperty:c,TimeIntervalCollectionPositionProperty:u}=Cesium;if(e instanceof o||e instanceof n||e instanceof s||e instanceof l||e instanceof c||e instanceof u)return e;if(t=t||r.WGS84,Ye(e)){if(Re(e,"x")&&Re(e,"y")&&Re(e,"z")){const d=e;return new o(d.x,d.y,d.z)}else if(Re(e,"lng")&&Re(e,"lat")){const d=e;return o.fromDegrees(d.lng,d.lat,d.height||0,t)}}if(He(e))return o.fromDegrees(e[0],e[1],e[2]||0,t);if(pt(e))return new n(e,i)}function ki(e,t,i=!1){const{CallbackProperty:n,Cartesian3:o,Ellipsoid:r}=Cesium;if(e instanceof n)return e;if(pt(e))return new n(e,i);if(t=t||r.WGS84,He(e)){if(He(e[0])||Ye(e[0])){const s=[];return e.forEach(l=>{s.push(Ze(l,t))}),s}return o.fromDegreesArrayHeights(e,t)}}function Yd(e,t){const{CallbackProperty:i}=Cesium;if(e instanceof i)return e;if(pt(e))return new i(e,t);if(He(e)){const n=[];return e.forEach(o=>{n.push(lt(o))}),n}}function Rs(e,t=!1){const{CallbackProperty:i,Quaternion:n,VelocityOrientationProperty:o}=Cesium;if(e instanceof n||e instanceof i||e instanceof o)return e;if(Ye(e)&&Re(e,"x")&&Re(e,"y")){const r=e;return new n(r.x,r.y,r.z,r.w)}if(He(e))return new n(e[0],e[1],e[2],e[3]);if(pt(e))return new i(e,t)}function Qd(e,t){e.forEach(i=>{i.positions=ki(i.positions,t),i.holes&&Qd(i.holes,t)})}function Ls(e,t,i=!1){var n;const{PolygonHierarchy:o,CallbackProperty:r}=Cesium;if(e instanceof o||e instanceof r)return e;if(pt(e))return new r(e,i);if(He(e)&&e.length>=3){const s=ki(e,t);return new o(s)}if(Ye(e)&&Re(e,"positions")){const s=e;return s.positions=ki(s.positions,t),((n=s.holes)==null?void 0:n.length)&&Qd(s.holes,t),s}}function Bs(e,t=!1){const{NearFarScalar:i,CallbackProperty:n}=Cesium;if(e instanceof i||e instanceof n)return e;if(Ye(e)&&Re(e,"near")&&Re(e,"far")){const o=e;return new i(o.near,o.nearValue||0,o.far,o.farValue||1)}if(He(e))return new i(e[0],e[1],e[2],e[3]);if(pt(e))return new n(e,t)}function i5(e,t=!1){const{DistanceDisplayCondition:i,CallbackProperty:n}=Cesium;if(e instanceof i||e instanceof n)return e;if(Ye(e)&&Re(e,"near")&&Re(e,"far")){const o=e;return new i(o.near,o.far)}if(He(e))return new i(e[0],e[1]);if(pt(e))return new n(e,t)}function Ae(e,t=!1){const{Color:i,CallbackProperty:n}=Cesium;if(e instanceof i||e instanceof n)return e;if(si(e))return i.fromCssColorString(e);if(Ye(e)){if(Re(e,"red")){const o=e;return i.fromBytes(o.red,o.green||255,o.blue||255,o.alpha||255)}else if(Re(e,"x")){const o=e;return new i(o.x,o.y||1,o.z||1,o.w||1)}}if(He(e))return i.fromBytes(e[0],e[1],e[2],e[3]||255);if(pt(e))return new n(e,t)}function n5(e){if(He(e)){const t=[];return e.forEach(i=>{t.push(Ae(i))}),t}else return e}function o5(e,t=!1){const{CallbackProperty:i,Color:n,CheckerboardMaterialProperty:o,ColorMaterialProperty:r,GridMaterialProperty:s,ImageMaterialProperty:l,PolylineArrowMaterialProperty:c,PolylineDashMaterialProperty:u,PolylineGlowMaterialProperty:d,PolylineOutlineMaterialProperty:m,StripeMaterialProperty:h,StripeOrientation:f}=Cesium;if(e instanceof i||e instanceof n||e instanceof o||e instanceof r||e instanceof l||e instanceof c||e instanceof u||e instanceof d||e instanceof m||e instanceof h||Gn(e).indexOf("MaterialProperty")!==-1)return e;if(si(e)&&/(.*)\.(jpg|bmp|gif|ico|pcx|jpeg|tif|png|raw|tga)$/.test(e)||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement)return new l({image:e,repeat:lt({x:1,y:1}),color:n.WHITE,transparent:!0});if(He(e)||si(e))return new r(Ae(e));if(Ye(e)&&Re(e,"fabric")){const p=e;switch(p.fabric.type){case"Image":return new l({image:p.fabric.uniforms.image,repeat:lt(p.fabric.uniforms.repeat||{x:1,y:1}),color:Ae(p.fabric.uniforms.color)||n.WHITE,transparent:p.fabric.uniforms.transparent||!1});case"Color":return new r(Ae(p.fabric.uniforms.color||n.WHITE));case"PolylineArrow":return new c(Ae(p.fabric.uniforms.color||n.WHITE));case"PolylineDash":return new u({color:Ae(p.fabric.uniforms.color||"white")||n.WHITE,gapColor:Ae(p.fabric.uniforms.gapColor)||n.TRANSPARENT,dashLength:p.fabric.uniforms.taperPower||16,dashPattern:p.fabric.uniforms.taperPower||255});case"PolylineGlow":return new d({color:Ae(p.fabric.uniforms.color)||n.WHITE,glowPower:p.fabric.uniforms.glowPower||.25,taperPower:p.fabric.uniforms.taperPower||1});case"PolylineOutline":return new m({color:Ae(p.fabric.uniforms.color)||n.WHITE,outlineColor:Ae(p.fabric.uniforms.outlineColor)||n.BLACK,outlineWidth:p.fabric.uniforms.outlineWidth||1});case"Checkerboard":return new o({evenColor:Ae(p.fabric.uniforms.evenColor)||n.WHITE,oddColor:Ae(p.fabric.uniforms.oddColor)||n.BLACK,repeat:lt(p.fabric.uniforms.repeat||{x:2,y:2})});case"Grid":return new s({color:Ae(p.fabric.uniforms.color)||n.WHITE,cellAlpha:p.fabric.uniforms.cellAlpha||.1,lineCount:lt(p.fabric.uniforms.lineCount||{x:8,y:8}),lineThickness:lt(p.fabric.uniforms.lineThickness||{x:1,y:1}),lineOffset:lt(p.fabric.uniforms.lineOffset||{x:0,y:0})});case"Stripe":return new h({orientation:p.fabric.uniforms.orientation||f.HORIZONTAL,evenColor:Ae(p.fabric.uniforms.evenColor||"white"),oddColor:Ae(p.fabric.uniforms.oddColor||"black"),offset:p.fabric.uniforms.offset||0,repeat:p.fabric.uniforms.repeat||1})}}return pt(e)?new i(e,t):e}function js(e){var t;const i=this,n=(t=i==null?void 0:i.proxy)==null?void 0:t.$options.name;if(n&&(n.indexOf("Graphics")!==-1||n.indexOf("Datasource")!==-1||n==="VcOverlayDynamic"||n==="VcEntity"))return o5(e);const{Material:o,combine:r}=Cesium;if(e instanceof o)return e;if(Ye(e)&&Re(e,"fabric")){const s=l=>{for(const c in l)if(!He(l[c])&&Ye(l[c]))s(l[c]);else if(c.toLocaleLowerCase().indexOf("color")!==-1&&!Dr(l[c])){const u=Ae(l[c]);l[c]=r(u,u,!0)}};return s(e),new o(e)}if(He(e)||si(e)){const s=o.fromType("Color");return s.uniforms.color=Ae(e),s}}function Lr(e){var t;const{Appearance:i,DebugAppearance:n,MaterialAppearance:o,PolylineColorAppearance:r,EllipsoidSurfaceAppearance:s,PerInstanceColorAppearance:l,PolylineMaterialAppearance:c}=Cesium;if(e instanceof i||e instanceof n||e instanceof o||e instanceof r||e instanceof s||e instanceof l||e instanceof c||Gn(e).indexOf("Appearance")!==-1)return e;if(Ye(e)&&Re(e,"type")){const u={...e.options};return((t=e.options)==null?void 0:t.material)&&(u.material=js.call(this,e.options.material)),new Cesium[e.type]({...u})}}function Pn(e,t=!1){const{Rectangle:i,RectangleGraphics:n,CallbackProperty:o}=Cesium;if(e instanceof n||e instanceof i)return e;if(He(e))return i.fromDegrees(e[0],e[1],e[2],e[3]);if(Ye(e)){if(Re(e,"west")){const r=e;return i.fromDegrees(r.west,r.south,r.east,r.north)}else if(Re(e,"x")){const r=e;return new i(r.x,r.y,r.z,r.w)}}if(pt(e))return new o(e,t)}function Kd(e,t=!1){const{BoundingRectangle:i,CallbackProperty:n}=Cesium;if(e instanceof i||e instanceof n)return e;if(Ye(e)&&Re(e,"x")){const o=e;return new i(o.x,o.y,o.width,o.height)}if(He(e))return new i(e[0],e[1],e[2],e[3]);if(pt(e))return new n(e,t)}function r5(e,t=!1){const{Cartesian3:i,Plane:n,PlaneGraphics:o,CallbackProperty:r}=Cesium;if(e instanceof o||e instanceof n||e instanceof r)return e;if(Ye(e)&&Re(e,"normal")){const s=e;return i.normalize(Ze(s.normal),s.normal),new n(s.normal,s.distance)}if(He(e)){const s=Ze(e[0]),l=i.normalize(s,new i);return new n(l,e[1])}if(pt(e))return new r(e,t)}function a5(e,t=!1){const{TranslationRotationScale:i,CallbackProperty:n}=Cesium;if(e instanceof n||e instanceof i)return e;if(Ye(e)&&Re(e,"translation")){const o=e;return new i(Ze(o.translation),Rs(o.rotation),Ze(o.scale))}return He(e)?new i(Ze(e[0]),Rs(e[1]),Ze(e[2])):pt(e)?new n(e,t):e}function s5(e){var t;const n=(t=this.proxy)==null?void 0:t.$options.name,o={};switch(n){case"VcDatasourceGeojson":return Object.assign(o,e),o&&o.markerColor&&(o.markerColor=Ae(o.markerColor)),o&&o.stroke&&(o.stroke=Ae(o.stroke)),o&&o.fill&&(o.fill=Ae(o.fill)),o}return e}function l5(e){const t=e.scene,i=new Promise((n,o)=>{const r=e.scene.postRender.addEventListener(()=>{r();try{const l=e.scene.canvas;n(l.toDataURL("image/png"))}catch(s){o(s)}})});return t.render(e.clock.currentTime),i}function Jd(e,t){const{Math:i,Rectangle:n}=Cesium;let o,r={};if(Re(e,"position")){const s=e.position;o=Ze(s,t),Re(s,"lng")&&Re(s,"lat")||He(s)?r={heading:i.toRadians(e.heading||360),pitch:i.toRadians(e.pitch||-90),roll:i.toRadians(e.roll||0)}:r={heading:e.heading||2*Math.PI,pitch:e.pitch||-Math.PI/2,roll:e.roll||0}}else if(Re(e,"rectangle")){const s=e.retangle;o=Pn(s),n.validate(o),Re(s,"west")&&Re(s,"south")&&Re(s,"east")&&Re(s,"north")||He(s)?r={heading:i.toRadians(e.heading||360),pitch:i.toRadians(e.pitch||-90),roll:i.toRadians(e.roll||0)}:r={heading:e.heading||2*Math.PI,pitch:e.pitch||-Math.PI/2,roll:e.roll||0}}return{destination:o,orientation:r}}function Fs(e,t){const{destination:i,orientation:n}=Jd(t,e.scene.globe.ellipsoid);e.camera.setView({destination:i,orientation:n})}function c5(e,t,i){const{destination:n,orientation:o}=Jd(t,e.scene.globe.ellipsoid);e.camera.flyTo({destination:i.destination||n,orientation:i.orientation||o,duration:i.duration,complete:i.complete,cancel:i.cancel})}function Vs(e,t,i){const{EllipsoidGeodesic:n,Ellipsoid:o}=Cesium;i=i||o.WGS84;const r=i.cartesianToCartographic(e),s=i.cartesianToCartographic(t);return new n(r,s).surfaceDistance}function u5(e,t,i,n){const{Camera:o,Cartesian3:r,Math:s}=Cesium,l=new o(i);if(r.equals(e,t))return;let c=r.subtract(t,e,{});c=r.normalize(c,c);let u=r.subtract(e,new r,{});u=r.normalize(u,u),l.setView({destination:e,orientation:{direction:c,up:u}}),n=n||[0,0,0];let d=l.heading;return d-=s.PI_OVER_TWO,d<0&&(d+=s.TWO_PI),n.splice(0,n.length,d,l.pitch,l.roll),n}function d5(e,t,i,n){const{HeadingPitchRoll:o,Transforms:r,Matrix4:s,Cartesian3:l,Cartesian4:c,Quaternion:u,Cartographic:d,Ellipsoid:m}=Cesium;n=n||m.WGS84;const h=new o(t,0,0),f=new l(1,1,1),p=r.headingPitchRollToFixedFrame(e,h),y=s.getColumn(p,1,new c),g=new l(y.x,y.y,y.z),v=u.fromAxisAngle(g,i*n.oneOverRadii.x),w=s.fromTranslationQuaternionRotationScale(l.ZERO,v,f),C=s.multiplyByPoint(w,e,new l),P=d.fromCartesian(e,n),_=d.fromCartesian(C,n);return _.height=P.height,d.toCartesian(_,n)}function em(e){let t=0;const{CoplanarPolygonGeometry:i,VertexFormat:n,defined:o,Cartesian3:r}=Cesium,s=i.createGeometry(i.fromPositions({positions:e,vertexFormat:n.POSITION_ONLY}));if(!ii(s)&&o(s)){const l=s.indices,c=s.attributes.position.values;for(let u=0;u<l.length;u+=3){const d=l[u],m=l[u+1],h=l[u+2];t+=m5(r.unpack(c,3*d,{}),r.unpack(c,3*m,{}),r.unpack(c,3*h,{}))}}return t}const m5=(e,t,i)=>{const{Cartesian3:n}=Cesium,o=n.subtract(e,t,{}),r=n.subtract(i,t,{}),s=n.cross(o,r,o);return .5*n.magnitude(s)};function on(e){const{JulianDate:t}=Cesium;return e instanceof t?e:si(e)?Cesium.JulianDate.fromDate(new Date(e)):e instanceof Date?Cesium.JulianDate.fromDate(e):Cesium.JulianDate.now()}function tm(e){const{HeadingPitchRange:t,Math:i}=Cesium;return e instanceof Cesium.HeadingPitchRange?e:Array.isArray(e)?new t(i.toRadians(e[0])||0,i.toRadians(e[1])||0,e[2]||0):Ye(e)?new t(e.heading||0,e.pitch||0,e.range||0):new t}function im(e,t){const{Cartesian3:i,Matrix4:n,Transforms:o,Math:r}=Cesium,s=new i,l=o.eastNorthUpToFixedFrame(e);return n.inverse(l,l),n.multiplyByPoint(l,t,s),i.normalize(s,s),r.toDegrees(Math.atan2(s.x,s.y))}function nm(e,t){const{Cartesian3:i,Matrix4:n,Transforms:o,Math:r}=Cesium,s=new i,l=o.eastNorthUpToFixedFrame(e);return n.inverse(l,l),n.multiplyByPoint(l,t,s),i.normalize(s,s),r.toDegrees(Math.asin(s.z))}function om(e,t,i,n=[]){const{Cartesian3:o,Ray:r,defined:s}=Cesium,l=o.normalize(o.subtract(t,e,new o),new o),c=new r(e,l),u=i.scene.pickFromRay(c,n);if(s(u)&&s(u.position))return u.position}function Ns(e){const i=7096758e-11,n=91610.74,o=-40467.74;return Math.round(o+(40487.57-o)/(1+Math.pow(e/n,i)))}const On={position:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ze,deep:!0}}},rm={viewFrom:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ze,deep:!0}}},ks={orientation:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Rs}}},zs={alignedAxis:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:Ze}}},zi={color:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Ae}}},h5={depthFailColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Ae}}},En={disableDepthTestDistance:[Number,Object,Function]},at={distanceDisplayCondition:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:i5}}},Ro={eyeOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:Ze}}},It={height:[Number,Object,Function]},zt={heightReference:{type:[Number,Object,Function]}},Lo={horizontalOrigin:{type:[Number,Object,Function],default:0}},Br={image:[String,Object,HTMLCanvasElement,Function]},am={imageSubRegion:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Kd}}},Hn={pixelOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0}),validator:e=>He(e)?e.length===2:en(e)?Re(e,"x")&&Re(e,"y"):!!pt(e),watcherOptions:{cesiumObjectBuilder:lt}}},Bo={pixelOffsetScaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Bs}}},$i={rotation:{type:[Number,Object,Function],default:0}},Mn={scale:{type:[Number,Object,Function],default:1}},Sn={scaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Bs}}},Se={show:{type:[Boolean,Object,Function],default:!0}},jr={sizeInMeters:{type:[Boolean,Object,Function],default:!1}},xn={translucencyByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Bs}}},jo={verticalOrigin:{type:[Number,Object,Function],default:0}},yi={width:[Number,Object,Function]},Fr={dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ze}}},Ci={fill:{type:[Boolean,Object,Function],default:!0}},Xt={material:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:js}}},bi={outline:{type:[Boolean,Object,Function],default:!1}},$t={outlineColor:{type:[Object,String,Array,Function],default:"black",watcherOptions:{cesiumObjectBuilder:Ae}}},Gt={outlineWidth:{type:[Number,Object,Function],default:1}},Ft={shadows:[Number,Object,Function]},Yt={positions:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:ki,exclude:"_callback",deep:!0}}},Ut={extrudedHeight:[Number,Object,Function]},Fo={extrudedHeightReference:[Number,Object,Function]},Tn={cornerType:{type:[Number,Object,Function],default:0}},Ke={granularity:[Number,Object,Function]},wi={classificationType:{type:[Number,Object,Function]}},Wn={zIndex:[Number,Object,Function]},Vr={length:[Number,Object,Function]},Nr={topRadius:[Number,Object,Function]},kr={bottomRadius:[Number,Object,Function]},qn={numberOfVerticalLines:{type:[Number,Object,Function],default:16}},zr={slices:{type:[Number,Object,Function],default:128}},$r={semiMajorAxis:[Number,Object,Function]},Gr={semiMinorAxis:[Number,Object,Function]},xi={stRotation:{type:[Number,Object,Function],default:0}},Ur={radii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ze}}},Hr={innerRadii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ze}}},Wr={minimumClock:{type:[Number,Object,Function],default:0}},qr={maximumClock:{type:[Number,Object,Function],default:2*Math.PI}},Zr={minimumCone:{type:[Number,Object,Function],default:0}},Xr={maximumCone:{type:[Number,Object,Function],default:Math.PI}},Zn={stackPartitions:{type:[Number,Object,Function],default:64}},Xn={slicePartitions:{type:[Number,Object,Function],default:64}},Yr={subdivisions:{type:[Number,Object,Function],default:128}},$s={text:[String,Object,Function]},Gs={font:{type:[String,Object,Function],default:"30px sans-serif"}},Us={labelStyle:{type:[Number,Object,Function],default:0}},Hs={showBackground:{type:[Boolean,Object,Function],default:!1}},Ws={backgroundColor:{type:[Object,String,Array,Function],default:()=>({x:.165,y:.165,z:.165,w:.8}),watcherOptions:{cesiumObjectBuilder:Ae}}},qs={backgroundPadding:{type:[Object,Array,Function],default:()=>({x:7,y:5}),watcherOptions:{cesiumObjectBuilder:lt}}},Zs={fillColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Ae}}},Xs={uri:[String,Object,Function]},Ys={minimumPixelSize:{type:[Number,Object,Function],default:0}},Qs={maximumScale:[Number,Object,Function]},Ks={incrementallyLoadTextures:{type:[Boolean,Object,Function],default:!0}},sm={clampAnimations:{type:[Boolean,Object,Function],default:!0}},Js={clampAnimations:{type:[Boolean,Object,Function],default:!0}},el={silhouetteColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:Ae}}},tl={silhouetteSize:{type:[Number,Object,Function],default:0}},il={colorBlendMode:{type:[Number,Object,Function],default:0}},nl={colorBlendAmount:{type:[Number,Object,Function],default:.5}},Qr={imageBasedLightingFactor:{type:[Object,Array,Function],default:()=>[1,1],watcherOptions:{cesiumObjectBuilder:lt}}},ol={lightColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:Ae}}},lm={nodeTransformations:{type:[Object,Function],watcherOptions:{cesiumObjectBuilder:a5}}},cm={articulations:[Object,Function]},Kr={clippingPlanes:[Object,Function]},um={plane:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:r5}}},rl={pixelSize:{type:[Number,Object,Function],default:1}},dm={hierarchy:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ls,deep:!0,exclude:"_callback"}}},Jr={perPositionHeight:{type:[Boolean,Object,Function],default:!1}},al={closeTop:{type:[Boolean,Object,Function],default:!0}},sl={closeBottom:{type:[Boolean,Object,Function],default:!0}},rn={arcType:{type:[Number,Object,Function],default:1}},mm={depthFailMaterial:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:js}}},Vo={clampToGround:{type:[Boolean,Object,Function],default:!1}},hm={shape:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:Yd}}},fm={coordinates:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Pn}}},ll={maximumScreenSpaceError:{type:[Number,Object,Function],default:16}},ea={minimumHeights:[Array,Object,Function]},ta={maximumHeights:[Array,Object,Function]},pm={cutoutRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Pn}}},gm={colorToAlpha:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Ae}}},_i={url:[String,Object]},cl={token:String},No={tileDiscardPolicy:Object},ul={layers:String},ia={enablePickFeatures:{type:Boolean,default:!0}},Ot={rectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Pn}}},Pi={tilingScheme:Object},Ie={ellipsoid:Object},bt={credit:{type:[String,Object],default:""}},Gi={tileWidth:{type:Number,default:256}},Ui={tileHeight:{type:Number,default:256}},Qt={maximumLevel:Number},ni={minimumLevel:{type:Number,default:0}},dl={fileExtension:{type:String,default:"png"}},ml={accessToken:String},hl={format:{type:String,default:"png"}},na={subdomains:[String,Array]},fl={getFeatureInfoFormats:Array},pl={clock:Object},gl={times:Object},An={projectionTransforms:{type:[Boolean,Object],default:!1}},In={allowPicking:{type:Boolean,default:!0}},Dn={asynchronous:{type:Boolean,default:!0}},oa={debugShowShadowVolume:{type:Boolean,default:!1}},ko={releaseGeometryInstances:{type:Boolean,default:!0}},zo={interleave:{type:Boolean,default:!1}},Yn={appearance:{type:Object,watcherOptions:{cesiumObjectBuilder:Lr,deep:!0}}},vl={depthFailAppearance:{type:Object,watcherOptions:{cesiumObjectBuilder:Lr,deep:!0}}},$o={geometryInstances:[Array,Object]},ra={vertexCacheOptimize:{type:Boolean,default:!1}},Go={compressVertices:{type:Boolean,default:!0}},Ti={modelMatrix:Object},Oi={debugShowBoundingVolume:{tyep:Boolean,default:!1}},aa={scene:Object},sa={blendOption:{type:Number,default:2}},an={id:null},yl={loop:{type:Boolean,default:!1}},Cl={debugWireframe:{type:Boolean,default:!1}},Dt={vertexFormat:Object},Uo={center:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ze}}},Ho={radius:Number},bl={frustum:Object},wl={origin:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ze}}},Rn={polygonHierarchy:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ls,deep:!0}}},vm={startColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Ae}}},ym={endColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Ae}}},Cm={minimumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:lt}}},bm={maximumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:lt}}},wm={imageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:lt}}},_l={shapePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:Yd}}},Pl={polylinePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:ki}}},_m={lightColor:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ze}}},Ol={luminanceAtZenith:{type:Number,default:.2}},El={sphericalHarmonicCoefficients:{type:[Array,Object],watcherOptions:{cesiumObjectBuilder:ki}}},Ml={specularEnvironmentMaps:String},Sl={backFaceCulling:{type:Boolean,default:!0}},xl={colors:{type:Array,watcherOptions:{cesiumObjectBuilder:n5}}},Tl={data:{type:[String,Object],required:!0}},la={sourceUri:{type:[String,Object]}},f5={options:{type:Object,watcherOptions:{cesiumObjectBuilder:s5,deep:!0}}},Pm={glowColor:{type:[String,Array,Object],default:()=>[0,1,0,.05],watcherOptions:{cesiumObjectBuilder:Ae}}},Om={clearColor:{type:[String,Array,Object],watcherOptions:{cesiumObjectBuilder:Ae}}},Em={scissorRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Kd}}},et={enableMouseEvent:{type:Boolean,default:!0}};var Mm=Object.freeze({__proto__:null,viewFrom:rm,projectionTransforms:An,sourceUri:la,colors:xl,enableMouseEvent:et,backFaceCulling:Sl,specularEnvironmentMaps:Ml,sphericalHarmonicCoefficients:El,luminanceAtZenith:Ol,maximumScreenSpaceError:ll,runAnimations:sm,articulations:cm,scissorRectangle:Em,clearColor:Om,glowColor:Pm,options:f5,data:Tl,imageSubRegion:am,coordinates:fm,nodeTransformations:lm,hierarchy:dm,plane:um,colorToAlpha:gm,cutoutRectangle:pm,polylinePositions:Pl,shapePositions:_l,imageSize:wm,maximumImageSize:bm,minimumImageSize:Cm,endColor:ym,startColor:vm,shape:hm,lightColor:ol,lightColor2:_m,imageBasedLightingFactor:Qr,polygonHierarchy:Rn,orientation:ks,origin:wl,frustum:bl,maximumCone:Xr,minimumCone:Zr,maximumClock:qr,minimumClock:Wr,innerRadii:Hr,radius:Ho,center:Uo,debugWireframe:Cl,vertexFormat:Dt,position:On,loop:yl,geometryInstances:$o,depthFailAppearance:vl,appearance:Yn,interleave:zo,releaseGeometryInstances:ko,debugShowShadowVolume:oa,id:an,allowPicking:In,asynchronous:Dn,vertexCacheOptimize:ra,compressVertices:Go,modelMatrix:Ti,debugShowBoundingVolume:Oi,scene:aa,blendOption:sa,maximumHeights:ta,minimumHeights:ea,arcType:rn,clampToGround:Vo,closeBottom:sl,closeTop:al,perPositionHeight:Jr,pixelSize:rl,clippingPlanes:Kr,colorBlendAmount:nl,colorBlendMode:il,silhouetteSize:tl,silhouetteColor:el,clampAnimations:Js,incrementallyLoadTextures:Ks,maximumScale:Qs,minimumPixelSize:Ys,uri:Xs,fillColor:Zs,backgroundPadding:qs,backgroundColor:Ws,showBackground:Hs,labelStyle:Us,font:Gs,text:$s,subdivisions:Yr,slicePartitions:Xn,stackPartitions:Zn,radii:Ur,stRotation:xi,semiMinorAxis:Gr,semiMajorAxis:$r,slices:zr,numberOfVerticalLines:qn,bottomRadius:kr,topRadius:Nr,length:Vr,zIndex:Wn,classificationType:wi,granularity:Ke,cornerType:Tn,extrudedHeightReference:Fo,extrudedHeight:Ut,positions:Yt,image:Br,scale:Mn,pixelOffset:Hn,eyeOffset:Ro,horizontalOrigin:Lo,verticalOrigin:jo,heightReference:zt,depthFailColor:h5,color:zi,rotation:$i,alignedAxis:zs,sizeInMeters:jr,width:yi,height:It,scaleByDistance:Sn,translucencyByDistance:xn,pixelOffsetScaleByDistance:Bo,disableDepthTestDistance:En,dimensions:Fr,fill:Ci,depthFailMaterial:mm,material:Xt,outline:bi,outlineColor:$t,outlineWidth:Gt,shadows:Ft,distanceDisplayCondition:at,show:Se,times:gl,clock:pl,getFeatureInfoFormats:fl,subdomains:na,format:hl,accessToken:ml,fileExtension:dl,minimumLevel:ni,maximumLevel:Qt,tileHeight:Ui,url:_i,token:cl,tileDiscardPolicy:No,layers:ul,enablePickFeatures:ia,rectangle:Ot,tilingScheme:Pi,ellipsoid:Ie,credit:bt,tileWidth:Gi}),Sm={name:"zh-hans",nativeName:"\u4E2D\u6587(\u7B80\u4F53)",vc:{loadError:"\u52A0\u8F7D\u5931\u8D25\uFF0C\u5FC5\u987B\u4F5C\u4E3A VcViewer \u7684\u5B50\u7EC4\u4EF6\u52A0\u8F7D\u3002",navigation:{compass:{outerTip:`\u65CB\u8F6C\u89C6\u56FE\uFF1A\u987A/\u9006\u65F6\u9488\u65B9\u5411\u62D6\u62FD\u7F57\u76D8\u5916\u73AF\u3002
\u91CD\u7F6E\u89C6\u56FE\uFF1A\u53CC\u51FB\u7F57\u76D8\u5916\u73AF\u3002`,innerTip:`\u7FFB\u8F6C\u89C6\u56FE\uFF1A\u7531\u5185\u73AF\u5411\u5916\u73AF\u62D6\u62FD\u7F57\u76D8\u3002
 \u6216\u8005\u6309\u4F4F Ctrl \u952E\u7684\u540C\u65F6\u62D6\u62FD\u5730\u56FE\u3002`,title:"\u6309\u4F4F\u9F20\u6807\u62D6\u62FD\u65CB\u8F6C\u76F8\u673A\u3002"},zoomCotrol:{zoomInTip:"\u653E\u5927",zoomResetTip:"\u91CD\u7F6E\u89C6\u56FE",zoomOutTip:"\u7F29\u5C0F"},print:{printTip:"\u573A\u666F\u622A\u56FE/\u6253\u5370",printViewTitle:"\u6253\u5370\u9884\u89C8",credit:"\u5730\u56FE\u7248\u6743",screenshot:"\u573A\u666F\u622A\u56FE"},myLocation:{myLocationTip:"\u5B9A\u4F4D\u60A8\u7684\u4F4D\u7F6E",positioning:"\u5B9A\u4F4D\u4E2D...",fail:"\u5B9A\u4F4D\u5931\u8D25",centreMap:"\u6211\u7684\u4F4D\u7F6E",lat:"\u7EAC\u5EA6",lng:"\u7ECF\u5EA6",address:"\u5730\u5740"},statusBar:{lat:"\u7EAC\u5EA6",lng:"\u7ECF\u5EA6",zone:"\u5E26\u53F7",e:"X",n:"Y",elev:"\u9AD8\u7A0B",level:"\u5C42\u7EA7",heading:"\u65B9\u4F4D",pitch:"\u4FEF\u4EF0",roll:"\u4FA7\u7FFB",cameraHeight:"\u89C6\u9AD8",tip:"\u70B9\u51FB\u5207\u6362\u9F20\u6807\u663E\u793A\u5750\u6807\u4E3A UTM \u6295\u5F71\u5750\u6807"}},navigationSm:{compass:{outerTip:"\u65CB\u8F6C\u89C6\u56FE\uFF1A\u987A/\u9006\u65F6\u9488\u65B9\u5411\u62D6\u62FD\u7F57\u76D8\u5916\u73AF\uFF1B\u91CD\u7F6E\u89C6\u56FE\uFF1A\u53CC\u51FB\u7F57\u76D8\u5916\u73AF\u3002"},zoomCotrol:{zoomInTip:"\u653E\u5927",zoomBarTip:"\u6309\u4F4F\u6ED1\u5757\u5411\u4E0A\u653E\u5927\uFF0C\u5411\u4E0B\u7F29\u5C0F\u3002",zoomOutTip:"\u7F29\u5C0F"}},measurement:{expand:"\u5C55\u5F00",collapse:"\u6536\u62E2",editor:{move:"\u79FB\u52A8\u8282\u70B9",insert:"\u63D2\u5165\u8282\u70B9",remove:"\u79FB\u9664\u8282\u70B9",removeAll:"\u79FB\u9664\u6240\u6709\u8282\u70B9"},distance:{tip:"\u8DDD\u79BB\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u8DDD\u79BB\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u8DDD\u79BB\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},"component-distance":{tip:"\u4E09\u89D2\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E09\u89D2\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E09\u89D2\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},polyline:{tip:"\u6298\u7EBF\u8DDD\u79BB\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u7B2C\u4E00\u4E2A\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E0B\u4E00\u4E2A\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u91CF\u7B97\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},horizontal:{tip:"\u6C34\u5E73\u8DDD\u79BB\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u7B2C\u4E00\u4E2A\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E0B\u4E00\u4E2A\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u91CF\u7B97\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},vertical:{tip:"\u5782\u76F4\u8DDD\u79BB\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5782\u76F4\u8DDD\u79BB\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5782\u76F4\u8DDD\u79BB\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},height:{tip:"\u5730\u8868\u9AD8\u5EA6\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u9AD8\u5EA6\u91CF\u7B97\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u9AD8\u5EA6\u91CF\u7B97\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},area:{tip:"\u9762\u79EF\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u7B2C\u4E00\u4E2A\u70B9\u3002",drawingTipEnd:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u4E0B\u4E00\u4E2A\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u91CF\u7B97\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},point:{tip:"\u5750\u6807\u91CF\u7B97",drawingTipStart:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u5750\u6807\u91CF\u7B97\u70B9\u3002",drawingTipEnd:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u5750\u6807\u91CF\u7B97\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002",lng:"\u7ECF\u5EA6\uFF1A",lat:"\u7EAC\u5EA6\uFF1A",height:"\u9AD8\u5EA6\uFF1A",slope:"\u5761\u5EA6\uFF1A"},rectangle:{tip:"\u77E9\u5F62\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u77E9\u5F62\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u77E9\u5F62\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},regular:{tip:"\u6B63\u591A\u8FB9\u5F62\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u6B63\u591A\u8FB9\u5F62\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u6B63\u591A\u8FB9\u5F62\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},circle:{tip:"\u5706\u5F62\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5706\u5F62\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5706\u5F62\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},clear:{tip:"\u6E05\u9664\u91CF\u7B97\u7ED3\u679C"}},drawing:{expand:"\u5C55\u5F00",collapse:"\u6536\u62E2",editor:{move:"\u79FB\u52A8\u8282\u70B9",insert:"\u63D2\u5165\u8282\u70B9",remove:"\u79FB\u9664\u8282\u70B9",removeAll:"\u79FB\u9664\u6240\u6709\u8282\u70B9"},pin:{tip:"\u7ED8\u5236\u56FE\u6807\u70B9",drawingTipStart:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u56FE\u6807\u70B9\u3002",drawingTipEnd:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u56FE\u6807\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},point:{tip:"\u7ED8\u5236\u70B9",drawingTipStart:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u70B9\u3002",drawingTipEnd:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},polyline:{tip:"\u7ED8\u5236\u7EBF",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u7B2C\u4E00\u4E2A\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E0B\u4E00\u4E2A\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u7ED8\u5236\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},polygon:{tip:"\u7ED8\u5236\u9762",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u7B2C\u4E00\u4E2A\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E0B\u4E00\u4E2A\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u7ED8\u5236\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},rectangle:{tip:"\u7ED8\u5236\u77E9\u5F62",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u77E9\u5F62\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u77E9\u5F62\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},circle:{tip:"\u7ED8\u5236\u5706",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5706\u5F62\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5706\u5F62\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},regular:{tip:"\u7ED8\u5236\u6B63\u591A\u8FB9\u5F62",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u6B63\u591A\u8FB9\u5F62\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u6B63\u591A\u8FB9\u5F62\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},clear:{tip:"\u6E05\u9664\u7ED8\u5236\u7ED3\u679C"}},analysis:{expand:"\u5C55\u5F00",collapse:"\u6536\u62E2",editor:{move:"\u79FB\u52A8\u8282\u70B9",insert:"\u63D2\u5165\u8282\u70B9",remove:"\u79FB\u9664\u8282\u70B9",removeAll:"\u79FB\u9664\u6240\u6709\u8282\u70B9"},sightline:{tip:"\u901A\u89C6\u5206\u6790",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u89C2\u6D4B\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u76EE\u6807\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u7ED8\u5236\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},viewshed:{tip:"\u53EF\u89C6\u57DF\u5206\u6790",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u53EF\u89C6\u57DF\u5206\u6790\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u53EF\u89C6\u57DF\u5206\u6790\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},clear:{tip:"\u6E05\u9664\u5206\u6790\u7ED3\u679C"}},overview:{show:"\u663E\u793A\u9E70\u773C",hidden:"\u9690\u85CF\u9E70\u773C"}}};const xm=e=>(t,i)=>Tm(t,i,a.unref(e)),Tm=(e,t,i)=>Vu(i,e,e).replace(/\{(\w+)\}/g,(n,o)=>{var r;return`${(r=t==null?void 0:t[o])!=null?r:`{${o}}`}`}),Am=e=>{const t=a.computed(()=>a.unref(e).name),i=a.isRef(e)?e:a.ref(e);return{lang:t,locale:i,t:xm(e)}},gt=()=>{const e=Is("locale");return Am(a.computed(()=>e.value||Sm))};function Al(e,t,i){const n=(s,l,c=!0)=>{const u=l||t.cesiumEvents||[];u&&u.forEach(d=>{if(s[d]){const m=Ee(t,d),h=c?"addEventListener":"removeEventListener";m&&s[d][h](m)}else process.env.VUECESIUM_DEBUG&&i.warn("Add event linstener of "+d+" failed, try to upgrade Cesium to latest version.")})},o=s=>{var l;const{viewer:c,cesiumObject:u}=t;if(u===void 0)return;const{ScreenSpaceEventHandler:d,ScreenSpaceEventType:m}=Cesium;(!c._vcPickScreenSpaceEventHandler||!c._vcViewerScreenSpaceEventHandler)&&(c._vcPickScreenSpaceEventHandler=new d(c.canvas),c._vcViewerScreenSpaceEventHandler=new d(c.canvas),Il.forEach(h=>{const f=Ee(t,h);f&&c._vcViewerScreenSpaceEventHandler.setInputAction(f,m[h]),c._vcPickScreenSpaceEventHandler.setInputAction(r.bind({eventName:h,viewer:c}),m[h])})),n(u,t.cesiumEvents||[],s),(l=t.cesiumMembersEvents)==null||l.forEach(h=>{const f=He(h.name)&&h.name.length>0&&u[h.name[0]]?u[h.name[0]][h.name[1]]:u[h.name];f&&n(f,h.events,s)}),e.enableMouseEvent&&Im.forEach(h=>{const f=Ee(t,h);s?f&&(u[h]=f):f&&delete u[h]})};function r(s){if(!e.enableMouseEvent||!s)return;const l=this.viewer,{eventName:c}=this,u=s.position||s.endPosition;if(!u)return;const d=[];let m;c.indexOf("LEFT_DOUBLE_CLICK")!==-1?m="dblclick":c.indexOf("CLICK")!==-1?m="click":c.indexOf("DOWN")!==-1?m="mousedown":c.indexOf("UP")!==-1?m="mouseup":c.indexOf("MOUSE_MOVE")!==-1&&(m="mousemove");let h;m==="mousemove"?h="mouseout":m==="click"&&(h="clickout");const f=l.scene.pick(u);if(Cesium.defined(f)?(this.pickedFeature&&this.pickedFeature.id!==f.id&&d.push({callbackName:h,pickedFeature:this.pickedFeature}),m==="mousemove"&&(!this.pickedFeature||this.pickedFeature.id!==f.id)&&d.push({callbackName:"mouseover",pickedFeature:f}),d.push({callbackName:m,pickedFeature:f})):(this.pickedFeature&&d.push({callbackName:h,pickedFeature:this.pickedFeature}),this.pickedFeature=void 0),d.length===0)return;let p;const y=l.scene;if(y.mode===Cesium.SceneMode.SCENE3D){const w=y.camera.getPickRay(u);p=y.globe.pick(w,y)}else p=y.camera.pickEllipsoid(u,y.globe.ellipsoid);let g=-1;c.indexOf("LEFT")!==-1?g=0:c.indexOf("MIDDLE")!==-1?g=1:c.indexOf("RIGHT")!==-1&&(g=2);const v=[];d.forEach(w=>{const C=w.callbackName,P=w.pickedFeature;P.id&&(He(P.id)&&P.id[0]instanceof Cesium.Entity?v.push({callbackName:C,cesiumObject:P.id[0].entityCollection.owner,pickedFeature:P}):P.id instanceof Cesium.Entity&&(v.push({callbackName:C,cesiumObject:P.id,pickedFeature:P}),v.push({callbackName:C,cesiumObject:P.id.entityCollection.owner,pickedFeature:P})));const _=E=>{v.push({callbackName:C,cesiumObject:E,pickedFeature:P}),E._vcParent&&_(E._vcParent)};P.primitive&&(P.primitive._vcParent&&_(P.primitive._vcParent),v.push({callbackName:C,cesiumObject:P.primitive,pickedFeature:P})),P.collection&&(P.collection._vcParent&&_(P.collection._vcParent),v.push({callbackName:C,cesiumObject:P.collection,pickedFeature:P}))}),v.forEach(w=>{if(w.callbackName){const C=w.cesiumObject[w.callbackName]||w.cesiumObject[`on${yr(w.callbackName)}`]||w.cesiumObject[ne(`on${yr(w.callbackName)}`)];C&&C({type:`on${w.callbackName}`,windowPosition:u,surfacePosition:p,pickedFeature:w.pickedFeature,button:g,cesiumObject:w.cesiumObject})}}),this.pickedFeature=f}return{bindEvents:n,registerEvents:o}}const Il=["LEFT_CLICK","LEFT_DOUBLE_CLICK","LEFT_DOWN","LEFT_UP","MIDDLE_CLICK","MIDDLE_DOWN","MIDDLE_UP","MOUSE_MOVE","PINCH_END","PINCH_MOVE","PINCH_START","RIGHT_CLICK","RIGHT_DOWN","RIGHT_UP","WHEEL"],Im=["mousedown","mouseup","click","clickout","dblclick","mousemove","mouseover","mouseout"];function Le(e,{emit:t},i){const n=Rr(i);i.alreadyListening=[],i.removeCallbacks=[];let o=[];i.mounted=!1;const r=Xd();i.vcMitt=r;const s=a.inject(Ji),{t:l}=gt();if(s===void 0){console.error(`${i.cesiumClass} ${l("vc.loadError")}`);return}const c=Ct(i),u=Al(e,i,n);i.children=[];const d=["billboard","box","corridor","cylinder","ellipse","ellipsoid","label","model","tileset","path","plane","point","polygon","polyline","polylineVolume","rectangle","wall"],m=async()=>{if(t("beforeLoad",i),c.nowaiting)return!0;await c.proxy.creatingPromise},h=async()=>{var T;if(i.mounted)return!1;n.debug(`${i.cesiumClass}---loading`),await m();const{Cesium:V,viewer:I}=s;return i.viewer=I,i.Cesium=V,!c.cesiumObject&&!c.nowaiting?await((T=c.proxy)==null?void 0:T.load()):(P(!0),w().then(async R=>(i.cesiumObject=R,g().then(()=>{i.mounted=!0,c.children.push(i),Object.assign(i.proxy,{cesiumObject:i.cesiumObject});const L={Cesium:V,viewer:I,cesiumObject:R,vm:i.proxy};return t("ready",L),r.emit("ready",L),n.debug(`${i.cesiumClass}---loaded`),L}))))},f=async()=>{await i.unloadingPromise},p=async()=>{await f();for(let T=0;T<i.children.length;T++)await i.children[T].proxy.unload();return i.children.length=0,i.mounted?v().then(async()=>(P(!1),i.cesiumObject=void 0,i.mounted=!1,i.removeCallbacks.forEach(T=>{T()}),t("destroyed",i),n.debug(`${i.cesiumClass}---unmounted`),i.renderByParent&&!i.unloadingPromise?c.proxy.unload():!0)):!1},y=async()=>p().then(()=>h()),g=async()=>{var T;return u.registerEvents(!0),((T=i.mount)==null?void 0:T.call(i))||!0},v=async()=>{var T;return u.registerEvents(!1),((T=i.unmount)==null?void 0:T.call(i))||!0},w=async()=>{if(n.debug("do createCesiumObject"),pt(i.createCesiumObject))return i.createCesiumObject();{const T=_(e);return new Cesium[i.cesiumClass](T)}},C=(T,V)=>{let I=V==null?void 0:V.deep;const{SampledPositionProperty:R,Appearance:L,DebugAppearance:j,MaterialAppearance:M,PolylineColorAppearance:b,EllipsoidSurfaceAppearance:B,PerInstanceColorAppearance:A,PolylineMaterialAppearance:Z}=Cesium;if(T==="position")I=!(i.proxy[T]instanceof R);else if(T==="appearance"||T==="depthFailAppearance"){const F=i.proxy[T];I=!(F instanceof L||F instanceof j||F instanceof M||F instanceof b||F instanceof B||F instanceof A||F instanceof Z||Gn(F).indexOf("Appearance")!==-1)}return I},P=T=>{if(T){if(!i.cesiumClass||!Cesium[i.cesiumClass])return;e&&Object.keys(e).forEach(V=>{var I,R,L,j,M;let b=V;if(V==="labelStyle"||V==="wmtsStyle"?b="style":V==="bmKey"&&(b="key"),((R=(I=i.proxy)==null?void 0:I.$options.watch)==null?void 0:R[V])||i.alreadyListening.indexOf(V)!==-1)return;const B=(j=(L=i.proxy)==null?void 0:L.$options.props[V])==null?void 0:j.watcherOptions,A=(M=i.proxy)==null?void 0:M.$watch(V,async(Z,F)=>{await i.proxy.creatingPromise;const{cesiumObject:$}=i,N=$&&Object.getOwnPropertyDescriptor($,b),z=$&&Object.getOwnPropertyDescriptor(Object.getPrototypeOf($),b);if(N&&(N.writable||N.set)||z&&(z.writable||z.set)){if(B&&B.cesiumObjectBuilder){const H=B.cesiumObjectBuilder.call(i,Z,i.viewer.scene.globe.ellipsoid);Cesium.defined($[b])&&Cesium.defined($[b]._callback)||($[b]=H)}else $[b]=E(b,Z);return!0}else UE(Z,F)||i.proxy.reload()},{deep:C(V,B)});o.push(A)})}else o.forEach(V=>V()),o=[]},_=(T,V)=>{let I={};return T&&Object.keys(T).forEach(R=>{let L=R;R==="labelStyle"||R==="wmtsStyle"?L="style":R==="bmKey"&&(L="key");const j=Gn(T[R]);j&&j.indexOf("Graphics")===-1&&d.indexOf(L)!==-1&&(i.cesiumClass==="Entity"||i.cesiumClass.indexOf("DataSource")>0)?I[L]=_(T[R],V):I[L]=E(R,T[R],V)}),I=As(I),I},E=(T,V,I)=>{var R,L;const j=Gn(V);if(j&&j.indexOf("Graphics")===-1&&d.indexOf(T)!==-1&&(i.cesiumClass==="Entity"||i.cesiumClass.indexOf("DataSource")>0||i.cesiumClass==="VcOverlayDynamic"))return _(V,I);{const M=(R=i.proxy)==null?void 0:R.$options.name,b=((L=i.proxy)==null?void 0:L.$options.props[T])||(I==null?void 0:I[T])||Mm[T]&&Mm[T][T];return(b==null?void 0:b.watcherOptions)&&!Dr(V)?b.watcherOptions.cesiumObjectBuilder.call(i,V,i.viewer.scene.globe.ellipsoid):pt(V)&&M&&(M.indexOf("Graphics")!==-1||M==="VcEntity"||M.indexOf("Datasource")!==-1)?new Cesium.CallbackProperty(V,!1):V}},S=()=>_n({},s||{}),x=new Promise((T,V)=>{try{let I=!1;s.viewer&&(I=!0,h().then(R=>{T(R),I=!1})),c.vcMitt.on("ready",()=>{!I&&!i.isUnmounted&&T(h())})}catch(I){V(I)}});return n.debug(`${i.cesiumClass}---onCreated`),a.onUnmounted(()=>{n.debug(`${i.cesiumClass}---onUnmounted`),i.unloadingPromise=new Promise((T,V)=>{p().then(()=>{n.debug(`${i.cesiumClass}---unloaded`),T(!0),i.unloadingPromise=void 0,r.all.clear()})}),i.alreadyListening=[]}),Object.assign(i.proxy,{creatingPromise:x,load:h,unload:p,reload:y,getCreatingPromise:()=>x,getCesiumObject:()=>i.cesiumObject}),{$services:s,load:h,unload:p,reload:y,creatingPromise:x,transformProp:E,transformProps:_,unwatchFns:o,setPropsWatcher:P,logger:n,getServices:S}}function Wo(e,t,i){i.cesiumEvents=["changedEvent","errorEvent","loadingEvent"],i.cesiumClass==="KmlDataSource"&&(i.cesiumEvents.push("refreshEvent"),i.cesiumEvents.push("unsupportedNodeEvent")),i.cesiumMembersEvents=[{name:"clock",events:["definitionChanged"]},{name:"clustering",events:["clusterEvent"]},{name:"entities",events:["collectionChanged"]}];const n=Le(e,t,i);if(n===void 0)return;i.alreadyListening.push("entities");let o=[];o.push(a.watch(()=>tn(e.entities),(l,c)=>{if(!i.mounted)return;const u=i.cesiumObject;if(l.length===c.length){const d=[];for(let m=0;m<l.length;m++){const h=l[m],f=c[m];JSON.stringify(h)!==JSON.stringify(f)&&d.push({newOptions:h,oldOptions:f})}d.forEach(m=>{const h=u.entities.getById(m.oldOptions.id);if(m.oldOptions.id===m.newOptions.id)h&&Object.keys(m.newOptions).forEach(f=>{m.oldOptions[f]!==m.newOptions[f]&&(h[f]=n.transformProp(f,m.newOptions[f]))});else{u.entities.remove(h);const f=m.newOptions;r(u,[f])}})}else{const d=Pt(l,c,"id"),m=Pt(c,l,"id"),h=[];for(let f=0;f<m.length;f++){const p=u.entities.getById(m[f].id);h.push(p)}h.forEach(f=>{u.entities.remove(f)}),r(u,d)}},{deep:!0}));const r=(l,c)=>{for(let u=0;u<c.length;u++){const d=c[u],m=n.transformProps(d),h=l.entities.add(m);d.id!==h.id&&(d.id=h.id),nn(h,m)}};i.mount=async()=>{const l=n.$services.dataSources,c=i.cesiumObject;return c.show=e.show,r(c,e.entities),l.add(c).then(()=>!0)},i.unmount=async()=>{const l=n.$services.dataSources,c=i.cesiumObject;return l&&l.remove(c,e.destroy)};const s=()=>_n(n.getServices(),{get datasource(){return i.cesiumObject},get entities(){var l;return(l=i.cesiumObject)==null?void 0:l.entities}});return a.onUnmounted(()=>{o.forEach(l=>l()),o=[]}),a.provide(Ji,s()),i.appContext.config.globalProperties.$VueCesium=s(),{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function Fe(e,t,i){i.cesiumEvents=[],i.renderByParent=!0;const n=Le(e,t,i);if(n!==void 0)return i.mount=async()=>{var o;const r=i.cesiumObject,s=Ct(i).proxy;return(o=s.__updateGeometry)==null?void 0:o.call(s,r)},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function Et(e,t,i){i.cesiumEvents=["definitionChanged"],Le(e,t,i)!==void 0&&(i.mount=async()=>{var o,r;const s=i.cesiumObject;if(s===void 0)return!1;const l=ne(((o=i.proxy)==null?void 0:o.$options.name)||"").split("-"),c=l.length===3?`update:${l[2]}`:"update:polylineVolume",u=Ct(i).proxy;return u&&((r=u.__updateGraphics)==null?void 0:r.call(u,s,c))},i.unmount=async()=>{var o,r;const s=ne(((o=i.proxy)==null?void 0:o.$options.name)||"").split("-"),l=s.length===3?`update:${s[2]}`:"update:polylineVolume",c=Ct(i).proxy;return c&&((r=c.__updateGraphics)==null?void 0:r.call(c,void 0,l))})}const Dl=e=>a.markRaw(e);function Rl(e,t){const i=e.style;Object.keys(t).forEach(n=>{i[n]=t[n]})}function p5(e){if(e==null)return;if(typeof e=="string")try{return document.querySelector(e)||void 0}catch(i){return}const t=a.isRef(e)===!0?e.value:e;if(t)return t.$el||t}const Qn={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0,passive:void 0};try{const e=Object.defineProperty({},"passive",{get(){Object.assign(Qn,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,e),window.removeEventListener("qtest",null,e)}catch(e){}function Dm(){}function Rm(e){return e.button===0}function Kn(e){return e.touches&&e.touches[0]?e=e.touches[0]:e.changedTouches&&e.changedTouches[0]?e=e.changedTouches[0]:e.targetTouches&&e.targetTouches[0]&&(e=e.targetTouches[0]),{top:e.clientY,left:e.clientX}}function Lm(e){e.stopPropagation()}function Ll(e){e.cancelable!==!1&&e.preventDefault()}function sn(e){e.cancelable!==!1&&e.preventDefault(),e.stopPropagation()}function Ht(e,t,i){const n=`__vc_${t}_evt`;e[n]=e[n]!==void 0?e[n].concat(i):i,i.forEach(o=>{o[0].addEventListener(o[1],e[o[2]],Qn[o[3]])})}function Ai(e,t){const i=`__vc_${t}_evt`;e[i]!==void 0&&(e[i].forEach(n=>{n[0].removeEventListener(n[1],e[n[2]],Qn[n[3]])}),e[i]=void 0)}function g5(e){return e!==Object(e)||e.isComposing===!0||e.qKeyEvent===!0}function qo(e,t){return g5(e)===!0?!1:[].concat(t).includes(e.keyCode)}function Bl(e,t=250){let i=!1,n;return function(){return i===!1&&(i=!0,setTimeout(()=>{i=!1},t),n=e.apply(this,arguments)),n}}function Bm(e,t,i,n){i.modifiers.stop===!0&&Lm(e);const o=i.modifiers.color;let r=i.modifiers.center;r=r===!0||n===!0;const s=document.createElement("span"),l=document.createElement("span"),c=Kn(e),{left:u,top:d,width:m,height:h}=t.getBoundingClientRect(),f=Math.sqrt(m*m+h*h),p=f/2,y=`${(m-f)/2}px`,g=r?y:`${c.left-u-p}px`,v=`${(h-f)/2}px`,w=r?v:`${c.top-d-p}px`;l.className="vc-ripple__inner",Rl(l,{height:`${f}px`,width:`${f}px`,transform:`translate3d(${g},${w},0) scale3d(.2,.2,1)`,opacity:0}),s.className=`vc-ripple${o?" text-"+o:""}`,s.setAttribute("dir","ltr"),s.appendChild(l),t.appendChild(s);const C=()=>{s.remove(),clearTimeout(P)};i.abort.push(C);let P=setTimeout(()=>{l.classList.add("vc-ripple__inner--enter"),l.style.transform=`translate3d(${y},${v},0) scale3d(1,1,1)`,l.style.opacity="0.2",P=setTimeout(()=>{l.classList.remove("vc-ripple__inner--enter"),l.classList.add("vc-ripple__inner--leave"),l.style.opacity="0",P=setTimeout(()=>{s.remove(),i.abort.splice(i.abort.indexOf(C),1)},275)},250)},50)}function jm(e,{modifiers:t,value:i,arg:n,instance:o}){const r=Object.assign({},t,i);e.modifiers={early:r.early===!0,stop:r.stop===!0,center:r.center===!0,color:r.color||n,keyCodes:[].concat(r.keyCodes||13)}}var Fm=Dl({name:"ripple",beforeMount(e,t){const i={enabled:t.value!==!1,modifiers:{},abort:[],start(n){i.enabled===!0&&n.qSkipRipple!==!0&&(i.modifiers.early===!0?["mousedown","touchstart"].includes(n.type)===!0:n.type==="click")&&Bm(n,e,i,n.qKeyEvent===!0)},keystart:Bl(n=>{i.enabled===!0&&n.qSkipRipple!==!0&&qo(n,i.modifiers.keyCodes)===!0&&n.type===`key${i.modifiers.early===!0?"down":"up"}`&&Bm(n,e,i,!0)},300)};jm(i,t),e.__vcripple=i,Ht(i,"main",[[e,"mousedown","start","passive"],[e,"touchstart","start","passive"],[e,"click","start","passive"],[e,"keydown","keystart","passive"],[e,"keyup","keystart","passive"]])},updated(e,t){if(t.oldValue!==t.value){const i=e.__vcripple;i.enabled=t.value!==!1,i.enabled===!0&&Object(t.value)===t.value&&jm(i,t)}},beforeUnmount(e){const t=e.__vcripple;t.abort.forEach(i=>{i()}),Ai(t,"main"),delete e._vcripple}});function Mt(){const e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),i=/(?:SymbianOS)/.test(e)||t,n=/(?:Android)/.test(e),o=/(?:Firefox)/.test(e),r=/(?:Chrome|CriOS)/.test(e),s=/(?:iPad|PlayBook)/.test(e)||n&&!/(?:Mobile)/.test(e)||o&&/(?:Tablet)/.test(e),l=/(?:iPhone)/.test(e)&&!s,c=!l&&!n&&!i,u=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return{isTablet:s,isPhone:l,isAndroid:n,isPc:c,isChrome:r,isIOS:u,hasTouch:"ontouchstart"in window||window.navigator.maxTouchPoints>0}}function Hi(){if(window.getSelection!==void 0){const e=window.getSelection();(e==null?void 0:e.empty)!==void 0?e.empty():(e==null?void 0:e.removeAllRanges)!==void 0&&(e.removeAllRanges(),Mt().isPhone!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}var ca=Dl({name:"touch-hold",beforeMount(e,t){const{modifiers:i}=t;if(i.mouse!==!0&&Mt().hasTouch!==!0)return;const n={handler:t.value,noop:Dm,mouseStart(r){typeof n.handler=="function"&&Rm(r)===!0&&(Ht(n,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),n.start(r,!0))},touchStart(r){var s;if(r.target!==void 0&&typeof n.handler=="function"){const l=r.target;Ht(n,"temp",[[l,"touchmove","move","passiveCapture"],[l,"touchcancel","end","notPassiveCapture"],[l,"touchend","end","notPassiveCapture"]]),n.start(r),(s=t==null?void 0:t.touchStart)==null||s.call(t,r)}},start(r,s){n.origin=Kn(r);const l=Date.now();Mt().isPhone===!0&&(document.body.classList.add("non-selectable"),Hi(),n.styleCleanup=c=>{n.styleCleanup=void 0;const u=()=>{document.body.classList.remove("non-selectable")};c===!0?(Hi(),setTimeout(u,10)):u()}),n.triggered=!1,n.sensitivity=s===!0?n.mouseSensitivity:n.touchSensitivity,n.timer=setTimeout(()=>{Hi(),n.triggered=!0,n.handler({evt:r,touch:s!==!0,mouse:s===!0,position:n.origin,duration:Date.now()-l})},n.duration)},move(r){const{top:s,left:l}=Kn(r);(Math.abs(l-n.origin.left)>=n.sensitivity||Math.abs(s-n.origin.top)>=n.sensitivity)&&clearTimeout(n.timer)},end(r){var s;Ai(n,"temp"),n.styleCleanup!==void 0&&n.styleCleanup(n.triggered),n.triggered===!0?r!==void 0&&sn(r):clearTimeout(n.timer),(s=t==null?void 0:t.touchEnd)==null||s.call(t,r)}},o=[600,5,7];typeof t.arg=="string"&&t.arg.length>0&&t.arg.split(":").forEach((r,s)=>{const l=parseInt(r,10);l&&(o[s]=l)}),[n.duration,n.touchSensitivity,n.mouseSensitivity]=o,e.__vctouchhold=n,i.mouse===!0&&Ht(n,"main",[[e,"mousedown","mouseStart",`passive${i.mouseCapture===!0?"Capture":""}`]]),Mt().hasTouch===!0&&Ht(n,"main",[[e,"touchstart","touchStart",`passive${i.capture===!0?"Capture":""}`],[e,"touchend","noop","notPassiveCapture"]])},updated(e,t){const i=e.__vctouchhold;i!==void 0&&t.oldValue!==t.value&&(typeof t.value!="function"&&i.end(),i.handler=t.value)},beforeUnmount(e){const t=e.__vctouchhold;t!==void 0&&(Ai(t,"main"),Ai(t,"temp"),clearTimeout(t.timer),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__vctouchhold)}});const Vm={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},v5=new RegExp(`^([\\d+]+|${Object.keys(Vm).join("|")})$`,"i");function y5(e,t){const{top:i,left:n}=Kn(e);return Math.abs(n-t.left)>=7||Math.abs(i-t.top)>=7}var C5=Dl({name:"touch-repeat",beforeMount(e,{modifiers:t,value:i,arg:n,touchStart:o}){const r=Object.keys(t).reduce((u,d)=>{if(v5.test(d)===!0){const m=isNaN(parseInt(d,10))?Vm[d.toLowerCase()]:parseInt(d,10);m>=0&&u.push(m)}return u},[]);if(t.mouse!==!0&&Mt().hasTouch!==!0&&r.length===0)return;const s=typeof n=="string"&&n.length>0?n.split(":").map(u=>parseInt(u,10)):[0,600,300],l=s.length-1,c={keyboard:r,handler:i,noop:Dm,mouseStart(u){c.event===void 0&&typeof c.handler=="function"&&Rm(u)===!0&&(Ht(c,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),c.start(u,!0))},keyboardStart(u){if(typeof c.handler=="function"&&qo(u,r)===!0){if((s[0]===0||c.event!==void 0)&&(sn(u),e.focus(),c.event!==void 0))return;Ht(c,"temp",[[document,"keyup","end","notPassiveCapture"],[document,"click","end","notPassiveCapture"]]),c.start(u,!1,!0)}},touchStart(u){if(u.target!==void 0&&typeof c.handler=="function"){const d=u.target;Ht(c,"temp",[[d,"touchmove","move","passiveCapture"],[d,"touchcancel","end","notPassiveCapture"],[d,"touchend","end","notPassiveCapture"]]),c.start(u),o==null||o(u)}},start(u,d,m){m!==!0&&(c.origin=Kn(u));function h(p){c.styleCleanup=void 0,document.documentElement.style.cursor="";const y=()=>{document.body.classList.remove("non-selectable")};p===!0?(Hi(),setTimeout(y,10)):y()}Mt().isPhone===!0&&(document.body.classList.add("non-selectable"),Hi(),c.styleCleanup=h),c.event={touch:d!==!0&&m!==!0,mouse:d===!0,keyboard:m===!0,startTime:Date.now(),repeatCount:0};const f=()=>{if(c.event===void 0)return;c.event.repeatCount===0&&(c.event.evt=u,m===!0?c.event.keyCode=u.keyCode:c.event.position=Kn(u),Mt().isPhone!==!0&&(document.documentElement.style.cursor="pointer",document.body.classList.add("non-selectable"),Hi(),c.styleCleanup=h)),c.event.duration=Date.now()-c.event.startTime,c.event.repeatCount+=1,c.handler(c.event);const p=l<c.event.repeatCount?l:c.event.repeatCount;c.timer=setTimeout(f,s[p])};s[0]===0?f():c.timer=setTimeout(f,s[0])},move(u){c.event!==void 0&&y5(u,c.origin)===!0&&clearTimeout(c.timer)},end(u){c.event!==void 0&&(c.styleCleanup!==void 0&&c.styleCleanup(!0),u!==void 0&&c.event.repeatCount>0&&sn(u),Ai(c,"temp"),clearTimeout(c.timer),c.event=void 0)}};e.__vctouchrepeat=c,t.mouse===!0&&Ht(c,"main",[[e,"mousedown","mouseStart",`passive${t.mouseCapture===!0?"Capture":""}`]]),Mt().hasTouch===!0&&Ht(c,"main",[[e,"touchstart","touchStart",`passive${t.capture===!0?"Capture":""}`],[e,"touchend","noop","notPassiveCapture"]]),r.length>0&&Ht(c,"main",[[e,"keydown","keyboardStart",`notPassive${t.keyCapture===!0?"Capture":""}`]])},updated(e,{oldValue:t,value:i}){const n=e.__vctouchrepeat;n!==void 0&&t!==i&&(typeof i!="function"&&n.end(),n.handler=i)},beforeUnmount(e){const t=e.__vctouchrepeat;t!==void 0&&(clearTimeout(t.timer),Ai(t,"main"),Ai(t,"temp"),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__vctouchrepeat)}});function Jn(){let e,t;const i=new Promise(function(n,o){e=n,t=o});return{resolve:e,reject:t,promise:i}}function Nm(e,{handleMouseClick:t=void 0,handleMouseDown:i=void 0,handleMouseUp:n=void 0,handleMouseMove:o=void 0,handleDoubleClick:r=void 0,handleMouseWheel:s=void 0,handlePinch:l=void 0}){const c=a.ref(void 0),u=a.ref(!1),d=()=>{if(u.value)return;const{ScreenSpaceEventType:D,KeyboardEventModifier:J,ScreenSpaceEventHandler:re}=Cesium;if(!c.value){const{viewer:ve}=e;c.value=new re(ve.canvas),ca.beforeMount(ve.canvas,{arg:"2000",value:pe,touchStart:me,touchEnd:de,modifiers:{}})}const ae=c.value;ae.setInputAction(f,D.LEFT_CLICK),ae.setInputAction(p,D.LEFT_CLICK,J.SHIFT),ae.setInputAction(y,D.LEFT_CLICK,J.CTRL),ae.setInputAction(S,D.LEFT_DOWN),ae.setInputAction(x,D.LEFT_DOWN,J.SHIFT),ae.setInputAction(T,D.LEFT_DOWN,J.CTRL),ae.setInputAction(b,D.LEFT_UP),ae.setInputAction(B,D.LEFT_UP,J.SHIFT),ae.setInputAction(A,D.LEFT_UP,J.CTRL),ae.setInputAction(P,D.RIGHT_CLICK),ae.setInputAction(_,D.RIGHT_CLICK,J.SHIFT),ae.setInputAction(E,D.RIGHT_CLICK,J.CTRL),ae.setInputAction(L,D.RIGHT_DOWN),ae.setInputAction(j,D.RIGHT_DOWN,J.SHIFT),ae.setInputAction(M,D.RIGHT_DOWN,J.CTRL),ae.setInputAction(N,D.RIGHT_UP),ae.setInputAction(z,D.RIGHT_UP,J.SHIFT),ae.setInputAction(G,D.RIGHT_UP,J.CTRL),ae.setInputAction(g,D.MIDDLE_CLICK),ae.setInputAction(v,D.MIDDLE_CLICK,J.SHIFT),ae.setInputAction(w,D.MIDDLE_CLICK,J.CTRL),ae.setInputAction(V,D.MIDDLE_DOWN),ae.setInputAction(I,D.MIDDLE_DOWN,J.SHIFT),ae.setInputAction(R,D.MIDDLE_DOWN,J.CTRL),ae.setInputAction(Z,D.MIDDLE_UP),ae.setInputAction(F,D.MIDDLE_UP,J.SHIFT),ae.setInputAction($,D.MIDDLE_UP,J.CTRL),ae.setInputAction(H,D.LEFT_DOUBLE_CLICK),ae.setInputAction(oe,D.LEFT_DOUBLE_CLICK,J.SHIFT),ae.setInputAction(Y,D.LEFT_DOUBLE_CLICK,J.CTRL),ae.setInputAction(W,D.MOUSE_MOVE),ae.setInputAction(q,D.MOUSE_MOVE,J.SHIFT),ae.setInputAction(K,D.MOUSE_MOVE,J.CTRL),ae.setInputAction(U,D.WHEEL),ae.setInputAction(k,D.WHEEL,J.SHIFT),ae.setInputAction(ee,D.WHEEL,J.CTRL),ae.setInputAction(X,D.PINCH_START),ae.setInputAction(Q,D.PINCH_START,J.SHIFT),ae.setInputAction(te,D.PINCH_START,J.CTRL),ae.setInputAction(le,D.PINCH_END),ae.setInputAction(se,D.PINCH_END,J.SHIFT),ae.setInputAction(ue,D.PINCH_END,J.CTRL),ae.setInputAction(ce,D.PINCH_MOVE),ae.setInputAction(fe,D.PINCH_MOVE,J.SHIFT),ae.setInputAction(ge,D.PINCH_MOVE,J.CTRL),u.value=!0},m=()=>{if(!u.value)return;const{ScreenSpaceEventType:D,KeyboardEventModifier:J}=Cesium,re=c.value;if(!re)return;re.removeInputAction(D.LEFT_CLICK),re.removeInputAction(D.LEFT_CLICK,J.SHIFT),re.removeInputAction(D.LEFT_CLICK,J.CTRL),re.removeInputAction(D.LEFT_DOWN),re.removeInputAction(D.LEFT_DOWN,J.SHIFT),re.removeInputAction(D.LEFT_DOWN,J.CTRL),re.removeInputAction(D.LEFT_UP),re.removeInputAction(D.LEFT_UP,J.SHIFT),re.removeInputAction(D.LEFT_UP,J.CTRL),re.removeInputAction(D.RIGHT_CLICK),re.removeInputAction(D.RIGHT_CLICK,J.SHIFT),re.removeInputAction(D.RIGHT_CLICK,J.CTRL),re.removeInputAction(D.RIGHT_DOWN),re.removeInputAction(D.RIGHT_DOWN,J.SHIFT),re.removeInputAction(D.RIGHT_DOWN,J.CTRL),re.removeInputAction(D.RIGHT_UP),re.removeInputAction(D.RIGHT_UP,J.SHIFT),re.removeInputAction(D.RIGHT_UP,J.CTRL),re.removeInputAction(D.MIDDLE_CLICK),re.removeInputAction(D.MIDDLE_CLICK,J.SHIFT),re.removeInputAction(D.MIDDLE_CLICK,J.CTRL),re.removeInputAction(D.MIDDLE_DOWN),re.removeInputAction(D.MIDDLE_DOWN,J.SHIFT),re.removeInputAction(D.MIDDLE_DOWN,J.CTRL),re.removeInputAction(D.MIDDLE_UP),re.removeInputAction(D.MIDDLE_UP,J.SHIFT),re.removeInputAction(D.MIDDLE_UP,J.CTRL),re.removeInputAction(D.LEFT_DOUBLE_CLICK),re.removeInputAction(D.LEFT_DOUBLE_CLICK,J.SHIFT),re.removeInputAction(D.LEFT_DOUBLE_CLICK,J.CTRL),re.removeInputAction(D.MOUSE_MOVE),re.removeInputAction(D.MOUSE_MOVE,J.SHIFT),re.removeInputAction(D.MOUSE_MOVE,J.CTRL),re.removeInputAction(D.WHEEL),re.removeInputAction(D.WHEEL,J.SHIFT),re.removeInputAction(D.WHEEL,J.CTRL),re.removeInputAction(D.PINCH_START),re.removeInputAction(D.PINCH_START,J.SHIFT),re.removeInputAction(D.PINCH_START,J.CTRL),re.removeInputAction(D.PINCH_END),re.removeInputAction(D.PINCH_END,J.SHIFT),re.removeInputAction(D.PINCH_END,J.CTRL),re.removeInputAction(D.PINCH_MOVE),re.removeInputAction(D.PINCH_MOVE,J.SHIFT),re.removeInputAction(D.PINCH_MOVE,J.CTRL);const{viewer:ae}=e;ca.beforeUnmount(ae.canvas),u.value=!1},h=()=>{var D;(D=c.value)==null||D.destroy(),c.value=void 0},f=D=>{t==null||t(D,{button:0})},p=D=>{t==null||t(D,{button:0,shift:!0})},y=D=>{t==null||t(D,{button:0,ctrl:!0})},g=D=>{t==null||t(D,{button:1})},v=D=>{t==null||t(D,{button:1,shift:!0})},w=D=>{t==null||t(D,{button:1,ctrl:!0})};let C;const P=D=>{var J;C?(J=C==null?void 0:C.promise)==null||J.then(re=>{re&&(t==null||t(D,{button:2}))}):t==null||t(D,{button:2})},_=D=>{t==null||t(D,{button:2,shift:!0})},E=D=>{t==null||t(D,{button:2,ctrl:!0})},S=D=>{i==null||i(D,{button:0})},x=D=>{i==null||i(D,{button:0,shift:!0})},T=D=>{i==null||i(D,{button:0,ctrl:!0})},V=D=>{i==null||i(D,{button:1})},I=D=>{i==null||i(D,{button:1,shift:!0})},R=D=>{i==null||i(D,{button:1,ctrl:!0})},L=D=>{i==null||i(D,{button:2})},j=D=>{i==null||i(D,{button:2,shift:!0})},M=D=>{i==null||i(D,{button:2,ctrl:!0})},b=D=>{n==null||n(D,{button:0})},B=D=>{n==null||n(D,{button:0,shift:!0})},A=D=>{n==null||n(D,{button:0,ctrl:!0})},Z=D=>{n==null||n(D,{button:1,ctrl:!0})},F=D=>{n==null||n(D,{button:1,shift:!0})},$=D=>{n==null||n(D,{button:1,ctrl:!0})},N=D=>{n==null||n(D,{button:2})},z=D=>{n==null||n(D,{button:2,shift:!0})},G=D=>{n==null||n(D,{button:2,ctrl:!0})},H=D=>{r==null||r(D,{button:0})},oe=D=>{r==null||r(D,{button:0,shift:!0})},Y=D=>{r==null||r(D,{button:0,ctrl:!0})},W=D=>{o==null||o(D)},q=D=>{o==null||o(D,{shift:!0})},K=D=>{o==null||o(D,{ctrl:!0})},U=D=>{s==null||s(D)},k=D=>{s==null||s(D,{shift:!0})},ee=D=>{s==null||s(D,{ctrl:!0})},X=D=>{l==null||l(D,{start:!0})},Q=D=>{l==null||l(D,{start:!0,shift:!0})},te=D=>{l==null||l(D,{start:!0,ctrl:!0})},le=D=>{l==null||l(D,{end:!0})},se=D=>{l==null||l(D,{end:!0,shift:!0})},ue=D=>{l==null||l(D,{end:!0,ctrl:!0})},ce=D=>{l==null||l(D,{move:!0})},fe=D=>{l==null||l(D,{move:!0,shift:!0})},ge=D=>{l==null||l(D,{move:!0,ctrl:!0})},pe=D=>{if(D.touch){const J={position:{x:D.position.left,y:D.position.top}};r==null||r(J,{button:0})}C.resolve(!1)},de=D=>{C.resolve(!0)},me=D=>{C=Jn()};return{activate:d,deactivate:m,destroy:h,isActive:u}}function Ln(e,t,i){const n=Le(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{const o=n.transformProps(e),r=n.$services.primitives;return r&&r.add(o)},i.mount=async()=>{const o=n.$services.primitives,r=i.cesiumObject;return o&&o.contains(r)},i.unmount=async()=>{const o=n.$services.primitives,r=i.cesiumObject;return o&&!o.isDestroyed()&&o.remove(r)},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher,$services:n.$services}}function Bn(e,t,i){const n=Le(e,t,i);if(n===void 0)return;i.mount=async()=>{const r=n.$services.primitives,s=i.cesiumObject,l=r&&r.add(s);return Cesium.defined(l)},i.unmount=async()=>{const r=n.$services.primitives,s=i.cesiumObject;return r&&r.remove(s)};const o=()=>_n(n.getServices(),{get primitives(){return i.cesiumObject}});return a.provide(Ji,o()),i.appContext.config.globalProperties.$VueCesium=o(),{transformProps:n.transformProps,transformProp:n.transformProp,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function ln(e,t,i){const n=Le(e,t,i);if(n===void 0)return;const{emit:o}=t,r=a.ref(0),s=a.ref([]);i.createCesiumObject=async()=>{var d,m;const h=n.transformProps(e);return h.asynchronous||await((m=(d=Cesium[i.cesiumClass]).initializeTerrainHeights)==null?void 0:m.call(d)),e.geometryInstances&&(He(e.geometryInstances)?(s.value.push(...e.geometryInstances),r.value+=e.geometryInstances.length):(r.value+=1,s.value.push(e.geometryInstances))),new Cesium[i.cesiumClass](h)},i.mount=async()=>{const d=i.cesiumClass.includes("Ground")?n.$services.groundPrimitives:n.$services.primitives,m=i.cesiumObject;m.readyPromise&&m.readyPromise.then(f=>{Ee(i,"readyPromise")&&o("readyPromise",f,n.$services.viewer,i.proxy)}),m._vcParent=d;const h=d&&d.add(m);if(i.cesiumClass==="ParticleSystem"){const f=setInterval(()=>{Cesium.defined(h._billboardCollection)&&(h._billboardCollection._vcParent=h,clearInterval(f))},500)}return Cesium.defined(h)},i.unmount=async()=>{r.value=0,s.value=[];const d=i.cesiumClass.includes("Ground")?n.$services.groundPrimitives:n.$services.primitives,m=i.cesiumObject;return d&&d.remove(m)};const l=(d,m)=>{if(s.value.push(d),m===r.value-1)if(Ee(i,"update:geometryInstances"))t.emit("update:geometryInstances",s.value);else{const f=i.cesiumObject;f.geometryInstances=m===0?d:s.value}return!0},c=d=>{const m=s.value.indexOf(d);return s.value.splice(m,1),!0},u=()=>_n(n.getServices(),{get primitive(){return i.cesiumObject}});return a.provide(Ji,u()),i.appContext.config.globalProperties.$VueCesium=u(),Object.assign(i.proxy,{__updateGeometryInstances:l,__removeGeometryInstances:c,__childCount:r}),{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}const ua=3.141592653589793*3e3/180,St=3.141592653589793,da=6378245,ma=.006693421622965943,jl=function(n,o){var n=+n,o=+o;const r=n-.0065,s=o-.006,l=Math.sqrt(r*r+s*s)-2e-5*Math.sin(s*ua),c=Math.atan2(s,r)-3e-6*Math.cos(r*ua),u=l*Math.cos(c),d=l*Math.sin(c);return[u,d]},Fl=function(o,n){var n=+n,o=+o;const r=Math.sqrt(o*o+n*n)+2e-5*Math.sin(n*ua),s=Math.atan2(n,o)+3e-6*Math.cos(o*ua),l=r*Math.cos(s)+.0065,c=r*Math.sin(s)+.006;return[l,c]},km=function(o,n){var n=+n,o=+o;if(Gm(o,n))return[o,n];{let r=zm(o-105,n-35),s=$m(o-105,n-35);const l=n/180*St;let c=Math.sin(l);c=1-ma*c*c;const u=Math.sqrt(c);r=r*180/(da*(1-ma)/(c*u)*St),s=s*180/(da/u*Math.cos(l)*St);const d=n+r;return[o+s,d]}},Vl=function(o,n){var n=+n,o=+o;if(Gm(o,n))return[o,n];{let r=zm(o-105,n-35),s=$m(o-105,n-35);const l=n/180*St;let c=Math.sin(l);c=1-ma*c*c;const u=Math.sqrt(c);r=r*180/(da*(1-ma)/(c*u)*St),s=s*180/(da/u*Math.cos(l)*St);const d=n+r,m=o+s;return[o*2-m,n*2-d]}};var zm=function(o,n){var n=+n,o=+o;let r=-100+2*o+3*n+.2*n*n+.1*o*n+.2*Math.sqrt(Math.abs(o));return r+=(20*Math.sin(6*o*St)+20*Math.sin(2*o*St))*2/3,r+=(20*Math.sin(n*St)+40*Math.sin(n/3*St))*2/3,r+=(160*Math.sin(n/12*St)+320*Math.sin(n*St/30))*2/3,r},$m=function(o,n){var n=+n,o=+o;let r=300+o+2*n+.1*o*o+.1*o*n+.1*Math.sqrt(Math.abs(o));return r+=(20*Math.sin(6*o*St)+20*Math.sin(2*o*St))*2/3,r+=(20*Math.sin(o*St)+40*Math.sin(o/3*St))*2/3,r+=(150*Math.sin(o/12*St)+300*Math.sin(o/30*St))*2/3,r},Gm=function(o,n){var n=+n,o=+o;return!(o>73.66&&o<135.05&&n>3.86&&n<53.55)},Um=Object.freeze({__proto__:null,bd09togcj02:jl,gcj02tobd09:Fl,wgs84togcj02:km,gcj02towgs84:Vl});function tt(e,t,i){i.cesiumEvents=["errorEvent"];const n=Le(e,t,i);if(n===void 0)return;const{emit:o}=t;return i.mount=async()=>{var r,s,l,c;const{viewer:u}=n.$services;if(i.cesiumClass.indexOf("ImageryProvider")!==-1){i.renderByParent=!0;const d=i.cesiumObject;if((r=d==null?void 0:d.readyPromise)==null||r.then(()=>{Ee(i,"readyPromise")&&o("readyPromise",d,u,i.proxy)}),e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to&&!(((s=i.proxy)==null?void 0:s.$options.name)==="VcImageryProviderBaidu"||((l=i.proxy)==null?void 0:l.$options.name)==="VcImageryProviderTianditu"&&d._epsgCode==="4490")){const{WebMercatorTilingScheme:f,Cartographic:p,Math:y}=Cesium,g=new f,v=g.projection,w=v.project,C=v.unproject;let P,_;e.projectionTransforms.to.toUpperCase()==="WGS84"?(P="wgs84togcj02",_="gcj02towgs84"):e.projectionTransforms.to.toUpperCase()==="GCJ02"&&(P="gcj02towgs84",_="wgs84togcj02"),P&&_&&(v.project=function(E,S){return S=S||new Cesium.Cartesian3,S=Um[P](y.toDegrees(E.longitude),y.toDegrees(E.latitude)),w.call(this,new p(y.toRadians(S==null?void 0:S[0]),y.toRadians(S==null?void 0:S[1])))},v.unproject=function(E,S){S=S||new p;const x=C.call(this,E);return S=Um[_](y.toDegrees(x.longitude),y.toDegrees(x.latitude)),new p(y.toRadians(S==null?void 0:S[0]),y.toRadians(S==null?void 0:S[1]))},d._tilingScheme=g)}const m=Ct(i).proxy;return m&&((c=m.__updateProvider)==null?void 0:c.call(m,d))}else{const d=i.cesiumObject;return d.readyPromise.then(()=>{Ee(i,"readyPromise")&&o("readyPromise",d,u,i.proxy)}),u.terrainProvider=d,!0}},i.unmount=async()=>{var r;const{viewer:s}=n.$services;if(i.cesiumClass.indexOf("ImageryProvider")!==-1){const l=Ct(i).proxy;return l&&((r=l.__updateProvider)==null?void 0:r.call(l,void 0))}else{const l=new Cesium.EllipsoidTerrainProvider;return l.readyPromise.then(()=>{Ee(i,"readyPromise")&&o("readyPromise",l,s,i.proxy)}),s.terrainProvider=l,!0}},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function Nl(){const e=a.getCurrentInstance(),t=Rr(void 0);if(e)return a.inject(Ji)||e.appContext.config.globalProperties.$VueCesium;t.warn("VueCesium useVueCesium() can only be used inside setup().")}var b5={cesiumPath:String,animation:{type:Boolean,default:!1},baseLayerPicker:{type:Boolean,default:!1},fullscreenButton:{type:Boolean,default:!1},vrButton:{type:Boolean,default:!1},geocoder:{type:[Boolean,Array],default:!1},homeButton:{type:Boolean,default:!1},infoBox:{type:Boolean,default:!0},sceneModePicker:{type:Boolean,default:!1},selectionIndicator:{type:Boolean,default:!0},timeline:{type:Boolean,default:!1},navigationHelpButton:{type:Boolean,default:!1},navigationInstructionsInitiallyVisible:{type:Boolean,default:!1},scene3DOnly:{type:Boolean,default:!1},shouldAnimate:{type:Boolean,default:!1},clockViewModel:Object,selectedImageryProviderViewModel:Object,imageryProviderViewModels:Array,selectedTerrainProviderViewModel:Object,terrainProviderViewModels:Array,imageryProvider:Object,terrainProvider:Object,skyBox:{type:[Object,Boolean],default:()=>{}},skyAtmosphere:{type:[Object,Boolean],default:()=>{}},fullscreenElement:{type:[String,Element]},useDefaultRenderLoop:{type:Boolean,default:!0},targetFrameRate:Number,showRenderLoopErrors:{type:Boolean,default:!0},useBrowserRecommendedResolution:{type:Boolean,default:!0},automaticallyTrackDataSourceClocks:{type:Boolean,default:!0},contextOptions:Object,sceneMode:{type:Number,default:3},mapProjection:Object,globe:{type:[Object,Boolean],default:()=>{}},orderIndependentTranslucency:{type:Boolean,default:!0},creditContainer:[String,Element],creditViewport:[String,Element],dataSources:Object,terrainExaggeration:{type:Number,default:1},shadows:{type:Boolean,default:!1},terrainShadows:{type:Number,default:3},mapMode2D:{type:Number,default:1},projectionPicker:{type:Boolean,default:!1},requestRenderMode:{type:Boolean,default:!1},maximumRenderTimeChange:{type:Number,default:0},debugShowFramesPerSecond:{type:Boolean,default:!1},showCredit:{type:Boolean,default:!0},accessToken:String,camera:{type:Object,default:()=>({position:{lng:105,lat:29.999999999999993,height:19059568497290563e-9},heading:360,pitch:-90,roll:0})},navigation:{type:Boolean,default:!1},TZCode:{type:String},UTCOffset:{type:Number},removeCesiumScript:{type:Boolean,default:!0},autoSortImageryLayers:{type:Boolean,default:!0},enableMouseEvent:{type:Boolean,default:!0},skeleton:{type:[Boolean,Object],default:()=>({dark:!1,animation:"wave",square:!0,bordered:!0,color:void 0})},touchHoldArg:{type:String,default:"1000"}};function w5(e){return{"font-awesome":[e+"fonts/font-awesome/css/font-awesome.min.css"],haoutil:[e+"hao/haoutil.js"],turf:[e+"turf/turf.min.js"],"mars3d-space":[e+"mars3d/plugins/space/mars3d-space.js"],"mars3d-echarts":[e+"echarts/echarts.min.js",e+"echarts/echarts-gl.min.js",e+"mars3d/plugins/echarts/mars3d-echarts.js"],"mars3d-mapv":[e+"mapV/mapv.min.js",e+"mars3d/plugins/mapv/mars3d-mapv.js"],"mars3d-heatmap":[e+"mars3d/plugins/heatmap/heatmap.min.js",e+"mars3d/plugins/heatmap/mars3d-heatmap.js"],"mars3d-wind":[e+"mars3d/plugins/wind/netcdfjs.js",e+"mars3d/plugins/wind/mars3d-wind.js"],mars3d:[e+"Cesium/Widgets/widgets.css",e+"Cesium/Cesium.js",e+"mars3d/mars3d.css",e+"mars3d/mars3d.js"]}}const Hm=b5;function _5(e,t,i){let n,o;const r=new Promise((M,b)=>{n=M,o=b}),s=a.ref(null),l=a.ref(!1),c=Xd(),{emit:u}=t,d=Is(),m=Rr(i);i.mounted=!1,i.vcMitt=c,i.cesiumClass="Viewer",i.children=[];const h=Al(e,i,m),f=a.reactive({toolbarContainerRC:void 0,timelineContainerRC:void 0,animationContainerRC:void 0,bottomContainerRC:void 0});let p=[];m.debug("viewer creating");const{t:y}=gt();a.watch(()=>e.selectionIndicator,M=>{const{viewer:b,viewerElement:B}=i,{defined:A,SelectionIndicator:Z}=Cesium;let F;if(A(b.selectionIndicator)&&!b.selectionIndicator.isDestroyed()&&!M)F=b.selectionIndicator.container,B==null||B.removeChild(F),b.selectionIndicator.destroy(),b._selectionIndicator=void 0;else if(!A(b.selectionIndicator)||b.selectionIndicator.isDestroyed()){F=document.createElement("div"),F.className="cesium-viewer-selectionIndicatorContainer",B==null||B.appendChild(F);const $=new Z(F,b.scene);b._selectionIndicator=$}b.viewerWidgetResized.raiseEvent({type:"selectionIndicator",status:M?"added":"removed",target:F})}),a.watch(()=>e.infoBox,M=>{var b,B;const{viewer:A,viewerElement:Z}=i,{defined:F,InfoBox:$}=Cesium,N=["cameraClicked","closeClicked"];let z;if(F(A.infoBox)&&!A.infoBox.isDestroyed()&&!M){const G=A.infoBox.viewModel;G&&h.bindEvents(G,N,!1),z=A.infoBox.container,Z==null||Z.removeChild(z),A.infoBox.destroy(),A._infoBox=void 0}else if(!F(A.infoBox)||A.infoBox.isDestroyed()){z=document.createElement("div"),z.className="cesium-viewer-infoBoxContainer",Z==null||Z.appendChild(z);const G=new $(z),H=G.viewModel;A._onInfoBoxCameraClicked&&((b=A._eventHelper)==null||b.add(H.cameraClicked,A._onInfoBoxCameraClicked,A)),A._onInfoBoxClockClicked&&((B=A._eventHelper)==null||B.add(H.closeClicked,A._onInfoBoxClockClicked,A)),H&&h.bindEvents(H,N,!0),A._infoBox=G}A.forceResize(),A.viewerWidgetResized.raiseEvent({type:"infoBox",status:M?"added":"removed",target:z})}),a.watch(()=>e.geocoder,M=>{var b;const{viewer:B}=i,A=B._toolbar,{defined:Z,Geocoder:F}=Cesium;let $;if(Z(B.geocoder)&&!B.geocoder.isDestroyed()&&!M)$=B.geocoder.container,A==null||A.removeChild($),B.geocoder.destroy(),B._geocoder=void 0;else if(!Z(B.geocoder)||B.geocoder.isDestroyed()){$=document.createElement("div"),$.className="cesium-viewer-geocoderContainer",A==null||A.appendChild($);const N=new F({container:$,geocoderServices:Z(e.geocoder)&&typeof e.geocoder!="boolean"?Array.isArray(e.geocoder)?e.geocoder:[e.geocoder]:void 0,scene:B.scene});B._clearObjects&&((b=B._eventHelper)==null||b.add(N.viewModel.search.beforeExecute,B._clearObjects,B)),B._geocoder=N,L(A,$)}B.viewerWidgetResized.raiseEvent({type:"geocoder",status:M?"added":"removed",target:$})}),a.watch(()=>e.homeButton,M=>{var b,B;const{viewer:A}=i,Z=A._toolbar,{defined:F,HomeButton:$}=Cesium;if(F(A.homeButton)&&!A.homeButton.isDestroyed()&&!M)A.homeButton.destroy(),A._homeButton=void 0;else if(!F(A.homeButton)||A.homeButton.isDestroyed()){const N=new $(Z,A.scene);F(A.geocoder)&&((b=A._eventHelper)==null||b.add(N.viewModel.command.afterExecute,function(){const z=A.geocoder.viewModel;z.searchText="",z.isSearchInProgress&&z.search()})),A._clearTrackedObject&&((B=A._eventHelper)==null||B.add(N.viewModel.command.beforeExecute,A._clearTrackedObject,A)),A._homeButton=N,L(Z,N)}A.viewerWidgetResized.raiseEvent({type:"homeButton",status:M?"added":"removed",target:Z})}),a.watch(()=>e.sceneModePicker,M=>{const{viewer:b}=i,B=b._toolbar,{defined:A,DeveloperError:Z,SceneModePicker:F}=Cesium;if(A(b.sceneModePicker)&&!b.sceneModePicker.isDestroyed()&&!M)b.sceneModePicker.destroy(),b._sceneModePicker=void 0;else if(!A(b.sceneModePicker)||b.sceneModePicker.isDestroyed()){if(e.sceneModePicker&&e.scene3DOnly)throw new Z("options.sceneModePicker is not available when options.scene3DOnly is set to true.");if(!e.scene3DOnly&&e.sceneModePicker){const $=new F(B,b.scene);b._sceneModePicker=$,L(B,$)}}b.viewerWidgetResized.raiseEvent({type:"sceneModePicker",status:M?"added":"removed",target:B})}),a.watch(()=>e.projectionPicker,M=>{const{viewer:b}=i,B=b._toolbar,{defined:A,ProjectionPicker:Z}=Cesium;if(A(b.projectionPicker)&&!b.projectionPicker.isDestroyed()&&!M)b.projectionPicker.destroy(),b._projectionPicker=void 0;else if(!A(b.projectionPicker)||b.projectionPicker.isDestroyed()){const F=new Z(B,b.scene);b._projectionPicker=F,L(B,F)}b.viewerWidgetResized.raiseEvent({type:"projectionPicker",status:M?"added":"removed",target:B})}),a.watch(()=>e.baseLayerPicker,M=>{const{viewer:b}=i,B=b._toolbar,{defined:A,buildModuleUrl:Z,DeveloperError:F,defaultValue:$,createDefaultImageryProviderViewModels:N,createDefaultTerrainProviderViewModels:z,BaseLayerPicker:G}=Cesium;if(A(b.baseLayerPicker)&&!b.baseLayerPicker.isDestroyed()&&!M){b.baseLayerPicker.destroy(),b._baseLayerPicker=void 0,b.imageryLayers.remove(b.imageryLayers.get(b.imageryLayers.length-1));const H=Z("Assets/Textures/NaturalEarthII"),oe=b.imageryLayers.addImageryProvider(new Cesium.TileMapServiceImageryProvider({url:H}));b.imageryLayers.lowerToBottom(oe)}else if(!A(b.baseLayerPicker)||b.baseLayerPicker.isDestroyed()){const H=(!Cesium.defined(b.scene.globe)||e.globe!==!1)&&(!Cesium.defined(b.baseLayerPicker)||e.baseLayerPicker!==!1);if(H&&A(e.imageryProvider))throw new F(`options.imageryProvider is not available when using the BaseLayerPicker widget.
        Either specify options.selectedImageryProviderViewModel instead or set options.baseLayerPicker to false.`);if(!H&&A(e.selectedImageryProviderViewModel))throw new F(`options.selectedImageryProviderViewModel is not available when not using the BaseLayerPicker widget.
        Either specify options.imageryProvider instead or set options.baseLayerPicker to true.`);if(H&&A(e.terrainProvider))throw new F(`options.terrainProvider is not available when using the BaseLayerPicker widget.
        Either specify options.selectedTerrainProviderViewModel instead or set options.baseLayerPicker to false.`);if(!H&&A(e.selectedTerrainProviderViewModel))throw new F(`options.selectedTerrainProviderViewModel is not available when not using the BaseLayerPicker widget.
        Either specify options.terrainProvider instead or set options.baseLayerPicker to true.`);if(H){const oe=$(e.imageryProviderViewModels,N()),Y=$(e.terrainProviderViewModels,z()),W=new G(B,{globe:b.scene.globe,imageryProviderViewModels:oe,selectedImageryProviderViewModel:oe[0],terrainProviderViewModels:Y,selectedTerrainProviderViewModel:Y[0]}),q=B==null?void 0:B.getElementsByClassName("cesium-baseLayerPicker-dropDown"),K=q==null?void 0:q[0];b._baseLayerPickerDropDown=K,b._baseLayerPicker=W,b.imageryLayers.raiseToTop(b.imageryLayers.get(0)),L(B,W)}}b.viewerWidgetResized.raiseEvent({type:"baseLayerPicker",status:M?"added":"removed",target:B})}),a.watch(()=>e.navigationHelpButton,M=>{const{viewer:b}=i,B=b._toolbar,{defined:A,defaultValue:Z,NavigationHelpButton:F}=Cesium;if(A(b.navigationHelpButton)&&!b.navigationHelpButton.isDestroyed()&&!M)b.navigationHelpButton.destroy(),b._navigationHelpButton=void 0;else if(!A(b.navigationHelpButton)||b.navigationHelpButton.isDestroyed()){let $=!0;try{if(A(window.localStorage)){const z=window.localStorage.getItem("cesium-hasSeenNavHelp");A(z)&&Boolean(z)?$=!1:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}}catch(z){}const N=new F({container:B,instructionsInitiallyVisible:Z(e.navigationInstructionsInitiallyVisible,$)});b._navigationHelpButton=N,L(B,N)}b.viewerWidgetResized.raiseEvent({type:"navigationHelpButton",status:M?"added":"removed",target:B})}),a.watch(()=>e.animation,M=>{const{viewer:b,viewerElement:B}=i,{defined:A,Animation:Z,AnimationViewModel:F}=Cesium;let $;if(A(b.animation)&&!b.animation.isDestroyed()&&!M)$=b.animation.container,B==null||B.removeChild($),b.animation.destroy(),b._animation=void 0;else if(!A(b.animation)||b.animation.isDestroyed()){$=document.createElement("div"),$.className="cesium-viewer-animationContainer",B==null||B.appendChild($);const N=new Z($,new F(b.clockViewModel));N.viewModel.dateFormatter=T,N.viewModel.timeFormatter=V,b._animation=N}b.forceResize(),b.viewerWidgetResized.raiseEvent({type:"animation",status:M?"added":"removed",target:$})}),a.watch(()=>e.timeline,M=>{var b;const{viewer:B,viewerElement:A}=i,{defined:Z,Timeline:F}=Cesium;let $;if(Z(B.timeline)&&!B.timeline.isDestroyed()&&!M)$=B.timeline.container,A==null||A.removeChild($),B.timeline.destroy(),B._timeline=void 0;else if(!Z(B.timeline)||B.timeline.isDestroyed()){$=document.createElement("div"),$.className="cesium-viewer-timelineContainer",A==null||A.appendChild($);const N=new F($,B.clock);N.makeLabel=z=>T(z),(b=N.addEventListener)==null||b.call(N,"settime",I,!1),N.zoomTo(B.clock.startTime,B.clock.stopTime),B._timeline=N}B.forceResize(),B.viewerWidgetResized.raiseEvent({type:"timeline",status:M?"added":"removed",target:$})}),a.watch(()=>e.fullscreenButton,M=>{const{viewer:b,viewerElement:B}=i,{defined:A,FullscreenButton:Z}=Cesium;let F;if(A(b.fullscreenButton)&&!b.fullscreenButton.isDestroyed()&&!M)F=b.fullscreenButton.container,B==null||B.removeChild(F),b.fullscreenButton.destroy(),b._fullscreenButton=void 0;else if(!A(b.fullscreenButton)||b.fullscreenButton.isDestroyed()){F=document.createElement("div"),F.className="cesium-viewer-fullscreenContainer",B==null||B.appendChild(F);const $=new Z(F,B);b._fullscreenButton=$}b.forceResize(),b.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:M?"added":"removed",target:F})}),a.watch(()=>e.fullscreenElement,M=>{const{viewer:b}=i,{defined:B}=Cesium;!B(b.fullscreenButton)||B(M)&&(b.fullscreenButton.viewModel.fullscreenElement=M)}),a.watch(()=>e.vrButton,M=>{const{viewer:b,viewerElement:B}=i,{defined:A,VRButton:Z}=Cesium;let F;if(A(b.vrButton)&&!b.vrButton.isDestroyed()&&!M)F=b.vrButton.container,B==null||B.removeChild(F),b.vrButton.destroy(),b._vrButton=void 0;else if(!A(b.vrButton)||b.vrButton.isDestroyed()){F=document.createElement("div"),F.className="cesium-viewer-vrContainer",B==null||B.appendChild(F);const $=new Z(F,b.scene,B),N=$.viewModel.command;$.viewModel._command=function(z){N(),R(b,z.isVRMode)},b._vrButton=$}b.forceResize(),b.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:M?"added":"removed",target:F})}),a.watch(()=>e.useDefaultRenderLoop,M=>{i.viewer.useDefaultRenderLoop=M}),a.watch(()=>e.sceneMode,M=>{const{SceneMode:b}=Cesium;(b.COLUMBUS_VIEW===M||b.MORPHING===M||b.SCENE2D===M||b.SCENE3D===M)&&(i.viewer.scene.mode=M)}),a.watch(()=>e.shouldAnimate,M=>{i.viewer.clock.shouldAnimate=M}),a.watch(()=>e.terrainExaggeration,M=>{i.viewer._terrainExaggeration=M}),a.watch(()=>e.shadows,M=>{i.viewer.scene.shadowMap.enabled=M}),a.watch(()=>e.terrainProvider,M=>{M&&(i.viewer.terrainProvider=M)}),a.watch(()=>e.camera,M=>{Fs(i.viewer,M)},{deep:!0}),a.watch(()=>e.imageryProvider,(M,b)=>{const{viewer:B}=i,{defined:A}=Cesium;if(A(M)){for(let Z=0;Z<B.imageryLayers.length;Z++)B.imageryLayers.get(Z).imageryProvider===b&&B.imageryLayers.remove(B.imageryLayers[Z]);M&&B.imageryLayers.addImageryProvider(M)}}),a.watch(()=>e.showCredit,M=>{const{viewer:b}=i;b.cesiumWidget.creditContainer.style.display=M?"inline":"none",b.viewerWidgetResized.raiseEvent({type:"credit",status:M?"added":"removed",target:b.cesiumWidget.creditContainer})}),a.watch(()=>e.debugShowFramesPerSecond,M=>{const{viewer:b}=i;b.scene.debugShowFramesPerSecond=M});const g=async function(){m.debug("beforeLoad - viewer"),Ee(i,"beforeLoad")&&u("beforeLoad",i),d.value.__scriptPromise=d.value.__scriptPromise||P(),await d.value.__scriptPromise},v=async function(){var M,b,B;if(m.debug("loading-viewer"),i.mounted||(await g(),typeof Cesium=="undefined"))return!1;const{Ion:A,buildModuleUrl:Z,TileMapServiceImageryProvider:F,Viewer:$,defined:N,Math:z,Event:G}=Cesium,H=e.accessToken?e.accessToken:d.value.accessToken;A.defaultAccessToken=H;const{animation:oe,baseLayerPicker:Y,fullscreenButton:W,vrButton:q,geocoder:K,homeButton:U,infoBox:k,sceneModePicker:ee,selectionIndicator:X,timeline:Q,navigationHelpButton:te,navigationInstructionsInitiallyVisible:le,scene3DOnly:se,shouldAnimate:ue,clockViewModel:ce,selectedImageryProviderViewModel:fe,imageryProviderViewModels:ge,selectedTerrainProviderViewModel:pe,terrainProviderViewModels:de,imageryProvider:me,terrainProvider:D,skyBox:J,skyAtmosphere:re,fullscreenElement:ae,useDefaultRenderLoop:ve,targetFrameRate:Pe,showRenderLoopErrors:De,useBrowserRecommendedResolution:_e,automaticallyTrackDataSourceClocks:Oe,contextOptions:ze,sceneMode:ht,mapProjection:Ue,globe:$e,orderIndependentTranslucency:Ve,creditContainer:Je,creditViewport:Tt,dataSources:Mi,terrainExaggeration:Li,shadows:su,terrainShadows:Ka,mapMode2D:Ja,projectionPicker:Ge,requestRenderMode:es,maximumRenderTimeChange:We,camera:Te,navigation:yt}=e,je=Z("Assets/Textures/NaturalEarthII");let ft={animation:oe,baseLayerPicker:Y,fullscreenButton:W,vrButton:q,geocoder:K,homeButton:U,infoBox:k,sceneModePicker:ee,selectionIndicator:X,timeline:Q,navigationHelpButton:te,navigationInstructionsInitiallyVisible:le,scene3DOnly:se,shouldAnimate:ue,clockViewModel:ce,selectedImageryProviderViewModel:fe,imageryProviderViewModels:ge,selectedTerrainProviderViewModel:pe,terrainProviderViewModels:de,imageryProvider:Dr(me)?new F({url:je}):me,terrainProvider:D,skyBox:J,skyAtmosphere:re,fullscreenElement:Dr(ae)?ie(s):ae,useDefaultRenderLoop:ve,targetFrameRate:Pe,showRenderLoopErrors:De,useBrowserRecommendedResolution:_e,automaticallyTrackDataSourceClocks:Oe,contextOptions:ze,sceneMode:ht,mapProjection:Ue,globe:$e,orderIndependentTranslucency:Ve,creditContainer:Je,creditViewport:Tt,dataSources:Mi,terrainExaggeration:Li,shadows:su,terrainShadows:Ka,mapMode2D:Ja,projectionPicker:Ge,requestRenderMode:es,maximumRenderTimeChange:We,navigation:yt};ft=As(ft),Cesium.VERSION>="1.83"&&delete ft.terrainExaggeration;let Me;globalThis.mars3d?(i.map=new mars3d.Map(ie(s).id,ft),Me=(M=i.map)==null?void 0:M._viewer):globalThis.DC?(i.dcViewer=new DC.Viewer(ie(s).id,ft),Me=(b=i.dcViewer)==null?void 0:b.delegate):globalThis.XE?(i.earth=new globalThis.XE.Earth(ie(s),ft),Me=(B=i.earth)==null?void 0:B.czm.viewer):Me=new $(ie(s),ft),i.Cesium=Cesium,i.viewer=Me,i.viewerElement=Me._element,i.mounted=!0,Cesium.VERSION>="1.83"&&(Me.scene.globe.terrainExaggeration=Li),N(Te)&&Fs(Me,Te),Ee(i,"update:camera")&&Me.camera.changed.addEventListener(()=>{const vn=Me.camera.positionCartographic;let Po;Re(Te.position,"lng")?Po={position:{lng:z.toDegrees(vn.longitude),lat:z.toDegrees(vn.latitude),height:vn.height},heading:z.toDegrees(Me.camera.heading||360),pitch:z.toDegrees(Me.camera.pitch||-90),roll:z.toDegrees(Me.camera.roll||0)}:Po={position:{x:Me.camera.position.x,y:Me.camera.position.y,z:Me.camera.position.z},heading:Me.camera.heading||2*Math.PI,pitch:Me.camera.pitch||-Math.PI/2,roll:Me.camera.roll||0},u("update:camera",Po)}),N(Me.animation)&&(Me.animation.viewModel.dateFormatter=T,Me.animation.viewModel.timeFormatter=V),N(Me.timeline)&&(Me.timeline.makeLabel=vn=>T(vn),Me.timeline.zoomTo(Me.clock.startTime,Me.clock.stopTime)),!e.showCredit&&(Me.cesiumWidget.creditContainer.style.display="none"),e.debugShowFramesPerSecond&&(Me.scene.debugShowFramesPerSecond=!0),Me.viewerWidgetResized=Me.viewerWidgetResized||new G,Me.viewerWidgetResized.addEventListener(S),Me.imageryLayers.layerAdded.addEventListener(x),h.registerEvents(!0);const Bi={Cesium,viewer:Me,vm:i.proxy};return globalThis.XE?Object.assign(Bi,{earth:i.earth}):globalThis.mars3d?Object.assign(Bi,{map:i.map}):globalThis.DC&&Object.assign(Bi,{dcViewer:i.dcViewer}),Ee(i,"ready")&&u("ready",Bi),c==null||c.emit("ready",Bi),a.nextTick(()=>{Me.resize(),S({type:"viewer",status:"added",target:Me.container}),l.value=!0}),m.debug("loaded-viewer"),Object.assign(i.proxy,{cesiumObject:Me}),Bi},w=async function(){if(!i.mounted)return!1;m.debug("viewer---unloading");let M;d.value.__viewerUnloadingPromise=new Promise((N,z)=>{M=N});for(let N=0;N<i.children.length;N++)await i.children[N].proxy.unload();i.children.length=0;const{viewer:b,earth:B,map:A,dcViewer:Z}=i;globalThis.Cesium&&(b.imageryLayers.layerAdded.removeEventListener(x),h.registerEvents(!1)),b._vcPickScreenSpaceEventHandler&&b._vcPickScreenSpaceEventHandler.destroy(),b._vcViewerScreenSpaceEventHandler&&b._vcViewerScreenSpaceEventHandler.destroy(),b._vcPickScreenSpaceEventHandler=void 0,b._vcViewerScreenSpaceEventHandler=void 0,globalThis.XE?B&&B.destroy():globalThis.mars3d?A&&A.destroy():globalThis.DC?Z&&Z.destroy():b&&b.destroy(),i.viewer=void 0,i.mounted=!1;const{removeCesiumScript:F}=e;if(F&&globalThis.Cesium){const N=document.getElementsByTagName("script"),z=[];for(const H of N)H.src.indexOf("/Cesium.js")>-1&&z.push(H),H.src.indexOf("/Workers/zlib.min.js")>-1&&z.push(H),globalThis.XE&&(H.src.indexOf("/rxjs.umd.min.js")>-1&&z.push(H),H.src.indexOf("/XbsjCesium.js")>-1&&z.push(H),H.src.indexOf("/viewerCesiumNavigationMixin.js")>-1&&z.push(H),H.src.indexOf("/XbsjEarth.js")>-1&&z.push(H)),p.includes(H.src)&&!z.includes(H)&&z.push(H);const G=document.getElementsByTagName("link");for(const H of G)H.href.includes("Widgets/widgets.css")&&!z.includes(H)&&z.push(H),p.includes(H.href)&&!z.includes(H)&&z.push(H);z.forEach(H=>{H.parentNode&&H.parentNode.removeChild(H)}),globalThis.Cesium&&(globalThis.Cesium=void 0),globalThis.XbsjCesium&&(globalThis.XbsjCesium=void 0),globalThis.XbsjEarth&&(globalThis.XbsjEarth=void 0),globalThis.XE&&(globalThis.XE=void 0),globalThis.mars3d&&(globalThis.mars3d=void 0),globalThis.DC&&(globalThis.DC=void 0),globalThis.DcCore&&(globalThis.DcCore=void 0),d.value.__scriptPromise=void 0,p=[]}return Ee(i,"destroyed")&&u("destroyed",i),m.debug("viewer---unloaded"),M(!0),d.value.__viewerUnloadingPromise=void 0,l.value=!1,!0},C=function(){return w().then(()=>v())},P=async function(){var M;if(m.debug("getCesiumScript"),globalThis.Cesium)return Promise.resolve(globalThis.Cesium);{let b=e.cesiumPath?e.cesiumPath:d.value.cesiumPath;const B=YE(b);if(b==null?void 0:b.includes(".js"))b.includes("dc.base")?(p.push(b),p.push(b.replace("dc.base","dc.core")),p.push(b.replace("dc.base","dc.core").replace(".js",".css"))):b.includes("/XbsjEarth.js")?p.push(b):(p.push(b),p.push(`${B}/Widgets/widgets.css`));else{(b==null?void 0:b.lastIndexOf("/"))!==(b==null?void 0:b.length)-1&&(b+="/");const F=w5(b),N=(((M=d.value.cfg)==null?void 0:M.include)||"mars3d").split(","),z={};for(let G=0,H=N.length;G<H;G++){const oe=N[G];z[oe]||(z[oe]=!0,p.push(...F[oe]))}}const A=p;if(!(b==null?void 0:b.includes(".js"))){const F=p.find($=>$.includes("Cesium.js"));await _(F),A.splice(A.indexOf(F),1)}const Z=[];return A.forEach(F=>{new RegExp("\\.css").test(F)?Z.push(E(F)):Z.push(_(F))}),Promise.all(Z).then(()=>{if(globalThis.Cesium)return Ee(i,"cesiumReady")&&u("cesiumReady",globalThis.Cesium),globalThis.Cesium;if(globalThis.XE)return globalThis.XE.ready().then(()=>(Ee(i,"cesiumReady")&&u("cesiumReady",globalThis.Cesium),globalThis.Cesium));if(globalThis.DC)return globalThis.DC.use(globalThis.DcCore.default||globalThis.DcCore),globalThis.DC.baseUrl=`${B}/resources/`,globalThis.DC.ready(()=>(globalThis.Cesium=DC.Namespace.Cesium,Ee(i,"cesiumReady")&&u("cesiumReady",globalThis.DC),globalThis.Cesium)),globalThis.Cesium;o(new Error("VueCesium ERROR: Error loading CesiumJS!"))})}},_=M=>{const b=document.createElement("script");return b.async=!0,b.src=M,document.body.appendChild(b),new Promise((B,A)=>{b.onload=()=>{B(!0)}})},E=M=>{const b=document.createElement("link");return b.rel="stylesheet",b.href=M,document.head.appendChild(b),new Promise((B,A)=>{b.onload=()=>{B(!0)}})},S=M=>{var b,B;const{viewer:A}=i,Z=A._toolbar;Z!==void 0&&getComputedStyle(Z).visibility!=="hidden"&&getComputedStyle(Z).display!=="none"?f.toolbarContainerRC=Z.getBoundingClientRect():f.toolbarContainerRC=void 0;const F=A.bottomContainer;F!==void 0&&getComputedStyle(F).visibility!=="hidden"&&getComputedStyle(F).display!=="none"?f.bottomContainerRC=F.getBoundingClientRect():f.bottomContainerRC=void 0;const $=(b=A.timeline)==null?void 0:b.container;$!==void 0&&getComputedStyle($).visibility!=="hidden"&&getComputedStyle($).display!=="none"?f.timelineContainerRC=$.getBoundingClientRect():f.timelineContainerRC=void 0;const N=(B=A.animation)==null?void 0:B.container;N!==void 0&&getComputedStyle(N).visibility!=="hidden"&&getComputedStyle(N).display!=="none"?f.animationContainerRC=N.getBoundingClientRect():f.animationContainerRC=void 0,A.resize(),Ee(i,"viewerWidgetResized")&&u("viewerWidgetResized",M)},x=M=>{const b=i.viewer,{autoSortImageryLayers:B}=e;b.baseLayerPicker&&b.imageryLayers.raiseToTop(M);const{defined:A}=Cesium;B&&(M.sortOrder=A(M.sortOrder)?M.sortOrder:9999,b.imageryLayers._layers.sort((Z,F)=>Z.sortOrder-F.sortOrder),b.imageryLayers._update())},T=function(M,b,B){const{JulianDate:A}=Cesium;let Z;if(e.UTCOffset){M=A.addMinutes(M,e.UTCOffset,new A);const z=new Date().getTimezoneOffset()-e.UTCOffset;Z=z===0?"UTC":"UTC+"+-(z/60)}else Z=new Date().getTimezoneOffset()===0?"UTC":"UTC+"+-(new Date().getTimezoneOffset()/60);const F=A.toDate(M),$=F.toLocaleString(y("name"),{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).replace(/,/g,""),N=F.toLocaleString(y("name"),{year:"numeric",month:"short",day:"numeric"}).replace(/,/g,"");return!B&&(b||F.getHours()+F.getMinutes()===0)?N:(e.TZCode&&(Z=e.TZCode),B?`${$} ${Z}`:`${N} ${$} ${Z}`)},V=function(M,b){return T(M,b,!0)},I=function(M){const b=M.clock;b.currentTime=M.timeJulian,b.shouldAnimate=!1},R=function(M,b){const B=M._geocoder,A=M._homeButton,Z=M._sceneModePicker,F=M._projectionPicker,$=M._baseLayerPicker,N=M._animation,z=M._timeline,G=M._fullscreenButton,H=M._infoBox,oe=M._selectionIndicator,Y=b?"hidden":"visible",{defined:W}=Cesium;if(W(B)&&(B.container.style.visibility=Y),W(A)&&(A.container.style.visibility=Y),W(Z)&&(Z.container.style.visibility=Y),W(F)&&(F.container.style.visibility=Y),W($)&&($.container.style.visibility=Y),W(N)&&(N.container.style.visibility=Y),W(z)&&(z.container.style.visibility=Y),W(G)&&G.viewModel.isFullscreenEnabled&&(G.container.style.visibility=Y),W(H)&&(H.container.style.visibility=Y),W(oe)&&(oe.container.style.visibility=Y),M._container){const q=b||!W(G)?0:G.container.clientWidth;M._vrButton.container.style.right=q+"px",M.forceResize()}},L=function(M,b){Array.prototype.slice.call(M.children).forEach(A=>{switch(A.className){case"cesium-viewer-geocoderContainer":A.customIndex=1;break;case"cesium-button cesium-toolbar-button cesium-home-button":A.customIndex=2;break;case"cesium-sceneModePicker-wrapper cesium-toolbar-button":A.customIndex=3;break;case"cesium-projectionPicker-wrapper cesium-toolbar-button":A.customIndex=4;break;case"cesium-button cesium-toolbar-button":case"cesium-baseLayerPicker-dropDown":A.customIndex=5;break;case"cesium-navigationHelpButton-wrapper":A.customIndex=6;break}});const B=[];Array.prototype.slice.call(M.children).forEach(A=>{B.push(A)}),B.sort(function(A,Z){return A.customIndex-Z.customIndex});for(let A=0;A<B.length;A++)M.appendChild(B[A])},j=function(){return _n({},{get layout(){return f},get vm(){return i},get Cesium(){return i.Cesium},get viewer(){return i.viewer},get dataSources(){var M;return(M=i.viewer)==null?void 0:M.dataSources},get entities(){var M;return(M=i.viewer)==null?void 0:M.entities},get imageryLayers(){var M;return(M=i.viewer)==null?void 0:M.imageryLayers},get primitives(){var M;return(M=i.viewer)==null?void 0:M.scene.primitives},get groundPrimitives(){var M;return(M=i.viewer)==null?void 0:M.scene.groundPrimitives},get postProcessStages(){var M;return(M=i.viewer)==null?void 0:M.postProcessStages},get creatingPromise(){return r}})};return Object.defineProperties(i,{cesiumObject:{enumerable:!0,get:()=>i.viewer}}),a.onMounted(async()=>{var M;try{m.debug("viewer - onMounted"),await((M=d.value)==null?void 0:M.__viewerUnloadingPromise),n(v())}catch(b){o(b)}}),a.onUnmounted(()=>{m.debug("viewer - onUnmounted"),w().then(()=>{c.all.clear()})}),{isReady:l,load:v,unload:w,reload:C,getServices:j,viewerRef:s,creatingPromise:r}}const Wm=[{name:"imageryLayers",events:["layerAdded","layerMoved","layerRemoved","layerShownOrHidden"]},{name:"dataSources",events:["dataSourceAdded","dataSourceMoved","dataSourceRemoved"]},{name:"entities",events:["collectionChanged"]},{name:"scene",events:["morphComplete","morphStart","postRender","postUpdate","preRender","preUpdate","renderError","terrainProviderChanged"]},{name:"camera",events:["changed","moveEnd","moveStart"]},{name:"clock",events:["onStop","onTick"]},{name:"terrainProvider",events:["errorEvent"]},{name:["infoBox","viewModel"],events:["cameraClicked","closeClicked"]},{name:["scene","globe"],events:["imageryLayersUpdatedEvent","terrainProviderChanged","tileLoadProgressEvent"]}],P5=Il.map(e=>hd(e)),O5=["beforeLoad","cesiumReady","ready","destroyed","update:camera","viewerWidgetResized",...Il,...P5,...Im];Wm.reduce((e,t)=>e.concat(t.events),O5);const kl={xs:18,sm:24,md:32,lg:38,xl:46},qm={size:String};function Zm(e,t=kl){return a.computed(()=>e.size!==void 0?{fontSize:e.size in t?`${t[e.size]}px`:e.size}:null)}function Xe(e,t){return e!==void 0?e():t}function ui(e,t){return e!==void 0?t.concat(e()):t}function E5(e,t,i,n,o,r){t.key=n+o;const s=a.h(e,t,i);return o===!0?a.withDirectives(s,r()):s}const Xm={...qm,tag:{type:String,default:"i"},name:String,color:String,hoverColor:String,left:Boolean,right:Boolean};var eo=a.defineComponent({name:"VcIcon",props:Xm,setup(e,{slots:t}){const i=Zm(e),n=a.computed(()=>{const s=i.value;if(!!s)return e.color&&(s.color=e.color),e.hoverColor&&(s["--hover-color"]=e.hoverColor),s}),o=a.computed(()=>"vc-icon"+(e.left===!0?" on-left":"")+(e.right===!0?" on-right":"")+(e.color!==void 0?` text-${e.color}`:"")),r=a.computed(()=>{let s,l=e.name;if(!l)return{none:!0,cls:o.value};if(l.startsWith("M")===!0){const[u,d]=l.split("|");return{svg:!0,cls:o.value,nodes:u.split("&&").map(m=>{const[h,f,p]=m.split("@@");return a.h("path",{style:f,d:h,transform:p})}),viewBox:d!==void 0?d:"0 0 24 24"}}if(l.startsWith("img:")===!0)return{img:!0,cls:o.value,src:l.substring(4)};if(l.startsWith("svguse:")===!0){const[u,d]=l.split("|");return{svguse:!0,cls:o.value,src:u.substring(7),viewBox:d!==void 0?d:"0 0 24 24"}}let c=" ";return/^[l|f]a[s|r|l|b|d]{0,1} /.test(l)||l.startsWith("icon-")===!0?s=l:l.startsWith("bt-")===!0?s=`bt ${l}`:l.startsWith("eva-")===!0?s=`eva ${l}`:/^ion-(md|ios|logo)/.test(l)===!0?s=`ionicons ${l}`:l.startsWith("ion-")===!0?s=`ionicons ion-md${l.substr(3)}`:l.startsWith("mdi-")===!0?s=`mdi ${l}`:l.startsWith("iconfont ")===!0?s=`${l}`:l.startsWith("ti-")===!0?s=`themify-icon ${l}`:l.startsWith("vc-")===!0?s=`vc-icons ${l}`:(s="notranslate material-icons",l.startsWith("o_")===!0?(l=l.substring(2),s+="-outlined"):l.startsWith("r_")===!0?(l=l.substring(2),s+="-round"):l.startsWith("s_")===!0&&(l=l.substring(2),s+="-sharp"),c=l),{cls:s+" "+o.value,content:c}});return()=>{const s={class:r.value.cls,style:n.value,"aria-hidden":"true",role:"presentation",viewBox:"",src:""};return r.value.none===!0?a.h(e.tag,s,Xe(t.default)):r.value.img===!0?(s.src=r.value.src,s.style&&(s.style.width=s.style.fontSize,s.style.height=s.style.fontSize),a.h("img",s)):r.value.svg===!0?(s.viewBox=r.value.viewBox,s["aria-hidden"]="true",s.style&&(s.style.width=s.style.fontSize,s.style.height=s.style.fontSize),a.h("svg",s,ui(t.default,r.value.nodes))):r.value.svguse===!0?(s.viewBox=r.value.viewBox,s["aria-hidden"]="true",s.style&&(s.style.width=s.style.fontSize,s.style.height=s.style.fontSize),a.h("svg",s,ui(t.default,[a.h("use",{"xlink:href":r.value.src})]))):a.h(e.tag,s,ui(t.default,[r.value.content]))}}});const di={size:{type:[Number,String],default:"1em"},color:String};function mi(e){return{cSize:a.computed(()=>e.size in kl?`${kl[e.size]}px`:e.size),classes:a.computed(()=>"vc-spinner"+(e.color?` text-${e.color}`:""))}}const M5=[a.h("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[a.h("circle",{cx:"5",cy:"50",r:"5"},[a.h("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),a.h("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})]),a.h("circle",{cx:"27",cy:"5",r:"5"},[a.h("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),a.h("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})]),a.h("circle",{cx:"49",cy:"50",r:"5"},[a.h("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),a.h("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})])])];var zl=a.defineComponent({name:"VcSpinnerBall",props:di,setup(e){const{cSize:t,classes:i}=mi(e);return()=>a.h("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg"},M5)}});const S5=[a.h("rect",{y:"10",width:"15",height:"120",rx:"6"},[a.h("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),a.h("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),a.h("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},[a.h("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),a.h("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),a.h("rect",{x:"60",width:"15",height:"140",rx:"6"},[a.h("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),a.h("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),a.h("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},[a.h("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),a.h("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),a.h("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},[a.h("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),a.h("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})])];var $l=a.defineComponent({name:"VcSpinnerBars",props:di,setup(e){const{cSize:t,classes:i}=mi(e);return()=>a.h("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg"},S5)}});const x5=[a.h("circle",{cx:"15",cy:"15",r:"15"},[a.h("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),a.h("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),a.h("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[a.h("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),a.h("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),a.h("circle",{cx:"105",cy:"15",r:"15"},[a.h("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),a.h("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var Gl=a.defineComponent({name:"VcSpinnerDots",props:di,setup(e){const{cSize:t,classes:i}=mi(e);return()=>a.h("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},x5)}});const T5=[a.h("g",{transform:"translate(-20,-20)"},[a.h("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[a.h("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),a.h("g",{transform:"translate(20,20) rotate(15 50 50)"},[a.h("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[a.h("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var Ul=a.defineComponent({name:"VcSpinnerGears",props:di,setup(e){const{cSize:t,classes:i}=mi(e);return()=>a.h("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},T5)}});const A5=[a.h("g",[a.h("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),a.h("clipPath",{id:"uil-hourglass-clip1"},[a.h("rect",{x:"15",y:"20",width:" 70",height:"25"},[a.h("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),a.h("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),a.h("clipPath",{id:"uil-hourglass-clip2"},[a.h("rect",{x:"15",y:"55",width:" 70",height:"25"},[a.h("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),a.h("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),a.h("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),a.h("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),a.h("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var Hl=a.defineComponent({name:"VcSpinnerHourglass",props:di,setup(e){const{cSize:t,classes:i}=mi(e);return()=>a.h("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},A5)}});const I5=[a.h("g",{"stroke-width":"4","stroke-linecap":"round"},[a.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(180)"},[a.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})]),a.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(210)"},[a.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0",repeatCount:"indefinite"})]),a.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(240)"},[a.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1",repeatCount:"indefinite"})]),a.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(270)"},[a.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15",repeatCount:"indefinite"})]),a.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(300)"},[a.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25",repeatCount:"indefinite"})]),a.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(330)"},[a.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35",repeatCount:"indefinite"})]),a.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(0)"},[a.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45",repeatCount:"indefinite"})]),a.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(30)"},[a.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55",repeatCount:"indefinite"})]),a.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(60)"},[a.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65",repeatCount:"indefinite"})]),a.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(90)"},[a.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7",repeatCount:"indefinite"})]),a.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(120)"},[a.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85",repeatCount:"indefinite"})]),a.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(150)"},[a.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})])])];var Wl=a.defineComponent({name:"VcSpinnerIos",props:di,setup(e){const{cSize:t,classes:i}=mi(e);return()=>a.h("svg",{class:i.value,width:t.value,height:t.value,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64"},I5)}});const D5=[a.h("circle",{cx:"50",cy:"50",r:"44",fill:"none","stroke-width":"4","stroke-opacity":".5",stroke:"currentColor"}),a.h("circle",{cx:"8",cy:"54",r:"6",fill:"currentColor","stroke-width":"3",stroke:"currentColor"},[a.h("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 48",to:"360 50 52",dur:"2s",repeatCount:"indefinite"})])];var ql=a.defineComponent({name:"VcSpinnerOrbit",props:di,setup(e){const{cSize:t,classes:i}=mi(e);return()=>a.h("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},D5)}});const R5=[a.h("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[a.h("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),a.h("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[a.h("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])];var Zl=a.defineComponent({name:"VcSpinnerOval",props:di,setup(e){const{cSize:t,classes:i}=mi(e);return()=>a.h("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},R5)}});const L5=[a.h("g",{fill:"none","fill-rule":"evenodd","stroke-width":"2"},[a.h("circle",{cx:"22",cy:"22",r:"1"},[a.h("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),a.h("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]),a.h("circle",{cx:"22",cy:"22",r:"1"},[a.h("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),a.h("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})])])];var Xl=a.defineComponent({name:"VcSpinnerPuff",props:di,setup(e){const{cSize:t,classes:i}=mi(e);return()=>a.h("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"},L5)}});const B5=[a.h("g",{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)","stroke-width":"2"},[a.h("circle",{cx:"22",cy:"22",r:"6"},[a.h("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),a.h("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),a.h("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),a.h("circle",{cx:"22",cy:"22",r:"6"},[a.h("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),a.h("animate",{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),a.h("animate",{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),a.h("circle",{cx:"22",cy:"22",r:"8"},[a.h("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"})])])];var Yl=a.defineComponent({name:"VcSpinnerRings",props:di,setup(e){const{cSize:t,classes:i}=mi(e);return()=>a.h("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},B5)}});const j5=[a.h("defs",[a.h("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},[a.h("stop",{"stop-color":"currentColor","stop-opacity":"0",offset:"0%"}),a.h("stop",{"stop-color":"currentColor","stop-opacity":".631",offset:"63.146%"}),a.h("stop",{"stop-color":"currentColor",offset:"100%"})])]),a.h("g",{transform:"translate(1 1)",fill:"none","fill-rule":"evenodd"},[a.h("path",{d:"M36 18c0-9.94-8.06-18-18-18",stroke:"url(#a)","stroke-width":"2"},[a.h("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})]),a.h("circle",{fill:"currentColor",cx:"36",cy:"18",r:"1"},[a.h("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})])])];var Ql=a.defineComponent({name:"VcSpinnerTail",props:di,setup(e){const{cSize:t,classes:i}=mi(e);return()=>a.h("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},j5)}}),ha=a.defineComponent({name:"VcSpinner",props:{...di,thickness:{type:Number,default:5}},setup(e){const{cSize:t,classes:i}=mi(e);return()=>a.h("svg",{class:i.value+" vc-spinner-mat",width:t.value,height:t.value,viewBox:"25 25 50 50"},[a.h("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":e.thickness,"stroke-miterlimit":"10"})])}});const Ym={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},F5=Object.keys(Ym),V5={align:{type:String,validator:e=>F5.includes(e)}};function N5(e){return a.computed(()=>{const t=e.align===void 0?e.vertical===!0?"stretch":"left":e.align;return`${e.vertical===!0?"items":"justify"}-${Ym[t]}`})}const Qm={none:0,xs:4,sm:8,md:16,lg:24,xl:32},k5={xs:8,sm:10,md:14,lg:20,xl:24},z5={...qm,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,round:Boolean,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...V5.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean};function $5(e){const t=Zm(e,k5),i=N5(e),n=a.computed(()=>{const m=e.fab===!1&&e.fabMini===!1?t.value:{};return e.padding!==void 0?Object.assign({},m,{padding:e.padding.split(/\s+/).map(h=>h in Qm?Qm[h]+"px":h).join(" "),minWidth:"0",minHeight:"0"}):m}),o=a.computed(()=>e.rounded===!0||e.fab===!0||e.fabMini===!0),r=a.computed(()=>e.disable!==!0&&e.loading!==!0),s=a.computed(()=>r.value===!0?e.tabindex||0:-1),l=a.computed(()=>e.flat===!0?"flat":e.outline===!0?"outline":e.push===!0?"push":e.unelevated===!0?"unelevated":"standard"),c=a.computed(()=>{const m={tabindex:s.value};return e.type!=="a"&&(m.type=e.type),m.role=e.type==="a"?"link":"button",e.loading===!0&&e.percentage!==void 0&&Object.assign(m,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.percentage}),e.disable===!0&&(m.disabled="",m["aria-disabled"]="true"),m}),u=a.computed(()=>{let m;return e.color!==void 0?e.flat===!0||e.outline===!0?m=`text-${e.textColor||e.color}`:m=`bg-${e.color} text-${e.textColor||"white"}`:e.textColor&&(m=`text-${e.textColor}`),`vc-btn--${l.value} vc-btn--${e.round===!0?"round":`rectangle${o.value===!0?" vc-btn--rounded":""}`}`+(m!==void 0?" "+m:"")+(r.value===!0?" vc-btn--actionable vc-focusable vc-hoverable":e.disable===!0?" disabled":"")+(e.fab===!0?" vc-btn--fab":e.fabMini===!0?" vc-btn--fab-mini":"")+(e.noCaps===!0?" vc-btn--no-uppercase":"")+(e.dense===!0?" vc-btn--dense":"")+(e.stretch===!0?" no-border-radius self-stretch":"")+(e.glossy===!0?" glossy":"")}),d=a.computed(()=>i.value+(e.stack===!0?" column":" row")+(e.noWrap===!0?" no-wrap text-no-wrap":"")+(e.loading===!0?" vc-btn__content--hidden":""));return{classes:u,style:n,innerClasses:d,attributes:c,isActionable:r}}const Kl=Mt().isIOS||navigator.vendor.toLowerCase().indexOf("apple")>-1?()=>document:e=>e,{passiveCapture:hi}=Qn;let to,io,no;const Km={...z5,percentage:{type:Number,default:0},darkPercentage:Boolean};var fa=a.defineComponent({name:"VcBtn",props:Km,emits:["click","keydown","touchstart","mousedown","keyup"],setup(e,{slots:t,emit:i}){var n;const o=(n=a.getCurrentInstance())==null?void 0:n.proxy,{classes:r,style:s,innerClasses:l,attributes:c,isActionable:u}=$5(e),d=a.ref(null),m=a.ref(null);let h=null,f,p;const y=a.computed(()=>e.label!==void 0&&e.label!==null&&e.label!==""),g=a.computed(()=>e.ripple===!1?!1:{keyCodes:13,...e.ripple===!0?{}:e.ripple}),v=a.computed(()=>{const R=Math.max(0,Math.min(100,e.percentage));return R>0?{transition:"transform 0.6s",transform:`translateX(${R-100}%)`}:{}}),w=a.computed(()=>e.loading===!0?{onMousedown:I,onTouchstart:I,onClick:I,onKeydown:I,onKeyup:I}:u.value===!0?{onClick:_,onKeydown:E,onMousedown:x,onTouchstart:S}:{}),C=a.computed(()=>[[Fm,g.value,void 0,{center:e.round}]]),P=a.computed(()=>({ref:d,class:"vc-btn vc-btn-item non-selectable no-outline "+r.value,style:s.value,...c.value,...w.value}));function _(R){var L;if(R!==void 0){if(R.defaultPrevented===!0)return;const M=document.activeElement;if(e.type==="submit"&&M!==document.body&&((L=d.value)==null?void 0:L.contains(M))===!1&&(M==null?void 0:M.contains(d.value))===!1){d.value.focus();const b=()=>{document.removeEventListener("keydown",sn,!0),document.removeEventListener("keyup",b,hi),d.value!==null&&d.value.removeEventListener("blur",b,hi)};document.addEventListener("keydown",sn,!0),document.addEventListener("keyup",b,hi),d.value.addEventListener("blur",b,hi)}}i("click",R,()=>{})}function E(R){var L,j,M;qo(R,[13,32])===!0&&(sn(R),io!==d.value&&(io!==null&&V(),(L=d.value)==null||L.focus(),io=d.value,(j=d.value)==null||j.classList.add("vc-btn--active"),document.addEventListener("keyup",T,!0),(M=d.value)==null||M.addEventListener("blur",T,hi))),i("keydown",R)}function S(R){to!==d.value&&(to!==null&&V(),to=d.value,h=Kl(R.target),h==null||h.addEventListener("touchcancel",T,hi),h==null||h.addEventListener("touchend",T,hi)),f=!0,clearTimeout(p),p=setTimeout(()=>{f=!1},200),i("touchstart",R)}function x(R){var L;no!==d.value&&(no!==null&&V(),no=d.value,(L=d.value)==null||L.classList.add("vc-btn--active"),document.addEventListener("mouseup",T,hi)),R.qSkipRipple=f===!0,i("mousedown",R)}function T(R){var L;if(!(R!==void 0&&R.type==="blur"&&document.activeElement===d.value)){if(R!==void 0&&R.type==="keyup"){if(io===d.value&&qo(R,[13,32])===!0){const j=new MouseEvent("click",R);j.qKeyEvent=!0,R.defaultPrevented===!0&&Ll(j),R.cancelBubble===!0&&Lm(j),(L=d.value)==null||L.dispatchEvent(j),sn(R),R.qKeyEvent=!0}i("keyup",R)}V()}}function V(R){const L=m.value;R!==!0&&(to===d.value||no===d.value)&&L!==null&&L!==document.activeElement&&(L.setAttribute("tabindex","-1"),L.focus()),to===d.value&&(h!==null&&(h.removeEventListener("touchcancel",T,hi),h.removeEventListener("touchend",T,hi)),to=h=null),no===d.value&&(document.removeEventListener("mouseup",T,hi),no=null),io===d.value&&(document.removeEventListener("keyup",T,!0),d.value!==null&&d.value.removeEventListener("blur",T,hi),io=null),d.value!==null&&d.value.classList.remove("vc-btn--active")}function I(R){sn(R),R.qSkipRipple=!0}return a.onBeforeUnmount(()=>{V(!0)}),Object.assign(o,{click:_}),()=>{let R=[];e.icon!==void 0&&R.push(a.h(eo,{name:e.icon,left:e.stack===!1&&y.value===!0,role:"img","aria-hidden":"true"})),y.value===!0&&R.push(a.h("span",{class:"block"},[e.label])),R=ui(t.default,R),e.iconRight!==void 0&&e.round===!1&&R.push(a.h(eo,{name:e.iconRight,right:e.stack===!1&&y.value===!0,role:"img","aria-hidden":"true"}));const L=[a.h("span",{class:"vc-focus-helper",ref:m})];return e.loading===!0&&e.percentage!==void 0&&L.push(a.h("span",{class:"vc-btn__progress absolute-full overflow-hidden"},[a.h("span",{class:"vc-btn__progress-indicator fit block"+(e.darkPercentage===!0?" vc-btn__progress--dark":""),style:v.value})])),L.push(a.h("span",{class:"vc-btn__content text-center col items-center vc-anchor--skip "+l.value},R)),e.loading!==null&&L.push(a.h(a.Transition,{name:"vc-transition--fade"},()=>e.loading===!0?[a.h("span",{key:"loading",class:"absolute-full flex flex-center"},t.loading!==void 0?t.loading():[a.h(ha)])]:null)),E5("button",P.value,L,"ripple",e.disable!==!0&&e.ripple!==!1,()=>C.value)}}});const G5={target:{type:[Boolean,String],default:!0},noParentEvent:Boolean,contextMenu:Boolean};function U5({showing:e,avoidEmit:t,configureAnchorEl:i}){const{props:n,proxy:o,emit:r}=a.getCurrentInstance(),s=a.ref(null);let l;function c(f){return s.value===null?!1:f===void 0||f.touches===void 0||f.touches.length<=1}const u={};i===void 0&&(Object.assign(u,{hide(f){o.hide(f)},toggle(f){o.toggle(f)},toggleKey(f){qo(f,13)===!0&&o.toggle(f)},contextClick(f){o.hide(f),a.nextTick(()=>{o.show(f)}),Ll(f)},mobilePrevent:Ll,mobileTouch(f){var p;if(u.mobileCleanup(f),c(f)!==!0)return;o.hide(f),(p=s.value)==null||p.classList.add("non-selectable");const y=Kl(f.target);Ht(u,"anchor",[[y,"touchmove","mobileCleanup","passive"],[y,"touchend","mobileCleanup","passive"],[y,"touchcancel","mobileCleanup","passive"],[s.value,"contextmenu","mobilePrevent","notPassive"]]),l=setTimeout(()=>{o.show(f)},300)},mobileCleanup(f){s.value.classList.remove("non-selectable"),clearTimeout(l),e.value===!0&&f!==void 0&&Hi()}}),i=function(f=n.contextMenu){if(n.noParentEvent===!0||s.value===null)return;let p;f===!0?Mt().isPhone===!0?p=[[s.value,"touchstart","mobileTouch","passive"]]:p=[[s.value,"click","hide","passive"],[s.value,"contextmenu","contextClick","notPassive"]]:p=[[s.value,"click","toggle","passive"],[s.value,"keyup","toggleKey","passive"]],Ht(u,"anchor",p)});function d(){Ai(u,"anchor")}function m(f){for(s.value=f;s.value.classList.contains("vc-anchor--skip");)s.value=s.value.parentNode;i()}function h(){if(n.target===!1||n.target==="")s.value=null;else if(n.target===!0)m(o==null?void 0:o.$el.parentNode);else{let f=n.target;if(typeof n.target=="string")try{f=document.querySelector(n.target)}catch(p){f=void 0}f!=null?(s.value=f.$el||f,i()):(s.value=null,console.error(`Anchor: target "${n.target}" not found`))}}return a.watch(()=>n.contextMenu,f=>{s.value!==null&&(d(),i(f))}),a.watch(()=>n.target,()=>{s.value!==null&&d(),h()}),a.watch(()=>n.noParentEvent,f=>{s.value!==null&&(f===!0?d():i())}),a.onMounted(()=>{h(),t!==!0&&n.modelValue===!0&&s.value===null&&r("update:modelValue",!1)}),a.onBeforeUnmount(()=>{clearTimeout(l),d()}),{anchorEl:s,canShow:c,anchorEvents:u}}function H5(e,t){const i=a.ref(null);let n;function o(l,c){const u=`${c!==void 0?"add":"remove"}EventListener`,d=c!==void 0?c:n;l!==window&&l[u]("scroll",d,Qn.passive),window[u]("scroll",d,Qn.passive),n=c}function r(){i.value!==null&&(o(i.value),i.value=null)}const s=a.watch(()=>e.noParentEvent,()=>{i.value!==null&&(r(),t())});return a.onBeforeUnmount(s),{localScrollTarget:i,unconfigureScrollTarget:r,changeScrollEvent:o}}const Jm={modelValue:{type:Boolean,default:null}},eh=["update:modelValue","before-show","show","before-hide","hide"];function th({showing:e,canShow:t=void 0,hideOnRouteChange:i=void 0,handleShow:n=void 0,handleHide:o=void 0,processOnMount:r=void 0}){const s=a.getCurrentInstance(),{props:l,emit:c,proxy:u}=s;let d;function m(w){(e==null?void 0:e.value)===!0?p(w):h(w)}function h(w){if(l.disable===!0||t!==void 0&&t(w)!==!0)return;const C=Ds(s,"onUpdate:modelValue")===!0;C===!0&&(c("update:modelValue",!0),d=w,a.nextTick(()=>{d===w&&(d=void 0)})),(l.modelValue===null||C===!1)&&f(w)}function f(w){(e==null?void 0:e.value)!==!0&&(e&&(e.value=!0),c("before-show",w),!(w&&w.cancel===!0)&&(n!==void 0?n(w):c("show",w)))}function p(w){if(l.disable===!0)return;const C=Ds(s,"onUpdate:modelValue")===!0;C===!0&&(c("update:modelValue",!1),d=w,a.nextTick(()=>{d===w&&(d=void 0)})),(l.modelValue===null||C===!1)&&y(w)}function y(w){(e==null?void 0:e.value)!==!1&&(e&&(e.value=!1),c("before-hide",w),o!==void 0?o(w):c("hide",w))}function g(w){l.disable===!0&&w===!0?Ds(s,"onUpdate:modelValue")===!0&&c("update:modelValue",!1):w===!0!==(e==null?void 0:e.value)&&(w===!0?f:y)(d)}a.watch(()=>l.modelValue,g),i!==void 0&&t5(s)===!0&&a.watch(()=>u.$route,()=>{i.value===!0&&(e==null?void 0:e.value)===!0&&p()}),r===!0&&a.onMounted(()=>{g(l.modelValue)});const v={show:h,hide:p,toggle:m};return Object.assign(u,v),v}let W5=document.body;function q5(e){const t=document.createElement("div");return e!==void 0&&(t.id=e),W5.appendChild(t),t}function Z5(e){e.remove()}const Jl=[];function X5(e){for(e=e.parent;e!=null;){if(e.type.name==="VcGlobalDialog")return!0;if(e.type.name==="VcDialog"||e.type.name==="VcMenu")return!1;e=e.parent}return!1}function ih(e,t,i,n){var o,r,s,l;let c=null;((r=(o=e.props)==null?void 0:o.teleport)==null?void 0:r.to)&&(c=(l=(s=e.props)==null?void 0:s.teleport)==null?void 0:l.to);const u=n===!0&&X5(e),d=a.ref(!1);function m(){u===!1&&c===null&&(c=q5()),d.value=!0,Jl.push(e.proxy)}function h(){var f,p;d.value=!1;const y=Jl.indexOf(e.proxy);y>-1&&Jl.splice(y,1),c!==null&&!((p=(f=e.props)==null?void 0:f.teleport)==null?void 0:p.to)&&(Z5(c),c=null)}return a.onUnmounted(h),Object.assign(e.proxy,{__vcPortalInnerRef:t}),{showPortal:m,hidePortal:h,portalIsActive:d,renderPortal:()=>u===!0?i():d.value===!0?[a.h(a.Teleport,{to:c},i())]:void 0}}const Y5={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Q5(e,t){const i=a.ref(t.value);return a.watch(t,n=>{a.nextTick(()=>{i.value=n})}),{transition:a.computed(()=>"vc-transition--"+(i.value===!0?e.transitionHide:e.transitionShow)),transitionStyle:a.computed(()=>`--vc-transition-duration: ${e.transitionDuration}ms`)}}function K5(){let e;return a.onBeforeUnmount(()=>{e=void 0}),{registerTick(t){e=t},removeTick(){e=void 0},prepareTick(){if(e!==void 0){const t=e;a.nextTick(()=>{e===t&&(e(),e=void 0)})}}}}function nh(){let e;return a.onBeforeUnmount(()=>{clearTimeout(e)}),{registerTimeout(t,i){clearTimeout(e),e=setTimeout(t,i)},removeTimeout(){clearTimeout(e)}}}const J5=[null,document,document.body,document.scrollingElement,document.documentElement];function eM(e,t){let i=p5(t);if(i===void 0){if(e==null)return window;i=e.closest(".scroll,.scroll-y,.overflow-auto")}return J5.includes(i)?window:i}let pa;function tM(){if(pa!==void 0)return pa;const e=document.createElement("p"),t=document.createElement("div");Rl(e,{width:"100%",height:"200px"}),Rl(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const i=e.offsetWidth;t.style.overflow="scroll";let n=e.offsetWidth;return i===n&&(n=t.clientWidth),t.remove(),pa=i-n,pa}let oh,rh;function ah(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function iM(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const ec={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{ec[`${e}#ltr`]=e,ec[`${e}#rtl`]=e});function sh(e,t){const i=e.split(" ");return{vertical:i[0],horizontal:ec[`${i[1]}#${t===!0?"rtl":"ltr"}`]}}function nM(e,t){let{top:i,left:n,right:o,bottom:r,width:s,height:l}=e.getBoundingClientRect();return t!==void 0&&(i-=t[1],n-=t[0],r+=t[1],o+=t[0],s+=t[0],l+=t[1]),{top:i,left:n,right:o,bottom:r,width:s,height:l,middle:n+(o-n)/2,center:i+(r-i)/2}}function oM(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function rM(e){if(Mt().isIOS===!0&&window.visualViewport!==void 0){const l=document.body.style,{offsetLeft:c,offsetTop:u}=window.visualViewport;c!==oh&&(l.setProperty("--vc-pe-left",c+"px"),oh=c),u!==rh&&(l.setProperty("--vc-pe-top",u+"px"),rh=u)}let t={};const{scrollLeft:i,scrollTop:n}=e.el;if(e.absoluteOffset===void 0)t=nM(e.anchorEl,e.cover===!0?[0,0]:e.offset);else{const{top:l,left:c}=e.anchorEl.getBoundingClientRect(),u=l+e.absoluteOffset.top,d=c+e.absoluteOffset.left;t={top:u,left:d,width:1,height:1,right:d+1,center:u,middle:d,bottom:u+1}}let o={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(o.minWidth=t.width+"px",e.cover===!0&&(o.minHeight=t.height+"px")),Object.assign(e.el.style,o);const r=oM(e.el),s={top:t[e.anchorOrigin.vertical]-r[e.selfOrigin.vertical],left:t[e.anchorOrigin.horizontal]-r[e.selfOrigin.horizontal]};aM(s,t,r,e.anchorOrigin,e.selfOrigin),o={top:s.top+"px",left:s.left+"px"},s.maxHeight!==void 0&&(o.maxHeight=s.maxHeight+"px",t.height>s.maxHeight&&(o.minHeight=o.maxHeight)),s.maxWidth!==void 0&&(o.maxWidth=s.maxWidth+"px",t.width>s.maxWidth&&(o.minWidth=o.maxWidth)),Object.assign(e.el.style,o),e.el.scrollTop!==n&&(e.el.scrollTop=n),e.el.scrollLeft!==i&&(e.el.scrollLeft=i)}function aM(e,t,i,n,o){const r=i.bottom,s=i.right,l=tM(),c=window.innerHeight-l,u=document.body.clientWidth;if(e.top<0||e.top+r>c)if(o.vertical==="center")e.top=t[n.vertical]>c/2?Math.max(0,c-r):0,e.maxHeight=Math.min(r,c);else if(t[n.vertical]>c/2){const d=Math.min(c,n.vertical==="center"?t.center:n.vertical===o.vertical?t.bottom:t.top);e.maxHeight=Math.min(r,d),e.top=Math.max(0,d-r)}else e.top=Math.max(0,n.vertical==="center"?t.center:n.vertical===o.vertical?t.top:t.bottom),e.maxHeight=Math.min(r,c-e.top);if(e.left<0||e.left+s>u)if(e.maxWidth=Math.min(s,u),o.horizontal==="middle")e.left=t[n.horizontal]>u/2?Math.max(0,u-s):0;else if(t[n.horizontal]>u/2){const d=Math.min(u,n.horizontal==="middle"?t.middle:n.horizontal===o.horizontal?t.right:t.left);e.maxWidth=Math.min(s,d),e.left=Math.max(0,d-e.maxWidth)}else e.left=Math.max(0,n.horizontal==="middle"?t.middle:n.horizontal===o.horizontal?t.left:t.right),e.maxWidth=Math.min(s,u-e.left)}const lh={...G5,...Jm,...Y5,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{type:String,default:"jump-down"},transitionHide:{type:String,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ah},self:{type:String,default:"top middle",validator:ah},offset:{type:Array,default:()=>[14,14],validator:iM},scrollTarget:String,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:{type:Boolean}};var ch=a.defineComponent({name:"VcTooltip",inheritAttrs:!1,props:lh,emits:[...eh],setup(e,{slots:t,emit:i,attrs:n}){let o,r;const s=a.getCurrentInstance(),l=a.ref(null),c=a.ref(!1),u=a.computed(()=>sh(e.anchor,!0)),d=a.computed(()=>sh(e.self,!0)),m=a.computed(()=>e.persistent!==!0),{registerTick:h,removeTick:f,prepareTick:p}=K5(),{registerTimeout:y,removeTimeout:g}=nh(),{transition:v,transitionStyle:w}=Q5(e,c),{localScrollTarget:C,changeScrollEvent:P,unconfigureScrollTarget:_}=H5(e,$),{anchorEl:E,canShow:S,anchorEvents:x}=U5({showing:c,configureAnchorEl:F,avoidEmit:void 0}),{show:T,hide:V}=th({showing:c,canShow:S,handleShow:j,handleHide:M,hideOnRouteChange:m,processOnMount:!0});Object.assign(x,{delayShow:A,delayHide:Z});const{showPortal:I,hidePortal:R,renderPortal:L}=ih(s,l,z);function j(G){f(),g(),I(),h(()=>{r=new MutationObserver(()=>B()),r.observe(l.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),B(),$()}),p(),o===void 0&&(o=a.watch(()=>e.self+"|"+e.anchor,B)),y(()=>{i("show",G)},e.transitionDuration)}function M(G){f(),g(),b(),y(()=>{R(),i("hide",G)},e.transitionDuration)}function b(){r!==void 0&&(r.disconnect(),r=void 0),o!==void 0&&(o(),o=void 0),_(),Ai(x,"tooltipTemp")}function B(){const G=l.value;E.value===void 0||!G||rM({el:G,offset:e.offset,anchorEl:E.value,anchorOrigin:u.value,selfOrigin:d.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function A(G){if(Mt().isPhone===!0){Hi(),document.body.classList.add("non-selectable");const H=Kl(E.value),oe=["touchmove","touchcancel","touchend","click"].map(Y=>[H,Y,"__delayHide","passiveCapture"]);Ht(x,"tooltipTemp",oe)}y(()=>{T(G)},e.delay)}function Z(G){g(),Mt().isPhone===!0&&(Ai(x,"tooltipTemp"),Hi(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),y(()=>{V(G)},e.hideDelay)}function F(){if(e.noParentEvent===!0||E.value===void 0)return;const G=Mt().isPhone===!0?[[E.value,"touchstart","delayShow","passive"]]:[[E.value,"mouseenter","delayShow","passive"],[E.value,"mouseleave","delayHide","passive"]];Ht(x,"anchor",G)}function $(){if(E.value!==void 0||e.scrollTarget!==void 0){C.value=eM(E.value,e.scrollTarget);const G=e.noParentEvent===!0?B:V;P(C.value,G)}}function N(){return c.value===!0?a.h("div",{...n,ref:l,class:["vc-tooltip vc-tooltip--style vc-position-engine no-pointer-events",n.class],style:w.value,role:"complementary"},Xe(t.default)):null}function z(){return a.h(a.Transition,{name:v.value,appear:!0},N)}return a.onBeforeUnmount(b),Object.assign(s==null?void 0:s.proxy,{updatePosition:B}),L}});function sM(e,t,i){return i<=t?t:Math.min(i,Math.max(t,e))}const tc=XMLHttpRequest,uh=tc.prototype.open,lM=["top","right","bottom","left"];let ga=[],Zo=0;function cM({p:e,pos:t,active:i,horiz:n,reverse:o,dir:r}){let s=1,l=1;return n===!0?(o===!0&&(s=-1),t==="bottom"&&(l=-1),{transform:`translate3d(${s*(e-100)}%,${i?0:l*-200}%,0)`}):(o===!0&&(l=-1),t==="right"&&(s=-1),{transform:`translate3d(${i?0:r*s*-200}%,${l*(e-100)}%,0)`})}function uM(e,t){return typeof t!="number"&&(e<25?t=Math.random()*3+3:e<65?t=Math.random()*3:e<85?t=Math.random()*2:e<99?t=.6:t=0),sM(e+t,0,100)}function dM(e){Zo++,ga.push(e),!(Zo>1)&&(tc.prototype.open=function(t,i){const n=[],o=()=>{ga.forEach(s=>{(s.hijackFilter.value===null||s.hijackFilter.value(i)===!0)&&(s.start(),n.push(s.stop))})},r=()=>{n.forEach(s=>{s()})};this.addEventListener("loadstart",o,{once:!0}),this.addEventListener("loadend",r,{once:!0}),uh.apply(this,arguments)})}function mM(e){ga=ga.filter(t=>t.start!==e),Zo=Math.max(0,Zo-1),Zo===0&&(tc.prototype.open=uh)}const dh={position:{type:String,default:"top",validator:e=>lM.includes(e)},size:{type:String,default:"2px"},color:String,skipHijack:Boolean,reverse:Boolean,positioning:{type:String,default:"absolute",validator:e=>["absolute","fixed"].includes(e)},hijackFilter:Function};var mh=a.defineComponent({name:"VcAjaxBar",props:dh,emits:["start","stop"],setup(e,{emit:t}){const{proxy:i}=a.getCurrentInstance(),n=a.ref(0),o=a.ref(!1),r=a.ref(!0);let s=0,l,c;const u=a.computed(()=>`vc-loading-bar vc-loading-bar--${e.position}`+(e.color!==void 0?` bg-${e.color}`:"")+(r.value===!0?"":" no-transition")),d=a.computed(()=>e.position==="top"||e.position==="bottom"),m=a.computed(()=>d.value===!0?"height":"width"),h=a.computed(()=>{const C=o.value,P=cM({p:n.value,pos:e.position,active:C,horiz:d.value,reverse:e.reverse,dir:1});return P[m.value]=e.size,P.opacity=C?1:0,P.position=e.positioning==="absolute"?"absolute":"fixed",P.backgroundColor=e.color,P}),f=a.computed(()=>o.value===!0?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n.value}:{"aria-hidden":"true"});function p(C=300){const P=c;return c=Math.max(0,C)||0,s++,s>1?(P===0&&C>0?v():P>0&&C<=0&&clearTimeout(l),s):(clearTimeout(l),t("start"),n.value=0,l=setTimeout(()=>{r.value=!0,C>0&&v()},o.value===!0?500:1),o.value!==!0&&(o.value=!0,r.value=!1),s)}function y(C){return s>0&&(n.value=uM(n.value,C)),s}function g(){if(s=Math.max(0,s-1),s>0)return s;clearTimeout(l),t("stop");const C=()=>{r.value=!0,n.value=100,l=setTimeout(()=>{o.value=!1},1e3)};n.value===0?l=setTimeout(C,1):C()}function v(){n.value<100&&(l=setTimeout(()=>{y(),v()},c))}let w;return a.onMounted(()=>{e.skipHijack!==!0&&(w=!0,dM({start:p,stop:g,hijackFilter:a.computed(()=>e.hijackFilter||null)}))}),a.onBeforeUnmount(()=>{clearTimeout(l),w===!0&&mM(p)}),Object.assign(i,{start:p,stop:g,increment:y}),()=>a.h("div",{class:u.value,style:h.value,...f.value})}});const hM={dark:{type:Boolean,default:null}};function fM(e){return a.computed(()=>e.dark)}const hh=["text","rect","circle","VcBtn","VcBadge","VcChip","VcToolbar","VcCheckbox","VcRadio","VcToggle","VcSlider","VcRange","VcInput","VcAvatar"],fh=["wave","pulse","pulse-x","pulse-y","fade","blink","none"],ph={...hM,tag:{type:String,default:"div"},type:{type:String,validator:e=>hh.includes(e),default:"rect"},animation:{type:String,validator:e=>fh.includes(e),default:"wave"},square:Boolean,bordered:Boolean,size:String,width:String,height:String};var gh=a.defineComponent({name:"VcSkeleton",props:ph,setup(e,{slots:t}){const i=fM(e),n=a.computed(()=>e.size!==void 0?{width:e.size,height:e.size}:{width:e.width,height:e.height}),o=a.computed(()=>`vc-skeleton vc-skeleton--${i.value===!0?"dark":"light"} vc-skeleton--type-${e.type}`+(e.animation!=="none"?` vc-skeleton--anim vc-skeleton--anim-${e.animation}`:"")+(e.square===!0?" vc-skeleton--square":"")+(e.bordered===!0?" vc-skeleton--bordered":""));return()=>a.h(e.tag,{class:o.value,style:n.value},Xe(t.default))}});const pM=["top","right","bottom","left"],vh={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,size:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>pM.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function yh(e,t){return{formClass:a.computed(()=>`vc-fab--form-${e.square===!0?"square":"rounded"}`),stacked:a.computed(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:a.computed(()=>{if(e.externalLabel===!0){const i=e.hideLabel===null?t.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`vc-fab__label vc-tooltip--style vc-fab__label--external vc-fab__label--external-${e.labelPosition}`+(i===!0?" vc-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`vc-fab__label vc-fab__label--internal vc-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" vc-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const gM=["up","right","down","left"],vM=["left","center","right"];var yM={...vh,...Jm,icon:String,activeIcon:String,hideActionOnClick:{type:Boolean,default:!0},hideIcon:Boolean,hideLabel:{type:Boolean,default:!0},direction:{type:String,default:"right",validator:e=>gM.includes(e)},persistent:Boolean,stacked:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>vM.includes(e)}};const Ch=yM;var bh=a.defineComponent({name:"VcFab",props:Ch,emits:eh,setup(e,{slots:t}){const i=a.ref(null),n=a.ref(e.modelValue===!0),{formClass:o,labelProps:r}=yh(e,n),s=a.computed(()=>e.persistent!==!0),{hide:l,toggle:c}=th({showing:n,hideOnRouteChange:s}),u=a.computed(()=>({opened:n.value})),d=a.computed(()=>`vc-fab z-fab row inline justify-center vc-fab--align-${e.verticalActionsAlign} ${o.value}`+(n.value===!0?" vc-fab--opened":" vc-fab--closed")),m=a.computed(()=>`vc-fab__actions flex no-wrap inline vc-fab__actions--${e.direction} vc-fab__actions--${n.value===!0?"opened":"closed"}`),h=a.computed(()=>`vc-fab__icon-holder  vc-fab__icon-holder--${n.value===!0?"opened":"closed"}`);function f(y,g){const v=t[y],w=`q-fab__${y} absolute-full`;return v===void 0?a.h(eo,{class:w,name:e[y]}):a.h("div",{class:w},v(u.value))}function p(){const y=[];return e.hideIcon!==!0&&y.push(a.h("div",{class:h.value},[f("icon"),f("active-icon")])),(e.label!==""||t.label!==void 0)&&y[r.value.action](a.h("div",r.value.data,t.label!==void 0?t.label(u.value):[e.label])),ui(t.tooltip,y)}return a.provide(uu,{showing:n,onChildClick(y){e.hideActionOnClick&&l(y),i.value!==null&&i.value.$el.focus()}}),()=>a.h("div",{class:d.value},[a.h(fa,{ref:i,class:o.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,flat:e.flat,size:e.size,"aria-expanded":n.value===!0?"true":"false","aria-haspopup":"true",onClick:c},p),a.h("div",{class:m.value},Xe(t.default))])}});const wh={start:"self-end",center:"self-center",end:"self-start"},CM=Object.keys(wh);var bM={...vh,icon:{type:String,default:""},stacked:Boolean,anchor:{type:String,validator:e=>CM.includes(e)},to:[String,Object],replace:Boolean};const _h=bM;var Ph=a.defineComponent({name:"VcFabAction",props:_h,emits:["click"],setup(e,{slots:t,emit:i}){const n=a.inject(uu),{formClass:o,labelProps:r}=yh(e,n==null?void 0:n.showing),s=a.computed(()=>{let m;return e.anchor&&(m=wh[e.anchor]),o.value+(m!==void 0?` ${m}`:"")}),l=a.computed(()=>{var m;return e.disable===!0||((m=n==null?void 0:n.showing)==null?void 0:m.value)!==!0});function c(m){var h;(h=n==null?void 0:n.onChildClick)==null||h.call(n,m),i("click",m)}function u(){const m=[];return e.icon!==""&&m.push(a.h(eo,{name:e.icon})),e.label!==""&&m[r.value.action](a.h("div",r.value.data,[e.label])),ui(t.default,m)}const d=a.getCurrentInstance();return Object.assign(d==null?void 0:d.proxy,{click:c}),()=>a.h(fa,{class:s.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:l.value,size:e.size,onClick:c},u)}});[fa,eo,zl,$l,Gl,Ul,Hl,Wl,ql,Zl,Xl,Yl,Ql,ha,ch,mh,gh,bh,Ph].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const Kt=fa,cn=eo,Oh=zl,va=$l,Eh=Gl,Mh=Ul,Sh=Hl,ic=Wl,nc=ql,oc=Zl,rc=Xl,xh=Yl,ac=Ql,Th=ha,wt=ch,Ah=mh,sc=gh,lc=bh,ya=Ph,ye={beforeLoad:e=>!0,ready:e=>e.viewer instanceof Cesium.Viewer,destroyed:e=>!0},Xo={mousedown:e=>!0,mouseup:e=>!0,click:e=>!0,clickout:e=>!0,dblclick:e=>!0,mousemove:e=>!0,mouseover:e=>!0,mouseout:e=>!0},Yo={...ye,definitionChanged:e=>!0},it={...ye,errorEvent:e=>!0,readyPromise:(e,t,i)=>!0},un={...ye,...Xo,readyPromise:(e,t,i)=>!0,"update:geometryInstances":e=>!0},fi={...ye,...Xo},Qo={...ye,...Xo,definitionChanged:e=>!0,clusterEvent:(e,t)=>!0,collectionChanged:(e,t,i,n)=>!0,changedEvent:e=>!0,errorEvent:(e,t)=>!0,loadingEvent:(e,t)=>!0,refreshEvent:(e,t)=>!0,unsupportedNodeEvent:(e,t,i,n,o,r,s)=>!0},ct={...ye,activeEvt:(e,t)=>!0,drawEvt:(e,t)=>!0,editorEvt:(e,t)=>!0,mouseEvt:(e,t)=>!0},wM={...ye,cesiumReady:e=>!0,viewerWidgetResized:e=>!0,selectedEntityChanged:e=>!0,trackedEntityChanged:e=>!0,layerAdded:(e,t)=>!0,layerMoved:(e,t,i)=>!0,layerRemoved:(e,t)=>!0,layerShownOrHidden:(e,t,i)=>!0,dataSourceAdded:(e,t)=>!0,dataSourceMoved:(e,t,i)=>!0,dataSourceRemoved:(e,t)=>!0,collectionChanged:(e,t,i,n)=>!0,morphComplete:(e,t,i,n)=>!0,morphStart:(e,t,i,n)=>!0,postRender:(e,t)=>!0,preRender:(e,t)=>!0,postUpdate:(e,t)=>!0,preUpdate:(e,t)=>!0,renderError:(e,t)=>!0,terrainProviderChanged:e=>!0,changed:e=>!0,moveEnd:()=>!0,moveStart:()=>!0,onStop:e=>!0,onTick:e=>!0,errorEvent:e=>!0,cameraClicked:e=>!0,closeClicked:e=>!0,leftClick:e=>!0,leftDoubleClick:e=>!0,leftDown:e=>!0,leftUp:e=>!0,middleClick:e=>!0,middleDown:e=>!0,middleUp:e=>!0,mouseMove:e=>!0,pinchStart:e=>!0,pinchMove:e=>!0,pinchEnd:()=>!0,rightClick:e=>!0,rightDown:e=>!0,rightUp:e=>!0,wheel:e=>!0,imageryLayersUpdatedEvent:()=>!0,tileLoadProgressEvent:e=>!0,touchEnd:e=>!0};var Ca=a.defineComponent({name:"VcViewer",props:Hm,emits:wM,setup(e,t){const i=a.getCurrentInstance();i.cesiumEvents=["selectedEntityChanged","trackedEntityChanged"],i.cesiumMembersEvents=Wm;const n=_5(e,t,i);a.provide(Ji,n.getServices()),i.appContext.config.globalProperties.$VueCesium=n.getServices(),Object.assign(i.proxy,{creatingPromise:n.creatingPromise,load:n.load,unload:n.unload,reload:n.reload,cesiumObject:i.cesiumObject,getCesiumObject:()=>i.cesiumObject});const o=r=>{t.emit("touchEnd",r)};return()=>{var r;const s=[];return Ye(e.skeleton)&&!n.isReady.value?s.push(a.h(sc,{...e.skeleton,style:{background:e.skeleton.color,width:"100%",height:"100%"}})):s.push(a.createCommentVNode("v-if")),s.push(a.createCommentVNode("vc-viewer"),a.withDirectives(a.h("div",{ref:n.viewerRef,class:ne(((r=i.proxy)==null?void 0:r.$options.name)||""),id:t.attrs.id||"cesiumContainer",style:t.attrs.style||{width:"100%",height:"100%"}},Xe(t.slots.default)),[[ca,o,e.touchHoldArg]])),s}}});Ca.install=(e,t)=>{e.component(Ca.name,Ca)};const Ih=Ca,Dh=Ih,dn={position:{type:String,default:"top-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2}};function oi(e,t){const i=a.computed(()=>{const u=e.position;return{top:u.indexOf("top")>-1,right:u.indexOf("right")>-1,bottom:u.indexOf("bottom")>-1,left:u.indexOf("left")>-1,vertical:u==="top"||u==="bottom",horizontal:u==="left"||u==="right"}}),n=a.ref(0),o=a.ref(0),r=a.ref(0),s=a.ref(0),l=a.computed(()=>{let u=0,d=0;const m=i.value,h=1;m.top===!0&&n.value!==0?d=`${n.value}px`:m.bottom===!0&&s.value!==0&&(d=`${-s.value}px`),m.left===!0&&r.value!==0?u=`${h*r.value}px`:m.right===!0&&o.value!==0&&(u=`${-h*o.value}px`);const f={transform:`translate(${u}, ${d})`};return e.offset&&(f.margin=`${e.offset[1]}px ${e.offset[0]}px`),m.vertical===!0?(r.value!==0&&(f.right=`${r.value}px`),o.value!==0&&(f.left=`${o.value}px`)):m.horizontal===!0&&(n.value!==0&&(f.top=`${n.value}px`),s.value!==0&&(f.bottom=`${s.value}px`)),f}),c=a.computed(()=>`absolute absolute-${e.position}`);return{attach:i,style:l,classes:c}}const cc={enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5},...dn,outerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-outer",size:"96px",color:"#3f4854",background:"transparent",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},innerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-inner",size:"24px",color:"#3f4854",background:"#fff",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},markerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-rotation-marker",size:"96px",color:"#1976D2"})}},uc=ci(cc);class _M{static createTween(t,i){const{Cartesian2:n,Cartesian3:o,defaultValue:r,defined:s,DeveloperError:l,EasingFunction:c,Math:u,SceneMode:d}=Cesium;i=r(i,{});let m=i.destination;if(!s(t))throw new l("scene is required.");if(!s(m))throw new l("destination is required.");const h=t.mode;if(h===d.MORPHING)return mc();const f=r(i.convert,!0),p=t.mapProjection,y=p.ellipsoid,g=i.maximumHeight,v=i.flyOverLongitude,w=i.flyOverLongitudeWeight,C=i.pitchAdjustHeight;let P=i.easingFunction;f&&h!==d.SCENE3D&&(y.cartesianToCartographic(m,Bh),m=p.project(Bh,RM));const _=t.camera,E=i.endTransform;s(E)&&_._setTransform(E);let S=i.duration;s(S)||(S=Math.ceil(o.distance(_.position,m)/1e6)+2,S=Math.min(S,3));const x=r(i.heading,0),T=r(i.pitch,-u.PI_OVER_TWO),V=r(i.roll,0),I=t.screenSpaceCameraController;I.enableInputs=!1;const R=jh(I,i.complete),L=jh(I,i.cancel),j=_.frustum;let M=t.mode===d.SCENE2D;if(M=M&&n.equalsEpsilon(_.position,m,u.EPSILON6),M=M&&u.equalsEpsilon(Math.max(j.right-j.left,j.top-j.bottom),m.z,u.EPSILON6),M=M||t.mode!==d.SCENE2D&&o.equalsEpsilon(m,_.position,u.EPSILON10),M=M&&u.equalsEpsilon(u.negativePiToPi(x),u.negativePiToPi(_.heading),u.EPSILON10)&&u.equalsEpsilon(u.negativePiToPi(T),u.negativePiToPi(_.pitch),u.EPSILON10)&&u.equalsEpsilon(u.negativePiToPi(V),u.negativePiToPi(_.roll),u.EPSILON10),M)return mc(R,L);const b=new Array(4);if(b[d.SCENE2D]=DM,b[d.SCENE3D]=IM,b[d.COLUMBUS_VIEW]=MM,S<=0)return mc(function(){b[h](t,1,m,x,T,V,g,v,w,C)({time:1}),typeof R=="function"&&R()},L);const B=b[h](t,S,m,x,T,V,g,v,w,C);if(!s(P)){const A=_.positionCartographic.height,Z=h===d.SCENE3D?y.cartesianToCartographic(m).height:m.z;A>Z&&A>11500?P=c.CUBIC_OUT:P=c.QUINTIC_IN_OUT}return{duration:S,easingFunction:P,startObject:{time:0},stopObject:{time:S},update:B,complete:R,cancel:L}}}function PM(e,t,i){const{PerspectiveFrustum:n,PerspectiveOffCenterFrustum:o}=Cesium;let r,s,l;if(e instanceof n){const c=Math.tan(.5*e.fovy);return r=e.near,s=e.near*c,l=e.aspectRatio*s,Math.max(t*r/l,i*r/s)}else if(e instanceof o)return r=e.near,s=e.top,l=e.right,Math.max(t*r/l,i*r/s);return Math.max(t,i)}const OM={},Rh={};function EM(e,t,i,n){const{defined:o,Math:r}=Cesium;if(o(n)&&i(.5)>n){const s=i(0),l=i(1),c=i(.5),u=c-s,d=c-l;return function(m){const h=i(m);if(m<=.5){const p=(h-s)/u;return r.lerp(e,-r.PI_OVER_TWO,p)}const f=(h-l)/d;return r.lerp(-r.PI_OVER_TWO,t,1-f)}}return function(s){return r.lerp(e,t,s)}}function dc(e,t,i,n,o){const{Cartesian3:r,defined:s,Math:l}=Cesium;let c=o;const u=Math.max(i,n);if(!s(c)){const d=e.position,m=t,h=e.up,f=e.right,p=e.frustum,y=r.subtract(d,m,OM),g=r.magnitude(r.multiplyByScalar(h,r.dot(y,h),Rh)),v=r.magnitude(r.multiplyByScalar(f,r.dot(y,f),Rh));c=Math.min(PM(p,g,v)*.2,1e9)}if(u<c){const h=-Math.pow((c-i)*1e6,.125),f=Math.pow((c-n)*1e6,1/8);return function(p){const y=p*(f-h)+h;return-Math.pow(y,8)/1e6+c}}return function(d){return l.lerp(i,n,d)}}function Ko(e,t){const{Math:i}=Cesium;return i.equalsEpsilon(e,i.TWO_PI,i.EPSILON11)&&(e=0),t>e+Math.PI?e+=i.TWO_PI:t<e-Math.PI&&(e-=i.TWO_PI),e}const Lh={};function MM(e,t,i,n,o,r,s){const{Cartesian2:l,Cartesian3:c,Math:u}=Cesium,d=e.camera,m=c.clone(d.position,Lh),h=d.pitch,f=Ko(d.heading,n),p=Ko(d.roll,r),y=dc(d,i,m.z,i.z,s);function g(v){const w=v.time/t;d.setView({orientation:{heading:u.lerp(f,n,w),pitch:u.lerp(h,o,w),roll:u.lerp(p,r,w)}}),l.lerp(m,i,w,d.position),d.position.z=y(w)}return g}function SM(e,t){const{Math:i}=Cesium;e.longitude<t.longitude?e.longitude+=i.TWO_PI:t.longitude+=i.TWO_PI}function xM(e,t){const{Math:i}=Cesium,n=e.longitude-t.longitude;n<-i.PI?e.longitude+=i.TWO_PI:n>i.PI&&(t.longitude+=i.TWO_PI)}const TM={},AM={};function IM(e,t,i,n,o,r,s,l,c,u){const{Cartesian3:d,Cartographic:m,defined:h,Math:f}=Cesium,p=e.camera,g=e.mapProjection.ellipsoid,v=m.clone(p.positionCartographic,TM),w=p.pitch,C=Ko(p.heading,n),P=Ko(p.roll,r),_=g.cartesianToCartographic(i,AM);v.longitude=f.zeroToTwoPi(v.longitude),_.longitude=f.zeroToTwoPi(_.longitude);let E=!1;if(h(l)){const V=f.zeroToTwoPi(l),I=Math.min(v.longitude,_.longitude),R=Math.max(v.longitude,_.longitude),L=V>=I&&V<=R;if(h(c)){const j=Math.abs(v.longitude-_.longitude),M=f.TWO_PI-j;(L?j:M)<(L?M:j)*c&&!L&&(E=!0)}else L||(E=!0)}E?SM(v,_):xM(v,_);const S=dc(p,i,v.height,_.height,s),x=EM(w,o,S,u);function T(){const V=v.longitude,I=_.longitude,R=v.latitude,L=_.latitude;return function(M){const b=M.time/t,B=d.fromRadians(f.lerp(V,I,b),f.lerp(R,L,b),S(b),e.globe.ellipsoid);p.setView({destination:B,orientation:{heading:f.lerp(C,n,b),pitch:x(b),roll:f.lerp(P,r,b)}})}}return T()}function DM(e,t,i,n,o,r,s){const{Cartesian2:l,Cartesian3:c,Math:u}=Cesium,d=e.camera,m=c.clone(d.position,Lh),h=Ko(d.heading,n),f=d.frustum.right-d.frustum.left,p=dc(d,i,f,i.z,s);function y(g){const v=g.time/t;d.setView({orientation:{heading:u.lerp(h,n,v)}}),l.lerp(m,i,v,d.position);const w=p(v),C=d.frustum,P=C.top/C.right,_=(w-(C.right-C.left))*.5;C.right+=_,C.left-=_,C.top=P*C.right,C.bottom=-C.top}return y}const Bh={},RM={};function mc(e,t){return{startObject:{},stopObject:{},duration:0,complete:e,cancel:t}}function jh(e,t){function i(){typeof t=="function"&&t(),e.enableInputs=!0}return i}var Fh=_M;function LM(e,{emit:t},i){const n={},o={},r={},s={};let l,c,u,d,m;const h=a.ref(0),f=a.ref(0),p=a.ref(0);let y=0,g={},v=!1,w,C,P=0,_={},E=0;const S=a.ref(null),x=a.ref(null),T=A=>{var Z,F;A.stopPropagation&&A.stopPropagation(),A.preventDefault&&A.preventDefault(),(Z=ie(S))==null||Z.hide(),(F=ie(x))==null||F.hide();const{SceneMode:$,Cartesian2:N}=Cesium;if(i.viewer.scene.mode===$.MORPHING)return!0;const G=A.currentTarget,H=G.getBoundingClientRect(),oe=H.width/2,Y=new N((H.right-H.left)/2,(H.bottom-H.top)/2);let W;A instanceof MouseEvent?W=new N(A.clientX-H.left,A.clientY-H.top):A instanceof TouchEvent&&(W=new N(A.changedTouches[0].clientX-H.left,A.changedTouches[0].clientY-H.top));const q=N.subtract(W,Y,n),U=N.magnitude(q)/oe;if(U<50/145)L(G,q);else if(U<1)j(G,q);else return!0},V=A=>{const{Cartesian2:Z,Cartesian3:F,defined:$,Ellipsoid:N,Matrix4:z,Ray:G,SceneMode:H,Transforms:oe}=Cesium,{viewer:Y}=i,W=Y.scene,q=W.camera,K=W.screenSpaceCameraController;if(W.mode===H.MORPHING||!K.enableInputs)return!0;if(W.mode===H.COLUMBUS_VIEW&&!K.enableTranslate||(W.mode===H.SCENE3D||W.mode===H.COLUMBUS_VIEW)&&(!K.enableLook||W.mode===H.SCENE3D&&!K.enableRotate))return;const U=new Z;U.x=W.canvas.clientWidth/2,U.y=W.canvas.clientHeight/2;const k=new G,ee=q.getPickRay(U,k),X=W.globe.pick(ee,W,s);if(!en(X)||!$(X)){Y.camera.flyHome();return}const Q=Ee(i,"compassEvt");Q&&t("compassEvt",{type:"reset",camera:Y.camera,status:"start",target:A.currentTarget});const te=oe.eastNorthUpToFixedFrame(X,Y.scene.globe.ellipsoid),le=F.subtract(X,q.position,new F),se=Fh.createTween(W,{destination:z.multiplyByPoint(te,new F(0,0,F.magnitude(le)),new F),direction:z.multiplyByPointAsVector(te,new F(0,0,-1),new F),up:z.multiplyByPointAsVector(te,new F(0,1,0),new F),duration:e.duration,complete:()=>{Q&&t("compassEvt",{type:"reset",camera:Y.camera,status:"end",target:A.currentTarget})},cancel:()=>{Q&&t("compassEvt",{type:"reset",camera:Y.camera,status:"cancel",target:A.currentTarget})}});W.tweens.add(se)},I=()=>{p.value=0,f.value=0},R=()=>{const{defined:A}=Cesium;A(i.viewer)?(l&&(l(),l=void 0),l=i.viewer.scene.postRender.addEventListener(function(){h.value!==i.viewer.scene.camera.heading&&(h.value=i.viewer.scene.camera.heading)})):l&&(l(),l=void 0)},L=(A,Z)=>{const{Cartesian2:F,Cartesian3:$,defined:N,getTimestamp:z,Math:G,Matrix4:H,Ray:oe,SceneMode:Y,Transforms:W}=Cesium;let q=i.viewer.scene,K=q.camera;const U=q.screenSpaceCameraController;if(q.mode===Y.MORPHING||!U.enableInputs)return;switch(q.mode){case Y.COLUMBUS_VIEW:if(U.enableLook)break;if(!U.enableTranslate||!U.enableTilt)return;break;case Y.SCENE3D:if(U.enableLook)break;if(!U.enableTilt||!U.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!U.enableTranslate)return;break}const k=Ee(i,"compassEvt");k&&t("compassEvt",{type:"orbit",camera:q.camera,status:"start",target:A}),document.removeEventListener("mousemove",u,!1),document.removeEventListener("mouseup",d,!1),document.removeEventListener("touchmove",u,!1),document.removeEventListener("touchend",d,!1),N(m)&&i.viewer.clock.onTick.removeEventListener(m),u=void 0,d=void 0,m=void 0,y=z();const ee=new F;ee.x=q.canvas.clientWidth/2,ee.y=q.canvas.clientHeight/2;const X=new oe,Q=K.getPickRay(ee,X),te=q.globe.pick(Q,q,s);N(te)?(g=W.eastNorthUpToFixedFrame(te||new Cesium.Cartesian3,q.globe.ellipsoid,r),v=!1):(g=W.eastNorthUpToFixedFrame(K.positionWC,q.globe.ellipsoid,r),v=!0),m=function(se){const ue=z(),ce=ue-y,fe=(p.value-.5)*2.5/1e3,ge=ce*fe,pe=f.value+G.PI_OVER_TWO,de=Math.cos(pe)*ge,me=Math.sin(pe)*ge;q=i.viewer.scene,K=q.camera;const D=H.clone(K.transform,o);K.lookAtTransform(g),v?(K.look($.UNIT_Z,-de),K.look(K.right,-me)):(K.rotateLeft(de),K.rotateUp(me)),K.lookAtTransform(D),y=ue};function le(se,ue){const ce=Math.atan2(-se.y,se.x);f.value=G.zeroToTwoPi(ce-G.PI_OVER_TWO);const fe=F.magnitude(se),ge=ue/2,pe=Math.min(fe/ge,1),de=.5*pe*pe+.5;p.value=de}u=function(se){const ue=A.getBoundingClientRect(),ce=new F((ue.right-ue.left)/2,(ue.bottom-ue.top)/2);let fe;se instanceof MouseEvent?fe=new F(se.clientX-ue.left,se.clientY-ue.top):se instanceof TouchEvent&&(fe=new F(se.changedTouches[0].clientX-ue.left,se.changedTouches[0].clientY-ue.top));const ge=F.subtract(fe,ce,n);le(ge,ue.width),k&&t("compassEvt",{type:"orbit",camera:q.camera,status:"changing",target:A})},d=function(se){document.removeEventListener("mousemove",u,!1),document.removeEventListener("mouseup",d,!1),document.removeEventListener("touchmove",u,!1),document.removeEventListener("touchend",d,!1),N(m)&&i.viewer.clock.onTick.removeEventListener(m),u=void 0,d=void 0,m=void 0,I(),k&&t("compassEvt",{type:"orbit",camera:q.camera,status:"end",target:A})},document.addEventListener("mousemove",u,!1),document.addEventListener("mouseup",d,!1),document.addEventListener("touchmove",u,!1),document.addEventListener("touchend",d,!1),c=i.viewer.clock.onTick.addEventListener(m),le(Z,A.getBoundingClientRect().width)},j=(A,Z)=>{if(!e.enableCompassOuterRing)return;const F=i.viewer.scene;let $=F.camera;const N=F.screenSpaceCameraController;if(F.mode===Cesium.SceneMode.MORPHING||F.mode===Cesium.SceneMode.SCENE2D||!N.enableInputs||!N.enableLook&&(F.mode===Cesium.SceneMode.COLUMBUS_VIEW||F.mode===Cesium.SceneMode.SCENE3D&&!N.enableRotate))return;document.removeEventListener("mousemove",C,!1),document.removeEventListener("touchmove",C,!1),document.removeEventListener("mouseup",w,!1),document.removeEventListener("touchend",w,!1);const{Cartesian2:z,Cartesian3:G,defined:H,Math:oe,Matrix4:Y,Ray:W,Transforms:q}=Cesium;C=void 0,w=void 0;const K=Ee(i,"compassEvt");K&&t("compassEvt",{type:"rotate",camera:F.camera,status:"start",target:A}),P=Math.atan2(-Z.y,Z.x);const U=new z;U.x=F.canvas.clientWidth/2,U.y=F.canvas.clientHeight/2;const k=new W,ee=$.getPickRay(U,k),X=F.globe.pick(ee,F,s);H(X)?_=q.eastNorthUpToFixedFrame(X||new G,F.globe.ellipsoid,r):_=q.eastNorthUpToFixedFrame($.positionWC,F.globe.ellipsoid,r);let Q=Y.clone($.transform,o);$.lookAtTransform(_),E=Math.atan2($.position.y,$.position.x),G.magnitude(new G($.position.x,$.position.y,0)),$.lookAtTransform(Q),C=function(te){const le=A.getBoundingClientRect(),se=new z((le.right-le.left)/2,(le.bottom-le.top)/2);let ue;te instanceof MouseEvent?ue=new z(te.clientX-le.left,te.clientY-le.top):te instanceof TouchEvent&&(ue=new z(te.changedTouches[0].clientX-le.left,te.changedTouches[0].clientY-le.top));const ce=z.subtract(ue,se,n),ge=Math.atan2(-ce.y,ce.x)-P,pe=oe.zeroToTwoPi(E-ge);$=i.viewer.scene.camera,Q=Y.clone($.transform,o),$.lookAtTransform(_);const de=Math.atan2($.position.y,$.position.x);$.rotateRight(pe-de),$.lookAtTransform(Q),K&&t("compassEvt",{type:"rotate",camera:F.camera,status:"changing",target:A})},w=function(te){document.removeEventListener("mousemove",C,!1),document.removeEventListener("touchmove",C,!1),document.removeEventListener("mouseup",w,!1),document.removeEventListener("touchend",w,!1),C=void 0,w=void 0,K&&t("compassEvt",{type:"rotate",camera:F.camera,status:"end",target:A})},document.addEventListener("mousemove",C,!1),document.addEventListener("touchmove",C,!1),document.addEventListener("mouseup",w,!1),document.addEventListener("touchend",w,!1)};return{heading:h,orbitCursorAngle:f,orbitCursorOpacity:p,handleDoubleClick:V,handleMouseDown:T,resetRotater:I,onTooltipBeforeShow:A=>{(C!==void 0||u!==void 0)&&(A.cancel=!0)},viewerChange:R,load:async A=>(i.viewer=A,R(),!0),unload:async()=>(document.removeEventListener("mousemove",u,!1),document.removeEventListener("mouseup",d,!1),document.removeEventListener("touchmove",u,!1),document.removeEventListener("touchend",d,!1),c&&c(),l&&l(),!0),iconOuterTooltipRef:S,iconInnerTooltipRef:x}}const BM={...ye,compassEvt:e=>!0},Vh=cc;var hc=a.defineComponent({name:"VcCompass",props:Vh,emits:BM,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="VcCompass";const o=Le(e,t,n);if(o===void 0)return;const{t:r}=gt(),s=Ct(n),{$services:l}=o,c=LM(e,t,n),u=oi(e),d=a.ref(null),m=a.ref(null),h=((i=s.proxy)==null?void 0:i.$options.name)==="VcNavigation",f=a.ref(h),p=a.reactive({});a.watch(()=>e,E=>{a.nextTick(()=>{!n.mounted||_()})},{deep:!0});const y=a.computed(()=>Object.assign({},uc.innerOptions,e.innerOptions)),g=a.computed(()=>Object.assign({},uc.outerOptions,e.outerOptions)),v=a.computed(()=>Object.assign({},uc.markerOptions,e.markerOptions)),w=a.computed(()=>({transform:"translate(-50%,-50%) rotate(-"+c.heading.value+"rad)",WebkitTransform:"translate(-50%,-50%) rotate(-"+c.heading.value+"rad)",opacity:void 0,background:g.value.background,color:g.value.color})),C=a.computed(()=>({transform:"rotate(-"+c.orbitCursorAngle.value+"rad)",WebkitTransform:"rotate(-"+c.orbitCursorAngle.value+"rad)",opacity:c.orbitCursorOpacity.value,color:v.value.color})),P=a.computed(()=>({background:y.value.background,color:y.value.color}));n.createCesiumObject=async()=>{f.value=!0;const{viewer:E}=l;return new Promise((S,x)=>{a.nextTick(()=>{h||E._element.appendChild(ie(d)),S(ie(d))})})},n.mount=async()=>{var E;_();const{viewer:S}=l;return(E=S.viewerWidgetResized)==null||E.raiseEvent({type:n.cesiumClass,status:"mounted",target:ie(d)}),c.load(l.viewer)},n.unmount=async()=>{var E;const{viewer:S}=l,x=S._element;return h||x.contains(ie(d))&&x.removeChild(ie(d)),(E=S.viewerWidgetResized)==null||E.raiseEvent({type:n.cesiumClass,status:"unmounted",target:ie(d)}),c.unload()};const _=()=>{var E;const S=u.style.value;p.left=S.left,p.top=S.top,p.transform=S.transform;const x=u.attach.value,T=(E=ie(m))==null?void 0:E.$el;if(T!==void 0){const V=T.getBoundingClientRect();S.width=`${V.width}px`,S.height=`${V.height}px`,(x.bottom||x.top)&&!x.left&&!x.right&&(S.left="50%",S.transform="translate(-50%, 0)"),(x.left||x.right)&&!x.top&&!x.bottom&&(S.top="50%",S.transform="translate(0, -50%)")}Object.assign(p,S)};return()=>{if(f.value){let E=[];return E=ui(t.slots.default,E),E.push(a.h(Kt,{ref:m,class:"vc-compass-outerRing absolute-center",style:w.value,size:g.value.size,dense:!0,round:!0,disabled:!e.enableCompassOuterRing},()=>[a.h(cn,{size:g.value.size,name:g.value.icon}),g.value.tooltip?a.h(wt,{ref:c.iconOuterTooltipRef,...g.value.tooltip,onBeforeShow:c.onTooltipBeforeShow},()=>a.h("strong",{},g.value.tooltip.tip||r("vc.navigation.compass.outerTip"))):a.createCommentVNode("v-if")])),E.push(a.h(Kt,{class:"vc-compass-innerRing absolute-center",style:P.value,size:y.value.size,dense:!0,round:!0},()=>[a.h(cn,{size:y.value.size,name:y.value.icon}),y.value.tooltip?a.h(wt,{ref:c.iconInnerTooltipRef,...y.value.tooltip,onBeforeShow:c.onTooltipBeforeShow},()=>a.h("strong",{},y.value.tooltip.tip||r("vc.navigation.compass.innerTip"))):a.createCommentVNode("v-if")])),E.push(C.value.opacity?a.h(Kt,{class:"vc-compass-rotation-marker absolute-center",dense:!0,round:!0},()=>[a.h(cn,{size:v.value.size,name:v.value.icon,style:C.value})]):a.createCommentVNode("v-if")),a.h("div",{ref:d,class:"vc-compass "+u.classes.value,style:p,onDblclick:c.handleDoubleClick,onMousedown:c.handleMouseDown,onMouseup:c.resetRotater,onTouchend:c.resetRotater,onTouchstart:c.handleMouseDown},E)}else return a.createCommentVNode("v-if")}}});const fc={enableResetButton:{type:Boolean,default:!0},zoomAmount:{type:Number,default:2},duration:{type:Number,default:.5},durationReset:{type:Number},defaultResetView:{type:Object,default:()=>({position:{lng:105,lat:30,height:190595685e-1}})},overrideViewerCamera:{type:Boolean,default:!1},...dn,background:{type:String,default:"#3f4854"},border:{type:String,default:"solid 1px rgba(255, 255, 255, 0.2)"},borderRadius:{type:String,default:"100px"},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},zoomInOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-in",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomOutOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-out",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomResetOptions:{type:Object,default:()=>({icon:"vc-icons-reset",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})}},pc=ci(fc);function jM(e,{emit:t},i,n){const o=a.ref(null),r=a.ref(null),s=a.ref(null),l=h=>{u(1/e.zoomAmount,h)},c=h=>{u(e.zoomAmount,h)},u=(h,f)=>{var p,y;(p=ie(o))==null||p.hide(),(y=ie(r))==null||y.hide();const{Cartesian3:g,defined:v,IntersectionTests:w,Ray:C,SceneMode:P}=Cesium,{viewer:_}=n;if(v(_)){const E=_.scene,S=E.screenSpaceCameraController;if(!S.enableInputs||!S.enableZoom||E.mode===P.COLUMBUS_VIEW&&!S.enableTranslate)return;const x=E.camera;let T;switch(E.mode){case P.MORPHING:break;case P.SCENE2D:{x.zoomIn(x.positionCartographic.height*(1-h));break}default:{let V;if(v(_.trackedEntity)?V=new Cesium.Cartesian3:V=m(_.scene),Cesium.defined(V))T={direction:x.direction,up:x.up};else{const Z=new C(x.worldToCameraCoordinatesPoint(E.globe.ellipsoid.cartographicToCartesian(x.positionCartographic)),x.directionWC);V=w.grazingAltitudeLocation(Z,E.globe.ellipsoid),T={heading:x.heading,pitch:x.pitch,roll:x.roll}}const I=new g,R=g.subtract(x.position,V,I),L=g.multiplyByScalar(R,h,R),j=g.add(V,L,V),M=h<1?"zoomIn":"zoomOut",b=f.currentTarget,B=Ns(x.positionCartographic.height).toFixed(0),A=Ee(i,"zoomEvt");A&&t("zoomEvt",{type:M,camera:_.camera,status:"start",target:b,level:B}),Cesium.defined(_.trackedEntity)||E.mode===P.COLUMBUS_VIEW?x.position=j:x.flyTo({destination:j,orientation:T,duration:e.duration,convert:!1,complete:()=>{A&&t("zoomEvt",{type:M,camera:_.camera,status:"end",target:b,level:B})},cancel:()=>{A&&t("zoomEvt",{type:M,camera:_.camera,status:"cancel",target:b,level:B})}})}}}},d=h=>{var f;(f=ie(s))==null||f.hide();const{viewer:p}=n;if(!!p.scene.screenSpaceCameraController.enableInputs)if(Cesium.defined(p.trackedEntity)){const v=p.trackedEntity;p.trackedEntity=void 0,p.trackedEntity=v}else{const v=Ee(i,"zoomEvt"),w=h.currentTarget,C=Ns(p.camera.positionCartographic.height).toFixed(0);v&&t("zoomEvt",{type:"zoomReset",camera:p.camera,status:"start",target:w,level:C});const P=()=>{v&&t("zoomEvt",{type:"zoomReset",camera:p.camera,status:"end",target:w,level:C})},_=()=>{v&&t("zoomEvt",{type:"zoomReset",camera:p.camera,status:"cancel",target:w,level:C})},E=e.defaultResetView,S={duration:e.durationReset,complete:P,cancel:_};c5(p,E,S)}},m=h=>{const{defined:f,IntersectionTests:p,Ray:y}=Cesium,g=new y(h.camera.positionWC,h.camera.directionWC),v=p.rayEllipsoid(g,h.globe.ellipsoid);return f(v)?y.getPoint(g,v.start):p.grazingAltitudeLocation(g,h.globe.ellipsoid)};return{zoomIn:l,zoomOut:c,zoomReset:d,zoomInTooltipRef:o,zoomOutTooltipRef:r,resetTooltipRef:s}}const FM={...ye,zoomEvt:e=>!0},Nh=fc;var gc=a.defineComponent({name:"VcZoomControl",props:Nh,emits:FM,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="VcZoomControl",n.cesiumEvents=[];const o=Le(e,t,n);if(o===void 0)return;const{t:r}=gt(),{$services:s}=o,l=jM(e,t,n,s),c=oi(e),u=a.ref(null),d=a.ref(null),m=a.ref(null),h=a.ref(null),p=((i=Ct(n).proxy)==null?void 0:i.$options.name)==="VcNavigation",y=a.ref(p),g=a.reactive({});a.watch(()=>e,E=>{a.nextTick(()=>{!n.mounted||P()})},{deep:!0});const v=a.computed(()=>Object.assign({},pc.zoomOutOptions,e.zoomOutOptions)),w=a.computed(()=>Object.assign({},pc.zoomInOptions,e.zoomInOptions)),C=a.computed(()=>Object.assign({},pc.zoomResetOptions,e.zoomResetOptions));n.createCesiumObject=async()=>new Promise((E,S)=>{y.value=!0,a.nextTick(()=>{const{viewer:x}=s;if(e.overrideViewerCamera){const T=e.defaultResetView;Fs(x,T)}p||x._element.appendChild(ie(u)),E(ie(u))})}),n.mount=async()=>{var E;P();const{viewer:S}=s;return(E=S.viewerWidgetResized)==null||E.raiseEvent({type:n.cesiumClass,status:"mounted",target:ie(u)}),!0},n.unmount=async()=>{var E;const{viewer:S}=s;if(!p){const x=S._element;x.contains(ie(u))&&x.removeChild(ie(u))}return(E=S.viewerWidgetResized)==null||E.raiseEvent({type:n.cesiumClass,status:"unmounted",target:ie(u)}),!0};const P=()=>{var E,S,x;const T=c.style.value;if(g.left=T.left,g.top=T.top,g.transform=T.transform,T.flexDirection=e.direction==="vertical"?"column":"row",T.background=e.background,T.borderRadius=e.borderRadius,T.border=e.border,!p){const V=(E=ie(d))==null?void 0:E.$el,I=(S=ie(m))==null?void 0:S.$el,R=(x=ie(h))==null?void 0:x.$el;let L=0,j=0;if(V!==void 0){const b=V.getBoundingClientRect();e.direction==="horizontal"?(L+=b.width,j=b.height>j?b.height:j):(j+=b.height,L=b.width>L?b.width:L)}if(I!==void 0){const b=I.getBoundingClientRect();e.direction==="horizontal"?(L+=b.width,j=b.height>j?b.height:j):(j+=b.height,L=b.width>L?b.width:L)}if(R!==void 0){const b=R.getBoundingClientRect();e.direction==="horizontal"?(L+=b.width,j=b.height>j?b.height:j):(j+=b.height,L=b.width>L?b.width:L)}T.width=`${L+4}px`,T.height=`${j+4}px`;const M=c.attach.value;(M.bottom||M.top)&&!M.left&&!M.right&&(T.left="50%",T.transform="translate(-50%, 0)"),(M.left||M.right)&&!M.top&&!M.bottom&&(T.top="50%",T.transform="translate(0, -50%)")}Object.assign(g,T)},_=(E,S)=>{var x,T,V;let I,R,L,j;S==="zoomIn"?(I=d,R=l.zoomInTooltipRef,L=((x=E.tooltip)==null?void 0:x.tip)||r("vc.navigation.zoomCotrol.zoomInTip"),j=l.zoomIn):S==="zoomOut"?(I=h,R=l.zoomOutTooltipRef,L=((T=E.tooltip)==null?void 0:T.tip)||r("vc.navigation.zoomCotrol.zoomOutTip"),j=l.zoomOut):S==="zoomReset"&&(I=m,R=l.resetTooltipRef,L=((V=E.tooltip)==null?void 0:V.tip)||r("vc.navigation.zoomCotrol.zoomResetTip"),j=l.zoomReset);const M=[];return M.push(a.h(cn,{name:E.icon,size:E.size})),M.push(a.h("div",null,E.label)),E.tooltip?M.push(a.h(wt,{ref:R,...E.tooltip},()=>a.h("strong",null,L))):M.push(a.createCommentVNode("v-if")),a.h(Kt,{class:`vc-${ne(S)}`,ref:I,size:E.size,flat:E.flat,stack:E.stack,round:E.round,dense:!0,style:{color:E.color,background:E.background},onClick:j},()=>ui(t.slots.default,M))};return()=>{if(y.value){const E=[];return E.push(a.h("li",null,_(w.value,"zoomIn"))),e.enableResetButton?E.push(a.h("li",null,_(C.value,"zoomReset"))):E.push(a.createCommentVNode("v-if")),E.push(a.h("li",null,_(v.value,"zoomOut"))),a.h("div",{ref:u,class:"vc-zoom-control "+c.classes.value,style:g},a.h("ul",{class:"vc-list"},E))}else return a.createCommentVNode("v-if")}}}),VM=a.defineComponent({name:"VcPrintView",props:{options:Object},setup(e){const t=a.ref(!1),i=a.ref(!1),n=a.getCurrentInstance();n.cesiumClass="VcPrintView";const{t:o}=gt(),r=()=>{var c,u;if(t.value)return;const d=(c=e.options)==null?void 0:c.printWindow.document.getElementsByTagName("img");if(d.length===0)return;let m=!0;for(let h=0;m&&h<d.length;++h)m=d[h].complete;m&&(l(),t.value=m,t.value&&!i.value&&(((u=e.options)==null?void 0:u.readyCallback)&&e.options.readyCallback(e.options.printWindow),i.value=!0))};let s;const l=()=>{s&&s()};return a.onMounted(()=>{var c;const u=(c=e.options)==null?void 0:c.printWindow,d=window,m=u==null?void 0:u.setInterval(r,200),h=d.setInterval(r,200);s=()=>{u.clearInterval(m),d.clearInterval(h),s=void 0}}),a.onUnmounted(()=>{l()}),()=>{var c,u,d,m,h,f;const p=[];if(p.push(a.h("p",{},a.h("img",{src:(c=e.options)==null?void 0:c.image,alt:o("vc.navigation.screenshot"),class:"vc-map-image"}))),((u=e.options)==null?void 0:u.credits.length)&&((d=e.options)==null?void 0:d.showCredit)?p.push(a.h("h1",{},o("vc.navigation.credit"))):p.push(a.createCommentVNode("v-if")),((m=e.options)==null?void 0:m.credits.length)&&((h=e.options)==null?void 0:h.showCredit)){const y=[];(f=e.options)==null||f.credits.forEach(g=>{y.push(a.h("li",{innerHTML:g}))}),p.push(a.h("ul",{},y))}else p.push(a.createCommentVNode("v-if"));return a.h("div",{},p)}}});const NM=`
  .background {
    width: 100%;
    fill: rgba(255, 255, 255, 1.0);
  }

  .map-image {
    max-width: 95vw;
    max-height: 95vh;
  }

  .layer-legends {
    display: inline;
    float: left;
    padding-left: 20px;
    padding-right: 20px;
  }

  .layer-title {
    font-weight: bold;
  }

  h1, h2, h3 {
    clear: both;
  }
`;var kM=e=>{const{printWindow:t=window.open(),closeCallback:i,title:n}=e;i&&t.addEventListener("unload",()=>{i(t)}),t.document.open(),t.document.close(),t.document.head.innerHTML=`
    <meta charset="UTF-8">
    <title>${e.title}</title>
    <style>${NM}</style>
    `,t.document.body.innerHTML='<div id="print"></div>',e.printWindow=e.printWindow||t;const o={options:e};a.createApp(VM,o).mount(t.document.getElementById("print"))},kh={showCredit:{type:Boolean,default:!0},printAutomatically:{type:Boolean,default:!1},showPrintView:{type:Boolean,default:!0},downloadAutomatically:{type:Boolean,default:!1},...dn,icon:{type:String,default:"vc-icons-capture"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},screenshotName:String};function zM(e){const t=Jn();let i=0;const n=setTimeout(function(){t.reject(!1)},1e4);function o(){clearTimeout(n)}function r(){i<=0&&t.resolve()}return e.matchMedia&&e.matchMedia("print").addListener(function(l){o(),l.matches?++i:(--i,r())}),e.onbeforeprint=function(){o(),++i},e.onafterprint=function(){o(),--i,r()},e.document.execCommand("print",!0,null)||e.print(),t.promise}const $M={...ye,printEvt:e=>!0},zh=kh;var vc=a.defineComponent({name:"VcPrint",props:zh,emits:$M,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="VcPrint",n.cesiumEvents=[];const o=Le(e,t,n);if(o===void 0)return;const{t:r}=gt(),{$services:s}=o,l=a.ref(null),c=a.ref(null),u=a.ref(null),d=oi(e),m=a.ref(!1),f=((i=Ct(n).proxy)==null?void 0:i.$options.name)==="VcNavigation",p=a.ref(f),y=a.reactive({});a.watch(()=>e,S=>{a.nextTick(()=>{!n.mounted||g()})},{deep:!0}),n.createCesiumObject=async()=>new Promise((S,x)=>{p.value=!0,a.nextTick(()=>{const{viewer:T}=s;f||T._element.appendChild(ie(l)),S(ie(l))})}),n.mount=async()=>{var S;g();const{viewer:x}=s;return(S=x.viewerWidgetResized)==null||S.raiseEvent({type:n.cesiumClass,status:"mounted",target:ie(l)}),!0},n.unmount=async()=>{var S;const x=s.viewer._element;f||x.contains(ie(l))&&x.removeChild(ie(l));const{viewer:T}=s;return(S=T.viewerWidgetResized)==null||S.raiseEvent({type:n.cesiumClass,status:"unmounted",target:ie(l)}),!0};const g=()=>{var S;const x=d.style.value;if(y.left=x.left,y.top=x.top,y.transform=x.transform,!f){const T=d.attach.value;((S=ie(u))==null?void 0:S.$el)!==void 0&&((T.bottom||T.top)&&!T.left&&!T.right&&(x.left="50%",x.transform="translate(-50%, 0)"),(T.left||T.right)&&!T.top&&!T.bottom&&(x.top="50%",x.transform="translate(0, -50%)"))}Object.assign(y,x)},v=()=>{var S;(S=ie(c))==null||S.hide();const{viewer:x}=s;l5(x).then(T=>{if(e.downloadAutomatically){const I=document.createElement("a");I.download=e.screenshotName||r("vc.navigation.print.screenshot"),I.style.display="none",I.href=T,document.body.appendChild(I),I.click(),document.body.removeChild(I)}(e.printAutomatically||e.showPrintView)&&(e.showPrintView?C(T):e.printAutomatically&&w(T)),Ee(n,"printEvt")&&t.emit("printEvt",{type:"capture",image:T,status:"end"})})},w=S=>{P(!0,!0,S)},C=S=>{P(!1,!1,S)},P=(S,x,T)=>{m.value=!0;let V;S&&(V=document.createElement("iframe"),document.body.appendChild(V));const{viewer:I}=s;kM({image:T,showCredit:e.showCredit,credits:_(I),printWindow:V?V.contentWindow:void 0,title:r("vc.navigation.print.printViewTitle"),readyCallback:R=>{x&&zM(R).catch(L=>{o.logger.warn(L)}).then(()=>{V&&document.body.removeChild(V),S&&(m.value=!1)})},closeCallback:R=>{S&&(m.value=!1)}}),S||(m.value=!1)},_=S=>S.scene.frameState.creditDisplay._currentFrameCredits.screenCredits.values.concat(S.scene.frameState.creditDisplay._currentFrameCredits.lightboxCredits.values).map(T=>T.html),E=S=>{m.value&&(S.cancel=!0)};return()=>{if(p.value){const S=[];S.push(a.h(cn,{name:e.icon,size:e.size})),S.push(a.h("div",null,e.label)),Ye(e.tooltip)?S.push(a.h(wt,{ref:c,onBeforeShow:E,...e.tooltip},()=>a.h("strong",null,Ye(e.tooltip)&&e.tooltip.tip||r("vc.navigation.print.printTip")))):S.push(a.createCommentVNode("v-if"));const x=[a.h(Kt,{ref:u,size:e.size,disabled:m.value,flat:e.flat,stack:e.stack,round:e.round,style:{color:e.color,background:e.background},dense:!0,onClick:v},()=>S)];return a.h("div",{ref:l,class:"vc-print "+d.classes.value,style:y},x)}else return a.createCommentVNode("v-if")}}}),$h=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Gh={exports:{}};(function(e,t){(function(i,n){e.exports=n()})($h,function(){function i(m){var h=[];return m.AMapUI&&h.push(n(m.AMapUI)),m.Loca&&h.push(o(m.Loca)),Promise.all(h)}function n(m){return new Promise(function(h,f){var p=[];if(m.plugins)for(var y=0;y<m.plugins.length;y+=1)s.AMapUI.plugins.indexOf(m.plugins[y])==-1&&p.push(m.plugins[y]);if(l.AMapUI===r.failed)f("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(l.AMapUI===r.notload){l.AMapUI=r.loading,s.AMapUI.version=m.version||s.AMapUI.version,y=s.AMapUI.version;var g=document.body||document.head,v=document.createElement("script");v.type="text/javascript",v.src="https://webapi.amap.com/ui/"+y+"/main.js",v.onerror=function(w){l.AMapUI=r.failed,f("\u8BF7\u6C42 AMapUI \u5931\u8D25")},v.onload=function(){if(l.AMapUI=r.loaded,p.length)window.AMapUI.loadUI(p,function(){for(var w=0,C=p.length;w<C;w++){var P=p[w].split("/").slice(-1)[0];window.AMapUI[P]=arguments[w]}for(h();c.AMapUI.length;)c.AMapUI.splice(0,1)[0]()});else for(h();c.AMapUI.length;)c.AMapUI.splice(0,1)[0]()},g.appendChild(v)}else l.AMapUI===r.loaded?m.version&&m.version!==s.AMapUI.version?f("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):p.length?window.AMapUI.loadUI(p,function(){for(var w=0,C=p.length;w<C;w++){var P=p[w].split("/").slice(-1)[0];window.AMapUI[P]=arguments[w]}h()}):h():m.version&&m.version!==s.AMapUI.version?f("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):c.AMapUI.push(function(w){w?f(w):p.length?window.AMapUI.loadUI(p,function(){for(var C=0,P=p.length;C<P;C++){var _=p[C].split("/").slice(-1)[0];window.AMapUI[_]=arguments[C]}h()}):h()})})}function o(m){return new Promise(function(h,f){if(l.Loca===r.failed)f("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(l.Loca===r.notload){l.Loca=r.loading,s.Loca.version=m.version||s.Loca.version;var p=s.Loca.version,y=s.AMap.version.startsWith("2"),g=p.startsWith("2");if(y&&!g||!y&&g)f("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{y=s.key,g=document.body||document.head;var v=document.createElement("script");v.type="text/javascript",v.src="https://webapi.amap.com/loca?v="+p+"&key="+y,v.onerror=function(w){l.Loca=r.failed,f("\u8BF7\u6C42 AMapUI \u5931\u8D25")},v.onload=function(){for(l.Loca=r.loaded,h();c.Loca.length;)c.Loca.splice(0,1)[0]()},g.appendChild(v)}}else l.Loca===r.loaded?m.version&&m.version!==s.Loca.version?f("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):h():m.version&&m.version!==s.Loca.version?f("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):c.Loca.push(function(w){w?f(w):f()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var r;(function(m){m.notload="notload",m.loading="loading",m.loaded="loaded",m.failed="failed"})(r||(r={}));var s={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:r.notload,AMapUI:r.notload,Loca:r.notload},c={AMap:[],AMapUI:[],Loca:[]},u=[],d=function(m){typeof m=="function"&&(l.AMap===r.loaded?m(window.AMap):u.push(m))};return{load:function(m){return new Promise(function(h,f){if(l.AMap==r.failed)f("");else if(l.AMap==r.notload){var p=m.key,y=m.version,g=m.plugins;p?(window.AMap&&location.host!=="lbs.amap.com"&&f("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),s.key=p,s.AMap.version=y||s.AMap.version,s.AMap.plugins=g||s.AMap.plugins,l.AMap=r.loading,y=document.body||document.head,window.___onAPILoaded=function(w){if(delete window.___onAPILoaded,w)l.AMap=r.failed,f(w);else for(l.AMap=r.loaded,i(m).then(function(){h(window.AMap)}).catch(f);u.length;)u.splice(0,1)[0]()},g=document.createElement("script"),g.type="text/javascript",g.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+s.AMap.version+"&key="+p+"&plugin="+s.AMap.plugins.join(","),g.onerror=function(w){l.AMap=r.failed,f(w)},y.appendChild(g)):f("\u8BF7\u586B\u5199key")}else if(l.AMap==r.loaded)if(m.key&&m.key!==s.key)f("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(m.version&&m.version!==s.AMap.version)f("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(p=[],m.plugins)for(y=0;y<m.plugins.length;y+=1)s.AMap.plugins.indexOf(m.plugins[y])==-1&&p.push(m.plugins[y]);p.length?window.AMap.plugin(p,function(){i(m).then(function(){h(window.AMap)}).catch(f)}):i(m).then(function(){h(window.AMap)}).catch(f)}else if(m.key&&m.key!==s.key)f("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(m.version&&m.version!==s.AMap.version)f("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var v=[];if(m.plugins)for(y=0;y<m.plugins.length;y+=1)s.AMap.plugins.indexOf(m.plugins[y])==-1&&v.push(m.plugins[y]);d(function(){v.length?window.AMap.plugin(v,function(){i(m).then(function(){h(window.AMap)}).catch(f)}):i(m).then(function(){h(window.AMap)}).catch(f)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,s={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:r.notload,AMapUI:r.notload,Loca:r.notload},c={AMap:[],AMapUI:[],Loca:[]}}}})})(Gh);var GM=Gh.exports,Uh={geolocation:{type:Object,default:()=>({enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},amap:Object,id:{type:String,default:"My Location"},pointColor:{type:[Array,Object,String],default:"#08ABD5"},pixelSize:{type:Number,default:25/2},outlineWidth:{type:Number,default:3},outlineColor:{type:[Array,Object,String],default:"#ffffff"},level:{type:Number,default:6},duration:{type:Number,default:3},factor:{type:Number,default:.01},maximumHeight:Number,hpr:{type:Array,default:()=>[0,0,3e3]},customAPI:Function,description:Function,...dn,icon:{type:String,default:"vc-icons-geolocation"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},loadingType:{type:String,default:"puff"}};const UM={...ye,locationEvt:e=>!0},Hh=Uh;var yc=a.defineComponent({name:"VcMyLocation",props:Hh,emits:UM,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="VcMyLocation",n.cesiumEvents=[];const o=Le(e,t,n);if(o===void 0)return;const{$services:r}=o,{t:s}=gt(),l=a.ref(null),c=a.ref(null),u=a.ref(null),d=a.ref(!1),m=oi(e),f=((i=Ct(n).proxy)==null?void 0:i.$options.name)==="VcNavigation",p=a.ref(f),y=a.reactive({});let g,v;a.watch(()=>e,V=>{a.nextTick(()=>{!n.mounted||C()})},{deep:!0});const w=a.computed(()=>d.value?s("vc.navigation.myLocation.positioning"):Ye(e.tooltip)&&e.tooltip.tip||s("vc.navigation.myLocation.myLocationTip"));n.createCesiumObject=async()=>{p.value=!0;const{viewer:V}=r,{CustomDataSource:I}=Cesium,R=V.dataSources.getByName("__vc-myLocation__");R.length?g=R[0]:V.dataSources.add(new I("__vc-myLocation__")).then(M=>{g=M});let L;if(e.amap&&e.amap.key){const M=e.amap.options;L=new Promise((b,B)=>{var A,Z;GM.load({key:(A=e.amap)==null?void 0:A.key,version:(Z=e.amap)==null?void 0:Z.version,plugins:["AMap.Geolocation"]}).then(F=>{v=new F.Geolocation(M),b(v)}).catch(F=>{o.logger.error(F),B(F)})})}const j=new Promise((M,b)=>{a.nextTick(()=>{f||r.viewer._element.appendChild(ie(l)),M(ie(l))})});return Promise.all([j,L]).then(M=>M[0])},n.mount=async()=>{var V;C();const{viewer:I}=r;return(V=I.viewerWidgetResized)==null||V.raiseEvent({type:n.cesiumClass,status:"mounted",target:ie(l)}),!0},n.unmount=async()=>{var V;const{viewer:I}=r;if(v){const L=document.getElementsByTagName("script"),j=[];for(const M of L)M.src.indexOf("/webapi.amap.com/maps")>-1&&j.push(M);j.forEach(M=>{document.getElementsByTagName("body")[0].removeChild(M)})}const R=r.viewer._element;return f||R.contains(ie(l))&&R.removeChild(ie(l)),(V=I.viewerWidgetResized)==null||V.raiseEvent({type:n.cesiumClass,status:"unmounted",target:ie(l)}),I.dataSources.remove(g,!0)};const C=()=>{var V;const I=m.style.value;if(y.left=I.left,y.top=I.top,y.transform=I.transform,!f){const R=m.attach.value,L=(V=ie(u))==null?void 0:V.$el;L!==void 0&&(L.getBoundingClientRect(),(R.bottom||R.top)&&!R.left&&!R.right&&(I.left="50%",I.transform="translate(-50%, 0)"),(R.left||R.right)&&!R.top&&!R.bottom&&(I.top="50%",I.transform="translate(0, -50%)"))}Object.assign(y,I)},P=()=>{var V;if((V=ie(c))==null||V.hide(),d.value=!0,pt(e.customAPI)){const I=e.customAPI(S);_(I)}else v&&e.amap&&e.amap.key?v.getCurrentPosition((I,R)=>{var L;if(I==="complete"){let j=[R.position.lng,R.position.lat];((L=e.amap)==null?void 0:L.transformToWGS84)&&(j=Vl(j[0],j[1])),_({lng:j[0],lat:j[1],address:R.formattedAddress},R)}else S(s("vc.navigation.myLocation.fail"),R.message)}):e.geolocation?navigator.geolocation.getCurrentPosition(I=>{_({lng:I.coords.longitude,lat:I.coords.latitude},I)},S,{enableHighAccuracy:e.geolocation.enableHighAccuracy,timeout:e.geolocation.timeout,maximumAge:e.geolocation.maximumAge}):S(s("vc.navigation.myLocation.fail"))},_=(V,I)=>{var R;const L=V.lng,j=V.lat,M=V.address,{Rectangle:b,sampleTerrain:B,defined:A,SceneMode:Z}=Cesium,{viewer:F}=r;g.entities.removeAll();const $=g.entities.add({id:e.id,position:Ze([L,j],F.scene.globe.ellipsoid),point:{color:Ae(e.pointColor),pixelSize:e.pixelSize,outlineWidth:e.outlineWidth,outlineColor:Ae(e.outlineColor)},properties:{...I},description:((R=e.description)==null?void 0:R.call(this,V,I))||E({[s("vc.navigation.myLocation.lng")]:L,[s("vc.navigation.myLocation.lat")]:j,[s("vc.navigation.myLocation.address")]:M})}),N=Ee(n,"locationEvt");N&&t.emit("locationEvt",{type:"location",position:V,detail:I,entity:$});const z={duration:e.duration};if(A(e.maximumHeight)&&(z.maximumHeight=e.maximumHeight),A(e.hpr)&&He(e.hpr)&&(z.offset=new Cesium.HeadingPitchRange(e.hpr[0],e.hpr[1],e.hpr[2])),F.scene.mode===Z.SCENE2D||F.scene.mode===Z.COLUMBUS_VIEW)return F.flyTo($,z).then(()=>{d.value=!1,N&&t.emit("locationEvt",{type:"zoomIn",camera:F.camera,status:"end"})});const G=e.factor,H=b.fromDegrees(L-G,j-G,L+G,j+G),oe=F.scene.camera,Y=oe.getRectangleCameraCoordinates(H),W=F.scene.globe.ellipsoid.cartesianToCartographic(Y),q=F.scene.globe.terrainProvider,K=e.level,U=[b.center(H)];return B(q,K,U).then(function(k){const ee={longitude:W.longitude,latitude:W.latitude,height:W.height+k[0].height},X=F.scene.globe.ellipsoid.cartographicToCartesian(ee);N&&t.emit("locationEvt",{type:"zoomIn",camera:F.camera,status:"start"}),oe.flyTo({duration:e.duration,destination:X,complete:()=>{d.value=!1,N&&t.emit("locationEvt",{type:"zoomIn",camera:F.camera,status:"end"})},cancel:()=>{d.value=!1,N&&t.emit("locationEvt",{type:"zoomIn",camera:F.camera,status:"cancel"})}})})},E=(V,I)=>{let R="";V instanceof Cesium.PropertyBag&&(V=V.getValue(Cesium.JulianDate.now()));for(let L in V)if(Object.prototype.hasOwnProperty.call(V,L)){if(L===I)continue;let j=V[L];typeof j=="object"&&(j=E(j)),L=L.replace(/_/g," "),Cesium.defined(j)&&(R+="<tr><th>"+L+"</th><td>"+j+"</td></tr>")}return R.length>0&&(R='<table class="cesium-infoBox-defaultTable"><tbody>'+R+"</tbody></table>"),R},S=(...V)=>{d.value=!1,o.logger.error(...V)},x=()=>{switch(e.loadingType){case"bars":return va;case"ios":return ic;case"orbit":return nc;case"oval":return oc;case"puff":return rc;case"tail":return ac;default:return va}},T=V=>{d.value&&(V.cancel=!0)};return()=>{if(p.value){const V=[];return V.push(a.h(cn,{name:e.icon,size:e.size})),V.push(a.h("div",null,e.label)),Ye(e.tooltip)?V.push(a.h(wt,{ref:c,onBeforeShow:T,...e.tooltip},()=>a.h("strong",null,w.value))):V.push(a.createCommentVNode("v-if")),a.h("div",{ref:l,class:"vc-my-location "+m.classes.value,style:y},[a.h(Kt,{ref:u,size:e.size,flat:e.flat,stack:e.stack,round:e.round,loading:d.value,dense:!0,style:{color:e.color,background:e.background},onClick:P},{default:()=>V,loading:()=>a.h(x())})])}else return a.createCommentVNode("v-if")}}});function HM(e,t,i){const n={latitude:"",longitude:"",elevation:""},{defaultValue:o,defined:r}=Cesium,s=o(i,{}),l=o(s.digits,5);return n.latitude=Math.abs(t).toFixed(l)+"\xB0"+(t<0?"S":"N"),n.longitude=Math.abs(e).toFixed(l)+"\xB0"+(e<0?"W":"E"),r(s.height)?n.elevation=Math.round(s.height)+(r(s.errorBar)?"\xB1"+Math.round(s.errorBar):"")+"m":n.elevation="",n}function WM(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var jn=1,Fn=2,ba=3,qM=4,Cc=5,Wh=6378137,ZM=6356752314e-3,qh=.0066943799901413165,Jo=484813681109536e-20,he=Math.PI/2,XM=.16666666666666666,YM=.04722222222222222,QM=.022156084656084655,Ce=1e-10,Rt=.017453292519943295,Ii=57.29577951308232,Ne=Math.PI/4,er=Math.PI*2,ut=3.14159265359,Jt={};Jt.greenwich=0,Jt.lisbon=-9.131906111111,Jt.paris=2.337229166667,Jt.bogota=-74.080916666667,Jt.madrid=-3.687938888889,Jt.rome=12.452333333333,Jt.bern=7.439583333333,Jt.jakarta=106.807719444444,Jt.ferro=-17.666666666667,Jt.brussels=4.367975,Jt.stockholm=18.058277777778,Jt.athens=23.7163375,Jt.oslo=10.722916666667;var KM={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Zh=/[\s_\-\/\(\)]/g;function mn(e,t){if(e[t])return e[t];for(var i=Object.keys(e),n=t.toLowerCase().replace(Zh,""),o=-1,r,s;++o<i.length;)if(r=i[o],s=r.toLowerCase().replace(Zh,""),s===n)return e[r]}function bc(e){var t={},i=e.split("+").map(function(l){return l.trim()}).filter(function(l){return l}).reduce(function(l,c){var u=c.split("=");return u.push(!0),l[u[0].toLowerCase()]=u[1],l},{}),n,o,r,s={proj:"projName",datum:"datumCode",rf:function(l){t.rf=parseFloat(l)},lat_0:function(l){t.lat0=l*Rt},lat_1:function(l){t.lat1=l*Rt},lat_2:function(l){t.lat2=l*Rt},lat_ts:function(l){t.lat_ts=l*Rt},lon_0:function(l){t.long0=l*Rt},lon_1:function(l){t.long1=l*Rt},lon_2:function(l){t.long2=l*Rt},alpha:function(l){t.alpha=parseFloat(l)*Rt},gamma:function(l){t.rectified_grid_angle=parseFloat(l)},lonc:function(l){t.longc=l*Rt},x_0:function(l){t.x0=parseFloat(l)},y_0:function(l){t.y0=parseFloat(l)},k_0:function(l){t.k0=parseFloat(l)},k:function(l){t.k0=parseFloat(l)},a:function(l){t.a=parseFloat(l)},b:function(l){t.b=parseFloat(l)},r_a:function(){t.R_A=!0},zone:function(l){t.zone=parseInt(l,10)},south:function(){t.utmSouth=!0},towgs84:function(l){t.datum_params=l.split(",").map(function(c){return parseFloat(c)})},to_meter:function(l){t.to_meter=parseFloat(l)},units:function(l){t.units=l;var c=mn(KM,l);c&&(t.to_meter=c.to_meter)},from_greenwich:function(l){t.from_greenwich=l*Rt},pm:function(l){var c=mn(Jt,l);t.from_greenwich=(c||parseFloat(l))*Rt},nadgrids:function(l){l==="@null"?t.datumCode="none":t.nadgrids=l},axis:function(l){var c="ewnsud";l.length===3&&c.indexOf(l.substr(0,1))!==-1&&c.indexOf(l.substr(1,1))!==-1&&c.indexOf(l.substr(2,1))!==-1&&(t.axis=l)},approx:function(){t.approx=!0}};for(n in i)o=i[n],n in s?(r=s[n],typeof r=="function"?r(o):t[r]=o):t[n]=o;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var tr=1,Xh=2,Yh=3,wa=4,Qh=5,wc=-1,JM=/\s/,eS=/[A-Za-z]/,tS=/[A-Za-z84]/,_a=/[,\]]/,Kh=/[\d\.E\-\+]/;function Wi(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=tr}Wi.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==wa)for(;JM.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case tr:return this.neutral(e);case Xh:return this.keyword(e);case wa:return this.quoted(e);case Qh:return this.afterquote(e);case Yh:return this.number(e);case wc:return}},Wi.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=wa;return}if(_a.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)},Wi.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=tr;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=tr,this.currentObject=this.stack.pop(),this.currentObject||(this.state=wc);return}},Wi.prototype.number=function(e){if(Kh.test(e)){this.word+=e;return}if(_a.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)},Wi.prototype.quoted=function(e){if(e==='"'){this.state=Qh;return}this.word+=e},Wi.prototype.keyword=function(e){if(tS.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=tr;return}if(_a.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)},Wi.prototype.neutral=function(e){if(eS.test(e)){this.word=e,this.state=Xh;return}if(e==='"'){this.word="",this.state=wa;return}if(Kh.test(e)){this.word=e,this.state=Yh;return}if(_a.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)},Wi.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===wc)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function iS(e){var t=new Wi(e);return t.output()}function Jh(e,t,i){Array.isArray(t)&&(i.unshift(t),t=null);var n=t?{}:e,o=i.reduce(function(r,s){return oo(s,r),r},n);t&&(e[t]=o)}function oo(e,t){if(!Array.isArray(e)){t[e]=!0;return}var i=e.shift();if(i==="PARAMETER"&&(i=e.shift()),e.length===1){if(Array.isArray(e[0])){t[i]={},oo(e[0],t[i]);return}t[i]=e[0];return}if(!e.length){t[i]=!0;return}if(i==="TOWGS84"){t[i]=e;return}if(i==="AXIS"){i in t||(t[i]=[]),t[i].push(e);return}Array.isArray(i)||(t[i]={});var n;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[i]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&oo(e[2],t[i]);return;case"SPHEROID":case"ELLIPSOID":t[i]={name:e[0],a:e[1],rf:e[2]},e.length===4&&oo(e[3],t[i]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],Jh(t,i,e);return;default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return oo(e,t[i]);return Jh(t,i,e)}}var nS=.017453292519943295;function oS(e,t){var i=t[0],n=t[1];!(i in e)&&n in e&&(e[i]=e[n],t.length===3&&(e[i]=t[2](e[i])))}function qi(e){return e*nS}function rS(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",i=0,n=e.AXIS.length;i<n;++i){var o=[e.AXIS[i][0].toLowerCase(),e.AXIS[i][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="north"?t+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="south"?t+="s":o[0].indexOf("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?t+="e":(o[0].indexOf("west")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var r=e.GEOGCS;e.type==="GEOGCS"&&(r=e),r&&(r.DATUM?e.datumCode=r.DATUM.name.toLowerCase():e.datumCode=r.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(e.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=r.DATUM.SPHEROID.a,e.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(e.datum_params=r.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function s(u){var d=e.to_meter||1;return u*d}var l=function(u){return oS(e,u)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",qi],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",qi],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",qi],["lat0","latitude_of_origin",qi],["lat0","standard_parallel_1",qi],["lat1","standard_parallel_1",qi],["lat2","standard_parallel_2",qi],["azimuth","Azimuth"],["alpha","azimuth",qi],["srsCode","name"]];c.forEach(l),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")&&(e.lat0=qi(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function ef(e){var t=iS(e),i=t.shift(),n=t.shift();t.unshift(["name",n]),t.unshift(["type",i]);var o={};return oo(t,o),rS(o),o}function Wt(e){var t=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?Wt[e]=bc(arguments[1]):Wt[e]=ef(arguments[1]):Wt[e]=i}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(n){Array.isArray(n)?Wt.apply(t,n):Wt(n)});if(typeof e=="string"){if(e in Wt)return Wt[e]}else"EPSG"in e?Wt["EPSG:"+e.EPSG]=e:"ESRI"in e?Wt["ESRI:"+e.ESRI]=e:"IAU2000"in e?Wt["IAU2000:"+e.IAU2000]=e:console.log(e);return}}WM(Wt);function aS(e){return typeof e=="string"}function sS(e){return e in Wt}var lS=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function cS(e){return lS.some(function(t){return e.indexOf(t)>-1})}var uS=["3857","900913","3785","102113"];function dS(e){var t=mn(e,"authority");if(!!t){var i=mn(t,"epsg");return i&&uS.indexOf(i)>-1}}function mS(e){var t=mn(e,"extension");if(!!t)return mn(t,"proj4")}function hS(e){return e[0]==="+"}function fS(e){if(aS(e)){if(sS(e))return Wt[e];if(cS(e)){var t=ef(e);if(dS(t))return Wt["EPSG:3857"];var i=mS(t);return i?bc(i):t}if(hS(e))return bc(e)}else return e}function tf(e,t){e=e||{};var i,n;if(!t)return e;for(n in t)i=t[n],i!==void 0&&(e[n]=i);return e}function Di(e,t,i){var n=e*t;return i/Math.sqrt(1-n*n)}function ir(e){return e<0?-1:1}function we(e){return Math.abs(e)<=ut?e:e-ir(e)*er}function Ei(e,t,i){var n=e*i,o=.5*e;return n=Math.pow((1-n)/(1+n),o),Math.tan(.5*(he-t))/n}function nr(e,t){for(var i=.5*e,n,o,r=he-2*Math.atan(t),s=0;s<=15;s++)if(n=e*Math.sin(r),o=he-2*Math.atan(t*Math.pow((1-n)/(1+n),i))-r,r+=o,Math.abs(o)<=1e-10)return r;return-9999}function pS(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Di(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function gS(e){var t=e.x,i=e.y;if(i*Ii>90&&i*Ii<-90&&t*Ii>180&&t*Ii<-180)return null;var n,o;if(Math.abs(Math.abs(i)-he)<=Ce)return null;if(this.sphere)n=this.x0+this.a*this.k0*we(t-this.long0),o=this.y0+this.a*this.k0*Math.log(Math.tan(Ne+.5*i));else{var r=Math.sin(i),s=Ei(this.e,i,r);n=this.x0+this.a*this.k0*we(t-this.long0),o=this.y0-this.a*this.k0*Math.log(s)}return e.x=n,e.y=o,e}function vS(e){var t=e.x-this.x0,i=e.y-this.y0,n,o;if(this.sphere)o=he-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var r=Math.exp(-i/(this.a*this.k0));if(o=nr(this.e,r),o===-9999)return null}return n=we(this.long0+t/(this.a*this.k0)),e.x=n,e.y=o,e}var yS=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],CS={init:pS,forward:gS,inverse:vS,names:yS};function bS(){}function nf(e){return e}var wS=["longlat","identity"],_S={init:bS,forward:nf,inverse:nf,names:wS},PS=[CS,_S],Pa={},Oa=[];function of(e,t){var i=Oa.length;return e.names?(Oa[i]=e,e.names.forEach(function(n){Pa[n.toLowerCase()]=i}),this):(console.log(t),!0)}function OS(e){if(!e)return!1;var t=e.toLowerCase();if(typeof Pa[t]!="undefined"&&Oa[Pa[t]])return Oa[Pa[t]]}function ES(){PS.forEach(of)}var MS={start:ES,add:of,get:OS},xe={};xe.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},xe.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},xe.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},xe.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},xe.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},xe.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},xe.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},xe.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},xe.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},xe.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},xe.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},xe.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},xe.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},xe.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},xe.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},xe.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},xe.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},xe.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},xe.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},xe.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},xe.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},xe.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},xe.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},xe.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},xe.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},xe.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},xe.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},xe.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},xe.hough={a:6378270,rf:297,ellipseName:"Hough"},xe.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},xe.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},xe.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},xe.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},xe.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},xe.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},xe.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},xe.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},xe.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},xe.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},xe.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},xe.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var SS=xe.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};xe.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function xS(e,t,i,n){var o=e*e,r=t*t,s=(o-r)/o,l=0;n?(e*=1-s*(XM+s*(YM+s*QM)),o=e*e,s=0):l=Math.sqrt(s);var c=(o-r)/r;return{es:s,e:l,ep2:c}}function TS(e,t,i,n,o){if(!e){var r=mn(xe,n);r||(r=SS),e=r.a,t=r.b,i=r.rf}return i&&!t&&(t=(1-1/i)*e),(i===0||Math.abs(e-t)<Ce)&&(o=!0,t=e),{a:e,b:t,rf:i,sphere:o}}var xt={};xt.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},xt.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},xt.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},xt.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},xt.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},xt.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},xt.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},xt.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},xt.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},xt.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},xt.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},xt.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},xt.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},xt.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},xt.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},xt.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},xt.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function AS(e,t,i,n,o,r,s){var l={};return e===void 0||e==="none"?l.datum_type=Cc:l.datum_type=qM,t&&(l.datum_params=t.map(parseFloat),(l.datum_params[0]!==0||l.datum_params[1]!==0||l.datum_params[2]!==0)&&(l.datum_type=jn),l.datum_params.length>3&&(l.datum_params[3]!==0||l.datum_params[4]!==0||l.datum_params[5]!==0||l.datum_params[6]!==0)&&(l.datum_type=Fn,l.datum_params[3]*=Jo,l.datum_params[4]*=Jo,l.datum_params[5]*=Jo,l.datum_params[6]=l.datum_params[6]/1e6+1)),s&&(l.datum_type=ba,l.grids=s),l.a=i,l.b=n,l.es=o,l.ep2=r,l}var rf={};function IS(e,t){var i=new DataView(t),n=LS(i),o=BS(i,n);o.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var r=jS(i,o,n),s={header:o,subgrids:r};return rf[e]=s,s}function DS(e){if(e===void 0)return null;var t=e.split(",");return t.map(RS)}function RS(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:rf[e]||null,isNull:!1}}function ro(e){return e/3600*Math.PI/180}function LS(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function BS(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:_c(e,56,56+8).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function _c(e,t,i){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,i)))}function jS(e,t,i){for(var n=176,o=[],r=0;r<t.nSubgrids;r++){var s=VS(e,n,i),l=NS(e,n,s,i),c=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),u=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);o.push({ll:[ro(s.lowerLongitude),ro(s.lowerLatitude)],del:[ro(s.longitudeInterval),ro(s.latitudeInterval)],lim:[c,u],count:s.gridNodeCount,cvs:FS(l)})}return o}function FS(e){return e.map(function(t){return[ro(t.longitudeShift),ro(t.latitudeShift)]})}function VS(e,t,i){return{name:_c(e,t+8,t+16).trim(),parent:_c(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,i),upperLatitude:e.getFloat64(t+88,i),lowerLongitude:e.getFloat64(t+104,i),upperLongitude:e.getFloat64(t+120,i),latitudeInterval:e.getFloat64(t+136,i),longitudeInterval:e.getFloat64(t+152,i),gridNodeCount:e.getInt32(t+168,i)}}function NS(e,t,i,n){for(var o=t+176,r=16,s=[],l=0;l<i.gridNodeCount;l++){var c={latitudeShift:e.getFloat32(o+l*r,n),longitudeShift:e.getFloat32(o+l*r+4,n),latitudeAccuracy:e.getFloat32(o+l*r+8,n),longitudeAccuracy:e.getFloat32(o+l*r+12,n)};s.push(c)}return s}function Ri(e,t){if(!(this instanceof Ri))return new Ri(e);t=t||function(u){if(u)throw u};var i=fS(e);if(typeof i!="object"){t(e);return}var n=Ri.projections.get(i.projName);if(!n){t(e);return}if(i.datumCode&&i.datumCode!=="none"){var o=mn(xt,i.datumCode);o&&(i.datum_params=i.datum_params||(o.towgs84?o.towgs84.split(","):null),i.ellps=o.ellipse,i.datumName=o.datumName?o.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var r=TS(i.a,i.b,i.rf,i.ellps,i.sphere),s=xS(r.a,r.b,r.rf,i.R_A),l=DS(i.nadgrids),c=i.datum||AS(i.datumCode,i.datum_params,r.a,r.b,s.es,s.ep2,l);tf(this,i),tf(this,n),this.a=r.a,this.b=r.b,this.rf=r.rf,this.sphere=r.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=c,this.init(),t(null,this)}Ri.projections=MS,Ri.projections.start();function kS(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===jn?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===Fn?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function af(e,t,i){var n=e.x,o=e.y,r=e.z?e.z:0,s,l,c,u;if(o<-he&&o>-1.001*he)o=-he;else if(o>he&&o<1.001*he)o=he;else{if(o<-he)return{x:-1/0,y:-1/0,z:e.z};if(o>he)return{x:1/0,y:1/0,z:e.z}}return n>Math.PI&&(n-=2*Math.PI),l=Math.sin(o),u=Math.cos(o),c=l*l,s=i/Math.sqrt(1-t*c),{x:(s+r)*u*Math.cos(n),y:(s+r)*u*Math.sin(n),z:(s*(1-t)+r)*l}}function sf(e,t,i,n){var o=1e-12,r=o*o,s=30,l,c,u,d,m,h,f,p,y,g,v,w,C,P=e.x,_=e.y,E=e.z?e.z:0,S,x,T;if(l=Math.sqrt(P*P+_*_),c=Math.sqrt(P*P+_*_+E*E),l/i<o){if(S=0,c/i<o)return x=he,T=-n,{x:e.x,y:e.y,z:e.z}}else S=Math.atan2(_,P);u=E/c,d=l/c,m=1/Math.sqrt(1-t*(2-t)*d*d),p=d*(1-t)*m,y=u*m,C=0;do C++,f=i/Math.sqrt(1-t*y*y),T=l*p+E*y-f*(1-t*y*y),h=t*f/(f+T),m=1/Math.sqrt(1-h*(2-h)*d*d),g=d*(1-h)*m,v=u*m,w=v*p-g*y,p=g,y=v;while(w*w>r&&C<s);return x=Math.atan(v/Math.abs(g)),{x:S,y:x,z:T}}function zS(e,t,i){if(t===jn)return{x:e.x+i[0],y:e.y+i[1],z:e.z+i[2]};if(t===Fn){var n=i[0],o=i[1],r=i[2],s=i[3],l=i[4],c=i[5],u=i[6];return{x:u*(e.x-c*e.y+l*e.z)+n,y:u*(c*e.x+e.y-s*e.z)+o,z:u*(-l*e.x+s*e.y+e.z)+r}}}function $S(e,t,i){if(t===jn)return{x:e.x-i[0],y:e.y-i[1],z:e.z-i[2]};if(t===Fn){var n=i[0],o=i[1],r=i[2],s=i[3],l=i[4],c=i[5],u=i[6],d=(e.x-n)/u,m=(e.y-o)/u,h=(e.z-r)/u;return{x:d+c*m-l*h,y:-c*d+m+s*h,z:l*d-s*m+h}}}function Ea(e){return e===jn||e===Fn}function GS(e,t,i){if(kS(e,t)||e.datum_type===Cc||t.datum_type===Cc)return i;var n=e.a,o=e.es;if(e.datum_type===ba){var r=lf(e,!1,i);if(r!==0)return;n=Wh,o=qh}var s=t.a,l=t.b,c=t.es;if(t.datum_type===ba&&(s=Wh,l=ZM,c=qh),o===c&&n===s&&!Ea(e.datum_type)&&!Ea(t.datum_type))return i;if(i=af(i,o,n),Ea(e.datum_type)&&(i=zS(i,e.datum_type,e.datum_params)),Ea(t.datum_type)&&(i=$S(i,t.datum_type,t.datum_params)),i=sf(i,c,s,l),t.datum_type===ba){var u=lf(t,!0,i);if(u!==0)return}return i}function lf(e,t,i){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var n={x:-i.x,y:i.y},o={x:Number.NaN,y:Number.NaN},r=[],s=0;s<e.grids.length;s++){var l=e.grids[s];if(r.push(l.name),l.isNull){o=n;break}if(l.grid===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}var c=l.grid.subgrids[0],u=(Math.abs(c.del[1])+Math.abs(c.del[0]))/1e4,d=c.ll[0]-u,m=c.ll[1]-u,h=c.ll[0]+(c.lim[0]-1)*c.del[0]+u,f=c.ll[1]+(c.lim[1]-1)*c.del[1]+u;if(!(m>n.y||d>n.x||f<n.y||h<n.x)&&(o=US(n,t,c),!isNaN(o.x)))break}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*Ii+" "+n.y*Ii+" tried: '"+r+"'"),-1):(i.x=-o.x,i.y=o.y,0)}function US(e,t,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return n;var o={x:e.x,y:e.y};o.x-=i.ll[0],o.y-=i.ll[1],o.x=we(o.x-Math.PI)+Math.PI;var r=cf(o,i);if(t){if(isNaN(r.x))return n;r.x=o.x-r.x,r.y=o.y-r.y;var s=9,l=1e-12,c,u;do{if(u=cf(r,i),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}c={x:o.x-(u.x+r.x),y:o.y-(u.y+r.y)},r.x+=c.x,r.y+=c.y}while(s--&&Math.abs(c.x)>l&&Math.abs(c.y)>l);if(s<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=we(r.x+i.ll[0]),n.y=r.y+i.ll[1]}else isNaN(r.x)||(n.x=e.x+r.x,n.y=e.y+r.y);return n}function cf(e,t){var i={x:e.x/t.del[0],y:e.y/t.del[1]},n={x:Math.floor(i.x),y:Math.floor(i.y)},o={x:i.x-1*n.x,y:i.y-1*n.y},r={x:Number.NaN,y:Number.NaN},s;if(n.x<0||n.x>=t.lim[0]||n.y<0||n.y>=t.lim[1])return r;s=n.y*t.lim[0]+n.x;var l={x:t.cvs[s][0],y:t.cvs[s][1]};s++;var c={x:t.cvs[s][0],y:t.cvs[s][1]};s+=t.lim[0];var u={x:t.cvs[s][0],y:t.cvs[s][1]};s--;var d={x:t.cvs[s][0],y:t.cvs[s][1]},m=o.x*o.y,h=o.x*(1-o.y),f=(1-o.x)*(1-o.y),p=(1-o.x)*o.y;return r.x=f*l.x+h*c.x+p*d.x+m*u.x,r.y=f*l.y+h*c.y+p*d.y+m*u.y,r}function uf(e,t,i){var n=i.x,o=i.y,r=i.z||0,s,l,c,u={};for(c=0;c<3;c++)if(!(t&&c===2&&i.z===void 0))switch(c===0?(s=n,"ew".indexOf(e.axis[c])!==-1?l="x":l="y"):c===1?(s=o,"ns".indexOf(e.axis[c])!==-1?l="y":l="x"):(s=r,l="z"),e.axis[c]){case"e":u[l]=s;break;case"w":u[l]=-s;break;case"n":u[l]=s;break;case"s":u[l]=-s;break;case"u":i[l]!==void 0&&(u.z=s);break;case"d":i[l]!==void 0&&(u.z=-s);break;default:return null}return u}function df(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function HS(e){mf(e.x),mf(e.y)}function mf(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function WS(e,t){return(e.datum.datum_type===jn||e.datum.datum_type===Fn)&&t.datumCode!=="WGS84"||(t.datum.datum_type===jn||t.datum.datum_type===Fn)&&e.datumCode!=="WGS84"}function Ma(e,t,i,n){var o;if(Array.isArray(i)&&(i=df(i)),HS(i),e.datum&&t.datum&&WS(e,t)&&(o=new Ri("WGS84"),i=Ma(e,o,i,n),e=o),n&&e.axis!=="enu"&&(i=uf(e,!1,i)),e.projName==="longlat")i={x:i.x*Rt,y:i.y*Rt,z:i.z||0};else if(e.to_meter&&(i={x:i.x*e.to_meter,y:i.y*e.to_meter,z:i.z||0}),i=e.inverse(i),!i)return;if(e.from_greenwich&&(i.x+=e.from_greenwich),i=GS(e.datum,t.datum,i),!!i)return t.from_greenwich&&(i={x:i.x-t.from_greenwich,y:i.y,z:i.z||0}),t.projName==="longlat"?i={x:i.x*Ii,y:i.y*Ii,z:i.z||0}:(i=t.forward(i),t.to_meter&&(i={x:i.x/t.to_meter,y:i.y/t.to_meter,z:i.z||0})),n&&t.axis!=="enu"?uf(t,!0,i):i}var hf=Ri("WGS84");function Pc(e,t,i,n){var o,r,s;return Array.isArray(i)?(o=Ma(e,t,i,n)||{x:NaN,y:NaN},i.length>2?typeof e.name!="undefined"&&e.name==="geocent"||typeof t.name!="undefined"&&t.name==="geocent"?typeof o.z=="number"?[o.x,o.y,o.z].concat(i.splice(3)):[o.x,o.y,i[2]].concat(i.splice(3)):[o.x,o.y].concat(i.splice(2)):[o.x,o.y]):(r=Ma(e,t,i,n),s=Object.keys(i),s.length===2||s.forEach(function(l){if(typeof e.name!="undefined"&&e.name==="geocent"||typeof t.name!="undefined"&&t.name==="geocent"){if(l==="x"||l==="y"||l==="z")return}else if(l==="x"||l==="y")return;r[l]=i[l]}),r)}function ff(e){return e instanceof Ri?e:e.oProj?e.oProj:Ri(e)}function ri(e,t,i){e=ff(e);var n=!1,o;return typeof t=="undefined"?(t=e,e=hf,n=!0):(typeof t.x!="undefined"||Array.isArray(t))&&(i=t,t=e,e=hf,n=!0),t=ff(t),i?Pc(e,t,i):(o={forward:function(r,s){return Pc(e,t,r,s)},inverse:function(r,s){return Pc(t,e,r,s)}},n&&(o.oProj=t),o)}var pf=6,gf="AJSAJS",vf="AFAFAF",ao=65,ei=73,pi=79,or=86,rr=90,qS={forward:yf,inverse:ZS,toPoint:Cf};function yf(e,t){return t=t||5,QS(XS({lat:e[1],lon:e[0]}),t)}function ZS(e){var t=Ec(_f(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function Cf(e){var t=Ec(_f(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Oc(e){return e*(Math.PI/180)}function bf(e){return 180*(e/Math.PI)}function XS(e){var t=e.lat,i=e.lon,n=6378137,o=.00669438,r=.9996,s,l,c,u,d,m,h,f=Oc(t),p=Oc(i),y,g;g=Math.floor((i+180)/6)+1,i===180&&(g=60),t>=56&&t<64&&i>=3&&i<12&&(g=32),t>=72&&t<84&&(i>=0&&i<9?g=31:i>=9&&i<21?g=33:i>=21&&i<33?g=35:i>=33&&i<42&&(g=37)),s=(g-1)*6-180+3,y=Oc(s),l=o/(1-o),c=n/Math.sqrt(1-o*Math.sin(f)*Math.sin(f)),u=Math.tan(f)*Math.tan(f),d=l*Math.cos(f)*Math.cos(f),m=Math.cos(f)*(p-y),h=n*((1-o/4-3*o*o/64-5*o*o*o/256)*f-(3*o/8+3*o*o/32+45*o*o*o/1024)*Math.sin(2*f)+(15*o*o/256+45*o*o*o/1024)*Math.sin(4*f)-35*o*o*o/3072*Math.sin(6*f));var v=r*c*(m+(1-u+d)*m*m*m/6+(5-18*u+u*u+72*d-58*l)*m*m*m*m*m/120)+5e5,w=r*(h+c*Math.tan(f)*(m*m/2+(5-u+9*d+4*d*d)*m*m*m*m/24+(61-58*u+u*u+600*d-330*l)*m*m*m*m*m*m/720));return t<0&&(w+=1e7),{northing:Math.round(w),easting:Math.round(v),zoneNumber:g,zoneLetter:YS(t)}}function Ec(e){var t=e.northing,i=e.easting,n=e.zoneLetter,o=e.zoneNumber;if(o<0||o>60)return null;var r=.9996,s=6378137,l=.00669438,c,u=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),d,m,h,f,p,y,g,v,w,C=i-5e5,P=t;n<"N"&&(P-=1e7),g=(o-1)*6-180+3,c=l/(1-l),y=P/r,v=y/(s*(1-l/4-3*l*l/64-5*l*l*l/256)),w=v+(3*u/2-27*u*u*u/32)*Math.sin(2*v)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*v)+151*u*u*u/96*Math.sin(6*v),d=s/Math.sqrt(1-l*Math.sin(w)*Math.sin(w)),m=Math.tan(w)*Math.tan(w),h=c*Math.cos(w)*Math.cos(w),f=s*(1-l)/Math.pow(1-l*Math.sin(w)*Math.sin(w),1.5),p=C/(d*r);var _=w-d*Math.tan(w)/f*(p*p/2-(5+3*m+10*h-4*h*h-9*c)*p*p*p*p/24+(61+90*m+298*h+45*m*m-252*c-3*h*h)*p*p*p*p*p*p/720);_=bf(_);var E=(p-(1+2*m+h)*p*p*p/6+(5-2*h+28*m-3*h*h+8*c+24*m*m)*p*p*p*p*p/120)/Math.cos(w);E=g+bf(E);var S;if(e.accuracy){var x=Ec({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});S={top:x.lat,right:x.lon,bottom:_,left:E}}else S={lat:_,lon:E};return S}function YS(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function QS(e,t){var i="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+KS(e.easting,e.northing,e.zoneNumber)+i.substr(i.length-5,t)+n.substr(n.length-5,t)}function KS(e,t,i){var n=wf(i),o=Math.floor(e/1e5),r=Math.floor(t/1e5)%20;return JS(o,r,n)}function wf(e){var t=e%pf;return t===0&&(t=pf),t}function JS(e,t,i){var n=i-1,o=gf.charCodeAt(n),r=vf.charCodeAt(n),s=o+e-1,l=r+t,c=!1;s>rr&&(s=s-rr+ao-1,c=!0),(s===ei||o<ei&&s>ei||(s>ei||o<ei)&&c)&&s++,(s===pi||o<pi&&s>pi||(s>pi||o<pi)&&c)&&(s++,s===ei&&s++),s>rr&&(s=s-rr+ao-1),l>or?(l=l-or+ao-1,c=!0):c=!1,(l===ei||r<ei&&l>ei||(l>ei||r<ei)&&c)&&l++,(l===pi||r<pi&&l>pi||(l>pi||r<pi)&&c)&&(l++,l===ei&&l++),l>or&&(l=l-or+ao-1);var u=String.fromCharCode(s)+String.fromCharCode(l);return u}function _f(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,i=null,n="",o,r=0;!/[A-Z]/.test(o=e.charAt(r));){if(r>=2)throw"MGRSPoint bad conversion from: "+e;n+=o,r++}var s=parseInt(n,10);if(r===0||r+3>t)throw"MGRSPoint bad conversion from: "+e;var l=e.charAt(r++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+" not handled: "+e;i=e.substring(r,r+=2);for(var c=wf(s),u=e3(i.charAt(0),c),d=t3(i.charAt(1),c);d<i3(l);)d+=2e6;var m=t-r;if(m%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var h=m/2,f=0,p=0,y,g,v,w,C;return h>0&&(y=1e5/Math.pow(10,h),g=e.substring(r,r+h),f=parseFloat(g)*y,v=e.substring(r+h),p=parseFloat(v)*y),w=f+u,C=p+d,{easting:w,northing:C,zoneLetter:l,zoneNumber:s,accuracy:y}}function e3(e,t){for(var i=gf.charCodeAt(t-1),n=1e5,o=!1;i!==e.charCodeAt(0);){if(i++,i===ei&&i++,i===pi&&i++,i>rr){if(o)throw"Bad character: "+e;i=ao,o=!0}n+=1e5}return n}function t3(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var i=vf.charCodeAt(t-1),n=0,o=!1;i!==e.charCodeAt(0);){if(i++,i===ei&&i++,i===pi&&i++,i>or){if(o)throw"Bad character: "+e;i=ao,o=!0}n+=1e5}return n}function i3(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function so(e,t,i){if(!(this instanceof so))return new so(e,t,i);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t=="undefined"){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=t,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}so.fromMGRS=function(e){return new so(Cf(e))},so.prototype.toMGRS=function(e){return yf([this.x,this.y],e)};var n3=1,o3=.25,Pf=.046875,Of=.01953125,Ef=.01068115234375,r3=.75,a3=.46875,s3=.013020833333333334,l3=.007120768229166667,c3=.3645833333333333,u3=.005696614583333333,d3=.3076171875;function Mf(e){var t=[];t[0]=n3-e*(o3+e*(Pf+e*(Of+e*Ef))),t[1]=e*(r3-e*(Pf+e*(Of+e*Ef)));var i=e*e;return t[2]=i*(a3-e*(s3+e*l3)),i*=e,t[3]=i*(c3-e*u3),t[4]=i*e*d3,t}function Sa(e,t,i,n){return i*=t,t*=t,n[0]*e-i*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))}var m3=20;function Sf(e,t,i){for(var n=1/(1-t),o=e,r=m3;r;--r){var s=Math.sin(o),l=1-t*s*s;if(l=(Sa(o,s,Math.cos(o),i)-e)*(l*Math.sqrt(l))*n,o-=l,Math.abs(l)<Ce)return o}return o}function h3(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Mf(this.es),this.ml0=Sa(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function f3(e){var t=e.x,i=e.y,n=we(t-this.long0),o,r,s,l=Math.sin(i),c=Math.cos(i);if(this.es){var d=c*n,m=Math.pow(d,2),h=this.ep2*Math.pow(c,2),f=Math.pow(h,2),p=Math.abs(c)>Ce?Math.tan(i):0,y=Math.pow(p,2),g=Math.pow(y,2);o=1-this.es*Math.pow(l,2),d=d/Math.sqrt(o);var v=Sa(i,l,c,this.en);r=this.a*(this.k0*d*(1+m/6*(1-y+h+m/20*(5-18*y+g+14*h-58*y*h+m/42*(61+179*g-g*y-479*y)))))+this.x0,s=this.a*(this.k0*(v-this.ml0+l*n*d/2*(1+m/12*(5-y+9*h+4*f+m/30*(61+g-58*y+270*h-330*y*h+m/56*(1385+543*g-g*y-3111*y))))))+this.y0}else{var u=c*Math.sin(n);if(Math.abs(Math.abs(u)-1)<Ce)return 93;if(r=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,s=c*Math.cos(n)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(s),u>=1){if(u-1>Ce)return 93;s=0}else s=Math.acos(s);i<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return e.x=r,e.y=s,e}function p3(e){var t,i,n,o,r=(e.x-this.x0)*(1/this.a),s=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+s/this.k0,i=Sf(t,this.es,this.en),Math.abs(i)<he){var m=Math.sin(i),h=Math.cos(i),f=Math.abs(h)>Ce?Math.tan(i):0,p=this.ep2*Math.pow(h,2),y=Math.pow(p,2),g=Math.pow(f,2),v=Math.pow(g,2);t=1-this.es*Math.pow(m,2);var w=r*Math.sqrt(t)/this.k0,C=Math.pow(w,2);t=t*f,n=i-t*C/(1-this.es)*.5*(1-C/12*(5+3*g-9*p*g+p-4*y-C/30*(61+90*g-252*p*g+45*v+46*p-C/56*(1385+3633*g+4095*v+1574*v*g)))),o=we(this.long0+w*(1-C/6*(1+2*g+p-C/20*(5+28*g+24*v+8*p*g+6*p-C/42*(61+662*g+1320*v+720*v*g))))/h)}else n=he*ir(s),o=0;else{var l=Math.exp(r/this.k0),c=.5*(l-1/l),u=this.lat0+s/this.k0,d=Math.cos(u);t=Math.sqrt((1-Math.pow(d,2))/(1+Math.pow(c,2))),n=Math.asin(t),s<0&&(n=-n),c===0&&d===0?o=0:o=we(Math.atan2(c,d)+this.long0)}return e.x=o,e.y=n,e}var g3=["Fast_Transverse_Mercator","Fast Transverse Mercator"],xa={init:h3,forward:f3,inverse:p3,names:g3};function xf(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function Ta(e,t){e=Math.abs(e),t=Math.abs(t);var i=Math.max(e,t),n=Math.min(e,t)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}function v3(e){var t=1+e,i=t-1;return i===0?e:e*Math.log(t)/i}function y3(e){var t=Math.abs(e);return t=v3(t*(1+t/(Ta(1,t)+1))),e<0?-t:t}function Mc(e,t){for(var i=2*Math.cos(2*t),n=e.length-1,o=e[n],r=0,s;--n>=0;)s=-r+i*o+e[n],r=o,o=s;return t+s*Math.sin(2*t)}function C3(e,t){for(var i=2*Math.cos(t),n=e.length-1,o=e[n],r=0,s;--n>=0;)s=-r+i*o+e[n],r=o,o=s;return Math.sin(t)*s}function b3(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function Tf(e,t,i){for(var n=Math.sin(t),o=Math.cos(t),r=xf(i),s=b3(i),l=2*o*s,c=-2*n*r,u=e.length-1,d=e[u],m=0,h=0,f=0,p,y;--u>=0;)p=h,y=m,h=d,m=f,d=-p+l*h-c*m+e[u],f=-y+c*h+l*m;return l=n*s,c=o*r,[l*d-c*f,l*f+c*d]}function w3(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(xa.init.apply(this),this.forward=xa.forward,this.inverse=xa.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),i=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),i=i*t,this.cgb[1]=i*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=i*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),i=i*t,this.cgb[2]=i*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=i*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),i=i*t,this.cgb[3]=i*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=i*(1237/630+t*(-12/5+t*(-24832/14175))),i=i*t,this.cgb[4]=i*(4174/315+t*(-144838/6237)),this.cbg[4]=i*(-734/315+t*(109598/31185)),i=i*t,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=i*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=i*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),i=i*t,this.utg[2]=i*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=i*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),i=i*t,this.utg[3]=i*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=i*(49561/161280+t*(-179/168+t*(6601661/7257600))),i=i*t,this.utg[4]=i*(-4583/161280+t*(108847/3991680)),this.gtu[4]=i*(34729/80640+t*(-3418889/1995840)),i=i*t,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var n=Mc(this.cbg,this.lat0);this.Zb=-this.Qn*(n+C3(this.gtu,2*n))}function _3(e){var t=we(e.x-this.long0),i=e.y;i=Mc(this.cbg,i);var n=Math.sin(i),o=Math.cos(i),r=Math.sin(t),s=Math.cos(t);i=Math.atan2(n,s*o),t=Math.atan2(r*o,Ta(n,o*s)),t=y3(Math.tan(t));var l=Tf(this.gtu,2*i,2*t);i=i+l[0],t=t+l[1];var c,u;return Math.abs(t)<=2.623395162778?(c=this.a*(this.Qn*t)+this.x0,u=this.a*(this.Qn*i+this.Zb)+this.y0):(c=1/0,u=1/0),e.x=c,e.y=u,e}function P3(e){var t=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,t=t/this.Qn;var n,o;if(Math.abs(t)<=2.623395162778){var r=Tf(this.utg,2*i,2*t);i=i+r[0],t=t+r[1],t=Math.atan(xf(t));var s=Math.sin(i),l=Math.cos(i),c=Math.sin(t),u=Math.cos(t);i=Math.atan2(s*u,Ta(c,u*l)),t=Math.atan2(c,u*l),n=we(t+this.long0),o=Mc(this.cgb,i)}else n=1/0,o=1/0;return e.x=n,e.y=o,e}var O3=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"],Aa={init:w3,forward:_3,inverse:P3,names:O3};function E3(e,t){if(e===void 0){if(e=Math.floor((we(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var M3="etmerc";function S3(){var e=E3(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Rt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Aa.init.apply(this),this.forward=Aa.forward,this.inverse=Aa.inverse}var x3=["Universal Transverse Mercator System","utm"],T3={init:S3,names:x3,dependsOn:M3};function Sc(e,t){return Math.pow((1-e)/(1+e),t)}var A3=20;function I3(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Ne)/(Math.pow(Math.tan(.5*this.lat0+Ne),this.C)*Sc(this.e*e,this.ratexp))}function D3(e){var t=e.x,i=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+Ne),this.C)*Sc(this.e*Math.sin(i),this.ratexp))-he,e.x=this.C*t,e}function R3(e){for(var t=1e-14,i=e.x/this.C,n=e.y,o=Math.pow(Math.tan(.5*n+Ne)/this.K,1/this.C),r=A3;r>0&&(n=2*Math.atan(o*Sc(this.e*Math.sin(e.y),-.5*this.e))-he,!(Math.abs(n-e.y)<t));--r)e.y=n;return r?(e.x=i,e.y=n,e):null}var L3=["gauss"],xc={init:I3,forward:D3,inverse:R3,names:L3};function B3(){xc.init.apply(this),!!this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function j3(e){var t,i,n,o;return e.x=we(e.x-this.long0),xc.forward.apply(this,[e]),t=Math.sin(e.y),i=Math.cos(e.y),n=Math.cos(e.x),o=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*i*n),e.x=o*i*Math.sin(e.x),e.y=o*(this.cosc0*t-this.sinc0*i*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function F3(e){var t,i,n,o,r;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,r=Math.sqrt(e.x*e.x+e.y*e.y)){var s=2*Math.atan2(r,this.R2);t=Math.sin(s),i=Math.cos(s),o=Math.asin(i*this.sinc0+e.y*t*this.cosc0/r),n=Math.atan2(e.x*t,r*this.cosc0*i-e.y*this.sinc0*t)}else o=this.phic0,n=0;return e.x=n,e.y=o,xc.inverse.apply(this,[e]),e.x=we(e.x+this.long0),e}var V3=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],N3={init:B3,forward:j3,inverse:F3,names:V3};function k3(e,t,i){return t*=i,Math.tan(.5*(he+e))*Math.pow((1-t)/(1+t),.5*i)}function z3(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ce&&(this.k0=.5*(1+ir(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ce&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ce&&(this.k0=.5*this.cons*Di(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ei(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Di(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-he,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function $3(e){var t=e.x,i=e.y,n=Math.sin(i),o=Math.cos(i),r,s,l,c,u,d,m=we(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=Ce&&Math.abs(i+this.lat0)<=Ce?(e.x=NaN,e.y=NaN,e):this.sphere?(r=2*this.k0/(1+this.sinlat0*n+this.coslat0*o*Math.cos(m)),e.x=this.a*r*o*Math.sin(m)+this.x0,e.y=this.a*r*(this.coslat0*n-this.sinlat0*o*Math.cos(m))+this.y0,e):(s=2*Math.atan(this.ssfn_(i,n,this.e))-he,c=Math.cos(s),l=Math.sin(s),Math.abs(this.coslat0)<=Ce?(u=Ei(this.e,i*this.con,this.con*n),d=2*this.a*this.k0*u/this.cons,e.x=this.x0+d*Math.sin(t-this.long0),e.y=this.y0-this.con*d*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<Ce?(r=2*this.a*this.k0/(1+c*Math.cos(m)),e.y=r*l):(r=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*c*Math.cos(m))),e.y=r*(this.cosX0*l-this.sinX0*c*Math.cos(m))+this.y0),e.x=r*c*Math.sin(m)+this.x0,e))}function G3(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,o,r,s=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var l=2*Math.atan(s/(2*this.a*this.k0));return t=this.long0,i=this.lat0,s<=Ce?(e.x=t,e.y=i,e):(i=Math.asin(Math.cos(l)*this.sinlat0+e.y*Math.sin(l)*this.coslat0/s),Math.abs(this.coslat0)<Ce?this.lat0>0?t=we(this.long0+Math.atan2(e.x,-1*e.y)):t=we(this.long0+Math.atan2(e.x,e.y)):t=we(this.long0+Math.atan2(e.x*Math.sin(l),s*this.coslat0*Math.cos(l)-e.y*this.sinlat0*Math.sin(l))),e.x=t,e.y=i,e)}else if(Math.abs(this.coslat0)<=Ce){if(s<=Ce)return i=this.lat0,t=this.long0,e.x=t,e.y=i,e;e.x*=this.con,e.y*=this.con,n=s*this.cons/(2*this.a*this.k0),i=this.con*nr(this.e,n),t=this.con*we(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else o=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,s<=Ce?r=this.X0:(r=Math.asin(Math.cos(o)*this.sinX0+e.y*Math.sin(o)*this.cosX0/s),t=we(this.long0+Math.atan2(e.x*Math.sin(o),s*this.cosX0*Math.cos(o)-e.y*this.sinX0*Math.sin(o)))),i=-1*nr(this.e,Math.tan(.5*(he+r)));return e.x=t,e.y=i,e}var U3=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],H3={init:z3,forward:$3,inverse:G3,names:U3,ssfn_:k3};function W3(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),i=this.a,n=this.rf,o=1/n,r=2*o-Math.pow(o,2),s=this.e=Math.sqrt(r);this.R=this.k0*i*Math.sqrt(1-r)/(1-r*Math.pow(t,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var l=Math.log(Math.tan(Math.PI/4+this.b0/2)),c=Math.log(Math.tan(Math.PI/4+e/2)),u=Math.log((1+s*t)/(1-s*t));this.K=l-this.alpha*c+this.alpha*s/2*u}function q3(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+i)+this.K,o=2*(Math.atan(Math.exp(n))-Math.PI/4),r=this.alpha*(e.x-this.lambda0),s=Math.atan(Math.sin(r)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(r))),l=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(r));return e.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0,e.x=this.R*s+this.x0,e}function Z3(e){for(var t=e.x-this.x0,i=e.y-this.y0,n=t/this.R,o=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),r=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(n)),s=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(o))),l=this.lambda0+s/this.alpha,c=0,u=r,d=-1e3,m=0;Math.abs(u-d)>1e-7;){if(++m>20)return;c=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),d=u,u=2*Math.atan(Math.exp(c))-Math.PI/2}return e.x=l,e.y=u,e}var X3=["somerc"],Y3={init:W3,forward:q3,inverse:Z3,names:X3},lo=1e-7;function Q3(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(i)!==-1}function K3(){var e,t,i,n,o,r,s,l,c,u,d=0,m,h=0,f=0,p=0,y=0,g=0,v=0;this.no_off=Q3(this),this.no_rot="no_rot"in this;var w=!1;"alpha"in this&&(w=!0);var C=!1;if("rectified_grid_angle"in this&&(C=!0),w&&(v=this.alpha),C&&(d=this.rectified_grid_angle*Rt),w||C)h=this.longc;else if(f=this.long1,y=this.lat1,p=this.long2,g=this.lat2,Math.abs(y-g)<=lo||(e=Math.abs(y))<=lo||Math.abs(e-he)<=lo||Math.abs(Math.abs(this.lat0)-he)<=lo||Math.abs(Math.abs(g)-he)<=lo)throw new Error;var P=1-this.es;t=Math.sqrt(P),Math.abs(this.lat0)>Ce?(l=Math.sin(this.lat0),i=Math.cos(this.lat0),e=1-this.es*l*l,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/P),this.A=this.B*this.k0*t/e,n=this.B*t/(i*Math.sqrt(e)),o=n*n-1,o<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=n,this.E*=Math.pow(Ei(this.e,this.lat0,l),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=o=1),w||C?(w?(m=Math.asin(Math.sin(v)/n),C||(d=v)):(m=d,v=Math.asin(n*Math.sin(m))),this.lam0=h-Math.asin(.5*(o-1/o)*Math.tan(m))/this.B):(r=Math.pow(Ei(this.e,y,Math.sin(y)),this.B),s=Math.pow(Ei(this.e,g,Math.sin(g)),this.B),o=this.E/r,c=(s-r)/(s+r),u=this.E*this.E,u=(u-s*r)/(u+s*r),e=f-p,e<-Math.pi?p-=er:e>Math.pi&&(p+=er),this.lam0=we(.5*(f+p)-Math.atan(u*Math.tan(.5*this.B*(f-p))/c)/this.B),m=Math.atan(2*Math.sin(this.B*we(f-this.lam0))/(o-1/o)),d=v=Math.asin(n*Math.sin(m))),this.singam=Math.sin(m),this.cosgam=Math.cos(m),this.sinrot=Math.sin(d),this.cosrot=Math.cos(d),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(v))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*m,this.v_pole_n=this.ArB*Math.log(Math.tan(Ne-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(Ne+o))}function J3(e){var t={},i,n,o,r,s,l,c,u;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-he)>Ce){if(s=this.E/Math.pow(Ei(this.e,e.y,Math.sin(e.y)),this.B),l=1/s,i=.5*(s-l),n=.5*(s+l),r=Math.sin(this.B*e.x),o=(i*this.singam-r*this.cosgam)/n,Math.abs(Math.abs(o)-1)<Ce)throw new Error;u=.5*this.ArB*Math.log((1-o)/(1+o)),l=Math.cos(this.B*e.x),Math.abs(l)<lo?c=this.A*e.x:c=this.ArB*Math.atan2(i*this.cosgam+r*this.singam,l)}else u=e.y>0?this.v_pole_n:this.v_pole_s,c=this.ArB*e.y;return this.no_rot?(t.x=c,t.y=u):(c-=this.u_0,t.x=u*this.cosrot+c*this.sinrot,t.y=c*this.cosrot-u*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function ex(e){var t,i,n,o,r,s,l,c={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(i=e.y,t=e.x):(i=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*i),o=.5*(n-1/n),r=.5*(n+1/n),s=Math.sin(this.BrA*t),l=(s*this.cosgam+o*this.singam)/r,Math.abs(Math.abs(l)-1)<Ce)c.x=0,c.y=l<0?-he:he;else{if(c.y=this.E/Math.sqrt((1+l)/(1-l)),c.y=nr(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw new Error;c.x=-this.rB*Math.atan2(o*this.cosgam-s*this.singam,Math.cos(this.BrA*t))}return c.x+=this.lam0,c}var tx=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],ix={init:K3,forward:J3,inverse:ex,names:tx};function nx(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ce)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),i=Math.cos(this.lat1),n=Di(this.e,t,i),o=Ei(this.e,this.lat1,t),r=Math.sin(this.lat2),s=Math.cos(this.lat2),l=Di(this.e,r,s),c=Ei(this.e,this.lat2,r),u=Ei(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Ce?this.ns=Math.log(n/l)/Math.log(o/c):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function ox(e){var t=e.x,i=e.y;Math.abs(2*Math.abs(i)-Math.PI)<=Ce&&(i=ir(i)*(he-2*Ce));var n=Math.abs(Math.abs(i)-he),o,r;if(n>Ce)o=Ei(this.e,i,Math.sin(i)),r=this.a*this.f0*Math.pow(o,this.ns);else{if(n=i*this.ns,n<=0)return null;r=0}var s=this.ns*we(t-this.long0);return e.x=this.k0*(r*Math.sin(s))+this.x0,e.y=this.k0*(this.rh-r*Math.cos(s))+this.y0,e}function rx(e){var t,i,n,o,r,s=(e.x-this.x0)/this.k0,l=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(s*s+l*l),i=1):(t=-Math.sqrt(s*s+l*l),i=-1);var c=0;if(t!==0&&(c=Math.atan2(i*s,i*l)),t!==0||this.ns>0){if(i=1/this.ns,n=Math.pow(t/(this.a*this.f0),i),o=nr(this.e,n),o===-9999)return null}else o=-he;return r=we(c/this.ns+this.long0),e.x=r,e.y=o,e}var ax=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"],sx={init:nx,forward:ox,inverse:rx,names:ax};function lx(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function cx(e){var t,i,n,o,r,s,l,c=e.x,u=e.y,d=we(c-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),n=-d*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),r=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(o)),s=this.n*r,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),e.y=l*Math.cos(s)/1,e.x=l*Math.sin(s)/1,this.czech||(e.y*=-1,e.x*=-1),e}function ux(e){var t,i,n,o,r,s,l,c,u=e.x;e.x=e.y,e.y=u,this.czech||(e.y*=-1,e.x*=-1),s=Math.sqrt(e.x*e.x+e.y*e.y),r=Math.atan2(e.y,e.x),o=r/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),i=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(t)),e.x=this.long0-i/this.alfa,l=t,c=0;var d=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this.s45),Math.abs(l-e.y)<1e-10&&(c=1),l=e.y,d+=1;while(c===0&&d<15);return d>=15?null:e}var dx=["Krovak","krovak"],mx={init:lx,forward:cx,inverse:ux,names:dx};function qt(e,t,i,n,o){return e*o-t*Math.sin(2*o)+i*Math.sin(4*o)-n*Math.sin(6*o)}function ar(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function sr(e){return .375*e*(1+.25*e*(1+.46875*e))}function lr(e){return .05859375*e*e*(1+.75*e)}function cr(e){return e*e*e*(35/3072)}function co(e,t,i){var n=t*i;return e/Math.sqrt(1-n*n)}function uo(e){return Math.abs(e)<he?e:e-ir(e)*Math.PI}function Ia(e,t,i,n,o){var r,s;r=e/t;for(var l=0;l<15;l++)if(s=(e-(t*r-i*Math.sin(2*r)+n*Math.sin(4*r)-o*Math.sin(6*r)))/(t-2*i*Math.cos(2*r)+4*n*Math.cos(4*r)-6*o*Math.cos(6*r)),r+=s,Math.abs(s)<=1e-10)return r;return NaN}function hx(){this.sphere||(this.e0=ar(this.es),this.e1=sr(this.es),this.e2=lr(this.es),this.e3=cr(this.es),this.ml0=this.a*qt(this.e0,this.e1,this.e2,this.e3,this.lat0))}function fx(e){var t,i,n=e.x,o=e.y;if(n=we(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(o)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(o),Math.cos(n))-this.lat0);else{var r=Math.sin(o),s=Math.cos(o),l=co(this.a,this.e,r),c=Math.tan(o)*Math.tan(o),u=n*Math.cos(o),d=u*u,m=this.es*s*s/(1-this.es),h=this.a*qt(this.e0,this.e1,this.e2,this.e3,o);t=l*u*(1-d*c*(1/6-(8-c+8*m)*d/120)),i=h-this.ml0+l*r/s*d*(.5+(5-c+6*m)*d/24)}return e.x=t+this.x0,e.y=i+this.y0,e}function px(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,n,o;if(this.sphere){var r=i+this.lat0;n=Math.asin(Math.sin(r)*Math.cos(t)),o=Math.atan2(Math.tan(t),Math.cos(r))}else{var s=this.ml0/this.a+i,l=Ia(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-he)<=Ce)return e.x=this.long0,e.y=he,i<0&&(e.y*=-1),e;var c=co(this.a,this.e,Math.sin(l)),u=c*c*c/this.a/this.a*(1-this.es),d=Math.pow(Math.tan(l),2),m=t*this.a/c,h=m*m;n=l-c*Math.tan(l)/u*m*m*(.5-(1+3*d)*m*m/24),o=m*(1-h*(d/3+(1+3*d)*d*h/15))/Math.cos(l)}return e.x=we(o+this.long0),e.y=uo(n),e}var gx=["Cassini","Cassini_Soldner","cass"],vx={init:hx,forward:fx,inverse:px,names:gx};function hn(e,t){var i;return e>1e-7?(i=e*t,(1-e*e)*(t/(1-i*i)-.5/e*Math.log((1-i)/(1+i)))):2*t}var yx=1,Cx=2,bx=3,wx=4;function _x(){var e=Math.abs(this.lat0);if(Math.abs(e-he)<Ce?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Ce?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=hn(this.e,1),this.mmf=.5/(1-this.es),this.apa=Ix(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=hn(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Px(e){var t,i,n,o,r,s,l,c,u,d,m=e.x,h=e.y;if(m=we(m-this.long0),this.sphere){if(r=Math.sin(h),d=Math.cos(h),n=Math.cos(m),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+d*n:1+this.sinph0*r+this.cosph0*d*n,i<=Ce)return null;i=Math.sqrt(2/i),t=i*d*Math.sin(m),i*=this.mode===this.EQUIT?r:this.cosph0*r-this.sinph0*d*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(h+this.lat0)<Ce)return null;i=Ne-h*.5,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),t=i*Math.sin(m),i*=n}}else{switch(l=0,c=0,u=0,n=Math.cos(m),o=Math.sin(m),r=Math.sin(h),s=hn(this.e,r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=s/this.qp,c=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:u=1+this.sinb1*l+this.cosb1*c*n;break;case this.EQUIT:u=1+c*n;break;case this.N_POLE:u=he+h,s=this.qp-s;break;case this.S_POLE:u=h-he,s=this.qp+s;break}if(Math.abs(u)<Ce)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?i=this.ymf*u*(this.cosb1*l-this.sinb1*c*n):i=(u=Math.sqrt(2/(1+c*n)))*l*this.ymf,t=this.xmf*u*c*o;break;case this.N_POLE:case this.S_POLE:s>=0?(t=(u=Math.sqrt(s))*o,i=n*(this.mode===this.S_POLE?u:-u)):t=i=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*i+this.y0,e}function Ox(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,n,o,r,s,l,c,u;if(this.sphere){var d=0,m,h=0;if(m=Math.sqrt(t*t+i*i),o=m*.5,o>1)return null;switch(o=2*Math.asin(o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(h=Math.sin(o),d=Math.cos(o)),this.mode){case this.EQUIT:o=Math.abs(m)<=Ce?0:Math.asin(i*h/m),t*=h,i=d*m;break;case this.OBLIQ:o=Math.abs(m)<=Ce?this.lat0:Math.asin(d*this.sinph0+i*h*this.cosph0/m),t*=h*this.cosph0,i=(d-Math.sin(o)*this.sinph0)*m;break;case this.N_POLE:i=-i,o=he-o;break;case this.S_POLE:o-=he;break}n=i===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,i)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,i*=this.dd,c=Math.sqrt(t*t+i*i),c<Ce)return e.x=this.long0,e.y=this.lat0,e;s=2*Math.asin(.5*c/this.rq),r=Math.cos(s),t*=s=Math.sin(s),this.mode===this.OBLIQ?(u=r*this.sinb1+i*s*this.cosb1/c,l=this.qp*u,i=c*this.cosb1*r-i*this.sinb1*s):(u=i*s/c,l=this.qp*u,i=c*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),l=t*t+i*i,!l)return e.x=this.long0,e.y=this.lat0,e;u=1-l/this.qp,this.mode===this.S_POLE&&(u=-u)}n=Math.atan2(t,i),o=Dx(Math.asin(u),this.apa)}return e.x=we(this.long0+n),e.y=o,e}var Ex=.3333333333333333,Mx=.17222222222222222,Sx=.10257936507936508,xx=.06388888888888888,Tx=.0664021164021164,Ax=.016415012942191543;function Ix(e){var t,i=[];return i[0]=e*Ex,t=e*e,i[0]+=t*Mx,i[1]=t*xx,t*=e,i[0]+=t*Sx,i[1]+=t*Tx,i[2]=t*Ax,i}function Dx(e,t){var i=e+e;return e+t[0]*Math.sin(i)+t[1]*Math.sin(i+i)+t[2]*Math.sin(i+i+i)}var Rx=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],Lx={init:_x,forward:Px,inverse:Ox,names:Rx,S_POLE:yx,N_POLE:Cx,EQUIT:bx,OBLIQ:wx};function fn(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function Bx(){Math.abs(this.lat1+this.lat2)<Ce||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Di(this.e3,this.sin_po,this.cos_po),this.qs1=hn(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Di(this.e3,this.sin_po,this.cos_po),this.qs2=hn(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=hn(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Ce?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function jx(e){var t=e.x,i=e.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=hn(this.e3,this.sin_phi,this.cos_phi),o=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,r=this.ns0*we(t-this.long0),s=o*Math.sin(r)+this.x0,l=this.rh-o*Math.cos(r)+this.y0;return e.x=s,e.y=l,e}function Fx(e){var t,i,n,o,r,s;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),o=0,t!==0&&(o=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?s=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,s=this.phi1z(this.e3,i)),r=we(o/this.ns0+this.long0),e.x=r,e.y=s,e}function Vx(e,t){var i,n,o,r,s,l=fn(.5*t);if(e<Ce)return l;for(var c=e*e,u=1;u<=25;u++)if(i=Math.sin(l),n=Math.cos(l),o=e*i,r=1-o*o,s=.5*r*r/n*(t/(1-c)-i/r+.5/e*Math.log((1-o)/(1+o))),l=l+s,Math.abs(s)<=1e-7)return l;return null}var Nx=["Albers_Conic_Equal_Area","Albers","aea"],kx={init:Bx,forward:jx,inverse:Fx,names:Nx,phi1z:Vx};function zx(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function $x(e){var t,i,n,o,r,s,l,c,u=e.x,d=e.y;return n=we(u-this.long0),t=Math.sin(d),i=Math.cos(d),o=Math.cos(n),s=this.sin_p14*t+this.cos_p14*i*o,r=1,s>0||Math.abs(s)<=Ce?(l=this.x0+this.a*r*i*Math.sin(n)/s,c=this.y0+this.a*r*(this.cos_p14*t-this.sin_p14*i*o)/s):(l=this.x0+this.infinity_dist*i*Math.sin(n),c=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*i*o)),e.x=l,e.y=c,e}function Gx(e){var t,i,n,o,r,s;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(o=Math.atan2(t,this.rc),i=Math.sin(o),n=Math.cos(o),s=fn(n*this.sin_p14+e.y*i*this.cos_p14/t),r=Math.atan2(e.x*i,t*this.cos_p14*n-e.y*this.sin_p14*i),r=we(this.long0+r)):(s=this.phic0,r=0),e.x=r,e.y=s,e}var Ux=["gnom"],Hx={init:zx,forward:$x,inverse:Gx,names:Ux};function Wx(e,t){var i=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-i)<1e-6)return t<0?-1*he:he;for(var n=Math.asin(.5*t),o,r,s,l,c=0;c<30;c++)if(r=Math.sin(n),s=Math.cos(n),l=e*r,o=Math.pow(1-l*l,2)/(2*s)*(t/(1-e*e)-r/(1-l*l)+.5/e*Math.log((1-l)/(1+l))),n+=o,Math.abs(o)<=1e-10)return n;return NaN}function qx(){this.sphere||(this.k0=Di(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Zx(e){var t=e.x,i=e.y,n,o,r=we(t-this.long0);if(this.sphere)n=this.x0+this.a*r*Math.cos(this.lat_ts),o=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var s=hn(this.e,Math.sin(i));n=this.x0+this.a*this.k0*r,o=this.y0+this.a*s*.5/this.k0}return e.x=n,e.y=o,e}function Xx(e){e.x-=this.x0,e.y-=this.y0;var t,i;return this.sphere?(t=we(this.long0+e.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(i=Wx(this.e,2*e.y*this.k0/this.a),t=we(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=i,e}var Yx=["cea"],Qx={init:qx,forward:Zx,inverse:Xx,names:Yx};function Kx(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Jx(e){var t=e.x,i=e.y,n=we(t-this.long0),o=uo(i-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*o,e}function eT(e){var t=e.x,i=e.y;return e.x=we(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=uo(this.lat0+(i-this.y0)/this.a),e}var tT=["Equirectangular","Equidistant_Cylindrical","eqc"],iT={init:Kx,forward:Jx,inverse:eT,names:tT},Af=20;function nT(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ar(this.es),this.e1=sr(this.es),this.e2=lr(this.es),this.e3=cr(this.es),this.ml0=this.a*qt(this.e0,this.e1,this.e2,this.e3,this.lat0)}function oT(e){var t=e.x,i=e.y,n,o,r,s=we(t-this.long0);if(r=s*Math.sin(i),this.sphere)Math.abs(i)<=Ce?(n=this.a*s,o=-1*this.a*this.lat0):(n=this.a*Math.sin(r)/Math.tan(i),o=this.a*(uo(i-this.lat0)+(1-Math.cos(r))/Math.tan(i)));else if(Math.abs(i)<=Ce)n=this.a*s,o=-1*this.ml0;else{var l=co(this.a,this.e,Math.sin(i))/Math.tan(i);n=l*Math.sin(r),o=this.a*qt(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+l*(1-Math.cos(r))}return e.x=n+this.x0,e.y=o+this.y0,e}function rT(e){var t,i,n,o,r,s,l,c,u;if(n=e.x-this.x0,o=e.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=Ce)t=we(n/this.a+this.long0),i=0;else{s=this.lat0+o/this.a,l=n*n/this.a/this.a+s*s,c=s;var d;for(r=Af;r;--r)if(d=Math.tan(c),u=-1*(s*(c*d+1)-c-.5*(c*c+l)*d)/((c-s)/d-1),c+=u,Math.abs(u)<=Ce){i=c;break}t=we(this.long0+Math.asin(n*Math.tan(c)/this.a)/Math.sin(i))}else if(Math.abs(o+this.ml0)<=Ce)i=0,t=we(this.long0+n/this.a);else{s=(this.ml0+o)/this.a,l=n*n/this.a/this.a+s*s,c=s;var m,h,f,p,y;for(r=Af;r;--r)if(y=this.e*Math.sin(c),m=Math.sqrt(1-y*y)*Math.tan(c),h=this.a*qt(this.e0,this.e1,this.e2,this.e3,c),f=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),p=h/this.a,u=(s*(m*p+1)-p-.5*m*(p*p+l))/(this.es*Math.sin(2*c)*(p*p+l-2*s*p)/(4*m)+(s-p)*(m*f-2/Math.sin(2*c))-f),c-=u,Math.abs(u)<=Ce){i=c;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),t=we(this.long0+Math.asin(n*m/this.a)/Math.sin(i))}return e.x=t,e.y=i,e}var aT=["Polyconic","poly"],sT={init:nT,forward:oT,inverse:rT,names:aT};function lT(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function cT(e){var t,i=e.x,n=e.y,o=n-this.lat0,r=i-this.long0,s=o/Jo*1e-5,l=r,c=1,u=0;for(t=1;t<=10;t++)c=c*s,u=u+this.A[t]*c;var d=u,m=l,h=1,f=0,p,y,g=0,v=0;for(t=1;t<=6;t++)p=h*d-f*m,y=f*d+h*m,h=p,f=y,g=g+this.B_re[t]*h-this.B_im[t]*f,v=v+this.B_im[t]*h+this.B_re[t]*f;return e.x=v*this.a+this.x0,e.y=g*this.a+this.y0,e}function uT(e){var t,i=e.x,n=e.y,o=i-this.x0,r=n-this.y0,s=r/this.a,l=o/this.a,c=1,u=0,d,m,h=0,f=0;for(t=1;t<=6;t++)d=c*s-u*l,m=u*s+c*l,c=d,u=m,h=h+this.C_re[t]*c-this.C_im[t]*u,f=f+this.C_im[t]*c+this.C_re[t]*u;for(var p=0;p<this.iterations;p++){var y=h,g=f,v,w,C=s,P=l;for(t=2;t<=6;t++)v=y*h-g*f,w=g*h+y*f,y=v,g=w,C=C+(t-1)*(this.B_re[t]*y-this.B_im[t]*g),P=P+(t-1)*(this.B_im[t]*y+this.B_re[t]*g);y=1,g=0;var _=this.B_re[1],E=this.B_im[1];for(t=2;t<=6;t++)v=y*h-g*f,w=g*h+y*f,y=v,g=w,_=_+t*(this.B_re[t]*y-this.B_im[t]*g),E=E+t*(this.B_im[t]*y+this.B_re[t]*g);var S=_*_+E*E;h=(C*_+P*E)/S,f=(P*_-C*E)/S}var x=h,T=f,V=1,I=0;for(t=1;t<=9;t++)V=V*x,I=I+this.D[t]*V;var R=this.lat0+I*Jo*1e5,L=this.long0+T;return e.x=L,e.y=R,e}var dT=["New_Zealand_Map_Grid","nzmg"],mT={init:lT,forward:cT,inverse:uT,names:dT};function hT(){}function fT(e){var t=e.x,i=e.y,n=we(t-this.long0),o=this.x0+this.a*n,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return e.x=o,e.y=r,e}function pT(e){e.x-=this.x0,e.y-=this.y0;var t=we(this.long0+e.x/this.a),i=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=i,e}var gT=["Miller_Cylindrical","mill"],vT={init:hT,forward:fT,inverse:pT,names:gT},yT=20;function CT(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Mf(this.es)}function bT(e){var t,i,n=e.x,o=e.y;if(n=we(n-this.long0),this.sphere){if(!this.m)o=this.n!==1?Math.asin(this.n*Math.sin(o)):o;else for(var r=this.n*Math.sin(o),s=yT;s;--s){var l=(this.m*o+Math.sin(o)-r)/(this.m+Math.cos(o));if(o-=l,Math.abs(l)<Ce)break}t=this.a*this.C_x*n*(this.m+Math.cos(o)),i=this.a*this.C_y*o}else{var c=Math.sin(o),u=Math.cos(o);i=this.a*Sa(o,c,u,this.en),t=this.a*n*u/Math.sqrt(1-this.es*c*c)}return e.x=t,e.y=i,e}function wT(e){var t,i,n,o;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(t))),this.m?t=fn((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=fn(Math.sin(t)/this.n)),n=we(n+this.long0),t=uo(t)):(t=Sf(e.y/this.a,this.es,this.en),o=Math.abs(t),o<he?(o=Math.sin(t),i=this.long0+e.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(t)),n=we(i)):o-Ce<he&&(n=this.long0)),e.x=n,e.y=t,e}var _T=["Sinusoidal","sinu"],PT={init:CT,forward:bT,inverse:wT,names:_T};function OT(){}function ET(e){for(var t=e.x,i=e.y,n=we(t-this.long0),o=i,r=Math.PI*Math.sin(i);;){var s=-(o+Math.sin(o)-r)/(1+Math.cos(o));if(o+=s,Math.abs(s)<Ce)break}o/=2,Math.PI/2-Math.abs(i)<Ce&&(n=0);var l=.900316316158*this.a*n*Math.cos(o)+this.x0,c=1.4142135623731*this.a*Math.sin(o)+this.y0;return e.x=l,e.y=c,e}function MT(e){var t,i;e.x-=this.x0,e.y-=this.y0,i=e.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),t=Math.asin(i);var n=we(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*t+Math.sin(2*t))/Math.PI,Math.abs(i)>1&&(i=1);var o=Math.asin(i);return e.x=n,e.y=o,e}var ST=["Mollweide","moll"],xT={init:OT,forward:ET,inverse:MT,names:ST};function TT(){Math.abs(this.lat1+this.lat2)<Ce||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ar(this.es),this.e1=sr(this.es),this.e2=lr(this.es),this.e3=cr(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Di(this.e,this.sinphi,this.cosphi),this.ml1=qt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ce?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Di(this.e,this.sinphi,this.cosphi),this.ml2=qt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=qt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function AT(e){var t=e.x,i=e.y,n;if(this.sphere)n=this.a*(this.g-i);else{var o=qt(this.e0,this.e1,this.e2,this.e3,i);n=this.a*(this.g-o)}var r=this.ns*we(t-this.long0),s=this.x0+n*Math.sin(r),l=this.y0+this.rh-n*Math.cos(r);return e.x=s,e.y=l,e}function IT(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,i,n,o;this.ns>=0?(i=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(i=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var r=0;if(i!==0&&(r=Math.atan2(t*e.x,t*e.y)),this.sphere)return o=we(this.long0+r/this.ns),n=uo(this.g-i/this.a),e.x=o,e.y=n,e;var s=this.g-i/this.a;return n=Ia(s,this.e0,this.e1,this.e2,this.e3),o=we(this.long0+r/this.ns),e.x=o,e.y=n,e}var DT=["Equidistant_Conic","eqdc"],RT={init:TT,forward:AT,inverse:IT,names:DT};function LT(){this.R=this.a}function BT(e){var t=e.x,i=e.y,n=we(t-this.long0),o,r;Math.abs(i)<=Ce&&(o=this.x0+this.R*n,r=this.y0);var s=fn(2*Math.abs(i/Math.PI));(Math.abs(n)<=Ce||Math.abs(Math.abs(i)-he)<=Ce)&&(o=this.x0,i>=0?r=this.y0+Math.PI*this.R*Math.tan(.5*s):r=this.y0+Math.PI*this.R*-Math.tan(.5*s));var l=.5*Math.abs(Math.PI/n-n/Math.PI),c=l*l,u=Math.sin(s),d=Math.cos(s),m=d/(u+d-1),h=m*m,f=m*(2/u-1),p=f*f,y=Math.PI*this.R*(l*(m-p)+Math.sqrt(c*(m-p)*(m-p)-(p+c)*(h-p)))/(p+c);n<0&&(y=-y),o=this.x0+y;var g=c+m;return y=Math.PI*this.R*(f*g-l*Math.sqrt((p+c)*(c+1)-g*g))/(p+c),i>=0?r=this.y0+y:r=this.y0-y,e.x=o,e.y=r,e}function jT(e){var t,i,n,o,r,s,l,c,u,d,m,h,f;return e.x-=this.x0,e.y-=this.y0,m=Math.PI*this.R,n=e.x/m,o=e.y/m,r=n*n+o*o,s=-Math.abs(o)*(1+r),l=s-2*o*o+n*n,c=-2*s+1+2*o*o+r*r,f=o*o/c+(2*l*l*l/c/c/c-9*s*l/c/c)/27,u=(s-l*l/3/c)/c,d=2*Math.sqrt(-u/3),m=3*f/u/d,Math.abs(m)>1&&(m>=0?m=1:m=-1),h=Math.acos(m)/3,e.y>=0?i=(-d*Math.cos(h+Math.PI/3)-l/3/c)*Math.PI:i=-(-d*Math.cos(h+Math.PI/3)-l/3/c)*Math.PI,Math.abs(n)<Ce?t=this.long0:t=we(this.long0+Math.PI*(r-1+Math.sqrt(1+2*(n*n-o*o)+r*r))/2/n),e.x=t,e.y=i,e}var FT=["Van_der_Grinten_I","VanDerGrinten","vandg"],VT={init:LT,forward:BT,inverse:jT,names:FT};function NT(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function kT(e){var t=e.x,i=e.y,n=Math.sin(e.y),o=Math.cos(e.y),r=we(t-this.long0),s,l,c,u,d,m,h,f,p,y,g,v,w,C,P,_,E,S,x,T,V,I,R;return this.sphere?Math.abs(this.sin_p12-1)<=Ce?(e.x=this.x0+this.a*(he-i)*Math.sin(r),e.y=this.y0-this.a*(he-i)*Math.cos(r),e):Math.abs(this.sin_p12+1)<=Ce?(e.x=this.x0+this.a*(he+i)*Math.sin(r),e.y=this.y0+this.a*(he+i)*Math.cos(r),e):(S=this.sin_p12*n+this.cos_p12*o*Math.cos(r),_=Math.acos(S),E=_?_/Math.sin(_):1,e.x=this.x0+this.a*E*o*Math.sin(r),e.y=this.y0+this.a*E*(this.cos_p12*n-this.sin_p12*o*Math.cos(r)),e):(s=ar(this.es),l=sr(this.es),c=lr(this.es),u=cr(this.es),Math.abs(this.sin_p12-1)<=Ce?(d=this.a*qt(s,l,c,u,he),m=this.a*qt(s,l,c,u,i),e.x=this.x0+(d-m)*Math.sin(r),e.y=this.y0-(d-m)*Math.cos(r),e):Math.abs(this.sin_p12+1)<=Ce?(d=this.a*qt(s,l,c,u,he),m=this.a*qt(s,l,c,u,i),e.x=this.x0+(d+m)*Math.sin(r),e.y=this.y0+(d+m)*Math.cos(r),e):(h=n/o,f=co(this.a,this.e,this.sin_p12),p=co(this.a,this.e,n),y=Math.atan((1-this.es)*h+this.es*f*this.sin_p12/(p*o)),g=Math.atan2(Math.sin(r),this.cos_p12*Math.tan(y)-this.sin_p12*Math.cos(r)),g===0?x=Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y)):Math.abs(Math.abs(g)-Math.PI)<=Ce?x=-Math.asin(this.cos_p12*Math.sin(y)-this.sin_p12*Math.cos(y)):x=Math.asin(Math.sin(r)*Math.cos(y)/Math.sin(g)),v=this.e*this.sin_p12/Math.sqrt(1-this.es),w=this.e*this.cos_p12*Math.cos(g)/Math.sqrt(1-this.es),C=v*w,P=w*w,T=x*x,V=T*x,I=V*x,R=I*x,_=f*x*(1-T*P*(1-P)/6+V/8*C*(1-2*P)+I/120*(P*(4-7*P)-3*v*v*(1-7*P))-R/48*C),e.x=this.x0+_*Math.sin(g),e.y=this.y0+_*Math.cos(g),e))}function zT(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,o,r,s,l,c,u,d,m,h,f,p,y,g,v,w,C,P,_,E,S,x;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*he*this.a?void 0:(i=t/this.a,n=Math.sin(i),o=Math.cos(i),r=this.long0,Math.abs(t)<=Ce?s=this.lat0:(s=fn(o*this.sin_p12+e.y*n*this.cos_p12/t),l=Math.abs(this.lat0)-he,Math.abs(l)<=Ce?this.lat0>=0?r=we(this.long0+Math.atan2(e.x,-e.y)):r=we(this.long0-Math.atan2(-e.x,e.y)):r=we(this.long0+Math.atan2(e.x*n,t*this.cos_p12*o-e.y*this.sin_p12*n))),e.x=r,e.y=s,e)):(c=ar(this.es),u=sr(this.es),d=lr(this.es),m=cr(this.es),Math.abs(this.sin_p12-1)<=Ce?(h=this.a*qt(c,u,d,m,he),t=Math.sqrt(e.x*e.x+e.y*e.y),f=h-t,s=Ia(f/this.a,c,u,d,m),r=we(this.long0+Math.atan2(e.x,-1*e.y)),e.x=r,e.y=s,e):Math.abs(this.sin_p12+1)<=Ce?(h=this.a*qt(c,u,d,m,he),t=Math.sqrt(e.x*e.x+e.y*e.y),f=t-h,s=Ia(f/this.a,c,u,d,m),r=we(this.long0+Math.atan2(e.x,e.y)),e.x=r,e.y=s,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),g=Math.atan2(e.x,e.y),p=co(this.a,this.e,this.sin_p12),v=Math.cos(g),w=this.e*this.cos_p12*v,C=-w*w/(1-this.es),P=3*this.es*(1-C)*this.sin_p12*this.cos_p12*v/(1-this.es),_=t/p,E=_-C*(1+C)*Math.pow(_,3)/6-P*(1+3*C)*Math.pow(_,4)/24,S=1-C*E*E/2-_*E*E*E/6,y=Math.asin(this.sin_p12*Math.cos(E)+this.cos_p12*Math.sin(E)*v),r=we(this.long0+Math.asin(Math.sin(g)*Math.sin(E)/Math.cos(y))),x=Math.sin(y),s=Math.atan2((x-this.es*S*this.sin_p12)*Math.tan(y),x*(1-this.es)),e.x=r,e.y=s,e))}var $T=["Azimuthal_Equidistant","aeqd"],GT={init:NT,forward:kT,inverse:zT,names:$T};function UT(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function HT(e){var t,i,n,o,r,s,l,c,u=e.x,d=e.y;return n=we(u-this.long0),t=Math.sin(d),i=Math.cos(d),o=Math.cos(n),s=this.sin_p14*t+this.cos_p14*i*o,r=1,(s>0||Math.abs(s)<=Ce)&&(l=this.a*r*i*Math.sin(n),c=this.y0+this.a*r*(this.cos_p14*t-this.sin_p14*i*o)),e.x=l,e.y=c,e}function WT(e){var t,i,n,o,r,s,l;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),i=fn(t/this.a),n=Math.sin(i),o=Math.cos(i),s=this.long0,Math.abs(t)<=Ce?(l=this.lat0,e.x=s,e.y=l,e):(l=fn(o*this.sin_p14+e.y*n*this.cos_p14/t),r=Math.abs(this.lat0)-he,Math.abs(r)<=Ce?(this.lat0>=0?s=we(this.long0+Math.atan2(e.x,-e.y)):s=we(this.long0-Math.atan2(-e.x,e.y)),e.x=s,e.y=l,e):(s=we(this.long0+Math.atan2(e.x*n,t*this.cos_p14*o-e.y*this.sin_p14*n)),e.x=s,e.y=l,e))}var qT=["ortho"],ZT={init:UT,forward:HT,inverse:WT,names:qT},rt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},ke={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function XT(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=he-Ne/2?this.face=rt.TOP:this.lat0<=-(he-Ne/2)?this.face=rt.BOTTOM:Math.abs(this.long0)<=Ne?this.face=rt.FRONT:Math.abs(this.long0)<=he+Ne?this.face=this.long0>0?rt.RIGHT:rt.LEFT:this.face=rt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function YT(e){var t={x:0,y:0},i,n,o,r,s,l,c={value:0};if(e.x-=this.long0,this.es!==0?i=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):i=e.y,n=e.x,this.face===rt.TOP)r=he-i,n>=Ne&&n<=he+Ne?(c.value=ke.AREA_0,o=n-he):n>he+Ne||n<=-(he+Ne)?(c.value=ke.AREA_1,o=n>0?n-ut:n+ut):n>-(he+Ne)&&n<=-Ne?(c.value=ke.AREA_2,o=n+he):(c.value=ke.AREA_3,o=n);else if(this.face===rt.BOTTOM)r=he+i,n>=Ne&&n<=he+Ne?(c.value=ke.AREA_0,o=-n+he):n<Ne&&n>=-Ne?(c.value=ke.AREA_1,o=-n):n<-Ne&&n>=-(he+Ne)?(c.value=ke.AREA_2,o=-n-he):(c.value=ke.AREA_3,o=n>0?-n+ut:-n-ut);else{var u,d,m,h,f,p,y;this.face===rt.RIGHT?n=mo(n,+he):this.face===rt.BACK?n=mo(n,+ut):this.face===rt.LEFT&&(n=mo(n,-he)),h=Math.sin(i),f=Math.cos(i),p=Math.sin(n),y=Math.cos(n),u=f*y,d=f*p,m=h,this.face===rt.FRONT?(r=Math.acos(u),o=Da(r,m,d,c)):this.face===rt.RIGHT?(r=Math.acos(d),o=Da(r,m,-u,c)):this.face===rt.BACK?(r=Math.acos(-u),o=Da(r,m,-d,c)):this.face===rt.LEFT?(r=Math.acos(-d),o=Da(r,m,u,c)):(r=o=0,c.value=ke.AREA_0)}return l=Math.atan(12/ut*(o+Math.acos(Math.sin(o)*Math.cos(Ne))-he)),s=Math.sqrt((1-Math.cos(r))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(o))))),c.value===ke.AREA_1?l+=he:c.value===ke.AREA_2?l+=ut:c.value===ke.AREA_3&&(l+=1.5*ut),t.x=s*Math.cos(l),t.y=s*Math.sin(l),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function QT(e){var t={lam:0,phi:0},i,n,o,r,s,l,c,u,d,m={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),i=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?m.value=ke.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(m.value=ke.AREA_1,i-=he):e.x<0&&-e.x>=Math.abs(e.y)?(m.value=ke.AREA_2,i=i<0?i+ut:i-ut):(m.value=ke.AREA_3,i+=he),d=ut/12*Math.tan(i),s=Math.sin(d)/(Math.cos(d)-1/Math.sqrt(2)),l=Math.atan(s),o=Math.cos(i),r=Math.tan(n),c=1-o*o*r*r*(1-Math.cos(Math.atan(1/Math.cos(l)))),c<-1?c=-1:c>1&&(c=1),this.face===rt.TOP)u=Math.acos(c),t.phi=he-u,m.value===ke.AREA_0?t.lam=l+he:m.value===ke.AREA_1?t.lam=l<0?l+ut:l-ut:m.value===ke.AREA_2?t.lam=l-he:t.lam=l;else if(this.face===rt.BOTTOM)u=Math.acos(c),t.phi=u-he,m.value===ke.AREA_0?t.lam=-l+he:m.value===ke.AREA_1?t.lam=-l:m.value===ke.AREA_2?t.lam=-l-he:t.lam=l<0?-l-ut:-l+ut;else{var h,f,p;h=c,d=h*h,d>=1?p=0:p=Math.sqrt(1-d)*Math.sin(l),d+=p*p,d>=1?f=0:f=Math.sqrt(1-d),m.value===ke.AREA_1?(d=f,f=-p,p=d):m.value===ke.AREA_2?(f=-f,p=-p):m.value===ke.AREA_3&&(d=f,f=p,p=-d),this.face===rt.RIGHT?(d=h,h=-f,f=d):this.face===rt.BACK?(h=-h,f=-f):this.face===rt.LEFT&&(d=h,h=f,f=-d),t.phi=Math.acos(-p)-he,t.lam=Math.atan2(f,h),this.face===rt.RIGHT?t.lam=mo(t.lam,-he):this.face===rt.BACK?t.lam=mo(t.lam,-ut):this.face===rt.LEFT&&(t.lam=mo(t.lam,+he))}if(this.es!==0){var y,g,v;y=t.phi<0?1:0,g=Math.tan(t.phi),v=this.b/Math.sqrt(g*g+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-v*v)/(this.one_minus_f*v)),y&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function Da(e,t,i,n){var o;return e<Ce?(n.value=ke.AREA_0,o=0):(o=Math.atan2(t,i),Math.abs(o)<=Ne?n.value=ke.AREA_0:o>Ne&&o<=he+Ne?(n.value=ke.AREA_1,o-=he):o>he+Ne||o<=-(he+Ne)?(n.value=ke.AREA_2,o=o>=0?o-ut:o+ut):(n.value=ke.AREA_3,o+=he)),o}function mo(e,t){var i=e+t;return i<-ut?i+=er:i>+ut&&(i-=er),i}var KT=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],JT={init:XT,forward:YT,inverse:QT,names:KT},Tc=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ur=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],If=.8487,Df=1.3523,Rf=Ii/5,eA=1/Rf,ho=18,Ra=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},tA=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function iA(e,t,i,n){for(var o=t;n;--n){var r=e(o);if(o-=r,Math.abs(r)<i)break}return o}function nA(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function oA(e){var t=we(e.x-this.long0),i=Math.abs(e.y),n=Math.floor(i*Rf);n<0?n=0:n>=ho&&(n=ho-1),i=Ii*(i-eA*n);var o={x:Ra(Tc[n],i)*t,y:Ra(ur[n],i)};return e.y<0&&(o.y=-o.y),o.x=o.x*this.a*If+this.x0,o.y=o.y*this.a*Df+this.y0,o}function rA(e){var t={x:(e.x-this.x0)/(this.a*If),y:Math.abs(e.y-this.y0)/(this.a*Df)};if(t.y>=1)t.x/=Tc[ho][0],t.y=e.y<0?-he:he;else{var i=Math.floor(t.y*ho);for(i<0?i=0:i>=ho&&(i=ho-1);;)if(ur[i][0]>t.y)--i;else if(ur[i+1][0]<=t.y)++i;else break;var n=ur[i],o=5*(t.y-n[0])/(ur[i+1][0]-n[0]);o=iA(function(r){return(Ra(n,r)-t.y)/tA(n,r)},o,Ce,100),t.x/=Ra(Tc[i],o),t.y=(5*i+o)*Rt,e.y<0&&(t.y=-t.y)}return t.x=we(t.x+this.long0),t}var aA=["Robinson","robin"],sA={init:nA,forward:oA,inverse:rA,names:aA};function lA(){this.name="geocent"}function cA(e){var t=af(e,this.es,this.a);return t}function uA(e){var t=sf(e,this.es,this.a,this.b);return t}var dA=["Geocentric","geocentric","geocent","Geocent"],mA={init:lA,forward:cA,inverse:uA,names:dA},Vt={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},dr={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function hA(){if(Object.keys(dr).forEach(function(i){if(typeof this[i]=="undefined")this[i]=dr[i].def;else{if(dr[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);dr[i].num&&(this[i]=parseFloat(this[i]))}dr[i].degrees&&(this[i]=this[i]*Rt)}.bind(this)),Math.abs(Math.abs(this.lat0)-he)<Ce?this.mode=this.lat0<0?Vt.S_POLE:Vt.N_POLE:Math.abs(this.lat0)<Ce?this.mode=Vt.EQUIT:(this.mode=Vt.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function fA(e){e.x-=this.long0;var t=Math.sin(e.y),i=Math.cos(e.y),n=Math.cos(e.x),o,r;switch(this.mode){case Vt.OBLIQ:r=this.sinph0*t+this.cosph0*i*n;break;case Vt.EQUIT:r=i*n;break;case Vt.S_POLE:r=-t;break;case Vt.N_POLE:r=t;break}switch(r=this.pn1/(this.p-r),o=r*i*Math.sin(e.x),this.mode){case Vt.OBLIQ:r*=this.cosph0*t-this.sinph0*i*n;break;case Vt.EQUIT:r*=t;break;case Vt.N_POLE:r*=-(i*n);break;case Vt.S_POLE:r*=i*n;break}var s,l;return s=r*this.cg+o*this.sg,l=1/(s*this.sw*this.h1+this.cw),o=(o*this.cg-r*this.sg)*this.cw*l,r=s*l,e.x=o*this.a,e.y=r*this.a,e}function pA(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},i,n,o;o=1/(this.pn1-e.y*this.sw),i=this.pn1*e.x*o,n=this.pn1*e.y*this.cw*o,e.x=i*this.cg+n*this.sg,e.y=n*this.cg-i*this.sg;var r=Ta(e.x,e.y);if(Math.abs(r)<Ce)t.x=0,t.y=e.y;else{var s,l;switch(l=1-r*r*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/r+r/this.pn1),s=Math.sqrt(1-l*l),this.mode){case Vt.OBLIQ:t.y=Math.asin(s*this.sinph0+e.y*l*this.cosph0/r),e.y=(s-this.sinph0*Math.sin(t.y))*r,e.x*=l*this.cosph0;break;case Vt.EQUIT:t.y=Math.asin(e.y*l/r),e.y=s*r,e.x*=l;break;case Vt.N_POLE:t.y=Math.asin(s),e.y=-e.y;break;case Vt.S_POLE:t.y=-Math.asin(s);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var gA=["Tilted_Perspective","tpers"],vA={init:hA,forward:fA,inverse:pA,names:gA};function yA(e){e.Proj.projections.add(xa),e.Proj.projections.add(Aa),e.Proj.projections.add(T3),e.Proj.projections.add(N3),e.Proj.projections.add(H3),e.Proj.projections.add(Y3),e.Proj.projections.add(ix),e.Proj.projections.add(sx),e.Proj.projections.add(mx),e.Proj.projections.add(vx),e.Proj.projections.add(Lx),e.Proj.projections.add(kx),e.Proj.projections.add(Hx),e.Proj.projections.add(Qx),e.Proj.projections.add(iT),e.Proj.projections.add(sT),e.Proj.projections.add(mT),e.Proj.projections.add(vT),e.Proj.projections.add(PT),e.Proj.projections.add(xT),e.Proj.projections.add(RT),e.Proj.projections.add(VT),e.Proj.projections.add(GT),e.Proj.projections.add(ZT),e.Proj.projections.add(JT),e.Proj.projections.add(sA),e.Proj.projections.add(mA),e.Proj.projections.add(vA)}ri.defaultDatum="WGS84",ri.Proj=Ri,ri.WGS84=new ri.Proj("WGS84"),ri.Point=so,ri.toPoint=df,ri.defs=Wt,ri.nadgrid=IS,ri.transform=Ma,ri.mgrs=qS,ri.version="__VERSION__",yA(ri);function CA(e,t,i,n,o){const r=1+Math.floor((e+180)/6),s=i+" +zone="+r+(t<0?" +south":""),l=ri(n,s,[e,t]);return{utmZone:r+(t<0?"S":"N"),north:l[1].toFixed(2)+o,east:l[0].toFixed(2)+o}}class bA{constructor(t){this.gridFileUrl=t,this.data=void 0,this.minimumHeight=-106.99,this.maximumHeight=85.39}isSupported(){return typeof Int16Array!="undefined"&&typeof Uint8Array!="undefined"}getHeight(t,i){return Lf(this).then(function(n){return Bf(n,t,i)})}getHeights(t){return Lf(this).then(function(i){for(let n=0;n<t.length;++n){const o=t[n];o.height=Bf(i,o.longitude,o.latitude)}return t})}}function Lf(e){const{defined:t,when:i}=Cesium;return t(e.data)||(e.data=wA(e.gridFileUrl)),i(e.data,function(n){if(!(e.data instanceof Int16Array)){const o=new Uint8Array(n);for(let r=0;r<o.length;r+=2){const s=o[r];o[r]=o[r+1],o[r+1]=s}e.data=new Int16Array(n)}return e.data})}function Bf(e,t,i){const{Math:n}=Cesium;let o=720*(n.PI_OVER_TWO-i)/Math.PI;o<0?o=0:o>720&&(o=720),t=n.zeroToTwoPi(t);let r=1440*t/n.TWO_PI;r<0?r=0:r>1440&&(r=1440);const s=r|0,l=o|0,c=r-s,u=o-l,d=1-c,m=1-u,h=La(e,l,s),f=La(e,l,s+1),p=La(e,l+1,s),y=La(e,l+1,s+1);return(h*d*m+f*c*m+p*d*u+y*c*u)/100}function La(e,t,i){return t>720?t=720:t<0&&(t=0),i>1439?i-=1440:i<0&&(i+=1440),e[t*1440+i]}function wA(e){const{Resource:t}=Cesium;return t.createIfNeeded(e).fetchArrayBuffer()}var _A=bA;class PA{constructor(t){const{Cartographic:i,knockout:n}=Cesium,o=t.gridFileUrl;o&&(this.geoidModel=new _A(o)),this.proj4Projection=t.proj4Projection,this.projectionUnits=t.projectionUnits,this.proj4longlat=t.proj4longlat,this.lastHeightSamplePosition=new i,this.accurateSamplingDebounceTime=250,this.tileRequestInFlight=void 0,this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east="",this.useProjection=!1,this.debounceSampleAccurateHeight=BE(this.sampleAccurateHeight,this.accurateSamplingDebounceTime),n.track(this,["elevation","utmZone","latitude","longitude","north","east","useProjection"])}toggleUseProjection(){this.useProjection=!this.useProjection}updateCoordinatesFromCesium(t,i){const{Cartographic:n,defined:o,EllipsoidTerrainProvider:r,Intersections2D:s,SceneMode:l}=Cesium,c=t.scene,d=c.camera.getPickRay(i),m=c.globe,h=m.pickTriangle(d,c);if(o(h)){const f=m.ellipsoid,p=f.cartesianToCartographic(h.v0),y=f.cartesianToCartographic(h.v1),g=f.cartesianToCartographic(h.v2),v=f.cartesianToCartographic(c.mode===l.SCENE3D?h.intersection:c.globe.pick(d,c));let w;if(m.terrainProvider instanceof r)v.height=void 0;else{const P=s.computeBarycentricCoordinates(v.longitude,v.latitude,p.longitude,p.latitude,y.longitude,y.latitude,g.longitude,g.latitude);if(P.x>=-1e-15&&P.y>=-1e-15&&P.z>=-1e-15){const I=P.x*p.height+P.y*y.height+P.z*g.height;v.height=I}const _=m.terrainProvider.getLevelMaximumGeometricError(h.tile.level),E=v.height,S=Math.max(h.tile.data.tileBoundingRegion.minimumHeight,E-_),x=Math.min(h.tile.data.tileBoundingRegion.maximumHeight,E+_),T=S-(this.geoidModel?this.geoidModel.minimumHeight:0),V=x+(this.geoidModel?this.geoidModel.maximumHeight:0);w=Math.max(Math.abs(E-T),Math.abs(V-E))}n.clone(v,this.lastHeightSamplePosition);const C=m.terrainProvider;this.cartographicToFields(v,w),C instanceof r||this.debounceSampleAccurateHeight(C,v)}else this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east=""}cartographicToFields(t,i){const{Math:n}=Cesium,o=n.toDegrees(t.latitude),r=n.toDegrees(t.longitude);if(this.useProjection){const l=CA(r,o,this.proj4Projection,this.proj4longlat,this.projectionUnits);this.utmZone=l.utmZone,this.north=l.north,this.east=l.east}const s=HM(r,o,{height:t.height,errorBar:i});this.latitude=s.latitude,this.longitude=s.longitude,this.elevation=s.elevation}sampleAccurateHeight(t,i){const{Cartographic:n,sampleTerrainMostDetailed:o,when:r}=Cesium;if(this.tileRequestInFlight){this.debounceSampleAccurateHeight.cancel(),this.debounceSampleAccurateHeight(t,i);return}const s=n.clone(i),l=this.geoidModel?this.geoidModel.getHeight(i.longitude,i.latitude):void 0,c=o(t,[s]);this.tileRequestInFlight=Promise.all([l,c]).then(u=>{const d=u[0]||0;this.tileRequestInFlight=void 0,n.equals(i,this.lastHeightSamplePosition)&&(i.height=s.height-d,this.cartographicToFields(i))}).catch(()=>{this.tileRequestInFlight=void 0})}}const OA=[],EA={start:0,stop:0},MA={},SA={},xA={};function TA(){const{Globe:e,GlobeSurfaceTile:t,BoundingSphere:i,defaultValue:n,Cartesian3:o,defined:r,DeveloperError:s,IntersectionTests:l,SceneMode:c}=Cesium;e.prototype.pickTriangle=e.prototype.pickTriangle||function(u,d,m,h){if(!r(u))throw new s("ray is required");if(!r(d))throw new s("scene is required");m=n(m,!0);const f=d.mode,p=d.mapProjection,y=OA;y.length=0;const g=this._surface._tilesToRender;let v=g.length,w,C;for(C=0;C<v;++C){w=g[C];const _=w.data;if(!r(_))continue;const E=_.pickBoundingSphere;f!==c.SCENE3D?(i.fromRectangleWithHeights2D(w.rectangle,p,_.minimumHeight,_.maximumHeight,E),o.fromElements(E.center.z,E.center.x,E.center.y,E.center)):i.clone(_.boundingSphere3D,E);const S=l.raySphere(u,E,EA);r(S)&&y.push(w)}y.sort(AA(u.origin));let P;for(v=y.length,C=0;C<v;++C)if(P=y[C].data.pickTriangle(u,d.mode,d.mapProjection,m,h),r(P)){P.tile=y[C];break}return P},t.prototype.pickTriangle=t.prototype.pickTriangle||function(u,d,m,h){const f=this.renderedMesh;if(!r(f))return;const p=f.vertices,y=f.indices,g=f.encoding,v=y.length;for(let w=0;w<v;w+=3){const C=y[w],P=y[w+1],_=y[w+2],E=Ac(g,d,m,p,C,MA),S=Ac(g,d,m,p,P,SA),x=Ac(g,d,m,p,_,xA),T=l.rayTriangle(u,E,S,x,h,new o);if(r(T))return{intersection:T,v0:E,v1:S,v2:x}}}}function AA(e){const{BoundingSphere:t}=Cesium;return function(i,n){const o=t.distanceSquaredTo(i.data.pickBoundingSphere,e),r=t.distanceSquaredTo(n.data.pickBoundingSphere,e);return o-r}}function Ac(e,t,i,n,o,r){e.decodePosition(n,o,r);const{Cartesian3:s,defined:l,SceneMode:c}=Cesium;if(l(t)&&t!==c.SCENE3D){const d=i.ellipsoid.cartesianToCartographic(r);i.project(d,r),s.fromElements(r.z,r.x,r.y,r)}return r}var IA=PA,jf={gridFileUrl:{type:String,default:"https://zouyaoji.top/vue-cesium/SampleData/WW15MGH.DAC"},proj4Projection:{type:String,default:"+proj=utm +ellps=GRS80 +units=m +no_defs"},projectionUnits:{type:String,default:"m"},proj4longlat:{type:String,default:"+proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees +no_defs"},position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},color:{type:String,default:"#fff"},background:{type:String,default:"#3f4854"},showCameraInfo:{type:Boolean,default:!0},showMouseInfo:{type:Boolean,default:!0},showPerformanceInfo:{type:Boolean,default:!0},useProjection:{type:Boolean,default:!0},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})}};const DA={...ye,statusBarEvt:e=>!0},Ff=jf;var Ic=a.defineComponent({name:"VcStatusBar",props:Ff,emits:DA,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="VcStatusBar",n.cesiumEvents=[];const o=Le(e,t,n);if(o===void 0)return;const r=Ct(n),{$services:s}=o,l=a.ref(null),c=a.ref(null),{t:u}=gt();let d=-1,m=-1;const h=a.reactive({heading:"NaN",pitch:"NaN",roll:"NaN",height:"NaN",level:"NaN"}),f=a.reactive({fps:"NaN",ms:"NaN"}),p=a.ref(),y=oi(e),g=((i=r.proxy)==null?void 0:i.$options.name)==="VcNavigation",v=a.ref(g),w=a.reactive({});a.watch(()=>e,x=>{a.nextTick(()=>{!n.mounted||C()})},{deep:!0}),n.createCesiumObject=async()=>{v.value=!0;const{viewer:x}=s,T=x._element;return e.showMouseInfo&&(p.value=new IA({gridFileUrl:e.gridFileUrl,proj4Projection:e.proj4Projection,projectionUnits:e.projectionUnits,proj4longlat:e.proj4longlat}),T.addEventListener("wheel",E,!1),T.addEventListener("mousemove",E,!1),T.addEventListener("touchmove",E,!1),TA()),e.showCameraInfo&&(x.camera.changed.addEventListener(_),_()),e.showPerformanceInfo&&(x.scene.debugShowFramesPerSecond=!0,x.scene.postRender.addEventListener(P)),new Promise((V,I)=>{a.nextTick(()=>{var R,L,j;g?V((j=ie(l))==null?void 0:j.$el):(x._element.appendChild((R=ie(l))==null?void 0:R.$el),V((L=ie(l))==null?void 0:L.$el))})})},n.mount=async()=>{var x,T;C();const{viewer:V}=s;return(T=V.viewerWidgetResized)==null||T.raiseEvent({type:n.cesiumClass,status:"mounted",target:(x=ie(l))==null?void 0:x.$el}),!0},n.unmount=async()=>{var x,T,V,I;const{viewer:R}=s,L=R._element;return e.showMouseInfo&&(p.value=void 0,L.removeEventListener("wheel",E),L.removeEventListener("mousemove",E),L.removeEventListener("touchmove",E)),e.showCameraInfo&&R.camera.changed.removeEventListener(_),e.showPerformanceInfo&&(R.scene._performanceDisplay&&(R.scene._performanceDisplay._container.style.display="block"),R.scene.postRender.removeEventListener(P)),g||L.contains((x=ie(l))==null?void 0:x.$el)&&L.removeChild((T=ie(l))==null?void 0:T.$el),(I=R.viewerWidgetResized)==null||I.raiseEvent({type:n.cesiumClass,status:"unmounted",target:(V=ie(l))==null?void 0:V.$el}),!0};const C=()=>{const x=y.style.value;w.left=x.left,w.top=x.top,w.transform=x.transform,x.background=e.background,x.color=e.color;const T=y.attach.value;(T.bottom||T.top)&&!T.left&&!T.right&&(x.left="50%",x.transform="translate(-50%, 0)"),(T.left||T.right)&&!T.top&&!T.bottom&&(x.top="50%",x.transform="translate(0, -50%)"),Object.assign(w,x)},P=Bl(x=>{var T,V;f.fps=(T=x._performanceDisplay)==null?void 0:T._fpsText.nodeValue,f.ms=(V=x._performanceDisplay)==null?void 0:V._msText.nodeValue,x._performanceDisplay._container.style.display="none"},500),_=()=>{const{viewer:x}=s,{Math:T}=Cesium;h.heading=T.toDegrees(x.camera.heading).toFixed(1),h.pitch=T.toDegrees(x.camera.pitch).toFixed(1),h.roll=T.toDegrees(x.camera.roll).toFixed(1),h.height=x.camera.positionCartographic.height.toFixed(2),h.level=Ns(Number(h.height)).toFixed(0)},E=x=>{var T;const{Cartesian2:V,SceneMode:I}=Cesium,{viewer:R}=s;if(R.scene.mode===I.MORPHING)return;const L=x.type==="mousemove"||x.type==="wheel"?x.clientX:x.changedTouches[0].clientX,j=x.type==="mousemove"||x.type==="wheel"?x.clientY:x.changedTouches[0].clientY;if(L===d&&j===m)return;d=L,m=j;const M=R._element;if(R){if(e.showMouseInfo){const B=M.getBoundingClientRect(),A=new V(L-B.left,j-B.top);(T=p.value)==null||T.updateCoordinatesFromCesium(R,A)}Ee(n,"statusBarEvt")&&t.emit("statusBarEvt",{type:"statusBar",mouseCoordsInfo:p.value,cameraInfo:h,performanceInfo:f})}},S=()=>{var x,T;!e.useProjection||((x=ie(c))==null||x.hide(),e.showMouseInfo&&((T=p.value)==null||T.toggleUseProjection()))};return Object.assign(n.proxy,{getMouseCoordsInfo:()=>p.value,getCameraInfo:()=>h,getPerformanceInfo:()=>f}),()=>{var x,T,V,I,R,L,j,M;if(v.value){const b=[];return e.showMouseInfo?(((x=p.value)==null?void 0:x.useProjection)?b.push(a.h("div",{class:"vc-section-short ellipsis"},[a.h("span",{...t.attrs},u("vc.navigation.statusBar.zone")),a.h("span",null,(I=p.value)==null?void 0:I.utmZone)]),a.h("div",{class:"vc-section ellipsis"},[a.h("span",{...t.attrs},u("vc.navigation.statusBar.e")),a.h("span",null,(R=p.value)==null?void 0:R.east)]),a.h("div",{class:"vc-section ellipsis"},[a.h("span",{...t.attrs},u("vc.navigation.statusBar.n")),a.h("span",null,(L=p.value)==null?void 0:L.north)])):b.push(a.h("div",{class:"vc-section ellipsis"},[a.h("span",{...t.attrs},u("vc.navigation.statusBar.lng")),a.h("span",{},(T=p.value)==null?void 0:T.longitude)]),a.h("div",{class:"vc-section ellipsis"},[a.h("span",{},u("vc.navigation.statusBar.lat")),a.h("span",{},(V=p.value)==null?void 0:V.latitude)])),((j=p.value)==null?void 0:j.elevation)?b.push(a.h("div",{class:"vc-section ellipsis"},[a.h("span",{...t.attrs},u("vc.navigation.statusBar.elev")),a.h("span",{},(M=p.value)==null?void 0:M.elevation)])):b.push(a.createCommentVNode("v-if"))):b.push(a.createCommentVNode("v-if")),e.showCameraInfo?b.push(a.h("div",{class:"vc-section-short-mini ellipsis"},[a.h("span",{...t.attrs},u("vc.navigation.statusBar.level")),a.h("span",null,h.level)]),a.h("div",{class:"vc-section-short ellipsis"},[a.h("span",{...t.attrs},u("vc.navigation.statusBar.heading")),a.h("span",null,`${h.heading}\xB0`)]),a.h("div",{class:"vc-section-short ellipsis"},[a.h("span",{...t.attrs},u("vc.navigation.statusBar.pitch")),a.h("span",null,`${h.pitch}\xB0`)]),a.h("div",{class:"vc-section-short ellipsis"},[a.h("span",{...t.attrs},u("vc.navigation.statusBar.roll")),a.h("span",null,`${h.roll}\xB0`)]),a.h("div",{class:"vc-section ellipsis"},[a.h("span",{...t.attrs},u("vc.navigation.statusBar.cameraHeight")),a.h("span",null,`${h.height}m`)])):b.push(a.createCommentVNode("v-if")),e.showPerformanceInfo?b.push(a.h("div",{class:"vc-section-short-mini ellipsis"},[a.h("span",null,f.ms)]),a.h("div",{class:"vc-section-short-mini ellipsis"},[a.h("span",null,f.fps)])):b.push(a.createCommentVNode("v-if")),Ye(e.tooltip)&&e.showMouseInfo&&e.useProjection?b.push(a.h(wt,{ref:c,...e.tooltip},()=>a.h("strong",null,Ye(e.tooltip)&&e.tooltip.tip||u("vc.navigation.statusBar.tip")))):b.push(a.createCommentVNode("v-if")),a.h(Kt,{ref:l,class:"vc-status-bar "+y.classes.value,style:w,noCaps:!0,onClick:S},()=>b)}else return a.createCommentVNode("v-if")}}}),Vf={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},color:{type:String,default:"#fff"},background:{type:String,default:"#3f4854"},width:{type:Number,default:100},barBackground:{type:String,default:"#fff"}};const RA={...ye,distanceLegendEvt:e=>!0},Nf=Vf;var Dc=a.defineComponent({name:"VcDistanceLegend",props:Nf,emits:RA,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="VcDistanceLegend",n.cesiumEvents=[];const o=Le(e,t,n);if(o===void 0)return;const r=Ct(n),{$services:s}=o,l=a.ref(null),c=a.ref(""),u=oi(e),d=((i=r.proxy)==null?void 0:i.$options.name)==="VcNavigation",m=a.ref(d),h=a.reactive({});let f=0;const p=a.ref(0);let y=0;a.watch(()=>e,C=>{a.nextTick(()=>{!n.mounted||v()})},{deep:!0});const g=a.computed(()=>({width:`${p.value}px`,left:`${5+(e.width+15-p.value)/2}px`,height:"2px",background:e.barBackground}));n.createCesiumObject=async()=>(m.value=!0,c.value="",new Promise((C,P)=>{a.nextTick(()=>{var _,E,S;const{viewer:x}=s;d?C((S=ie(l))==null?void 0:S.$el):(x._element.appendChild((_=ie(l))==null?void 0:_.$el),C((E=ie(l))==null?void 0:E.$el)),x.scene.postRender.addEventListener(w)})})),n.mount=async()=>{var C,P;v();const{viewer:_}=s;return(P=_.viewerWidgetResized)==null||P.raiseEvent({type:n.cesiumClass,status:"mounted",target:(C=ie(l))==null?void 0:C.$el}),!0},n.unmount=async()=>{var C,P,_,E;const{viewer:S}=s;S.scene.postRender.removeEventListener(w);const x=S._element;return d||x.contains((C=ie(l))==null?void 0:C.$el)&&x.removeChild((P=ie(l))==null?void 0:P.$el),(E=S.viewerWidgetResized)==null||E.raiseEvent({type:n.cesiumClass,status:"unmounted",target:(_=ie(l))==null?void 0:_.$el}),!0};const v=()=>{const C=u.style.value;h.left=C.left,h.top=C.top,h.transform=C.transform,C.background=e.background,C.color=e.color;const P=u.attach.value;(P.bottom||P.top)&&!P.left&&!P.right&&(C.left="50%",C.transform="translate(-50%, 0)"),(P.left||P.right)&&!P.top&&!P.bottom&&(C.top="50%",C.transform="translate(0, -50%)"),C.width=`${e.width}px`,Object.assign(h,C)},w=Bl(C=>{const{Cartesian2:P,defined:_,getTimestamp:E,EllipsoidGeodesic:S}=Cesium,x=E();if(x<f+250)return;f=x;const T=new S,V=C.canvas.clientWidth,I=C.canvas.clientHeight,R=C.camera.getPickRay(new P(V/2|0,I-1)),L=C.camera.getPickRay(new P(1+V/2|0,I-1)),j=C.globe,M=j.pick(R,C),b=j.pick(L,C);if(!_(M)||!_(b)){p.value=0,c.value="";return}const B=j.ellipsoid.cartesianToCartographic(M),A=j.ellipsoid.cartesianToCartographic(b);T.setEndPoints(B,A);const Z=T.surfaceDistance,F=e.width-10;let $;for(let N=Rc.length-1;!_($)&&N>=0;--N)Rc[N]/Z<F&&($=Rc[N],y!==$&&(y=$,Ee(n,"distanceLegendEvt")&&t.emit("distanceLegendEvt",{type:"distanceLegend",distance:y,status:"changed"})));if(_($)){let N;y>=1e3?N=($/1e3).toString()+" km":N=$.toString()+" m",p.value=$/Z|0,c.value=N}else p.value=0,c.value=""},500);return()=>m.value&&c.value!==void 0?a.h(Kt,{ref:l,class:"vc-distance-legend "+u.classes.value,style:h,stack:!0,noCaps:!0},()=>[a.h("label",null,c.value),a.h("div",{style:g.value,class:"vc-bar"})]):a.createCommentVNode("v-if")}});const Rc=[1,2,3,5,10,20,30,50,100,200,300,500,1e3,2e3,3e3,5e3,1e4,2e4,3e4,5e4,1e5,2e5,3e5,5e5,1e6,2e6,3e6,5e6,1e7,2e7,3e7,5e7],kf={...dn,compassOpts:{type:[Object,Boolean],default:()=>ci(cc,["position","offset"])},zoomOpts:{type:[Object,Boolean],default:()=>ci(fc,["position","offset"])},printOpts:{type:[Object,Boolean],default:()=>ci(kh,["position","offset"])},locationOpts:{type:[Object,Boolean],default:()=>ci(Uh,["position","offset"])},otherOpts:{type:[Object,Boolean],default:()=>({position:"bottom-right",offset:[2,3],statusBarOpts:ci(jf,["position","offset"]),distancelegendOpts:ci(Vf,["position","offset"])})}},mr=ci(kf),LA={...ye,zoomEvt:e=>!0,compassEvt:e=>!0,locationEvt:e=>!0,printEvt:e=>!0,statusBarEvt:e=>!0,distanceLegendEvt:e=>!0},zf=kf;var $f=a.defineComponent({name:"VcNavigation",inheritAttrs:!1,props:zf,emits:LA,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="VcNavigation";const n=Le(e,t,i);if(n===void 0)return;const o=a.ref(!1),{$services:r}=n,s=oi(e),l=oi(e.otherOpts||{position:"bottom-right"}),c=a.ref(null),u=a.ref(null),d=a.ref(null),m=a.ref(null),h=a.ref(null),f=a.ref(null),p=a.ref(null),y=a.ref(null),g=a.reactive({}),v=a.reactive({}),{emit:w}=t;a.watch(()=>e,()=>{a.nextTick(()=>{var b,B,A,Z,F,$;M(),(b=ie(d))==null||b.reload(),(B=ie(m))==null||B.reload(),(A=ie(f))==null||A.reload(),(Z=ie(h))==null||Z.reload(),(F=ie(p))==null||F.reload(),($=ie(y))==null||$.reload()})},{deep:!0});const C=a.computed(()=>Object.assign({},mr.compassOpts,e.compassOpts)),P=a.computed(()=>Object.assign({},mr.zoomOpts,e.zoomOpts)),_=a.computed(()=>Object.assign({},mr.printOpts,e.printOpts)),E=a.computed(()=>Object.assign({},mr.locationOpts,e.locationOpts)),S=a.computed(()=>Object.assign({},mr.otherOpts,e.otherOpts)),x=b=>{Ee(i,"compassEvt")&&w("compassEvt",b)},T=b=>{Ee(i,"zoomEvt")&&w("zoomEvt",b)},V=b=>{Ee(i,"printEvt")&&w("printEvt",b)},I=b=>{Ee(i,"locationEvt")&&w("locationEvt",b)},R=b=>{Ee(i,"statusBarEvt")&&w("statusBarEvt",b)},L=b=>{Ee(i,"distanceLegendEvt")&&w("distanceLegendEvt",b)};i.createCesiumObject=async()=>{var b;o.value=!0;const{viewer:B}=r;return(b=B.viewerWidgetResized)==null||b.addEventListener(j),new Promise((A,Z)=>{a.nextTick(()=>{const F=B._element;F.appendChild(ie(c)),ie(u)&&F.appendChild(ie(u)),A([ie(c),ie(u)])})})},i.mount=async()=>{var b;M();const{viewer:B}=r;return(b=B.viewerWidgetResized)==null||b.raiseEvent({type:i.cesiumClass,status:"mounted",target:ie(c)}),!0},i.unmount=async()=>{var b,B;const{viewer:A}=r,Z=A._element;return Z.contains(ie(c))&&Z.removeChild(ie(c)),Z.contains(ie(u))&&Z.removeChild(ie(u)),(b=A.viewerWidgetResized)==null||b.removeEventListener(j),(B=A.viewerWidgetResized)==null||B.raiseEvent({type:i.cesiumClass,status:"unmounted",target:ie(c)}),!0};const j=()=>{a.nextTick(()=>{M()})},M=()=>{var b,B,A,Z,F;const $=(b=ie(d))==null?void 0:b.$el;let N=0,z=0;if($!==void 0){const ee=getComputedStyle($.parentNode).margin;z=parseInt(ee),N+=$.getBoundingClientRect().height+z*2}const G=(B=ie(m))==null?void 0:B.$el;G!==void 0&&(N+=G.getBoundingClientRect().height+z*2);const H=(A=ie(h))==null?void 0:A.$el;H!==void 0&&(N+=H.getBoundingClientRect().height+z*2);const oe=(Z=ie(f))==null?void 0:Z.$el;oe!==void 0&&(N+=oe.getBoundingClientRect().height+z*2);const Y=s.style.value,W=s.attach.value;g.left=Y.left,g.top=Y.top,g.transform=Y.transform,(W.bottom||W.top)&&!W.left&&!W.right&&(Y.left="50%",Y.transform="translate(-50%, 0)"),(W.left||W.right)&&!W.top&&!W.bottom&&(Y.top="50%",Y.transform="translate(0, -50%)"),Object.assign(g,Y,{height:`${N}px`});const q=l.style.value,K=l.attach.value;v.left=q.left,v.top=q.top,v.transform=q.transform,(K.bottom||K.top)&&!K.left&&!K.right&&(q.left="50%",q.transform="translate(-50%, 0)"),(K.left||K.right)&&!K.top&&!K.bottom&&(q.top="50%",q.transform="translate(0, -50%)");let U=0;const k=(F=ie(p))==null?void 0:F.$el;k!==void 0&&(U+=k.getBoundingClientRect().height),Object.assign(v,q,{height:`${U}px`})};return()=>{if(o.value){const b=[];C.value&&e.compassOpts!==!1?b.push(a.h("div",{class:"vc-navigation-control"},[a.h(hc,{ref:d,...C.value,onCompassEvt:x})])):b.push(a.createCommentVNode("v-if")),P.value&&e.zoomOpts!==!1?b.push(a.h("div",{class:"vc-navigation-control"},[a.h(gc,{ref:m,...P.value,onZoomEvt:T})])):b.push(a.createCommentVNode("v-if")),_.value&&e.printOpts!==!1?b.push(a.h("div",{class:"vc-navigation-control"},[a.h(vc,{ref:h,..._.value,onPrintEvt:V})])):b.push(a.createCommentVNode("v-if")),E.value&&e.locationOpts!==!1?b.push(a.h("div",{class:"vc-navigation-control"},[a.h(yc,{ref:f,...E.value,onLocationEvt:I})])):b.push(a.createCommentVNode("v-if"));let B=[a.h("div",{class:"vc-navigation-controls"},b)];B=ui(t.slots.default,B);const A=[];return A.push(a.h("div",{ref:c,class:"vc-navigation "+s.classes.value,style:g},B)),e.otherOpts!==!1&&A.push(a.h("div",{ref:u,class:"vc-location-other-controls "+l.classes.value,style:v},[a.h(Ic,{ref:p,...S.value.statusBarOpts,onStatusBarEvt:R}),a.h(Dc,{ref:y,...S.value.distancelegendOpts,onDistanceLegendEvt:L})])),A}else return a.createCommentVNode("v-if")}}});function BA(e,{emit:t},i){const n={},o={},r={},s={};let l,c,u,d;const m=a.ref(0);let h,f,p=0,y={},g=0,v,w,C,P={},_=0;const E=a.ref(56),S=a.ref(3);let x;const T=a.ref(null),V=$=>{var N;$.stopPropagation&&$.stopPropagation(),$.preventDefault&&$.preventDefault(),(N=ie(T))==null||N.hide();const{Cartesian2:z,SceneMode:G,Math:H}=Cesium;if(i.viewer.scene.mode===G.MORPHING)return!0;const Y=$.currentTarget,W=$.currentTarget.getBoundingClientRect(),q=new z((W.right-W.left)/2,(W.bottom-W.top)/2);let K;$ instanceof MouseEvent?(K=new z($.clientX-W.left,$.clientY-W.top),x=new z($.clientX,$.clientY)):$ instanceof TouchEvent&&(K=new z($.changedTouches[0].clientX-W.left,$.changedTouches[0].clientY-W.top),x=new z($.changedTouches[0].clientX,$.changedTouches[0].clientY));const U=z.subtract(K,q,n),k=z.magnitude(U);if(k>30&&k<45)M(Y,U);else if(!(k>50&&k<70))j(Y,U);else{const ee=H.PI_OVER_TWO-Math.atan2(-U.y,U.x);ee>=0&&ee<=H.PI_OVER_TWO&&b(Y,U)}},I=$=>{const{Cartesian2:N,Math:z}=Cesium,G=$.currentTarget.getBoundingClientRect(),H=new N((G.right-G.left)/2,(G.bottom-G.top)/2),oe=$.type==="mouseup"?new N($.clientX-G.left,$.clientY-G.top):new N($.changedTouches[0].clientX-G.left,$.changedTouches[0].clientY-G.top),Y=N.subtract(oe,H,n),W=N.magnitude(Y);if(W>30&&W<45){const q=z.toDegrees(Math.atan2(-Y.y,Y.x)),K=$.type==="mouseup"?new N($.clientX,$.clientY):new N($.changedTouches[0].clientX,$.changedTouches[0].clientY),U=K.x-x.x,k=K.y-x.y;if(Math.sqrt(U*U+k*k)>5)return;const X=z.toDegrees(m.value),Q=Math.abs(q-X),te=i.viewer.scene;(q>0&&X>0&&X<90&&Q>80&&Q<100||Q>260&&Q<280)&&te.camera.flyTo({destination:te.camera.position,orientation:{heading:0,pitch:te.camera.pitch}})}},R=$=>{const{Cartesian2:N,Cartesian3:z,defined:G,Matrix4:H,Ray:oe,SceneMode:Y,Transforms:W}=Cesium,{viewer:q}=i,K=q.scene,U=K.camera,k=K.screenSpaceCameraController;if(K.mode===Y.MORPHING||!k.enableInputs)return!0;if(K.mode===Y.COLUMBUS_VIEW&&!k.enableTranslate||(K.mode===Y.SCENE3D||K.mode===Y.COLUMBUS_VIEW)&&(!k.enableLook||K.mode===Y.SCENE3D&&!k.enableRotate))return;const ee=new N;ee.x=K.canvas.clientWidth/2,ee.y=K.canvas.clientHeight/2;const X=new oe,Q=U.getPickRay(ee,X),te=K.globe.pick(Q,K,s);if(!G(te)){q.camera.flyHome();return}const le=Ee(i,"compassEvt");le&&t("compassEvt",{type:"reset",camera:q.camera,status:"start",target:$.currentTarget});const se=W.eastNorthUpToFixedFrame(te||new z,q.scene.globe.ellipsoid),ue=z.subtract(te||new z,U.position,new z),ce=Fh.createTween(K,{destination:H.multiplyByPoint(se,new z(0,0,z.magnitude(ue)),new z),direction:H.multiplyByPointAsVector(se,new z(0,0,-1),new z),up:H.multiplyByPointAsVector(se,new z(0,1,0),new z),duration:e.duration,complete:()=>{le&&t("compassEvt",{type:"reset",camera:q.camera,status:"end",target:$.currentTarget})},cancel:()=>{le&&t("compassEvt",{type:"reset",camera:q.camera,status:"cancel",target:$.currentTarget})}});K.tweens.add(ce)},L=()=>{const{defined:$}=Cesium;$(i.viewer)?(l&&(l(),l=void 0),l=i.viewer.scene.postRender.addEventListener(function(){m.value!==i.viewer.scene.camera.heading&&(m.value=i.viewer.scene.camera.heading)})):l&&(l(),l=void 0)},j=($,N)=>{const{defined:z,getTimestamp:G,SceneMode:H,Math:oe,ScreenSpaceEventType:Y}=Cesium,W=i.viewer.scene,q=W.screenSpaceCameraController;if(W.mode===H.MORPHING||!q.enableInputs)return;switch(W.mode){case H.COLUMBUS_VIEW:if(q.enableLook)break;if(!q.enableTranslate||!q.enableTilt)return;break;case H.SCENE3D:if(q.enableLook)break;if(!q.enableTilt||!q.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!q.enableTranslate)return;break}v.removeInputAction(Y.LEFT_UP),z(d)&&i.viewer.clock.onTick.removeEventListener(d),u=void 0,d=void 0,G();let K=oe.PI_OVER_TWO-Math.atan2(-N.y,N.x);const U=Math.PI/4;let k=0;const ee={LEFT:1,RIGHT:2,UP:3,DOWN:4};k=K>=-U&&U>=K?ee.DOWN:K>=U&&3*U>=K?ee.RIGHT:K>=3*U&&5*U>=K?ee.UP:ee.LEFT;const X=Ee(i,"compassEvt");let Q="rotateEast";switch(k){case ee.LEFT:Q="rotateWest";break;case ee.RIGHT:Q="rotateEast";break;case ee.UP:Q="rotateNorth";break;case ee.DOWN:Q="rotateSouth"}X&&t("compassEvt",{type:Q,camera:W.camera,status:"start",target:$}),d=function(te){const le=i.viewer.scene,se=le.camera;switch(G(),K=20*Math.abs(se.positionCartographic.height/6378317)*5e-4,k){case ee.LEFT:se.rotateLeft(K);break;case ee.RIGHT:se.rotateRight(K);break;case ee.UP:se.rotate(se.right,-K);break;case ee.DOWN:se.rotate(se.right,K)}X&&t("compassEvt",{type:Q,camera:le.camera,status:"changing",target:$})},u=function(te){v.removeInputAction(Y.LEFT_UP),z(d)&&i.viewer.clock.onTick.removeEventListener(d),u=void 0,d=void 0,X&&t("compassEvt",{type:Q,camera:W.camera,status:"end",target:$})},v.setInputAction(u,Y.LEFT_UP),c=i.viewer.clock.onTick.addEventListener(d)},M=($,N)=>{if(!e.enableCompassOuterRing)return;const z=i.viewer.scene;let G=z.camera;const H=z.screenSpaceCameraController;if(z.mode===Cesium.SceneMode.MORPHING||z.mode===Cesium.SceneMode.SCENE2D||!H.enableInputs||!H.enableLook&&(z.mode===Cesium.SceneMode.COLUMBUS_VIEW||z.mode===Cesium.SceneMode.SCENE3D&&!H.enableRotate))return;document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",h,!1),document.removeEventListener("touchend",h,!1);const{Cartesian2:oe,Cartesian3:Y,defined:W,Math:q,Matrix4:K,Ray:U,Transforms:k}=Cesium;f=void 0,h=void 0;const ee=Ee(i,"compassEvt");ee&&t("compassEvt",{type:"rotate",camera:z.camera,status:"start",target:$}),p=Math.atan2(-N.y,N.x);const X=new oe;X.x=z.canvas.clientWidth/2,X.y=z.canvas.clientHeight/2;const Q=new U,te=G.getPickRay(X,Q),le=z.globe.pick(te,z,s);W(le)?y=k.eastNorthUpToFixedFrame(le||new Y,z.globe.ellipsoid,r):y=k.eastNorthUpToFixedFrame(G.positionWC,z.globe.ellipsoid,r);let se=K.clone(G.transform,o);G.lookAtTransform(y),g=Math.atan2(G.position.y,G.position.x),Y.magnitude(new Y(G.position.x,G.position.y,0)),G.lookAtTransform(se),f=function(ue){const ce=$.getBoundingClientRect(),fe=new oe((ce.right-ce.left)/2,(ce.bottom-ce.top)/2);let ge;ue instanceof MouseEvent?ge=new oe(ue.clientX-ce.left,ue.clientY-ce.top):ue instanceof TouchEvent&&(ge=new oe(ue.changedTouches[0].clientX-ce.left,ue.changedTouches[0].clientY-ce.top));const pe=oe.subtract(ge,fe,n),me=Math.atan2(-pe.y,pe.x)-p,D=q.zeroToTwoPi(g-me);G=i.viewer.scene.camera,se=K.clone(G.transform,o),G.lookAtTransform(y);const J=Math.atan2(G.position.y,G.position.x);G.rotateRight(D-J),G.lookAtTransform(se),ee&&t("compassEvt",{type:"rotate",camera:z.camera,status:"changing",target:$})},h=function(ue){document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",h,!1),document.removeEventListener("touchend",h,!1),f=void 0,h=void 0,ee&&t("compassEvt",{type:"rotate",camera:z.camera,status:"end",target:$})},document.addEventListener("mousemove",f,!1),document.addEventListener("touchmove",f,!1),document.addEventListener("mouseup",h,!1),document.addEventListener("touchend",h,!1)},b=($,N)=>{const{Cartesian2:z,defined:G,Math:H,Matrix4:oe,ScreenSpaceEventType:Y,Transforms:W}=Cesium;v.removeInputAction(Y.MOUSE_MOVE),v.removeInputAction(Y.LEFT_UP),w=void 0,C=void 0,_=H.PI_OVER_TWO-Math.atan2(-N.y,N.x),_=_<0?0:_,_=_>H.PI_OVER_TWO?H.PI_OVER_TWO:_;const q=i.viewer.scene,K=q.camera,U=new z;U.x=q.canvas.clientWidth/2,U.y=q.canvas.clientHeight/2;let k=K.pickEllipsoid(U,q.globe.ellipsoid);if(!G(k))for(;U.y<q.canvas.clientHeight;)U.y+=5,k=K.pickEllipsoid(U,q.globe.ellipsoid);const ee=Ee(i,"compassEvt");ee&&t("compassEvt",{type:"tilt",camera:q.camera,status:"start",target:$}),en(k)&&G(k)&&(P=W.eastNorthUpToFixedFrame(k,q.globe.ellipsoid)),w=X=>{const Q=$.getBoundingClientRect(),te=new Cesium.Cartesian2((Q.right-Q.left)/2,(Q.bottom-Q.top)/2),le=z.clone(X.endPosition),se=z.subtract(le,te,n);let ue=H.PI_OVER_TWO-Math.atan2(-se.y,se.x);ue=ue<0?0:ue,ue=ue>H.PI_OVER_TWO?H.PI_OVER_TWO:ue;const ce=i.viewer.scene.camera,fe=oe.clone(ce.transform,o);ce.lookAtTransform(P);const ge=ue-_;ce.rotateUp(ge),_=ue,ce.lookAtTransform(fe);let pe=Math.ceil(ue/(Math.PI/40));pe=pe>19?19:pe;const de=Lc()[pe];E.value=de.x,S.value=de.y,ee&&t("compassEvt",{type:"tilt",camera:q.camera,status:"changing",target:$})},C=function(X){v.removeInputAction(Y.MOUSE_MOVE),v.removeInputAction(Y.LEFT_UP),w=void 0,C=void 0,ee&&t("compassEvt",{type:"tilt",camera:q.camera,status:"end",target:$})},v.setInputAction(w,Y.MOUSE_MOVE),v.setInputAction(C,Y.LEFT_UP)},B=$=>{f!==void 0&&($.cancel=!0)},A=()=>{const{Math:$}=Cesium,N=$.PI_OVER_TWO+i.viewer.scene.camera.pitch,z=Math.PI/2/20;let G=Math.floor(N/z);G=G>19?19:G,G=G<0?0:G,E.value=Lc()[G].x,S.value=Lc()[G].y};return{heading:m,handleDoubleClick:R,handleMouseDown:V,handleMouseUp:I,onTooltipBeforeShow:B,viewerChange:L,load:async($,N)=>(i.viewer=$,m.value=$.scene.camera.heading,L(),v=new Cesium.ScreenSpaceEventHandler(N),A(),!0),unload:async()=>(document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",h,!1),document.removeEventListener("touchend",h,!1),c&&c(),l&&l(),v==null||v.destroy(),!0),tiltbarLeft:E,tiltbarTop:S,tooltipRef:T}}function Lc(){return[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}]}const Gf={enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},autoHidden:{type:Boolean,default:!0},...dn},jA={...ye,compassEvt:e=>!0};var Bc=a.defineComponent({name:"VcCompassSm",props:Gf,emits:jA,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="VcCompassSm";const o=Le(e,t,n);if(o===void 0)return;const{t:r}=gt(),s=Ct(n),{$services:l}=o,c=BA(e,t,n),u=oi(e),d=a.ref(null),m=a.ref(null),h=((i=s.proxy)==null?void 0:i.$options.name)==="VcNavigationSm",f=a.ref(h),p=a.reactive({});a.watch(()=>e,C=>{a.nextTick(()=>{!n.mounted||w()})},{deep:!0});const y=a.computed(()=>({left:c.tiltbarLeft.value+"px",top:c.tiltbarTop.value+"px",visibility:e.autoHidden?"hidden":"visible"})),g=a.computed(()=>({visibility:e.autoHidden?"hidden":"visible"})),v=a.computed(()=>({transform:"rotate(-"+c.heading.value+"rad)",WebkitTransform:"rotate(-"+c.heading.value+"rad)"}));n.createCesiumObject=async()=>{f.value=!0;const{viewer:C}=l;return new Promise((P,_)=>{a.nextTick(()=>{h||C._element.appendChild(ie(d)),P(ie(d))})})},n.mount=async()=>{var C;w();const{viewer:P}=l;return(C=P.viewerWidgetResized)==null||C.raiseEvent({type:n.cesiumClass,status:"mounted",target:ie(d)}),c.load(l.viewer,ie(d))},n.unmount=async()=>{var C;const{viewer:P}=l,_=P._element;return h||_.contains(ie(d))&&_.removeChild(ie(d)),(C=P.viewerWidgetResized)==null||C.raiseEvent({type:n.cesiumClass,status:"unmounted",target:ie(d)}),c.unload()};const w=()=>{const C=u.style.value;p.left=C.left,p.top=C.top,p.transform=C.transform;const P=u.attach.value,_=ie(m);if(_!==void 0){const E=_==null?void 0:_.getBoundingClientRect();C.width=`${E==null?void 0:E.width}px`,C.height=`${E==null?void 0:E.height}px`,(P.bottom||P.top)&&!P.left&&!P.right&&(C.left="50%",C.transform="translate(-50%, 0)"),(P.left||P.right)&&!P.top&&!P.bottom&&(C.top="50%",C.transform="translate(0, -50%)")}Object.assign(p,C)};return()=>{if(f.value){let C=[];return C=ui(t.slots.default,C),C.push(a.h("div",{class:"vc-compass-tilt-sm",style:g.value})),C.push(a.h("div",{class:"vc-compass-tiltbar-sm",style:y.value})),C.push(a.h("div",{class:"vc-compass-arrows-sm",style:g.value})),C.push(a.h("div",{ref:m,class:"vc-compass-outer-ring-sm",style:v.value},e.tooltip?a.h(wt,{ref:c.tooltipRef,...e.tooltip,onBeforeShow:c.onTooltipBeforeShow},()=>a.h("strong",{},e.tooltip.tip||r("vc.navigationSm.compass.outerTip"))):a.createCommentVNode("v-if"))),C.push(a.h("div",{class:"vc-arrows-e-sm",style:g.value})),C.push(a.h("div",{class:"vc-arrows-n-sm",style:g.value})),C.push(a.h("div",{class:"vc-arrows-s-sm",style:g.value})),C.push(a.h("div",{class:"vc-arrows-w-sm",style:g.value})),a.h("div",{ref:d,class:"vc-compass-sm "+u.classes.value,style:p,onDblclick:c.handleDoubleClick,onMousedown:c.handleMouseDown,onMouseup:c.handleMouseUp,onTouchend:c.handleMouseUp,onTouchstart:c.handleMouseDown},C)}else return a.createCommentVNode("v-if")}}});function FA(e,{emit:t},i,n){const o=a.ref(65),r=a.ref(null),s=a.ref(null),l=a.ref(null);let c,u,d,m,h,f,p,y,g,v,w,C;const P=R=>{var L,j,M;const{defined:b,getTimestamp:B,SceneMode:A,ScreenSpaceEventType:Z}=Cesium,{viewer:F}=n;(L=ie(r))==null||L.hide(),(j=ie(s))==null||j.hide(),(M=ie(l))==null||M.hide(),c.removeInputAction(Z.LEFT_UP),b(u)&&F.clock.onTick.removeEventListener(u),d=void 0,u=void 0,B();const N=F.scene.camera;u=()=>{F.scene.mode===A.COLUMBUS_VIEW?N.zoomIn():S(1)},d=()=>{c.removeInputAction(Z.LEFT_UP),b(u)&&F.clock.onTick.removeEventListener(u),d=void 0,u=void 0},c.setInputAction(d,Z.LEFT_UP),m=F.clock.onTick.addEventListener(u)},_=R=>{var L,j,M;(L=ie(r))==null||L.hide(),(j=ie(s))==null||j.hide(),(M=ie(l))==null||M.hide();const{defined:b,getTimestamp:B,SceneMode:A,ScreenSpaceEventType:Z}=Cesium,{viewer:F}=n;c.removeInputAction(Z.LEFT_UP),b(h)&&F.clock.onTick.removeEventListener(h),f=void 0,h=void 0,B();const N=F.scene.camera;h=()=>{F.scene.mode===A.COLUMBUS_VIEW?N.zoomOut():S(-1)},f=()=>{c.removeInputAction(Z.LEFT_UP),b(h)&&F.clock.onTick.removeEventListener(h),f=void 0,h=void 0},c.setInputAction(f,Z.LEFT_UP),p=F.clock.onTick.addEventListener(h)},E=R=>{var L,j,M;(L=ie(r))==null||L.hide(),(j=ie(s))==null||j.hide(),(M=ie(l))==null||M.hide();const{Cartesian2:b,defined:B,SceneMode:A}=Cesium,{viewer:Z}=n;document.removeEventListener("mousemove",y,!1),document.removeEventListener("touchmove",y,!1),document.removeEventListener("mouseup",g,!1),document.removeEventListener("touchend",g,!1),B(v)&&Z.clock.onTick.removeEventListener(v),g=void 0,v=void 0;const $=Z.scene.camera;v=()=>{const N=o.value-65;N>0?Z.scene.mode===A.COLUMBUS_VIEW?$.zoomOut():S(-1):N<0&&(Z.scene.mode===A.COLUMBUS_VIEW?$.zoomIn():S(1))},y=N=>{const z=o.value,G=N.target.parentElement.getBoundingClientRect(),H=C.getBoundingClientRect(),oe=new Cesium.Cartesian2;oe.x=N.type==="touchmove"?N.changedTouches[0].clientX-H.left:N.clientX-H.left,oe.y=N.type==="touchmove"?N.changedTouches[0].clientY-H.top:N.clientY-H.top;let W=new b(G.width-oe.x,G.height-oe.y).y-16;W=W<0?0:W,W=W>120?120:W,o.value=120-W,o.value-z>0?Z.scene.mode===A.COLUMBUS_VIEW?$.zoomOut():S(-1):Z.scene.mode===A.COLUMBUS_VIEW?$.zoomIn():S(1)},g=()=>{document.removeEventListener("mousemove",y,!1),document.removeEventListener("touchmove",y,!1),document.removeEventListener("mouseup",g,!1),document.removeEventListener("touchend",g,!1),B(v)&&Z.clock.onTick.removeEventListener(v),g=void 0,y=void 0,v=void 0,o.value=65},document.addEventListener("mousemove",y,!1),document.addEventListener("touchmove",y,!1),document.addEventListener("mouseup",g,!1),document.addEventListener("touchend",g,!1),w=Z.clock.onTick.addEventListener(v)},S=R=>{const{Cartesian2:L,Cartesian3:j,defined:M,Ellipsoid:b,Math:B}=Cesium,{viewer:A}=n,Z=A.scene,F=Z.camera,$=Z.canvas,N=new L;N.x=$.clientWidth/2,N.y=$.clientHeight/2;const z=x(N);if(M(z)){const G=j.distance(F.position,z);let H=.0618*R*.2;H=G>300?H:2*H;const oe=G*H,Y=new j;j.subtract(z,F.position,Y);const W=j.clone(F.right),q=j.dot(Y,W),K=new j;j.multiplyByScalar(W,q,K),j.subtract(Y,K,Y),j.normalize(Y,Y),F.move(Y,oe);const U=new j;j.normalize(z,U);const k=F.pickEllipsoid(N,A.scene.globe.ellipsoid);if(en(k)&&M(k)&&!isNaN(k.x)&&!isNaN(k.y)&&!isNaN(k.z)&&!(F.positionCartographic.height<0)){j.normalize(k,k);const ee=j.angleBetween(U,k);if(!B.equalsEpsilon(ee,0,B.EPSILON10)){const X=j.cross(U,k,new j);F.rotate(X,ee),Ee(i,"zoomEvt")&&t("zoomEvt",{type:R===1?"zoomIn":"zoomOut",camera:A.camera,status:"end"})}}}},x=R=>{const{defined:L,Cartesian3:j}=Cesium,{viewer:M}=n,b=M.scene,B=b.globe,A=b.camera;if(L(B)){let Z;b.pickPositionSupported&&(Z=b.pickPositionWorldCoordinates(R));const F=A.getPickRay(R),$=B.pick(F,b),N=L(Z)?j.distance(Z,A.positionWC):Number.POSITIVE_INFINITY;return(en($)&&L($)?j.distance($,A.positionWC):Number.POSITIVE_INFINITY)>N?Z:$}};return{handleZoomInMouseDown:P,handleZoomOutMouseDown:_,handleZoomBarScrollMouseDown:E,load:R=>(C=R,c=new Cesium.ScreenSpaceEventHandler(R),!0),unload:()=>(document.removeEventListener("mousemove",y,!1),document.removeEventListener("touchmove",y,!1),document.removeEventListener("mouseup",g,!1),document.removeEventListener("touchend",g,!1),m==null||m(),p==null||p(),w==null||w(),c==null||c.destroy(),!0),zoombarTop:o,zoomInTooltipRef:r,zoomOutTooltipRef:s,zoomBarTooltipRef:l,onTooltipBeforeShow:R=>{(y!==void 0||u!==void 0||h!==void 0)&&(R.cancel=!0)}}}const Uf={...dn,autoHidden:{type:Boolean,default:!1},tooltip:{type:Object,default:()=>({delay:1e3,anchor:"bottom middle",offset:[0,20],zoomInTip:void 0,zoomOutTip:void 0,zoomBarTip:void 0})}},VA={...ye,zoomEvt:e=>!0};var jc=a.defineComponent({name:"VcZoomControlSm",props:Uf,emits:VA,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="VcZoomControlSm",n.cesiumEvents=[];const o=a.ref(null),r=a.ref(null),s=a.ref(null),l=a.ref(null),u=((i=Ct(n).proxy)==null?void 0:i.$options.name)==="VcNavigationSm",d=a.ref(u),m=a.reactive({}),h=Le(e,t,n);if(h===void 0)return;const{t:f}=gt(),{$services:p}=h,y=oi(e),g=FA(e,t,n,p);a.watch(()=>e,C=>{a.nextTick(()=>{!n.mounted||w()})},{deep:!0});const v=a.computed(()=>({top:g.zoombarTop.value+"px"}));n.createCesiumObject=async()=>new Promise((C,P)=>{d.value=!0,a.nextTick(()=>{const _=ie(o),{viewer:E}=p;if(u)C(_);else{const S=E._element;en(_)&&(S==null||S.appendChild(_)),C(_)}})}),n.mount=async()=>{var C;w();const{viewer:P}=p;return(C=P.viewerWidgetResized)==null||C.raiseEvent({type:n.cesiumClass,status:"mounted",target:ie(o)}),g.load(ie(o))},n.unmount=async()=>{var C;const{viewer:P}=p;if(!u){const _=P._element,E=ie(o);en(E)&&(_==null?void 0:_.contains(E))&&_.removeChild(E)}return(C=P.viewerWidgetResized)==null||C.raiseEvent({type:n.cesiumClass,status:"unmounted",target:ie(o)}),g.unload()};const w=()=>{const C=y.style.value;if(m.left=C.left,m.top=C.top,m.transform=C.transform,m.visibility=e.autoHidden?"hidden":"visible",!u){const P=y.attach.value;(P.bottom||P.top)&&!P.left&&!P.right&&(C.left="50%",C.transform="translate(-50%, 0)"),(P.left||P.right)&&!P.top&&!P.bottom&&(C.top="50%",C.transform="translate(0, -50%)")}Object.assign(m,C)};return()=>{if(d.value){let C=[];return C=ui(t.slots.default,C),C.push(a.h("div",{ref:r,class:"vc-zoomin-sm",onMousedown:g.handleZoomInMouseDown,onTouchstart:g.handleZoomInMouseDown},e.tooltip?a.h(wt,{ref:g.zoomInTooltipRef,...e.tooltip,onBeforeShow:g.onTooltipBeforeShow},()=>a.h("strong",{},e.tooltip.zoomInTip||f("vc.navigationSm.zoomCotrol.zoomInTip"))):a.createCommentVNode("v-if"))),C.push(a.h("div",{ref:l,class:"vc-zoomout-sm",onMousedown:g.handleZoomOutMouseDown,onTouchstart:g.handleZoomOutMouseDown},e.tooltip?a.h(wt,{ref:g.zoomInTooltipRef,...e.tooltip,onBeforeShow:g.onTooltipBeforeShow},()=>a.h("strong",{},e.tooltip.zoomOutTip||f("vc.navigationSm.zoomCotrol.zoomOutTip"))):a.createCommentVNode("v-if"))),C.push(a.h("div",{ref:s,class:"vc-zoombar-sm",style:v.value,onMousedown:g.handleZoomBarScrollMouseDown,onTouchstart:g.handleZoomBarScrollMouseDown},e.tooltip?a.h(wt,{ref:g.zoomInTooltipRef,...e.tooltip,onBeforeShow:g.onTooltipBeforeShow},()=>a.h("strong",{},e.tooltip.zoomBarTip||f("vc.navigationSm.zoomCotrol.zoomBarTip"))):a.createCommentVNode("v-if"))),a.h("div",{ref:o,class:"vc-zoom-control-sm "+y.classes.value,style:m},C)}else return a.createCommentVNode("v-if")}}});const Hf={enableCompassOuterRing:!0,duration:1.5,autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}},Wf={autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}},qf={...dn,compassOpts:{type:[Boolean,Object],default:()=>Hf},zoomOpts:{type:[Boolean,Object],default:()=>Wf}},NA={...ye,zoomEvt:e=>!0,compassEvt:e=>!0};var Zf=a.defineComponent({name:"VcNavigationSm",inheritAttrs:!1,props:qf,emits:NA,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="VcNavigationSm";const n=Le(e,t,i);if(n===void 0)return;const o=a.ref(!1),{$services:r}=n,s=oi(e),l=a.ref(null),c=a.ref(null),u=a.ref(null),d=a.reactive({}),{emit:m}=t;a.watch(()=>e,()=>{a.nextTick(()=>{var w,C;v(),(w=ie(c))==null||w.reload(),(C=ie(u))==null||C.reload()})},{deep:!0});const h=a.computed(()=>Object.assign({},Hf,e.compassOpts)),f=a.computed(()=>Object.assign({},Wf,e.zoomOpts)),p=w=>{Ee(i,"compassEvt")&&m("compassEvt",w)},y=w=>{Ee(i,"zoomEvt")&&m("zoomEvt",w)};i.createCesiumObject=async()=>{var w;o.value=!0;const{viewer:C}=r;return(w=C.viewerWidgetResized)==null||w.addEventListener(g),new Promise((P,_)=>{a.nextTick(()=>{C._element.appendChild(ie(l)),P(ie(l))})})},i.mount=async()=>{var w;v();const{viewer:C}=r;return(w=C.viewerWidgetResized)==null||w.raiseEvent({type:i.cesiumClass,status:"mounted",target:ie(l)}),!0},i.unmount=async()=>{var w,C;const{viewer:P}=r,_=P._element;return _.contains(ie(l))&&_.removeChild(ie(l)),(w=P.viewerWidgetResized)==null||w.removeEventListener(g),(C=P.viewerWidgetResized)==null||C.raiseEvent({type:i.cesiumClass,status:"unmounted",target:ie(l)}),!0};const g=()=>{a.nextTick(()=>{v()})},v=()=>{const w=s.style.value,C=s.attach.value;d.left=w.left,d.top=w.top,d.transform=w.transform,(C.bottom||C.top)&&!C.left&&!C.right&&(w.left="50%",w.transform="translate(-50%, 0)"),(C.left||C.right)&&!C.top&&!C.bottom&&(w.top="50%",w.transform="translate(0, -50%)"),Object.assign(d,w)};return()=>{if(o.value){let w=[];return w=ui(t.slots.default,w),h.value&&e.compassOpts!==!1&&w.push(a.h(Bc,{ref:c,onCompassEvt:p,...h.value})),f.value&&e.zoomOpts!==!1&&w.push(a.h(jc,{ref:u,onZoomEvt:y,...f.value})),a.h("div",{ref:l,class:"vc-navigation-sm "+s.classes.value,style:d},w)}else return a.createCommentVNode("v-if")}}});const Xf={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},width:{type:String,default:"150px"},height:{type:String,default:"150px"},border:{type:String,default:"solid 4px rgb(255, 255, 255)"},borderRadius:{type:String},toggleOpts:{type:Object},viewerOpts:{type:Object}};var Yf=a.defineComponent({name:"VcOverviewMap",props:Xf,emits:ye,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="VcOverviewMap",i.cesiumEvents=[];const n=Le(e,t,i);if(n===void 0)return;const{t:o}=gt(),{$services:r}=n,s=a.ref(null),l=a.reactive({}),c=a.ref(null),u=a.ref(null),d=a.ref(null),m=oi(e);let h=!1,f=[],p;const y=a.computed(()=>Object.assign({},{show:!0,color:"#fff",background:"#3f4854",icon:"vc-icons-overview-toggle",size:"15px",tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},e.toggleOpts)),g=a.computed(()=>Object.assign({},{removeCesiumScript:!1,showCredit:!1,sceneMode:2},e.viewerOpts));i.createCesiumObject=async()=>{const{viewer:S}=r;return S._element.appendChild(ie(s)),[ie(s),ie(d)]},i.mount=async()=>{C();const{viewer:S}=r;return S.clock.onTick.addEventListener(v),!0},i.unmount=async()=>{const{viewer:S}=r,x=S._element;return S.clock.onTick.removeEventListener(v),x.contains(ie(s))&&x.removeChild(ie(s)),!0};const v=()=>{const{viewer:S}=r;p&&p.camera.flyTo({destination:S.camera.position,orientation:{heading:S.camera.heading,pitch:S.camera.pitch,roll:S.camera.roll},duration:0})},w=S=>{const{viewer:x}=S;p=x;const T=x.scene.screenSpaceCameraController;T.enableRotate=!1,T.enableTranslate=!1,T.enableZoom=!1,T.enableTilt=!1,T.enableLook=!1},C=()=>{const S=m.style.value;l.left=S.left,l.top=S.top,l.transform=S.transform,S.borderRadius=e.borderRadius,S.border=e.border,S.width=e.width,S.height=e.height,h=!1,Object.assign(l,S)},P=()=>{h?E():_(),h=!h},_=()=>{var S;if(y.value.show){const T=/(\d+)/g.exec(e.border),V=(T==null?void 0:T.length)?parseFloat(T[0]):0,I=getComputedStyle((S=ie(c))==null?void 0:S.$el);l.width=`${parseFloat(I.width)+parseFloat(I.padding)+V}px`,l.height=`${parseFloat(I.height)+parseFloat(I.padding)+V}px`}else l.display="block"},E=()=>{y.value.show?(l.width=e.width,l.height=e.height):l.display="none"};return a.onUnmounted(()=>{f.forEach(S=>S()),f=[]}),()=>{const S=[];return S.push(a.h(Kt,{ref:c,class:"toggle toggle-"+e.position+(h?" minimized ":""),flat:!0,dense:!0,icon:y.value.icon,size:y.value.size,style:{color:y.value.color,background:y.value.background},onClick:P},()=>y.value.tooltip?a.h(wt,{ref:u,...y.value.tooltip},()=>a.h("strong",{},y.value.tooltip.tip||o(`vc.overview.${h?"show":"hidden"}`))):a.createCommentVNode("v-if"))),S.push(a.h(Ih,{ref:d,...g.value,onReady:w},()=>Xe(t.slots.default))),a.h("div",{ref:s,class:"vc-overview-map "+m.classes.value,style:l},S)}}});class hr{constructor(t){this.id=t.id||Cesium.createGuid()}static getBoundingSphere(t,i){var n,o,r,s;const{Primitive:l,ClassificationPrimitive:c,GroundPolylinePrimitive:u,GroundPrimitive:d,Polyline:m}=Cesium;let h;return t instanceof c||t instanceof u?h=(o=(n=t._primitive)==null?void 0:n._boundingSphereWC)==null?void 0:o[0]:t instanceof l?h=(r=t._boundingSphereWC)==null?void 0:r[0]:t instanceof d?h=(s=t._boundingVolumes)==null?void 0:s[0]:t instanceof m?h=t._boundingVolumeWC:t instanceof Cesium.Entity&&(h=new Cesium.BoundingSphere,i.dataSourceDisplay.getBoundingSphere(t,!0,h)),h}static fromPickedFeature(t,i,n,o){var r;const s=new hr({id:t.id});return t.position?s.position=t.position:t instanceof Cesium.Model?s.position=Cesium.Matrix4.getTranslation(t.modelMatrix,new Cesium.Cartesian3):t instanceof Cesium.Cesium3DTileset?s.position=Cesium.Matrix4.getTranslation(i.content._contentModelMatrix,new Cesium.Cartesian3):s.position=(r=hr.getBoundingSphere(t,n))==null?void 0:r.center,s.cesiumObject=t,s.pickedFeature=i,s.windowPosition=o,s}static fromImageryLayerFeature(t,i){const n=new hr({id:t.name});return n.name=t.name,n.description=t.description,n.properties=t.properties,n.data=t.data,n.imageryLayer=t.imageryLayer,n.position=i.scene.globe.ellipsoid.cartographicToCartesian(t.position),n.coords=t.coords,n}}var fo=hr;class kA{constructor(){const{knockout:t}=Cesium;this.allFeaturesAvailablePromise=void 0,this.isLoading=!0,this.pickPosition=void 0,this.features=[],this.error=void 0,this.providerCoords=void 0,t.track(this,["isLoading","features","error"])}}var zA=kA;function $A(e,t,i){const n="-1000px",o=a.ref(n),r=a.ref(n),s="",l=1,c=a.ref(),u=a.ref();let d,m;const h=a.ref(null),f=a.ref(null);let p=[],y=!1;const g=a.reactive({top:r.value,left:o.value,transform:s,opacity:l});p.push(a.watch(f,I=>{var R,L,j;const M=I,{defined:b}=Cesium;if(b(M)&&b(M==null?void 0:M.position)){const{viewer:B}=i;c.value=(M==null?void 0:M.position)instanceof Cesium.Cartesian3?M==null?void 0:M.position:(R=M==null?void 0:M.position)==null?void 0:R.getValue(B.clock.currentTime),x(),(L=e.proxy)==null||L.$emit("pickEvt",M)}else T(),(j=e.proxy)==null||j.$emit("pickEvt",M);S()})),p.push(a.watch(h,I=>{const{defined:R,Entity:L}=Cesium,j=I;if(!R(j))f.value=void 0;else{const M=new L({id:"__Vc__Pick__Location__"});M.position=j.pickPosition,f.value=M}a.nextTick(()=>{R(j.allFeaturesAvailablePromise)&&j.allFeaturesAvailablePromise.then(()=>{var M,b,B;const A=j.features.filter(Z=>R(Z));f.value=A.filter(v)[0],!R(f.value)&&A.length>0&&(f.value=A[0],y&&f.value instanceof fo&&((B=(b=(M=f.value)==null?void 0:M.pickedFeature)==null?void 0:b.primitive)==null?void 0:B.position)&&(f.value.position=f.value.pickedFeature.primitive.position))})})}));const v=I=>{const{defined:R}=Cesium;return R(I.properties)||R(I.description)},w=I=>{const{defined:R}=Cesium,{viewer:L}=i,j=L.scene,M=j.camera.getPickRay(I);let b=j.globe.pick(M,j);if(!R(b)&&(b=j.pickPosition(I),!R(b)))return;const B=j.globe.ellipsoid.cartesianToCartographic(b||new Cesium.Cartesian3),A=P(I),Z=_(),F=t.allowFeatureInfoRequests?j.imageryLayers.pickImageryLayerFeatures(M,j):Promise.resolve(),$=C(Z,b,A,[F],void 0,B.height,!1,L);h.value=$},C=(I,R,L,j,M,b,B,A)=>{const{defined:Z,defaultValue:F,when:$}=Cesium;B=F(B,!1);const N=new zA;return N.providerCoords=I,N.pickPosition=R,N.allFeaturesAvailablePromise=$.all(j).then(function(z){N.isLoading=!1,N.features=z.reduce(function(G,H,oe){if(!Z(H))return G;const Y=H.map(function(W){return Z(M)&&(W.imageryLayer=M[oe]),Z(W.position)||(W.position=A.scene.globe.ellipsoid.cartesianToCartographic(R)),(!Z(W.position.height)||W.position.height===0)&&(W.position.height=b),fo.fromImageryLayerFeature(W,A)}.bind(this));return G.concat(Y)}.bind(this),F(L,[]))}).otherwise(function(){N.isLoading=!1,N.error="An unknown error occurred while picking features."}),N},P=I=>{var R,L;const j=[],{defined:M}=Cesium,{viewer:b}=i,A=b.scene.drillPick(I,t.limit);for(let Z=0;Z<A.length;++Z){const F=A[Z];let $=F.id;!M($)&&M(F.primitive)&&($=F.primitive);const N=(L=(R=F==null?void 0:F.primitive)==null?void 0:R._catalogItem)!=null?L:$==null?void 0:$._catalogItem;if(typeof(N==null?void 0:N.getFeaturesFromPickResult)=="function"){const z=N.getFeaturesFromPickResult.bind(N)(I,F);z&&(Array.isArray(z)?j.push(...z):j.push(z))}else{const z=F;if(z.id)if(He(z.id)&&z.id[0]instanceof Cesium.Entity){y=!0,z.id.forEach(G=>{const H=fo.fromPickedFeature(G,z,b,I);j.push(H)});continue}else if(z.id instanceof Cesium.Entity){const G=fo.fromPickedFeature(z.id,z,b,I);j.push(G),y=!1;continue}else y=!1;if(z.primitive){const G=fo.fromPickedFeature(z.primitive,z,b,I);j.push(G)}else if(z.collection){const G=fo.fromPickedFeature(z.collection,z,b,I);j.push(G)}}}return j},_=()=>{const I={},{viewer:R}=i,L=R.scene,j=function(M,b,B,A,Z,F,$){if(b){const N=b.call(M,B,A,Z,F,$);return M.url&&(I[M.url]={x:B,y:A,level:Z}),M.pickFeatures=b,N}return Promise.reject(!1)};for(let M=0;M<L.imageryLayers.length;M++){const b=L.imageryLayers.get(M).imageryProvider;b.pickFeatures=j.bind(void 0,b,b.pickFeatures)}return I},E=(I,R)=>{const{viewer:L}=i;return Cesium.SceneTransforms.wgs84ToWindowCoordinates(L.scene,I,R)},S=()=>{const{defined:I,Cartesian2:R}=Cesium;if(t.show&&I(c.value)){const L=E(c.value,new R);if(I(L)){const{viewer:j}=i,M=j.container,b=M.clientWidth,B=M.clientHeight,A=t.width,Z=A*.5;L.x=Math.min(Math.max(L.x,-A),b+A)-Z,L.y=Math.min(Math.max(L.y,-A),B+A)-Z,g.left=Math.floor(L.x+.25)+"px",g.top=Math.floor(L.y+.25)+"px"}}},x=()=>{const{viewer:I}=i,{defined:R,EasingFunction:L}=Cesium;if(R(d)){if(m)return;d.cancelTween(),d=void 0}m=!0,d=I.scene.tweens.add({startObject:{scale:2,opacity:0,rotate:-180},stopObject:{scale:1,opacity:1,rotate:0},duration:.8,easingFunction:L.EXPONENTIAL_OUT,update:function(j){g.opacity=j.opacity,g.transform="scale("+j.scale+") rotate("+j.rotate+"deg)"},complete:function(){d=void 0},cancel:function(){d=void 0}})},T=()=>{const{viewer:I}=i,{defined:R,EasingFunction:L}=Cesium;if(R(d)){if(!m)return;d.cancelTween(),d=void 0}m=!1,d=I.scene.tweens.add({startObject:{scale:1,opacity:1},stopObject:{scale:1.5,opacity:0},duration:.8,easingFunction:L.EXPONENTIAL_OUT,update:function(j){g.opacity=j.opacity,g.transform="scale("+j.scale+") rotate(0deg)"},complete:function(){d=void 0},cancel:function(){d=void 0}})},V=()=>{S()};return a.onUnmounted(()=>{p.forEach(I=>I()),p=[]}),Object.assign(e.proxy,{selectedFeature:f,position:c,computeScreenSpacePosition:E,update:S,animateAppear:x,animateDepart:T,getPickedFeatures:()=>h}),{pickFromScreenPosition:w,rootRef:u,rootStyle:g,onPostRender:V}}const Qf={show:{type:Boolean,default:!0},width:{type:Number,default:50},height:{type:Number,default:50},allowFeatureInfoRequests:{type:Boolean,default:!0},limit:{type:Number,default:25}},GA={...ye,pickEvt:e=>!0};var Kf=a.defineComponent({name:"VcSelectionIndicator",props:Qf,emits:GA,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="VcSelectionIndicator",i.cesiumEvents=[];const n=Le(e,t,i);if(n===void 0)return;const{$services:o}=n;let r;const s=$A(i,e,o);return i.createCesiumObject=async()=>{const{viewer:l}=o;return l._element.appendChild(ie(s.rootRef)),ie(s.rootRef)},i.mount=async()=>{const{viewer:l}=o,{ScreenSpaceEventHandler:c,ScreenSpaceEventType:u}=Cesium;return r=new c(l.canvas),r.setInputAction(d=>{s.pickFromScreenPosition(d.position)},u.LEFT_CLICK),l.scene.postRender.addEventListener(s.onPostRender),!0},i.unmount=async()=>{const{viewer:l}=o,c=l._element;return c.contains(ie(s.rootRef))&&c.removeChild(ie(s.rootRef)),l.scene.postRender.removeEventListener(s.onPostRender),r.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),r.destroy(),r=void 0,!0},()=>a.h("div",{ref:s.rootRef,class:"vc-selection-indicator",style:s.rootStyle},a.h("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnIHdpZHRoPSIxNzZweCIgaGVpZ2h0PSIxNzZweCIgdmlld0JveD0iMCAwIDE3NiAxNzYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6c2tldGNoPSJodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2gvbnMiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4xLjEgKDg3NjEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5Mb2NhdGlvblRhcmdldCArIFBhdGg8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxkZWZzPg0KICAgICAgICA8ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4NCiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+DQogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIyIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+DQogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC41MjY0NDY0NDUgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHR5cGU9Im1hdHJpeCIgcmVzdWx0PSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4NCiAgICAgICAgICAgIDxmZU1lcmdlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iU291cmNlR3JhcGhpYyI+PC9mZU1lcmdlTm9kZT4NCiAgICAgICAgICAgIDwvZmVNZXJnZT4NCiAgICAgICAgPC9maWx0ZXI+DQogICAgICAgIDxmaWx0ZXIgeD0iLTUwJSIgeT0iLTUwJSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPg0KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4NCiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4NCiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjUyNjQ0NjQ0NSAwIiBpbj0ic2hhZG93Qmx1ck91dGVyMSIgdHlwZT0ibWF0cml4IiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZUNvbG9yTWF0cml4Pg0KICAgICAgICAgICAgPGZlTWVyZ2U+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVNZXJnZU5vZGU+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgPC9mZU1lcmdlPg0KICAgICAgICA8L2ZpbHRlcj4NCiAgICA8L2RlZnM+DQogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBcnRib2FyZC0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNjkxLjAwMDAwMCwgLTQ5OC4wMDAwMDApIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZT0iI0ZGRkZGRiI+DQogICAgICAgICAgICA8ZyBpZD0iTG9jYXRpb25UYXJnZXQtKy1QYXRoIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2OTkuMDAwMDAwLCA1MDYuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPHBhdGggZD0iTTgwLDE0NCBDMTE1LjM0NjIyNCwxNDQgMTQ0LDExNS4zNDYyMjQgMTQ0LDgwIEMxNDQsNDQuNjUzNzc2IDExNS4zNDYyMjQsMTYgODAsMTYgQzQ0LjY1Mzc3NiwxNiAxNiw0NC42NTM3NzYgMTYsODAgQzE2LDExNS4zNDYyMjQgNDQuNjUzNzc2LDE0NCA4MCwxNDQgWiBNMTYwLDgwIEwxNDQsODAgTTE2LDgwIEwwLDgwIE03OS42LC0wLjQgTDc5LjYsMTUuNiBNNzguOCwxNDQgTDc4LjgsMTYwIiBpZD0iTG9jYXRpb25UYXJnZXQiIHN0cm9rZS13aWR0aD0iNyIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0xKSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgIDxjaXJjbGUgaWQ9IlBhdGgiIHN0cm9rZS13aWR0aD0iMiIgb3BhY2l0eT0iMC4yNTIyMTU0ODUiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIGN4PSI4MCIgY3k9IjgwIiByPSI2Ij48L2NpcmNsZT4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg==",width:e.width,height:e.height}))}});[hc,gc,vc,yc,Ic,Dc,$f,Bc,jc,Zf,Yf,Kf].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const Jf=hc,ep=gc,tp=vc,ip=yc,np=Ic,op=Dc,rp=$f,ap=Bc,sp=jc,lp=Zf,cp=Yf,up=Kf;class dp{constructor(){this.states=new Cesium.ManagedArray,this.count=0}hidePrimitiveCollection(t){const{PrimitiveCollection:i,Cesium3DTileset:n,Model:o}=Cesium,r=t.length;for(let s=0;s<r;s++){const l=t.get(s);l instanceof i?this.hidePrimitiveCollection(l):(this.states.push(l.show),l instanceof n||l instanceof o||(l.show=!1))}}restorePrimitiveCollection(t){const{PrimitiveCollection:i}=Cesium,n=t.length;for(let o=0;o<n;o++){const r=t.get(o);r instanceof i?this.restorePrimitiveCollection(r):r.show=this.states.get(this.count++)}}hide(t){this.states.length=0,this.hidePrimitiveCollection(t.primitives),this.hidePrimitiveCollection(t.groundPrimitives)}restore(t){this.count=0,this.restorePrimitiveCollection(t.primitives),this.restorePrimitiveCollection(t.groundPrimitives)}}var be={BeforeDraw:0,Drawing:1,AfterDraw:2};const _t=Object.freeze({METERS:"METERS",CENTIMETERS:"CENTIMETERS",KILOMETERS:"KILOMETERS",FEET:"FEET",US_SURVEY_FEET:"US_SURVEY_FEET",INCHES:"INCHES",YARDS:"YARDS",MILES:"MILES"}),dt=Object.freeze({SQUARE_METERS:"SQUARE_METERS",SQUARE_CENTIMETERS:"SQUARE_CENTIMETERS",SQUARE_KILOMETERS:"SQUARE_KILOMETERS",SQUARE_FEET:"SQUARE_FEET",SQUARE_INCHES:"SQUARE_INCHES",SQUARE_YARDS:"SQUARE_YARDS",SQUARE_MILES:"SQUARE_MILES",ACRES:"ACRES",HECTARES:"HECTARES"}),Lt=Object.freeze({CUBIC_METERS:"CUBIC_METERS",CUBIC_CENTIMETERS:"CUBIC_CENTIMETERS",CUBIC_KILOMETERS:"CUBIC_KILOMETERS",CUBIC_FEET:"CUBIC_FEET",CUBIC_INCHES:"CUBIC_INCHES",CUBIC_YARDS:"CUBIC_YARDS",CUBIC_MILES:"CUBIC_MILES"}),mt=Object.freeze({DEGREES:"DEGREES",RADIANS:"RADIANS",DEGREES_MINUTES_SECONDS:"DEGREES_MINUTES_SECONDS",GRADE:"GRADE",RATIO:"RATIO"}),ti=class{constructor(e){e=Un(e,{}),this.distanceUnits=Un(e.distanceUnits,_t.METERS),this.areaUnits=Un(e.areaUnits,dt.SQUARE_METERS),this.volumeUnits=Un(e.volumeUnits,Lt.CUBIC_METERS),this.angleUnits=Un(e.angleUnits,mt.DEGREES),this.slopeUnits=Un(e.slopeUnits,mt.DEGREES)}static distanceToString(e,t,i,n){return e=ti.convertDistance(e,_t.METERS,t),po(e,i,n)+ti.getDistanceUnitSpacing(t)+ti.getDistanceUnitSymbol(t)}static areaToString(e,t,i,n){return e=ti.convertArea(e,dt.SQUARE_METERS,t),po(e,i,n)+ti.getAreaUnitSpacing(t)+ti.getAreaUnitSymbol(t)}static angleToString(e,t,i,n){const{Math:o}=Cesium;if(t===mt.DEGREES||t===mt.RADIANS||t===mt.GRADE)return e=pp(e,t),po(e,i,n)+ti.getAngleUnitSpacing(t)+ti.getAngleUnitSymbol(t);if(t===mt.DEGREES_MINUTES_SECONDS){const r=o.toDegrees(e),s=r<0?"-":"",l=Math.floor(r),c=60*(r-l),u=Math.floor(c);return s+l+"\xB0 "+u+"' "+po(60*(c-u),void 0,n)+'"'}t===mt.RATIO}static volumeToString(e,t,i,n){return e=ti.convertArea(e,Lt.CUBIC_METERS,t),po(e,i,n)+ti.getVolumeUnitSpacing(t)+ti.getVolumeUnitSymbol(t)}static getDistanceUnitSpacing(e){return" "}static getAreaUnitSpacing(e){return" "}static getAngleUnitSpacing(e){return e===mt.RADIANS?" ":""}static getVolumeUnitSpacing(e){return" "}static getDistanceUnitSymbol(e){switch(e){case _t.METERS:return"m";case _t.CENTIMETERS:return"cm";case _t.KILOMETERS:return"km";case _t.FEET:case _t.US_SURVEY_FEET:return"ft";case _t.INCHES:return"in";case _t.YARDS:return"yd";case _t.MILES:return"mi";default:return}}static getAreaUnitSymbol(e){switch(e){case dt.SQUARE_METERS:return"m\xB2";case dt.SQUARE_CENTIMETERS:return"cm\xB2";case dt.SQUARE_KILOMETERS:return"km\xB2";case dt.SQUARE_FEET:return"sq ft";case dt.SQUARE_INCHES:return"sq in";case dt.SQUARE_YARDS:return"sq yd";case dt.SQUARE_MILES:return"sq mi";case dt.ACRES:return"ac";case dt.HECTARES:return"ha";default:return}}static getVolumeUnitSymbol(e){switch(e){case Lt.CUBIC_METERS:return"m\xB3";case Lt.CUBIC_CENTIMETERS:return"cm\xB3";case Lt.CUBIC_KILOMETERS:return"km\xB3";case Lt.CUBIC_FEET:return"cu ft";case Lt.CUBIC_INCHES:return"cu in";case Lt.CUBIC_YARDS:return"cu yd";case Lt.CUBIC_MILES:return"cu mi";default:return}}static getAngleUnitSymbol(e){return e===mt.DEGREES?"\xB0":e===mt.RADIANS?"rad":e===mt.GRADE?"%":void 0}static convertDistance(e,t,i){return t===i?e:e*mp(t)*(1/mp(i))}static convertArea(e,t,i){return t===i?e:e*hp(t)*(1/hp(i))}static convertVolume(e,t,i){return t===i?e:e*fp(t)*(1/fp(i))}static convertAngle(e,t,i){return t===i?e:pp(UA(e,t),i)}static longitudeToString(e,t,i,n){return ti.angleToString(Math.abs(e),t,i,n)+" "+(e<0?"W":"E")}static latitudeToString(e,t,i,n){return ti.angleToString(Math.abs(e),t,i,n)+" "+(e<0?"S":"N")}};let nt=ti;nt.numberToString=function(e,t,i){return po(e,t,i)};function mp(e){switch(e){case _t.METERS:return 1;case _t.CENTIMETERS:return .01;case _t.KILOMETERS:return 1e3;case _t.FEET:return .3048;case _t.US_SURVEY_FEET:return 1200/3937;case _t.INCHES:return .254;case _t.YARDS:return .9144;case _t.MILES:return 1609.344;default:return 1}}function hp(e){switch(e){case dt.SQUARE_METERS:return 1;case dt.SQUARE_CENTIMETERS:return 1e-4;case dt.SQUARE_KILOMETERS:return 1e6;case dt.SQUARE_FEET:return .09290304;case dt.SQUARE_INCHES:return 64516e-8;case dt.SQUARE_YARDS:return .83612736;case dt.SQUARE_MILES:return 2589988110336e-6;case dt.ACRES:return 4046.85642232;case dt.HECTARES:return 1e4;default:return 1}}function fp(e){switch(e){case Lt.CUBIC_METERS:return 1;case Lt.CUBIC_CENTIMETERS:return 1e-6;case Lt.CUBIC_KILOMETERS:return 1e9;case Lt.CUBIC_FEET:return .09290304*.3048;case Lt.CUBIC_INCHES:return 16387064e-12;case Lt.CUBIC_YARDS:return .764554857984;case Lt.CUBIC_MILES:return 416818182544058e-5;default:return 1}}function UA(e,t){const{defined:i,Math:n,RuntimeError:o}=Cesium;if(t===mt.RADIANS)return e;if(t===mt.DEGREES)return n.toRadians(e);if(t===mt.GRADE)return e===Number.POSITIVE_INFINITY?n.PI_OVER_TWO:Math.atan(e/100);if(t===mt.RATIO)return Math.atan(e);if(t===mt.DEGREES_MINUTES_SECONDS){const s=/(-?)(\d+)\s*\s*(\d+)\s*'\s*([\d.,]+)"\s*([WENS]?)/i.exec(e)||[];if(!i(s))throw new o("Could not convert angle to radians: "+e);let l=0<s[1].length?-1:1;const c=parseInt(s[2]),u=parseInt(s[3]),d=parseFloat(s[4]);let m=s[5];m.length===1&&((m=m.toUpperCase())!=="W"&&m!=="S"||(l*=-1));const h=l*(c+u/60+d/3600);return n.toRadians(h)}}function pp(e,t){const{Math:i}=Cesium;if(t===mt.RADIANS)return e;if(t===mt.DEGREES)return i.toDegrees(e);if(t===mt.GRADE)return i.clamp(e,0,i.PI_OVER_TWO)===i.PI_OVER_TWO?Number.POSITIVE_INFINITY:100*Math.tan(e);if(t===mt.RATIO)return Math.sin(e)/Math.cos(e)}function po(e,t,i){const n=HA(i,e,t),o=e.toLocaleString(t,n),r=-0,s=0;return o===r.toLocaleString(t,n)?s.toLocaleString(t,n):o}function HA(e,t,i){let n={minimumFractionDigits:0,maximumFractionDigits:0};return e=Cesium.defaultValue(e,2),typeof e=="number"?(n.minimumFractionDigits=e,n.maximumFractionDigits=e):n=typeof e=="function"?e(t,i):e,n}class Fc{constructor(t){const{defined:i,defaultValue:n,Color:o,createGuid:r,BoundingSphere:s,Ellipsoid:l,ClassificationType:c}=Cesium;t=n(t,{}),this.show=n(t.show,!0),this._id=i(t.id)?t.id:r(),this._ellipsoid=n(t.ellipsoid,l.WGS84),this._appearance=n(t.appearance,new Cesium.MaterialAppearance),this._depthFailAppearance=t.depthFailAppearance,this._positions=n(t.positions,[]),this._polygonHierarchy=t.polygonHierarchy,this._clampToGround=n(t.clampToGround,!1),this._classificationType=n(t.classificationType,c.BOTH),this._allowPicking=n(t.allowPicking,!0),this._asynchronous=n(t.asynchronous,!1),this._boundingSphere=new s,this._primitive=void 0,this._update=!0}get positions(){return this._positions}set positions(t){this._positions=t,this._update=!0}get polygonHierarchy(){return this._polygonHierarchy}set polygonHierarchy(t){this._polygonHierarchy=t,this._update=!0}get appearance(){return this._appearance}set appearance(t){this._appearance=t,this._primitive!==void 0&&(this._primitive.appearance=t)}get depthFailAppearance(){return this._depthFailAppearance}set depthFailAppearance(t){this._depthFailAppearance=t,this._primitive!==void 0&&this._primitive instanceof Cesium.Primitive&&(this._primitive.depthFailAppearance=t)}get id(){return this._id}set id(t){this._id=t}get boundingVolume(){return this._boundingSphere}get ellipsoid(){return this._ellipsoid}get clampToGround(){return this._clampToGround}set clampToGround(t){this._clampToGround=t}get classificationType(){return this._classificationType}set classificationType(t){this._classificationType=t,this._update=!0}get allowPicking(){return this._allowPicking}set allowPicking(t){this._allowPicking=t}get asynchronous(){return this._asynchronous}set asynchronous(t){this._asynchronous=t}async update(t){if(this.show){const i=this._polygonHierarchy?this._polygonHierarchy.positions:this._positions;if(i.length<3)this._primitive&&this._primitive.destroy(),this._primitive=void 0;else{if(this._update){this._update=!1;let n;this._clampToGround?n=this._createGroundPolygon():n=this._createPolygon(),n.then(o=>{this._primitive&&this._primitive.destroy(),this._primitive=void 0,this._primitive=o,this._primitive._vcParent=this,this._boundingSphere=Cesium.BoundingSphere.fromPoints(i,this._boundingSphere)})}this._primitive&&this._primitive.update(t)}}}async _createPolygon(){const{Primitive:t,GeometryInstance:i,CoplanarPolygonGeometry:n,Cartesian3:o}=Cesium;return new t({geometryInstances:new i({geometry:this._polygonHierarchy?new n({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid}):n.fromPositions({positions:this._positions.map(function(r){return o.clone(r)}),ellipsoid:this._ellipsoid}),id:this._id}),appearance:this._appearance,depthFailAppearance:this._depthFailAppearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous})}async _createGroundPolygon(){const{GroundPrimitive:t,GeometryInstance:i,PolygonGeometry:n,Cartesian3:o}=Cesium;return await Cesium.GroundPrimitive.initializeTerrainHeights(),new t({geometryInstances:new i({geometry:this._polygonHierarchy?new n({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid}):n.fromPositions({positions:this._positions.map(function(r){return o.clone(r)}),ellipsoid:this._ellipsoid}),id:this._id}),appearance:this._appearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous,classificationType:this._classificationType})}isDestroyed(){return!1}destroy(){return this._primitive&&this._primitive.destroy(),this._primitive=void 0,Cesium.destroyObject(this)}}class Ba{constructor(t){const{SampledPositionProperty:i,Entity:n,ExtrapolationType:o,VelocityOrientationProperty:r}=Cesium;this._lastTime=void 0,this._sampledPosition=new i,this._sampledPosition.forwardExtrapolationType=t.forwardExtrapolationType||o.HOLD,this._sampledPosition.backwardExtrapolationType=t.backwardExtrapolationType||o.HOLD,this._cache=[],this._maxCacheSize=t.maxCacheSize||10;const s=new n(t);s.position=this._sampledPosition,s.orientation=new r(this._sampledPosition),this._entity=s,this._velocityVectorProperty=new Cesium.VelocityVectorProperty(this._sampledPosition,!1)}get id(){return this._entity.id}set id(t){this._entity.id=t}set maxCacheSize(t){this._maxCacheSize=t}get maxCacheSize(){return this._maxCacheSize}get position(){return this._sampledPosition.getValue(Cesium.JulianDate.now())}_removePosition(){if(this._cache.length>this._maxCacheSize){const t=Cesium.JulianDate.addSeconds(this._cache[0],-.2,new Cesium.JulianDate),i=Cesium.JulianDate.addSeconds(this._cache[this._cache.length-this._maxCacheSize],-.2,new Cesium.JulianDate);this._sampledPosition.removeSamples(new Cesium.TimeInterval({start:t,stop:i})),this._cache.splice(0,this._cache.length-this._maxCacheSize)}}addPosition(t,i){this._removePosition();let n;if(typeof i=="number"){const o=Cesium.JulianDate.now();n=Cesium.JulianDate.addSeconds(o,i,new Cesium.JulianDate),Cesium.destroyObject(o)}else n=on(i);return this._sampledPosition.addSample(n,Ze(t)),this._lastTime=n,this._cache.push(this._lastTime),n}}const st={externalLabel:!1,label:"",labelPosition:"right",hideLabel:!1,tabindex:void 0,disable:!1,outline:!1,push:!1,flat:!1,unelevated:!1,color:"primary",textColor:void 0,glossy:!1,labelClass:void 0,labelStyle:void 0,square:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},Vn={show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,0,0,127]}}}}}},pn={show:!0,color:"rgb(255,229,0)",pixelSize:8,outlineColor:"black",outlineWidth:1,disableDepthTestDistance:Number.POSITIVE_INFINITY},WA={show:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY,verticalOrigin:1,image:""},go={width:2,arcType:0,ellipsoid:void 0},qA={show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:[255,165,0,125]}}},faceForward:!0,renderState:{cull:{enabled:!1},depthTest:{enabled:!1}}}}},Zt={show:!0,font:"16px Arial Microsoft YaHei sans-serif",scale:1,fillColor:"white",showBackground:!0,backgroundColor:{x:.165,y:.165,z:.165,w:.8},backgroundPadding:[7,5],horizontalOrigin:0,verticalOrigin:1,pixelOffset:[0,-9],disableDepthTestDistance:Number.POSITIVE_INFINITY},vt={icon:"vc-icons-move",size:"24px",color:"#1296db",background:"#fff",round:!0,flat:!1,label:void 0,stack:!1,dense:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20]}},ja={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:pn,editorOpts:{delay:1e3,hideDelay:1e3,pixelOffset:[16,-8],move:Object.assign({},vt),remove:Object.assign({},vt,{icon:"vc-icons-remove"})},heightReference:1,disableDepthTest:!1},Vc={show:!0,showComponentLines:!1,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:pn,polylineOpts:go,primitiveOpts:Vn,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},vt),removeAll:Object.assign({},vt,{icon:"vc-icons-delete"})},disableDepthTest:!1},gp={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:pn,polylineOpts:go,primitiveOpts:Vn,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},vt),insert:Object.assign({},vt,{icon:"vc-icons-insert"}),remove:Object.assign({},vt,{icon:"vc-icons-remove"}),removeAll:Object.assign({},vt,{icon:"vc-icons-delete"})},loop:!1,disableDepthTest:!1},Fa={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:pn,polylineOpts:go,primitiveOpts:Object.assign({},Vn,{depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}}}),polygonOpts:qA,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},vt),insert:Object.assign({},vt,{icon:"vc-icons-insert"}),remove:Object.assign({},vt,{icon:"vc-icons-remove"}),removeAll:Object.assign({},vt,{icon:"vc-icons-delete"})},loop:!0,disableDepthTest:!1},Nc=Object.assign({},Fa,{pointOpts:Object.assign({},pn,{show:!1}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},vt),removeAll:Object.assign({},vt,{icon:"vc-icons-delete"})},edge:4,regular:!0,disableDepthTest:!1}),ZA=Object.assign({},Nc,{edge:360}),XA=Object.assign({},Nc,{edge:6}),YA=Object.assign({},st,{icon:"vc-icons-clear",color:"red"}),vp=Object.assign({},st,{icon:"vc-icons-drawing-regular"}),yp=Object.assign({},st,{icon:"vc-icons-drawing-circle"}),Bt={...et,show:Boolean,editable:Boolean,drawtip:Object,pointOpts:Object,editorOpts:Object,mode:Number,preRenderDatas:Array,disableDepthTest:Boolean},kc={...Se,position:{type:String,default:"bottom-left",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},mode:{type:Number,default:1},activeColor:{type:String,default:"positive"},editable:{type:Boolean},clampToGround:{type:Boolean},clearActionOpts:{type:Object,default:()=>YA}},QA=Object.assign({},st,{icon:"vc-icons-measure-distance"}),Cp=Object.assign({},Vc,{labelOpts:Object.assign({},Zt,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new nt,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),KA=Object.assign({},st,{icon:"vc-icons-measure-component-distance"}),JA=Object.assign({},Cp,{showComponentLines:!0,xLabelOpts:Zt,xAngleLabelOpts:Object.assign({},Zt,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[9,0]}),yLabelOpts:Object.assign({},Zt,{horizontalOrigin:-1,pixelOffset:[-9,0]}),yAngleLabelOpts:Object.assign({},Zt,{verticalOrigin:-1,pixelOffset:[0,9]})}),e6=Object.assign({},st,{icon:"vc-icons-measure-polyline-distance"}),bp=Object.assign({},gp,{measureUnits:new nt,labelOpts:Zt,labelsOpts:Object.assign({},Zt,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),decimals:{distance:2,angle:2},showAngleLabel:!0,showDistanceLabel:!0,locale:void 0,loop:!1,autoUpdateLabelPosition:!0}),t6=Object.assign({},st,{icon:"vc-icons-measure-horizontal-distance"}),i6=Object.assign({},bp,{dashLineOpts:{width:2},dashLinePrimitiveOpts:Object.assign({},Vn,{appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}}}),labelOpts:Object.assign({},Zt,{horizontalOrigin:1,verticalOrigin:1,pixelOffset:[10,-10]}),labelsOpts:Object.assign({},Zt,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDashedLine:!0}),n6=Object.assign({},st,{icon:"vc-icons-measure-vertical-distance"}),o6=Object.assign({},Vc,{labelOpts:Object.assign({},Zt,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new nt,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),r6=Object.assign({},st,{icon:"vc-icons-measure-height-from-terrain"}),a6=Object.assign({},ja,{polylineOpts:go,labelOpts:Object.assign({},Zt,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},vt),removeAll:Object.assign({},vt,{icon:"vc-icons-delete"})},measureUnits:new nt,decimals:{distance:2},locale:void 0,primitiveOpts:Vn}),s6=Object.assign({},st,{icon:"vc-icons-measure-area"}),wp=Object.assign({},Fa,{labelOpts:Zt,labelsOpts:Object.assign({},Zt,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDistanceLabel:!0,showAngleLabel:!0,measureUnits:new nt,decimals:{area:2,distance:2,angle:2},loop:!0,locale:void 0,autoUpdateLabelPosition:!0}),l6=Object.assign({},st,{icon:"vc-icons-measure-point-coordinates"}),c6=Object.assign({},ja,{heightReference:1,measureUnits:new nt,drawtip:{show:!0,pixelOffset:[32,48]},labelOpts:Object.assign({},Zt,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[10,0]}),decimals:{lng:6,lat:6,height:2,slope:3},locale:void 0}),u6=Object.assign({},st,{icon:"vc-icons-drawing-rectangle"}),zc=Object.assign({},wp,{pointOpts:Object.assign({},pn,{show:!1}),drawtip:{show:!0,pixelOffset:[32,32]},editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},vt),removeAll:Object.assign({},vt,{icon:"vc-icons-delete"})},edge:4,loop:!1,showAngleLabel:!1}),d6=Object.assign({},zc,{edge:6,loop:!0}),m6=Object.assign({},zc,{edge:360,loop:!0,showDistanceLabel:!1,showAngleLabel:!1}),h6=Object.assign({},st,{direction:"right",icon:"vc-icons-measurement-button",activeIcon:"vc-icons-measurement-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),_p=["distance","component-distance","polyline","horizontal","vertical","height","area","point","rectangle","regular","circle"],$c={...kc,measurements:{type:Array,default:()=>_p,validator:e=>{let t=!0;return e.forEach(i=>{_p.includes(i)||(console.error(`VueCesium: unknown measurement type: ${i}`),t=!1)}),t}},mainFabOpts:{type:Object,default:()=>h6},distanceActionOpts:{type:Object,default:()=>QA},distanceMeasurementOpts:{type:Object,default:()=>Cp},componentDistanceActionOpts:{type:Object,default:()=>KA},componentDistanceMeasurementOpts:{type:Object,default:()=>JA},polylineActionOpts:{type:Object,default:()=>e6},polylineMeasurementOpts:{type:Object,default:()=>bp},horizontalActionOpts:{type:Object,default:()=>t6},horizontalMeasurementOpts:{type:Object,default:()=>i6},verticalActionOpts:{type:Object,default:()=>n6},verticalMeasurementOpts:{type:Object,default:()=>o6},heightActionOpts:{type:Object,default:()=>r6},heightMeasurementOpts:{type:Object,default:()=>a6},areaActionOpts:{type:Object,default:()=>s6},areaMeasurementOpts:{type:Object,default:()=>wp},pointActionOpts:{type:Object,default:()=>l6},pointMeasurementOpts:{type:Object,default:()=>c6},rectangleActionOpts:{type:Object,default:()=>u6},rectangleMeasurementOpts:{type:Object,default:()=>zc},regularActionOpts:{type:Object,default:()=>vp},regularMeasurementOpts:{type:Object,default:()=>d6},circleActionOpts:{type:Object,default:()=>yp},circleMeasurementOpts:{type:Object,default:()=>m6}},ot=ci($c),Pp={...On,...Hn,...Se,autoHidden:{type:Boolean,default:!0},customClass:String,teleport:Object},f6={...ye,mouseenter:e=>!0,mouseleave:e=>!0,click:e=>!0};var Op=a.defineComponent({name:"VcOverlayHtml",props:Pp,emits:f6,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="VcOverlayHtml",i.cesiumEvents=[];const n=Le(e,t,i);if(n===void 0)return;const{$services:o}=n,r=a.ref(!1),s=a.ref(null),l=a.reactive({}),c=a.ref(null),u=a.ref(null),d=a.ref(null);let m=[];m.push(a.watch(()=>e.position,_=>{u.value=Ze(_,o.viewer.scene.globe.ellipsoid)})),m.push(a.watch(()=>e.pixelOffset,_=>{c.value=lt(_)})),i.createCesiumObject=async()=>ie(s),i.mount=async()=>{const{viewer:_}=o;return r.value=!0,w(),c.value=lt(e.pixelOffset),u.value=Ze(e.position,_.scene.globe.ellipsoid),_.scene.preRender.addEventListener(h),!0},i.unmount=async()=>{const{viewer:_}=o;return _.scene.preRender.removeEventListener(h),r.value=!1,C(),!0};const h=()=>{const{viewer:_}=o;if(u.value){const E=_.scene.cartesianToCanvasCoordinates(u.value,{});if(Cesium.defined(E)&&!Cesium.Cartesian2.equals(d.value,E))if(l.left=E.x+c.value.x+"px",l.top=E.y+c.value.y+"px",e.autoHidden){const S=_.camera.position,x=_.scene.globe.ellipsoid.cartesianToCartographic(S);if(Cesium.defined(x)){let T=x.height;T+=1*_.scene.globe.ellipsoid.maximumRadius,Cesium.Cartesian3.distance(S,u.value)>T||!e.show?l.display="none":l.display="block"}}else l.display="block";d.value=E}};a.onUnmounted(()=>{m.forEach(_=>_()),m=[]});const f=()=>r.value?a.h("div",{ref:s,class:`vc-html-container${e.customClass?" "+e.customClass:""}`,style:l,onMouseenter:y,onMouseleave:g,onClick:p},Xe(t.slots.default)):a.createCommentVNode("v-if"),p=_=>{t.emit("click",_)},y=_=>{t.emit("mouseenter",_)},g=_=>{t.emit("mouseleave",_)},v=()=>f(),{showPortal:w,hidePortal:C,renderPortal:P}=ih(i,s,v);return e.teleport&&e.teleport.to&&!e.teleport.disabled?P:()=>f()}}),Ep={exports:{}};(function(e){(function(t,i,n){e.exports?e.exports=n():i[t]=n()})("h337",$h,function(){var t={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},i=function(){var u=function(h){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=h.xField||h.defaultXField,this._yField=h.yField||h.defaultYField,this._valueField=h.valueField||h.defaultValueField,h.radius&&(this._cfgRadius=h.radius)},d=t.defaultRadius;return u.prototype={_organiseData:function(m,h){var f=m[this._xField],p=m[this._yField],y=this._radi,g=this._data,v=this._max,w=this._min,C=m[this._valueField]||1,P=m.radius||this._cfgRadius||d;g[f]||(g[f]=[],y[f]=[]),g[f][p]?g[f][p]+=C:(g[f][p]=C,y[f][p]=P);var _=g[f][p];return _>v?(h?this.setDataMax(_):this._max=_,!1):_<w?(h?this.setDataMin(_):this._min=_,!1):{x:f,y:p,value:C,radius:P,min:w,max:v}},_unOrganizeData:function(){var m=[],h=this._data,f=this._radi;for(var p in h)for(var y in h[p])m.push({x:p,y,radius:f[p][y],value:h[p][y]});return{min:this._min,max:this._max,data:m}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var m=arguments[0],h=m.length;h--;)this.addData.call(this,m[h]);else{var f=this._organiseData(arguments[0],!0);f&&(this._data.length===0&&(this._min=this._max=f.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[f]}))}return this},setData:function(m){var h=m.data,f=h.length;this._data=[],this._radi=[];for(var p=0;p<f;p++)this._organiseData(h[p],!1);return this._max=m.max,this._min=m.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(m){return this._max=m,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(m){return this._min=m,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(m){this._coordinator=m},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},u}(),n=function(){var u=function(f){var p=f.gradient||f.defaultGradient,y=document.createElement("canvas"),g=y.getContext("2d");y.width=256,y.height=1;var v=g.createLinearGradient(0,0,256,1);for(var w in p)v.addColorStop(w,p[w]);return g.fillStyle=v,g.fillRect(0,0,256,1),g.getImageData(0,0,256,1).data},d=function(f,p){var y=document.createElement("canvas"),g=y.getContext("2d"),v=f,w=f;if(y.width=y.height=f*2,p==1)g.beginPath(),g.arc(v,w,f,0,2*Math.PI,!1),g.fillStyle="rgba(0,0,0,1)",g.fill();else{var C=g.createRadialGradient(v,w,f*p,v,w,f);C.addColorStop(0,"rgba(0,0,0,1)"),C.addColorStop(1,"rgba(0,0,0,0)"),g.fillStyle=C,g.fillRect(0,0,2*f,2*f)}return y},m=function(w){for(var p=[],y=w.min,g=w.max,v=w.radi,w=w.data,C=Object.keys(w),P=C.length;P--;)for(var _=C[P],E=Object.keys(w[_]),S=E.length;S--;){var x=E[S],T=w[_][x],V=v[_][x];p.push({x:_,y:x,value:T,radius:V})}return{min:y,max:g,data:p}};function h(f){var p=f.container,y=this.shadowCanvas=document.createElement("canvas"),g=this.canvas=f.canvas||document.createElement("canvas");this._renderBoundaries=[1e4,1e4,0,0];var v=getComputedStyle(f.container)||{};g.className="heatmap-canvas",this._width=g.width=y.width=f.width||+v.width.replace(/px/,""),this._height=g.height=y.height=f.height||+v.height.replace(/px/,""),this.shadowCtx=y.getContext("2d"),this.ctx=g.getContext("2d"),g.style.cssText=y.style.cssText="position:absolute;left:0;top:0;",p.style.position="relative",p.appendChild(g),this._palette=u(f),this._templates={},this._setStyles(f)}return h.prototype={renderPartial:function(f){f.data.length>0&&(this._drawAlpha(f),this._colorize())},renderAll:function(f){this._clear(),f.data.length>0&&(this._drawAlpha(m(f)),this._colorize())},_updateGradient:function(f){this._palette=u(f)},updateConfig:function(f){f.gradient&&this._updateGradient(f),this._setStyles(f)},setDimensions:function(f,p){this._width=f,this._height=p,this.canvas.width=this.shadowCanvas.width=f,this.canvas.height=this.shadowCanvas.height=p},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(f){this._blur=f.blur==0?0:f.blur||f.defaultBlur,f.backgroundColor&&(this.canvas.style.backgroundColor=f.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=f.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=f.height||this._height,this._opacity=(f.opacity||0)*255,this._maxOpacity=(f.maxOpacity||f.defaultMaxOpacity)*255,this._minOpacity=(f.minOpacity||f.defaultMinOpacity)*255,this._useGradientOpacity=!!f.useGradientOpacity},_drawAlpha:function(g){for(var p=this._min=g.min,y=this._max=g.max,g=g.data||[],v=g.length,w=1-this._blur;v--;){var C=g[v],P=C.x,_=C.y,E=C.radius,S=Math.min(C.value,y),x=P-E,T=_-E,V=this.shadowCtx,I;this._templates[E]?I=this._templates[E]:this._templates[E]=I=d(E,w);var R=(S-p)/(y-p);V.globalAlpha=R<.01?.01:R,V.drawImage(I,x,T),x<this._renderBoundaries[0]&&(this._renderBoundaries[0]=x),T<this._renderBoundaries[1]&&(this._renderBoundaries[1]=T),x+2*E>this._renderBoundaries[2]&&(this._renderBoundaries[2]=x+2*E),T+2*E>this._renderBoundaries[3]&&(this._renderBoundaries[3]=T+2*E)}},_colorize:function(){var f=this._renderBoundaries[0],p=this._renderBoundaries[1],y=this._renderBoundaries[2]-f,g=this._renderBoundaries[3]-p,v=this._width,w=this._height,C=this._opacity,P=this._maxOpacity,_=this._minOpacity,E=this._useGradientOpacity;f<0&&(f=0),p<0&&(p=0),f+y>v&&(y=v-f),p+g>w&&(g=w-p);for(var S=this.shadowCtx.getImageData(f,p,y,g),x=S.data,T=x.length,V=this._palette,I=3;I<T;I+=4){var R=x[I],L=R*4;if(!!L){var j;C>0?j=C:R<P?R<_?j=_:j=R:j=P,x[I-3]=V[L],x[I-2]=V[L+1],x[I-1]=V[L+2],x[I]=E?V[L+3]:j}}this.ctx.putImageData(S,f,p),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(f){var p,y=this.shadowCtx,g=y.getImageData(f.x,f.y,1,1),v=g.data[3],w=this._max,C=this._min;return p=Math.abs(w-C)*(v/255)>>0,p},getDataURL:function(){return this.canvas.toDataURL()}},h}(),o=function(){var u=!1;return t.defaultRenderer==="canvas2d"&&(u=n),u}(),r={merge:function(){for(var c={},u=arguments.length,d=0;d<u;d++){var m=arguments[d];for(var h in m)c[h]=m[h]}return c}},s=function(){var u=function(){function f(){this.cStore={}}return f.prototype={on:function(p,y,g){var v=this.cStore;v[p]||(v[p]=[]),v[p].push(function(w){return y.call(g,w)})},emit:function(p,y){var g=this.cStore;if(g[p])for(var v=g[p].length,w=0;w<v;w++){var C=g[p][w];C(y)}}},f}(),d=function(h){var f=h._renderer,p=h._coordinator,y=h._store;p.on("renderpartial",f.renderPartial,f),p.on("renderall",f.renderAll,f),p.on("extremachange",function(g){h._config.onExtremaChange&&h._config.onExtremaChange({min:g.min,max:g.max,gradient:h._config.gradient||h._config.defaultGradient})}),y.setCoordinator(p)};function m(){var h=this._config=r.merge(t,arguments[0]||{});if(this._coordinator=new u,h.plugin){var f=h.plugin;if(t.plugins[f]){var p=t.plugins[f];this._renderer=new p.renderer(h),this._store=new p.store(h)}else throw new Error("Plugin '"+f+"' not found. Maybe it was not registered.")}else this._renderer=new o(h),this._store=new i(h);d(this)}return m.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(h){return this._config=r.merge(this._config,h),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(h){return this._store.getValueAt?this._store.getValueAt(h):this._renderer.getValueAt?this._renderer.getValueAt(h):null}},m}(),l={create:function(c){return new s(c)},register:function(c,u){t.plugins[c]=u}};return l})})(Ep);var p6=Ep.exports;const Mp={id:String,name:String,availability:Object,...Se,description:[String,Object],...On,orientation:Object,...rm,parent:Object,billboard:Object,box:Object,corridor:Object,cylinder:Object,ellipse:Object,ellipsoid:Object,label:Object,model:Object,tileset:Object,path:Object,plane:Object,point:Object,polygon:Object,polyline:Object,properties:Object,polylineVolume:Object,rectangle:Object,wall:Object,...et},g6={...ye,...Xo,definitionChanged:e=>!0,"update:billboard":e=>!0,"update:box":e=>!0,"update:corridor":e=>!0,"update:cylinder":e=>!0,"update:ellipse":e=>!0,"update:ellipsoid":e=>!0,"update:label":e=>!0,"update:model":e=>!0,"update:path":e=>!0,"update:plane":e=>!0,"update:point":e=>!0,"update:polygon":e=>!0,"update:polyline":e=>!0,"update:polylineVolume":e=>!0,"update:rectangle":e=>!0,"update:tileset":e=>!0,"update:wall":e=>!0};var Va=a.defineComponent({name:"VcEntity",props:Mp,emits:g6,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="Entity",i.cesiumEvents=["definitionChanged"];const n=Le(e,t,i);if(n===void 0)return;const{$services:o}=n,{emit:r}=t;i.mount=async()=>{var l;const c=(l=o==null?void 0:o.entities)==null?void 0:l.add(i.cesiumObject);return o==null?void 0:o.entities.contains(c)},i.unmount=async()=>{var l;return(l=o==null?void 0:o.entities)==null?void 0:l.remove(i.cesiumObject)};const s=(l,c)=>(Ee(i,c)?r(c,l):i.cesiumObject&&(i.cesiumObject[c.substring(7)]=l),l&&(l._vcParent=i.cesiumObject),!0);return Object.assign(i.proxy,{__updateGraphics:s}),()=>{var l,c;return t.slots.default?a.h("i",{class:ne(((l=i.proxy)==null?void 0:l.$options.name)||""),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(((c=i.proxy)==null?void 0:c.$options.name)||""))}}});Va.install=e=>{e.component(Va.name,Va)};const Sp=Va;var xp=Sp;const v6=Sp;var y6={imageryProvider:Object,...Ot,alpha:{type:[Number,Function],default:1},nightAlpha:{type:[Number,Function],default:1},dayAlpha:{type:[Number,Function],default:1},brightness:{type:[Number,Function],default:1},contrast:{type:[Number,Function],default:1},hue:{type:[Number,Function],default:0},saturation:{type:[Number,Function],default:1},gamma:{type:[Number,Function],default:1},splitDirection:{type:[Number,Function],default:0},minificationFilter:Number,magnificationFilter:Number,...Se,maximumAnisotropy:Number,minimumTerrainLevel:Number,maximumTerrainLevel:Number,...pm,...gm,colorToAlphaThreshold:{type:Number,default:.004},sortOrder:Number};const C6={...ye,"update:imageryProvider":e=>!0},Tp=y6;var Na=a.defineComponent({name:"VcLayerImagery",props:Tp,emits:C6,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="ImageryLayer",i.cesiumEvents=[];const n=Le(e,t,i);if(n===void 0)return;const{$services:o}=n,{emit:r}=t;i.createCesiumObject=async()=>{const l=n.transformProps(e),c=e.imageryProvider||{};return new Cesium.ImageryLayer(c,l)},i.mount=async()=>{const{viewer:l}=o,c=i.cesiumObject;return c.sortOrder=e.sortOrder,l.imageryLayers.add(c),!l.isDestroyed()&&l.imageryLayers.contains(c)},i.unmount=async()=>{const{viewer:l}=o,c=i.cesiumObject;return!l.isDestroyed()&&l.imageryLayers.remove(c)};const s=l=>{var c;if(ii(l))return(c=i.unmount)==null?void 0:c.call(i);{const u=i.cesiumObject;u._imageryProvider=l,Ee(i,"update:imageryProvider")&&r("update:imageryProvider",l)}return!0};return Object.assign(i.proxy,{__updateProvider:s}),()=>{var l,c;return t.slots.default?a.h("i",{class:ne(((l=i.proxy)==null?void 0:l.$options.name)||""),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(((c=i.proxy)==null?void 0:c.$options.name)||"v-if"))}}});Na.install=e=>{e.component(Na.name,Na)};const Ap=Na;var Ip=Ap;const b6=Ap,Dp={...$o,...Yn,...Se,...ra,...zo,...Go,...ko,...In,...Dn,...wi,...Oi,...oa,...et};var Rp=a.defineComponent({name:"VcPrimitiveClassification",props:Dp,emits:un,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="ClassificationPrimitive",ln(e,t,n);const o=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>t.slots.default?a.h("i",{class:ne(o),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(o))}});const Lp={...$o,...Yn,...Se,...ra,...zo,...Go,...ko,...In,...Dn,...wi,...Oi,...oa,...et};var Bp=a.defineComponent({name:"VcPrimitiveGround",props:Lp,emits:un,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="GroundPrimitive",ln(e,t,n);const o=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>t.slots.default?a.h("i",{class:ne(o),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(o))}});const jp={...$o,...Yn,...Se,...zo,...Go,...ko,...In,...Dn,...wi,...Oi,...oa,...et};var Fp=a.defineComponent({name:"VcPrimitiveGroundPolyline",props:jp,emits:un,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="GroundPolylinePrimitive",ln(e,t,n);const o=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>t.slots.default?a.h("i",{class:ne(o),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(o))}});const Vp={..._i,basePath:String,...Se,...Ti,...Mn,...Ys,...Qs,...an,...In,...Ks,...Dn,...Js,...Ft,...Oi,...Cl,...zt,...aa,...at,...zi,...il,...nl,...el,...tl,...Kr,dequantizeInShader:{type:Boolean,default:!0},...Qr,...ol,...Ol,...El,...Ml,...bt,...Sl,showOutline:{type:Boolean,default:!0},...et};var Np=a.defineComponent({name:"VcPrimitiveModel",props:Vp,emits:un,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="Model";const n=ln(e,t,i);return i.createCesiumObject=async()=>{const o=n==null?void 0:n.transformProps(e);return Cesium.Model.fromGltf(o)},()=>{var o;return a.createCommentVNode(ne(((o=i.proxy)==null?void 0:o.$options.name)||""))}}});const kp={...$o,...Yn,...vl,...Se,...Ti,...ra,...zo,...Go,...ko,...In,cull:{type:Boolean,default:!0},...Dn,...Oi,...Ft,...et};var zp=a.defineComponent({name:"VcPrimitive",props:kp,emits:un,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="Primitive",ln(e,t,n);const o=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>{var r;return t.slots.default?a.h("i",{class:ne(o),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(((r=n.proxy)==null?void 0:r.$options.name)||""))}}});const w6={...un,allTilesLoaded:()=>!0,initialTilesLoaded:()=>!0,loadProgress:(e,t)=>!0,tileFailed:(e,t)=>!0,tileLoad:e=>!0,tileUnload:e=>!0,tileVisible:e=>!0},$p={url:[String,Object],...Se,...Ti,...Ft,...ll,maximumMemoryUsage:{type:Number,default:512},cullWithChildrenBounds:{type:Boolean,default:!0},cullRequestsWhileMoving:{type:Boolean,default:!0},cullRequestsWhileMovingMultiplier:{type:Number,default:60},preloadWhenHidden:{type:Boolean,default:!1},preloadFlightDestinations:{type:Boolean,default:!0},preferLeaves:{type:Boolean,default:!1},dynamicScreenSpaceError:{type:Boolean,default:!1},dynamicScreenSpaceErrorDensity:{type:Number,default:.00278},dynamicScreenSpaceErrorFactor:{type:Number,default:4},dynamicScreenSpaceErrorHeightFalloff:{type:Number,default:.25},progressiveResolutionHeightFraction:{type:Number,default:.3},foveatedScreenSpaceError:{type:Boolean,default:!0},foveatedConeSize:{type:Number,default:.1},foveatedMinimumScreenSpaceErrorRelaxation:{type:Number,default:0},foveatedInterpolationCallback:Function,foveatedTimeDelay:{type:Number,default:.2},skipLevelOfDetail:{type:Boolean,default:!1},baseScreenSpaceError:{type:Number,default:1024},skipScreenSpaceErrorFactor:{type:Number,default:16},skipLevels:{type:Number,default:1},immediatelyLoadDesiredLevelOfDetail:{type:Boolean,default:!1},loadSiblings:{type:Boolean,default:!1},...Kr,...wi,...Ie,pointCloudShading:Object,...Qr,..._m,...Ol,...El,...Ml,...Sl,showOutline:{type:Boolean,default:!0},vectorClassificationOnly:{type:Boolean,default:!1},vectorKeepDecodedPositions:{type:Boolean,default:!1},featureIdIndex:{type:Number,default:0},instanceFeatureIdIndex:{type:Number,default:0},showCreditsOnScreen:{type:Boolean,default:!1},debugHeatmapTilePropertyName:String,debugFreezeFrame:{type:Boolean,default:!1},debugColorizeTiles:{type:Boolean,default:!1},...Cl,...Oi,debugShowContentBoundingVolume:{type:Boolean,default:!1},debugShowViewerRequestVolume:{type:Boolean,default:!1},debugShowGeometricError:{type:Boolean,default:!1},debugShowRenderingStatistics:{type:Boolean,default:!1},debugShowMemoryUsage:{type:Boolean,default:!1},debugShowUrl:{type:Boolean,default:!1},...et,enableModelExperimental:{type:Boolean,default:!1},customShader:{type:Object},properties:{type:Array},fragmentShader:String,replaceFS:Boolean};var Gp=a.defineComponent({name:"VcPrimitiveTileset",props:$p,emits:w6,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="Cesium3DTileset",i.cesiumEvents=["allTilesLoaded","initialTilesLoaded","loadProgress","tileFailed","tileLoad","tileUnload","tileVisible"],ln(e,t,i),i.proxy.creatingPromise.then(o=>{const r=o.cesiumObject;i.removeCallbacks.push(r.tileVisible.addEventListener(n))});const n=o=>{const r=o.content,s=r._model;for(let l=0;l<r.featuresLength;l++){const c=r.getFeature(l);e.properties&&e.properties.length&&e.properties.forEach(u=>{c.hasProperty(u.key)&&c.getProperty(u.key)===u.keyValue&&c.setProperty(u.propertyName,u.propertyValue)})}e.fragmentShader&&s&&s._sourcePrograms&&s._rendererResources&&(Object.keys(s._sourcePrograms).forEach(l=>{const c=s._sourcePrograms[l],u=s._rendererResources.sourceShaders;if(e.replaceFS)u[c.fragmentShader]=e.fragmentShader;else{const d=u[c.fragmentShader];u[c.fragmentShader]=d.replace(`gl_FragColor = vec4(color, 1.0);
}`,`gl_FragColor = vec4(color, 1.0);
             ${e.fragmentShader}
}
            `)}}),s._shouldRegenerateShaders=!0)};return()=>{var o;return a.createCommentVNode(ne(((o=i.proxy)==null?void 0:o.$options.name)||""))}}});const _6={...un,complete:e=>!0},Up={...Se,updateCallback:Function,emitter:Object,...Ti,emitterModelMatrix:Object,emissionRate:{type:Number,default:5},bursts:Array,loop:{type:Boolean,default:!0},scale:{type:Number,default:1},startScale:Number,endScale:Number,...zi,...vm,...ym,...Br,...wm,...Cm,...bm,...jr,speed:{type:Number,default:1},minimumSpeed:Number,maximumSpeed:Number,lifetime:{type:Number,default:Number.MAX_VALUE},particleLife:{type:Number,default:5},minimumParticleLife:Number,maximumParticleLife:Number,mass:{type:Number,default:1},minimumMass:Number,maximumMass:Number,...et};var Hp=a.defineComponent({name:"VcPrimitiveParticle",props:Up,emits:_6,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="ParticleSystem",i.cesiumEvents=["complete"],ln(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});[Rp,Bp,Fp,Np,zp,Gp,Hp].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const Gc=Rp,Uc=Bp,ka=Fp,Wp=Np,Zi=zp,qp=Gp,Zp=Hp,Xp={...Se,...Ot,min:{type:Number,default:0},max:{type:Number,default:100},data:Array,options:Object,type:{type:String,default:"primitive"},segments:{type:Array,default:()=>[]},projection:{type:String,default:"3857"}};var Yp=a.defineComponent({name:"VcOverlayHeatmap",props:Xp,emits:ye,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="VcOverlayHeatmap",n.cesiumEvents=[];const o=Le(e,t,n);if(o===void 0)return;const r=a.ref(null),s=a.ref(null),l={minCanvasSize:700,maxCanvasSize:2e3,radiusFactor:60,spacingFactor:1.5,maxOpacity:.8,minOpacity:.1,blur:.85,gradient:{".3":"blue",".65":"yellow",".8":"orange",".95":"red"},xField:"x",yField:"y",valueField:"value",container:void 0},c=a.ref(null),u=a.ref(null),d=a.ref(null),m=a.ref(null),h=a.ref(null),f=a.ref(!1),p=a.ref(null);(i=Ct(n).proxy.creatingPromise)==null||i.then(()=>{f.value=!0});const g=a.computed(()=>Object.assign({},l,e.options));let v=[];v.push(a.watch(()=>d,_=>{u.value.fabric.uniforms.image=_.value,h.value.options.material.fabric.uniforms.image=_.value},{deep:!0})),v.push(a.watch(()=>e.data,(_,E)=>{if(!n.mounted)return;const S=n.cesiumObject;Array.isArray(_)&&Array.isArray(E)?(P(_,S),d.value=S.getDataURL()):o.reload()},{deep:!0})),v.push(a.watch(()=>[e.max,e.min],_=>{const E=n.cesiumObject;E.setDataMax(_[0]||0),E.setDataMin(_[1]||0),d.value=E.getDataURL()})),v.push(a.watch(()=>[e.type,e.projection,e.rectangle],_=>{o.reload()})),v.push(a.watch(()=>e.options,_=>{const E=n.cesiumObject;E.configure(_),d.value=E.getDataURL()},{deep:!0})),n.createCesiumObject=async()=>{const{WebMercatorProjection:_,GeographicProjection:E}=Cesium;s.value=e.projection==="3857"?new _:new E;const S=w();p.value=C(e.rectangle);const x=document.createElement("div");if(Cesium.defined(S)&&x.setAttribute("id",S),x.setAttribute("style","width: "+p.value.width+"px; height: "+p.value.height+"px; margin: 0px; display: none;"),document.body.appendChild(x),g.value.container=x,e.segments.length){g.value.gradient={};const V=e.max-e.min;for(let I=0;I<e.segments.length;I++)g.value.gradient[`${(e.segments[I][0]-e.min)/V}`]=Ae(e.segments[I][1]).toCssColorString()}const T=p6.create(g.value);return x.children[0].setAttribute("id",S+"-hm"),Array.isArray(e.data)&&(P(e.data,T),u.value={fabric:{type:"Image",uniforms:{image:d.value,transparent:!0}}},h.value={type:"MaterialAppearance",options:{material:{fabric:{type:"Image",uniforms:{image:d.value}}}}}),T},n.unmount=async()=>(document.body.removeChild(n.cesiumObject._config.container),!0);const w=_=>{let E="";const S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let x=0;x<(_||8);x++)E+=S.charAt(Math.floor(Math.random()*S.length));return E},C=_=>{const E=Pn(_),S=s.value.project(new Cesium.Cartographic(E.west,E.south)),x=s.value.project(new Cesium.Cartographic(E.east,E.north)),T={north:x.y,east:x.x,south:S.y,west:S.x};let V=T.east>0&&T.west<0?T.east+Math.abs(T.west):Math.abs(T.east-T.west),I=T.north>0&&T.south<0?T.north+Math.abs(T.south):Math.abs(T.north-T.south),R=1;V>I&&V>g.value.maxCanvasSize?(R=V/g.value.maxCanvasSize,I/R<g.value.minCanvasSize&&(R=I/g.value.minCanvasSize)):I>V&&I>g.value.maxCanvasSize?(R=I/g.value.maxCanvasSize,I/R<g.value.minCanvasSize&&(R=V/g.value.minCanvasSize)):V<I&&V<g.value.minCanvasSize?(R=V/g.value.minCanvasSize,I/R>g.value.maxCanvasSize&&(R=I/g.value.maxCanvasSize)):I<V&&I<g.value.minCanvasSize&&(R=I/g.value.minCanvasSize,V/R>g.value.maxCanvasSize&&(R=V/g.value.maxCanvasSize)),V=V/R,I=I/R,Cesium.defined(g.value.radius)||(g.value.radius=V>I?V/g.value.radiusFactor:I/g.value.radiusFactor);const L=(g.value.radius||1)*g.value.spacingFactor,j=T.west,M=T.south;V=Math.round(V+L*2),I=Math.round(I+L*2),T.west-=L*R,T.east+=L*R,T.south-=L*R,T.north+=L*R;const b=s.value.unproject(new Cesium.Cartesian3(T.west,T.south)),B=s.value.unproject(new Cesium.Cartesian3(T.east,T.north)),A={north:Cesium.Math.toDegrees(B.latitude),east:Cesium.Math.toDegrees(B.longitude),south:Cesium.Math.toDegrees(b.latitude),west:Cesium.Math.toDegrees(b.longitude)};return c.value=A,{height:I,width:V,factor:R,xoffset:j,yoffset:M,spacing:L}},P=(_,E)=>{if(_){const{height:S,xoffset:x,yoffset:T,factor:V,spacing:I}=p.value,R=g.value.xField||"x",L=g.value.yField||"y",j=g.value.valueField||"value",M=[];for(let b=0;b<_.length;b++){const B=_[b];Cesium.defined(B.id)||(B.id=b);const A=s.value.project(Cesium.Cartographic.fromDegrees(B[R],B[L])),Z={x:Math.round((A.x-x)/V+I),y:Math.round((A.y-T)/V+I),value:void 0};Z.y=S-Z.y,(B[j]||B[j]===0)&&(Z[j]=B[j]),!(Z[j]>e.max||Z[j]<e.min)&&M.push(Z)}E.setData({min:e.min,max:e.max,data:M}),d.value=E.getDataURL()}};return a.onUnmounted(()=>{v.forEach(_=>_()),v=[]}),Object.assign(n.proxy,{rootRef:r,childRef:m}),()=>{if(f.value){const _=[];return e.type==="entity"&&d.value?_.push(a.h(xp,{ref:m,show:e.show,rectangle:{coordinates:c.value,material:u.value}})):e.type==="primitive"?_.push(a.h(Uc,{ref:m,show:e.show,appearance:h.value,releaseGeometryInstances:!1,geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.RectangleGeometry({rectangle:Pn(c.value)})})})):e.type==="imagery-layer"&&d.value&&_.push(a.h(Ip,{ref:m,show:e.show,imageryProvider:new Cesium.SingleTileImageryProvider({url:d.value,rectangle:Pn(c.value)})})),a.h("i",{ref:r,class:"vc-overlay-heatmap",style:"display: none !important"},_)}else return a.createCommentVNode("v-if")}}});const Qp={options:{type:Object,required:!0},autoHidden:{type:Boolean,default:!0},customClass:String,coordinateSystem:{type:String,default:"cesium"}};({...ye});var Kp=a.defineComponent({name:"VcOverlayEcharts",props:Qp,emits:["beforeLoad","ready","destroyed","mouseenter","mouseleave","click"],setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="VcOverlayEcharts",i.cesiumEvents=[];const n=Le(e,t,i);if(n===void 0)return;const{$services:o}=n,r=a.ref(!1),s=a.ref(null),l=a.reactive({left:"0px",top:"0px",pointerEvents:"none",position:"absolute"});let c;const u=a.ref(!0);let d=[];d.push(a.watch(()=>e.options,w=>{n.reload()})),i.createCesiumObject=async()=>ie(s),i.mount=async()=>{const{viewer:w}=o;return r.value=!0,a.nextTick(()=>{vr.registerCoordinateSystem(e.coordinateSystem,f(w)),c=vr.init(ie(s)),h(),w.scene.postRender.addEventListener(m)}),!0},i.unmount=async()=>{const{viewer:w}=o;return w.scene.postRender.removeEventListener(m),r.value=!1,!0};const m=()=>{if(u.value){const{viewer:w}=o;c.resize({width:w.canvas.width,height:w.canvas.height})}},h=()=>{u.value&&e.options&&c.setOption(e.options)},f=w=>{const C=function(_){this.viewer=_,this._mapOffset=[0,0]};return C.create=function(P){return P.eachSeries(function(_){_.get("coordinateSystem")===e.coordinateSystem&&(_.coordinateSystem=new C(w))}),[]},C.getDimensionsInfo=function(){return["x","y"]},C.dimensions=["x","y"],C.prototype.dimensions=["x","y"],C.prototype.setMapOffset=function(_){this._mapOffset=_},C.prototype.dataToPoint=function(P){const _=[],E=Cesium.Cartesian3.fromDegrees(P[0],P[1]);if(!E)return _;if(e.autoHidden){const x=Cesium.Ellipsoid.WGS84.geodeticSurfaceNormal(E,new Cesium.Cartesian3),T=this.viewer.camera.direction;if(Cesium.Cartesian3.dot(x,T)>=0)return _}const S=this.viewer.scene.cartesianToCanvasCoordinates(E);return S?[S.x-this._mapOffset[0],S.y-this._mapOffset[1]]:_},C.prototype.pointToData=function(P){const _=this._mapOffset,E=w.scene.globe.ellipsoid,S=new Cesium.Cartesian3(P[1]+_[1],P[2]+_[2],0),x=E.cartesianToCartographic(S);return x?[x.longitude,x.latitude]:[0,0]},C.prototype.getviewerRect=function(){const P=this.viewer.canvas;return new vr.graphic.BoundingRect(0,0,P.width,P.height)},C.prototype.getRoamTransform=function(){return vr.matrix.create()},C},p=()=>r.value?a.h("div",{ref:s,class:`vc-echart-container${e.customClass?" "+e.customClass:""}`,style:l,onMouseenter:g,onMouseleave:v,onClick:y},Xe(t.slots.default)):a.createCommentVNode("v-if"),y=w=>{t.emit("click",w)},g=w=>{t.emit("mouseenter",w)},v=w=>{t.emit("mouseleave",w)};return a.onUnmounted(()=>{d.forEach(w=>w()),d=[]}),()=>p()}});function Jp(){const e=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new e({position:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}),st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array([0,0,1,0,1,1,0,1])})}),indices:new Uint32Array([3,2,0,0,2,1])})}function ai(e,t){if(Cesium.defined(t)){const n={};n.arrayBufferView=t,e.source=n}return new Cesium.Texture(e)}function Hc(e,t,i){return new Cesium.Framebuffer({context:e,colorTextures:[t],depthTexture:i})}function Wc(e){const n={viewport:e.viewport,depthTest:e.depthTest,depthMask:e.depthMask,blending:e.blending};return Cesium.Appearance.getDefaultRenderState(!0,!1,n)}function P6(e){const t={},i=Cesium.Math.mod(e.west,Cesium.Math.TWO_PI),n=Cesium.Math.mod(e.east,Cesium.Math.TWO_PI),o=e.width;let r,s;o>Cesium.Math.THREE_PI_OVER_TWO?(r=0,s=Cesium.Math.TWO_PI):n-i<o?(r=i,s=i+o):(r=i,s=n),t.lon={min:Cesium.Math.toDegrees(r),max:Cesium.Math.toDegrees(s)};const l=e.south,c=e.north,u=e.height,d=u>Cesium.Math.PI/12?u/2:0;let m=Cesium.Math.clampToLatitudeRange(l-d),h=Cesium.Math.clampToLatitudeRange(c+d);return m<-Cesium.Math.PI_OVER_THREE&&(m=-Cesium.Math.PI_OVER_TWO),h>Cesium.Math.PI_OVER_THREE&&(h=Cesium.Math.PI_OVER_TWO),t.lat={min:Cesium.Math.toDegrees(m),max:Cesium.Math.toDegrees(h)},t}var O6=`
// the size of UV textures: width = lon, height = lat*lev
uniform sampler2D U; // eastward wind
uniform sampler2D V; // northward wind
uniform sampler2D currentParticlesPosition; // (lon, lat, lev)

uniform vec3 dimension; // (lon, lat, lev)
uniform vec3 minimum; // minimum of each dimension
uniform vec3 maximum; // maximum of each dimension
uniform vec3 interval; // interval of each dimension

// used to calculate the wind norm
uniform vec2 uSpeedRange; // (min, max);
uniform vec2 vSpeedRange;
uniform float pixelSize;
uniform float speedFactor;

float speedScaleFactor = speedFactor * pixelSize;

varying vec2 v_textureCoordinates;

vec2 mapPositionToNormalizedIndex2D(vec3 lonLatLev) {
  // ensure the range of longitude and latitude
  lonLatLev.x = mod(lonLatLev.x, 360.0);
  lonLatLev.y = clamp(lonLatLev.y, -90.0, 90.0);

  vec3 index3D = vec3(0.0);
  index3D.x = (lonLatLev.x - minimum.x) / interval.x;
  index3D.y = (lonLatLev.y - minimum.y) / interval.y;
  index3D.z = (lonLatLev.z - minimum.z) / interval.z;

  // the st texture coordinate corresponding to (col, row) index
  // example
  // data array is [0, 1, 2, 3, 4, 5], width = 3, height = 2
  // the content of texture will be
  // t 1.0
  //    |  3 4 5
  //    |
  //    |  0 1 2
  //   0.0------1.0 s

  vec2 index2D = vec2(index3D.x, index3D.z * dimension.y + index3D.y);
  vec2 normalizedIndex2D = vec2(index2D.x / dimension.x, index2D.y / (dimension.y * dimension.z));
  return normalizedIndex2D;
}

float getWindComponent(sampler2D componentTexture, vec3 lonLatLev) {
  vec2 normalizedIndex2D = mapPositionToNormalizedIndex2D(lonLatLev);
  float result = texture2D(componentTexture, normalizedIndex2D).r;
  return result;
}

float interpolateTexture(sampler2D componentTexture, vec3 lonLatLev) {
  float lon = lonLatLev.x;
  float lat = lonLatLev.y;
  float lev = lonLatLev.z;

  float lon0 = floor(lon / interval.x) * interval.x;
  float lon1 = lon0 + 1.0 * interval.x;
  float lat0 = floor(lat / interval.y) * interval.y;
  float lat1 = lat0 + 1.0 * interval.y;

  float lon0_lat0 = getWindComponent(componentTexture, vec3(lon0, lat0, lev));
  float lon1_lat0 = getWindComponent(componentTexture, vec3(lon1, lat0, lev));
  float lon0_lat1 = getWindComponent(componentTexture, vec3(lon0, lat1, lev));
  float lon1_lat1 = getWindComponent(componentTexture, vec3(lon1, lat1, lev));

  float lon_lat0 = mix(lon0_lat0, lon1_lat0, lon - lon0);
  float lon_lat1 = mix(lon0_lat1, lon1_lat1, lon - lon0);
  float lon_lat = mix(lon_lat0, lon_lat1, lat - lat0);
  return lon_lat;
}

vec3 linearInterpolation(vec3 lonLatLev) {
  // https://en.wikipedia.org/wiki/Bilinear_interpolation
  float u = interpolateTexture(U, lonLatLev);
  float v = interpolateTexture(V, lonLatLev);
  float w = 0.0;
  return vec3(u, v, w);
}

vec2 lengthOfLonLat(vec3 lonLatLev) {
  // unit conversion: meters -> longitude latitude degrees
  // see https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree for detail

  // Calculate the length of a degree of latitude and longitude in meters
  float latitude = radians(lonLatLev.y);

  float term1 = 111132.92;
  float term2 = 559.82 * cos(2.0 * latitude);
  float term3 = 1.175 * cos(4.0 * latitude);
  float term4 = 0.0023 * cos(6.0 * latitude);
  float latLength = term1 - term2 + term3 - term4;

  float term5 = 111412.84 * cos(latitude);
  float term6 = 93.5 * cos(3.0 * latitude);
  float term7 = 0.118 * cos(5.0 * latitude);
  float longLength = term5 - term6 + term7;

  return vec2(longLength, latLength);
}

vec3 convertSpeedUnitToLonLat(vec3 lonLatLev, vec3 speed) {
  vec2 lonLatLength = lengthOfLonLat(lonLatLev);
  float u = speed.x / lonLatLength.x;
  float v = speed.y / lonLatLength.y;
  float w = 0.0;
  vec3 windVectorInLonLatLev = vec3(u, v, w);

  return windVectorInLonLatLev;
}

vec3 calculateSpeedByRungeKutta2(vec3 lonLatLev) {
  // see https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages for detail
  const float h = 0.5;

  vec3 y_n = lonLatLev;
  vec3 f_n = linearInterpolation(lonLatLev);
  vec3 midpoint = y_n + 0.5 * h * convertSpeedUnitToLonLat(y_n, f_n) * speedScaleFactor;
  vec3 speed = h * linearInterpolation(midpoint) * speedScaleFactor;

  return speed;
}

float calculateWindNorm(vec3 speed) {
  vec3 percent = vec3(0.0);
  percent.x = (speed.x - uSpeedRange.x) / (uSpeedRange.y - uSpeedRange.x);
  percent.y = (speed.y - vSpeedRange.x) / (vSpeedRange.y - vSpeedRange.x);
  float norm = length(percent);

  return norm;
}

void main() {
  // texture coordinate must be normalized
  vec3 lonLatLev = texture2D(currentParticlesPosition, v_textureCoordinates).rgb;
  vec3 speed = calculateSpeedByRungeKutta2(lonLatLev);
  vec3 speedInLonLat = convertSpeedUnitToLonLat(lonLatLev, speed);

  vec4 particleSpeed = vec4(speedInLonLat, calculateWindNorm(speed / speedScaleFactor));
  gl_FragColor = particleSpeed;
}
`,E6=`
uniform sampler2D currentParticlesPosition; // (lon, lat, lev)
uniform sampler2D particlesSpeed; // (u, v, w, norm) Unit converted to degrees of longitude and latitude

varying vec2 v_textureCoordinates;

void main() {
  // texture coordinate must be normalized
  vec3 lonLatLev = texture2D(currentParticlesPosition, v_textureCoordinates).rgb;
  vec3 speed = texture2D(particlesSpeed, v_textureCoordinates).rgb;
  vec3 nextParticle = lonLatLev + speed;

  gl_FragColor = vec4(nextParticle, 0.0);
}
`,M6=`
uniform sampler2D nextParticlesPosition;
uniform sampler2D particlesSpeed; // (u, v, w, norm)

// range (min, max)
uniform vec2 lonRange;
uniform vec2 latRange;

uniform float randomCoefficient; // use to improve the pseudo-random generator
uniform float dropRate; // drop rate is a chance a particle will restart at random position to avoid degeneration
uniform float dropRateBump;

varying vec2 v_textureCoordinates;

// pseudo-random generator
const vec3 randomConstants = vec3(12.9898, 78.233, 4375.85453);
const vec2 normalRange = vec2(0.0, 1.0);
float rand(vec2 seed, vec2 range) {
  vec2 randomSeed = randomCoefficient * seed;
  float temp = dot(randomConstants.xy, randomSeed);
  temp = fract(sin(temp) * (randomConstants.z + temp));
  return temp * (range.y - range.x) + range.x;
}

vec3 generateRandomParticle(vec2 seed, float lev) {
  // ensure the longitude is in [0, 360]
  float randomLon = mod(rand(seed, lonRange), 360.0);
  float randomLat = rand(-seed, latRange);

  return vec3(randomLon, randomLat, lev);
}

bool particleOutbound(vec3 particle) {
  return particle.y < -90.0 || particle.y > 90.0;
}

void main() {
  vec3 nextParticle = texture2D(nextParticlesPosition, v_textureCoordinates).rgb;
  vec4 nextSpeed = texture2D(particlesSpeed, v_textureCoordinates);
  float speedNorm = nextSpeed.a;
  float particleDropRate = dropRate + dropRateBump * speedNorm;

  vec2 seed1 = nextParticle.xy + v_textureCoordinates;
  vec2 seed2 = nextSpeed.xy + v_textureCoordinates;
  vec3 randomParticle = generateRandomParticle(seed1, nextParticle.z);
  float randomNumber = rand(seed2, normalRange);

  if (randomNumber < particleDropRate || particleOutbound(nextParticle)) {
    gl_FragColor = vec4(randomParticle, 1.0); // 1.0 means this is a random particle
  } else {
    gl_FragColor = vec4(nextParticle, 0.0);
  }
}
`;class S6{constructor(t){this.commandType=t.commandType,this.geometry=t.geometry,this.attributeLocations=t.attributeLocations,this.primitiveType=t.primitiveType,this.uniformMap=t.uniformMap,this.vertexShaderSource=t.vertexShaderSource,this.fragmentShaderSource=t.fragmentShaderSource,this.rawRenderState=t.rawRenderState,this.framebuffer=t.framebuffer,this.outputTexture=t.outputTexture,this.autoClear=Cesium.defaultValue(t.autoClear,!1),this.preExecute=t.preExecute,this.show=!0,this.commandToExecute=void 0,this.clearCommand=void 0,this.autoClear&&(this.clearCommand=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:this.framebuffer,pass:Cesium.Pass.OPAQUE}))}createCommand(t){switch(this.commandType){case"Draw":{const i=Cesium.VertexArray.fromGeometry({context:t,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW}),n=Cesium.ShaderProgram.fromCache({context:t,attributeLocations:this.attributeLocations,vertexShaderSource:this.vertexShaderSource,fragmentShaderSource:this.fragmentShaderSource}),o=Cesium.RenderState.fromCache(this.rawRenderState);return new Cesium.DrawCommand({owner:this,vertexArray:i,primitiveType:this.primitiveType,uniformMap:this.uniformMap,modelMatrix:Cesium.Matrix4.IDENTITY,shaderProgram:n,framebuffer:this.framebuffer,renderState:o,pass:Cesium.Pass.OPAQUE})}case"Compute":return new Cesium.ComputeCommand({owner:this,fragmentShaderSource:this.fragmentShaderSource,uniformMap:this.uniformMap,outputTexture:this.outputTexture,persists:!0})}}setGeometry(t,i){this.geometry=i;const n=Cesium.VertexArray.fromGeometry({context:t,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.commandToExecute.vertexArray=n}update(t){!this.show||(Cesium.defined(this.commandToExecute)||(this.commandToExecute=this.createCommand(t.context)),Cesium.defined(this.preExecute)&&this.preExecute(),Cesium.defined(this.clearCommand)&&t.commandList.push(this.clearCommand),t.commandList.push(this.commandToExecute))}isDestroyed(){return!1}destroy(){return Cesium.defined(this.commandToExecute)&&(this.commandToExecute.shaderProgram=this.commandToExecute.shaderProgram&&this.commandToExecute.shaderProgram.destroy()),Cesium.destroyObject(this)}}var vo=S6;class x6{constructor(t,i,n,o){this.data=i,this.createWindTextures(t,i),this.createParticlesTextures(t,n,o),this.createComputingPrimitives(i,n,o)}createWindTextures(t,i){const n={context:t,width:i.dimensions.lon,height:i.dimensions.lat*i.dimensions.lev,pixelFormat:Cesium.PixelFormat.LUMINANCE,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})};this.windTextures={U:ai(n,i.U.array),V:ai(n,i.V.array)}}createParticlesTextures(t,i,n){const o={context:t,width:i.particlesTextureSize,height:i.particlesTextureSize,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})},r=this.randomizeParticles(i.maxParticles,n),s=new Float32Array(4*i.maxParticles).fill(0);this.particlesTextures={previousParticlesPosition:ai(o,r),currentParticlesPosition:ai(o,r),nextParticlesPosition:ai(o,r),postProcessingPosition:ai(o,r),particlesSpeed:ai(o,s)}}randomizeParticles(t,i){const n=new Float32Array(4*t);for(let o=0;o<t;o++)n[4*o]=Cesium.Math.randomBetween(i.lonRange.x,i.lonRange.y),n[4*o+1]=Cesium.Math.randomBetween(i.latRange.x,i.latRange.y),n[4*o+2]=Cesium.Math.randomBetween(this.data.lev.min,this.data.lev.max),n[4*o+3]=0;return n}destroyParticlesTextures(){Object.keys(this.particlesTextures).forEach(t=>{this.particlesTextures[t].destroy()})}createComputingPrimitives(t,i,n){const o=new Cesium.Cartesian3(t.dimensions.lon,t.dimensions.lat,t.dimensions.lev),r=new Cesium.Cartesian3(t.lon.min,t.lat.min,t.lev.min),s=new Cesium.Cartesian3(t.lon.max,t.lat.max,t.lev.max),l=new Cesium.Cartesian3((s.x-r.x)/(o.x-1),(s.y-r.y)/(o.y-1),o.z>1?(s.z-r.z)/(o.z-1):1),c=new Cesium.Cartesian2(t.U.min,t.U.max),u=new Cesium.Cartesian2(t.V.min,t.V.max),d=this;this.primitives={calculateSpeed:new vo({commandType:"Compute",uniformMap:{U:function(){return d.windTextures.U},V:function(){return d.windTextures.V},currentParticlesPosition:function(){return d.particlesTextures.currentParticlesPosition},dimension:function(){return o},minimum:function(){return r},maximum:function(){return s},interval:function(){return l},uSpeedRange:function(){return c},vSpeedRange:function(){return u},pixelSize:function(){return n.pixelSize},speedFactor:function(){return i.speedFactor}},fragmentShaderSource:new Cesium.ShaderSource({sources:[O6]}),outputTexture:this.particlesTextures.particlesSpeed,preExecute:function(){const m=d.particlesTextures.previousParticlesPosition;d.particlesTextures.previousParticlesPosition=d.particlesTextures.currentParticlesPosition,d.particlesTextures.currentParticlesPosition=d.particlesTextures.postProcessingPosition,d.particlesTextures.postProcessingPosition=m,d.primitives.calculateSpeed.commandToExecute.outputTexture=d.particlesTextures.particlesSpeed}}),updatePosition:new vo({commandType:"Compute",uniformMap:{currentParticlesPosition:function(){return d.particlesTextures.currentParticlesPosition},particlesSpeed:function(){return d.particlesTextures.particlesSpeed}},fragmentShaderSource:new Cesium.ShaderSource({sources:[E6]}),outputTexture:this.particlesTextures.nextParticlesPosition,preExecute:function(){d.primitives.updatePosition.commandToExecute.outputTexture=d.particlesTextures.nextParticlesPosition}}),postProcessingPosition:new vo({commandType:"Compute",uniformMap:{nextParticlesPosition:function(){return d.particlesTextures.nextParticlesPosition},particlesSpeed:function(){return d.particlesTextures.particlesSpeed},lonRange:function(){return n.lonRange},latRange:function(){return n.latRange},randomCoefficient:function(){return Math.random()},dropRate:function(){return i.dropRate},dropRateBump:function(){return i.dropRateBump}},fragmentShaderSource:new Cesium.ShaderSource({sources:[M6]}),outputTexture:this.particlesTextures.postProcessingPosition,preExecute:function(){d.primitives.postProcessingPosition.commandToExecute.outputTexture=d.particlesTextures.postProcessingPosition}})}}}var eg=x6,T6=`
attribute vec2 st;
// it is not normal itself, but used to control lines drawing
attribute vec3 normal; // (point to use, offset sign, not used component)

uniform sampler2D previousParticlesPosition;
uniform sampler2D currentParticlesPosition;
uniform sampler2D postProcessingPosition;

uniform float particleHeight;

uniform float aspect;
uniform float pixelSize;
uniform float lineWidth;

struct adjacentPoints {
  vec4 previous;
  vec4 current;
  vec4 next;
};

vec3 convertCoordinate(vec3 lonLatLev) {
  // WGS84 (lon, lat, lev) -> ECEF (x, y, z)
  // read https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates for detail

  // WGS 84 geometric constants
  float a = 6378137.0; // Semi-major axis
  float b = 6356752.3142; // Semi-minor axis
  float e2 = 6.69437999014e-3; // First eccentricity squared

  float latitude = radians(lonLatLev.y);
  float longitude = radians(lonLatLev.x);

  float cosLat = cos(latitude);
  float sinLat = sin(latitude);
  float cosLon = cos(longitude);
  float sinLon = sin(longitude);

  float N_Phi = a / sqrt(1.0 - e2 * sinLat * sinLat);
  float h = particleHeight; // it should be high enough otherwise the particle may not pass the terrain depth test

  vec3 cartesian = vec3(0.0);
  cartesian.x = (N_Phi + h) * cosLat * cosLon;
  cartesian.y = (N_Phi + h) * cosLat * sinLon;
  cartesian.z = ((b * b) / (a * a) * N_Phi + h) * sinLat;
  return cartesian;
}

vec4 calculateProjectedCoordinate(vec3 lonLatLev) {
  // the range of longitude in Cesium is [-180, 180] but the range of longitude in the NetCDF file is [0, 360]
  // [0, 180] is corresponding to [0, 180] and [180, 360] is corresponding to [-180, 0]
  lonLatLev.x = mod(lonLatLev.x + 180.0, 360.0) - 180.0;
  vec3 particlePosition = convertCoordinate(lonLatLev);
  vec4 projectedCoordinate = czm_modelViewProjection * vec4(particlePosition, 1.0);
  return projectedCoordinate;
}

vec4 calculateOffsetOnNormalDirection(vec4 pointA, vec4 pointB, float offsetSign) {
  vec2 aspectVec2 = vec2(aspect, 1.0);
  vec2 pointA_XY = (pointA.xy / pointA.w) * aspectVec2;
  vec2 pointB_XY = (pointB.xy / pointB.w) * aspectVec2;

  float offsetLength = lineWidth / 2.0;
  vec2 direction = normalize(pointB_XY - pointA_XY);
  vec2 normalVector = vec2(-direction.y, direction.x);
  normalVector.x = normalVector.x / aspect;
  normalVector = offsetLength * normalVector;

  vec4 offset = vec4(offsetSign * normalVector, 0.0, 0.0);
  return offset;
}

vec4 calculateOffsetOnMiterDirection(adjacentPoints projectedCoordinates, float offsetSign) {
  vec2 aspectVec2 = vec2(aspect, 1.0);

  vec4 PointA = projectedCoordinates.previous;
  vec4 PointB = projectedCoordinates.current;
  vec4 PointC = projectedCoordinates.next;

  vec2 pointA_XY = (PointA.xy / PointA.w) * aspectVec2;
  vec2 pointB_XY = (PointB.xy / PointB.w) * aspectVec2;
  vec2 pointC_XY = (PointC.xy / PointC.w) * aspectVec2;

  vec2 AB = normalize(pointB_XY - pointA_XY);
  vec2 BC = normalize(pointC_XY - pointB_XY);

  vec2 normalA = vec2(-AB.y, AB.x);
  vec2 tangent = normalize(AB + BC);
  vec2 miter = vec2(-tangent.y, tangent.x);

  float offsetLength = lineWidth / 2.0;
  float projection = dot(miter, normalA);
  vec4 offset = vec4(0.0);
  // avoid to use values that are too small
  if (projection > 0.1) {
    float miterLength = offsetLength / projection;
    offset = vec4(offsetSign * miter * miterLength, 0.0, 0.0);
    offset.x = offset.x / aspect;
  } else {
    offset = calculateOffsetOnNormalDirection(PointB, PointC, offsetSign);
  }

  return offset;
}

void main() {
  vec2 particleIndex = st;

  vec3 previousPosition = texture2D(previousParticlesPosition, particleIndex).rgb;
  vec3 currentPosition = texture2D(currentParticlesPosition, particleIndex).rgb;
  vec3 nextPosition = texture2D(postProcessingPosition, particleIndex).rgb;

  float isAnyRandomPointUsed = texture2D(postProcessingPosition, particleIndex).a +
    texture2D(currentParticlesPosition, particleIndex).a +
    texture2D(previousParticlesPosition, particleIndex).a;

  adjacentPoints projectedCoordinates;
  if (isAnyRandomPointUsed > 0.0) {
    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);
    projectedCoordinates.current = projectedCoordinates.previous;
    projectedCoordinates.next = projectedCoordinates.previous;
  } else {
    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);
    projectedCoordinates.current = calculateProjectedCoordinate(currentPosition);
    projectedCoordinates.next = calculateProjectedCoordinate(nextPosition);
  }

  int pointToUse = int(normal.x);
  float offsetSign = normal.y;
  vec4 offset = vec4(0.0);
  // render lines with triangles and miter joint
  // read https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html for detail
  if (pointToUse == -1) {
    offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.previous, projectedCoordinates.current, offsetSign);
    gl_Position = projectedCoordinates.previous + offset;
  } else {
    if (pointToUse == 0) {
      offset = pixelSize * calculateOffsetOnMiterDirection(projectedCoordinates, offsetSign);
      gl_Position = projectedCoordinates.current + offset;
    } else {
      if (pointToUse == 1) {
        offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.current, projectedCoordinates.next, offsetSign);
        gl_Position = projectedCoordinates.next + offset;
      } else {

      }
    }
  }
}
`,A6=`
void main() {
  const vec4 white = vec4(1.0);
  gl_FragColor = white;
}
`,tg=`
attribute vec3 position;
attribute vec2 st;

varying vec2 textureCoordinate;

void main() {
    textureCoordinate = st;
    gl_Position = vec4(position, 1.0);
}
`,I6=`
uniform sampler2D segmentsColorTexture;
uniform sampler2D segmentsDepthTexture;

uniform sampler2D currentTrailsColor;
uniform sampler2D trailsDepthTexture;

uniform float fadeOpacity;

varying vec2 textureCoordinate;

void main() {
  vec4 pointsColor = texture2D(segmentsColorTexture, textureCoordinate);
  vec4 trailsColor = texture2D(currentTrailsColor, textureCoordinate);

  trailsColor = floor(fadeOpacity * 255.0 * trailsColor) / 255.0; // make sure the trailsColor will be strictly decreased

  float pointsDepth = texture2D(segmentsDepthTexture, textureCoordinate).r;
  float trailsDepth = texture2D(trailsDepthTexture, textureCoordinate).r;
  float globeDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, textureCoordinate));

  gl_FragColor = vec4(0.0);
  if (pointsDepth < globeDepth) {
    gl_FragColor = gl_FragColor + pointsColor;
  }
  if (trailsDepth < globeDepth) {
    gl_FragColor = gl_FragColor + trailsColor;
  }
  gl_FragDepthEXT = min(pointsDepth, trailsDepth);
}
`,D6=`
uniform sampler2D trailsColorTexture;
uniform sampler2D trailsDepthTexture;

varying vec2 textureCoordinate;

void main() {
  vec4 trailsColor = texture2D(trailsColorTexture, textureCoordinate);
  float trailsDepth = texture2D(trailsDepthTexture, textureCoordinate).r;
  float globeDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, textureCoordinate));

  if (trailsDepth < globeDepth) {
    gl_FragColor = trailsColor;
  } else {
    gl_FragColor = vec4(0.0);
  }
}
`;class R6{constructor(t,i,n,o,r){this.createRenderingTextures(t,i),this.createRenderingFramebuffers(t),this.createRenderingPrimitives(t,n,o,r)}createRenderingTextures(t,i){const n={context:t,width:t.drawingBufferWidth,height:t.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_BYTE},o={context:t,width:t.drawingBufferWidth,height:t.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.DEPTH_COMPONENT,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_INT};this.textures={segmentsColor:ai(n),segmentsDepth:ai(o),currentTrailsColor:ai(n),currentTrailsDepth:ai(o),nextTrailsColor:ai(n),nextTrailsDepth:ai(o)}}createRenderingFramebuffers(t){this.framebuffers={segments:Hc(t,this.textures.segmentsColor,this.textures.segmentsDepth),currentTrails:Hc(t,this.textures.currentTrailsColor,this.textures.currentTrailsDepth),nextTrails:Hc(t,this.textures.nextTrailsColor,this.textures.nextTrailsDepth)}}createSegmentsGeometry(t){const n=[];for(let f=0;f<t.particlesTextureSize;f++)for(let p=0;p<t.particlesTextureSize;p++)for(let y=0;y<6;y++)n.push(f/t.particlesTextureSize),n.push(p/t.particlesTextureSize);const o=new Float32Array(n),r=[],s=[-1,0,1],l=[-1,1];for(let f=0;f<t.maxParticles;f++)for(let p=0;p<s.length;p++)for(let y=0;y<l.length;y++)r.push(s[p]),r.push(l[y]),r.push(0);const c=new Float32Array(r),u=12*t.maxParticles,d=new Uint32Array(u);for(let f=0,p=0,y=0;f<t.maxParticles;f++)d[p++]=y+0,d[p++]=y+1,d[p++]=y+2,d[p++]=y+2,d[p++]=y+1,d[p++]=y+3,d[p++]=y+2,d[p++]=y+4,d[p++]=y+3,d[p++]=y+4,d[p++]=y+3,d[p++]=y+5,y+=6;const m=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new m({st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:o}),normal:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:c})}),indices:d})}createRenderingPrimitives(t,i,n,o){const r=this;this.primitives={segments:new vo({commandType:"Draw",attributeLocations:{st:0,normal:1},geometry:this.createSegmentsGeometry(i),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{previousParticlesPosition:function(){return o.particlesTextures.previousParticlesPosition},currentParticlesPosition:function(){return o.particlesTextures.currentParticlesPosition},postProcessingPosition:function(){return o.particlesTextures.postProcessingPosition},aspect:function(){return t.drawingBufferWidth/t.drawingBufferHeight},pixelSize:function(){return n.pixelSize},lineWidth:function(){return i.lineWidth},particleHeight:function(){return i.particleHeight}},vertexShaderSource:new Cesium.ShaderSource({sources:[T6]}),fragmentShaderSource:new Cesium.ShaderSource({sources:[A6]}),rawRenderState:Wc({viewport:void 0,depthTest:{enabled:!0},depthMask:!0}),framebuffer:this.framebuffers.segments,autoClear:!0}),trails:new vo({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:Jp(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{segmentsColorTexture:function(){return r.textures.segmentsColor},segmentsDepthTexture:function(){return r.textures.segmentsDepth},currentTrailsColor:function(){return r.framebuffers.currentTrails.getColorTexture(0)},trailsDepthTexture:function(){return r.framebuffers.currentTrails.depthTexture},fadeOpacity:function(){return i.fadeOpacity}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[tg]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:[I6]}),rawRenderState:Wc({viewport:void 0,depthTest:{enabled:!0,func:Cesium.DepthFunction.ALWAYS},depthMask:!0}),framebuffer:this.framebuffers.nextTrails,autoClear:!0,preExecute:function(){const s=r.framebuffers.currentTrails;r.framebuffers.currentTrails=r.framebuffers.nextTrails,r.framebuffers.nextTrails=s,r.primitives.trails.commandToExecute.framebuffer=r.framebuffers.nextTrails,r.primitives.trails.clearCommand.framebuffer=r.framebuffers.nextTrails}}),screen:new vo({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:Jp(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{trailsColorTexture:function(){return r.framebuffers.nextTrails.getColorTexture(0)},trailsDepthTexture:function(){return r.framebuffers.nextTrails.depthTexture}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[tg]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:[D6]}),rawRenderState:Wc({viewport:void 0,depthTest:{enabled:!1},depthMask:!0,blending:{enabled:!0}}),framebuffer:void 0})}}}var ig=R6;class L6{constructor(t,i,n,o){this.context=t,this.data=i,this.particleSystemOptions=n,this.viewerParameters=o,this.particlesComputing=new eg(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new ig(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}canvasResize(t){this.particlesComputing.destroyParticlesTextures(),Object.keys(this.particlesComputing.windTextures).forEach(i=>{this.particlesComputing.windTextures[i].destroy()}),Object.keys(this.particlesRendering.framebuffers).forEach(i=>{this.particlesRendering.framebuffers[i].destroy()}),this.context=t,this.particlesComputing=new eg(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new ig(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}clearFramebuffers(){const t=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:void 0,pass:Cesium.Pass.OPAQUE});Object.keys(this.particlesRendering.framebuffers).forEach(i=>{t.framebuffer=this.particlesRendering.framebuffers[i],t.execute(this.context)})}refreshParticles(t){if(this.clearFramebuffers(),this.particlesComputing.destroyParticlesTextures(),this.particlesComputing.createParticlesTextures(this.context,this.particleSystemOptions,this.viewerParameters),t){const i=this.particlesRendering.createSegmentsGeometry(this.particleSystemOptions);this.particlesRendering.primitives.segments.geometry=i;const n=Cesium.VertexArray.fromGeometry({context:this.context,geometry:i,attributeLocations:this.particlesRendering.primitives.segments.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.particlesRendering.primitives.segments.commandToExecute.vertexArray=n}}applyParticleSystemOptions(t){let i=!1;this.particleSystemOptions.maxParticles!==t.maxParticles&&(i=!0),Object.keys(t).forEach(n=>{this.particleSystemOptions[n]=t[n]}),this.refreshParticles(i)}applyViewerParameters(t){Object.keys(t).forEach(i=>{this.viewerParameters[i]=t[i]}),this.refreshParticles(!1)}}var B6=L6;const za=2*Math.PI/360;function ng(e,t){const i=e-t*Math.floor(e/t);return i===t?0:i}function $a(e){return typeof e=="string"&&e.indexOf("/")>=0&&(e=e.split("/")),KE(e)&&e.length===2?e[0]/e[1]:+e}function j6(e,t){const i=Math.floor(e.size),n=Math.floor(t.size),o=i*n,r=$a(e.delta),s=$a(t.delta),l=$a(e.start),c=$a(t.start),u=l+r*(i-1),d=c+s*(n-1);(l-r/2)*za,(u+r/2)*za,(c-s/2)*za,(d+s/2)*za;const m=Math.floor(i*r)>=360;function h(){return{width:i,height:n}}function f(){return m}function p(v,w){for(let C=w||0;C<o;C++){const P=C%i,_=Math.floor(C/i),E=l+P*r,S=c+_*s;if(v(E,S,C))return C+1}return NaN}function y(v,w){if(v===v&&w===w){const C=ng(v-l,360)/r,P=(w-c)/s,_=Math.round(C),E=Math.round(P);if(0<=E&&E<n&&0<=_&&(_<i||_===i&&m)){const S=E*i+_;return _===i?S-i:S}}return NaN}function g(v,w){if(v===v&&w===w){const C=ng(v-l,360)/r,P=(w-c)/s,_=Math.floor(C),E=Math.floor(P),S=_+1,x=E+1,T=C-_,V=P-E;if(0<=E&&x<n&&0<=_&&(S<i||S===i&&m)){const I=E*i+_;let R=I+1;const L=I+i;let j=L+1;return S===i&&(R-=i,j-=i),[I,R,L,j,T,V]}}return[NaN,NaN,NaN,NaN,NaN,NaN]}return{dimensions:h,isCylindrical:f,forEach:p,closest:y,closest4:g}}const og={show:{type:Boolean,default:!0},data:{type:Object,required:!0},options:{type:Object,default:()=>({maxParticles:64*64,particleHeight:100,fadeOpacity:.996,dropRate:.003,dropRateBump:.01,speedFactor:1,lineWidth:4})},viewerParameters:Object};var rg=a.defineComponent({name:"VcOverlayWindmap",props:og,emits:ye,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="VcOverlayHtml",i.cesiumEvents=[];const n=Le(e,t,i);if(n===void 0)return;const{$services:o}=n;let r,s,l,c;const u=a.computed(()=>{const P=Math.ceil(Math.sqrt(e.options.maxParticles)),_=P*P;return{particlesTextureSize:P,maxParticles:_,particleHeight:e.options.particleHeight,fadeOpacity:e.options.fadeOpacity,dropRate:e.options.dropRate,dropRateBump:e.options.dropRateBump,speedFactor:e.options.speedFactor,lineWidth:e.options.lineWidth}});let d=[];d.push(a.watch(()=>e.show,P=>{l.show=P})),d.push(a.watch(()=>e.data,P=>{i.proxy.reload()})),d.push(a.watch(()=>u.value,P=>{const _=i.cesiumObject;!_||_.applyParticleSystemOptions(P)},{deep:!0})),d.push(a.watch(()=>e.viewerParameters,P=>{w(),i.cesiumObject.applyViewerParameters(r)},{deep:!0})),i.createCesiumObject=async()=>{const{viewer:P}=o;l=new Cesium.PrimitiveCollection,s=new Cesium.BoundingSphere(Cesium.Cartesian3.ZERO,.99*6378137),r={lonRange:new Cesium.Cartesian2,latRange:new Cesium.Cartesian2,pixelSize:0};const _={start:e.data.lon.array[0],delta:e.data.lon.delta,size:e.data.lon.array.length},E={start:e.data.lat.array[0],delta:e.data.lat.delta,size:e.data.lat.array.length};return c=j6(_,E),w(),new B6(P.scene.context,e.data,u.value,r)},i.mount=async()=>{const{viewer:P}=o;P.scene.primitives.add(l);const _=P.scene,E=_.camera;return m(),E.moveStart.addEventListener(f),E.moveEnd.addEventListener(p),window.addEventListener("resize",g),_.preRender.addEventListener(v),!0},i.unmount=async()=>{h();const{viewer:P}=o,_=P.scene,E=_.camera;return h(),P.scene.primitives.remove(l),E.moveStart.removeEventListener(f),E.moveEnd.removeEventListener(p),window.removeEventListener("resize",g),_.preRender.removeEventListener(v),!0};const m=()=>{const P=i.cesiumObject;l.add(P.particlesComputing.primitives.calculateSpeed),l.add(P.particlesComputing.primitives.updatePosition),l.add(P.particlesComputing.primitives.postProcessingPosition),l.add(P.particlesRendering.primitives.segments),l.add(P.particlesRendering.primitives.trails),l.add(P.particlesRendering.primitives.screen)},h=()=>{const P=i.cesiumObject;l.remove(P.particlesComputing.primitives.calculateSpeed),l.remove(P.particlesComputing.primitives.updatePosition),l.remove(P.particlesComputing.primitives.postProcessingPosition),l.remove(P.particlesRendering.primitives.segments),l.remove(P.particlesRendering.primitives.trails),l.remove(P.particlesRendering.primitives.screen)},f=()=>{l.show=!1},p=()=>{w(),i.cesiumObject.applyViewerParameters(r),l.show=!0};let y=!1;const g=()=>{y=!0,l.show=!1,l.removeAll()},v=()=>{if(y){const{viewer:P}=o,_=P.scene;i.cesiumObject.canvasResize(_.context),y=!1,m(),l.show=!0}},w=()=>{const{viewer:P}=o,_=P.scene,E=_.camera;if(Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.latRange)&&Cesium.defined(e.viewerParameters.lonRange))r.lonRange=lt(e.viewerParameters.lonRange),r.latRange=lt(e.viewerParameters.latRange);else{const x=E.computeViewRectangle(_.globe.ellipsoid),T=P6(x);r.lonRange.x=T.lon.min,r.lonRange.y=T.lon.max,r.latRange.x=T.lat.min,r.latRange.y=T.lat.max}const S=Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.pixelSize)?e.viewerParameters.pixelSize:E.getPixelSize(s,_.drawingBufferWidth,_.drawingBufferHeight);S>0&&(r.pixelSize=S)},C=(P,_)=>{const E=c.closest(P,_);if(Cesium.defined(E))return[e.data.U.array[E],e.data.V.array[E]]};return a.onUnmounted(()=>{d.forEach(P=>P()),d=[]}),Object.assign(i.proxy,{getNearestUV:C}),()=>{var P;return a.createCommentVNode(ne(((P=i.proxy)==null?void 0:P.$options.name)||"v-if"))}}});const ag={...Se,name:{type:String,default:"__vc__overlay__dynamic__"},startTime:{type:[Object,String,Date]},stopTime:{type:[Object,String,Date]},currentTime:{type:[Object,String,Date]},clockRange:{type:Number,default:0},clockStep:{type:Number,default:1},shouldAnimate:{type:Boolean,default:!0},canAnimate:{type:Boolean,default:!0},multiplier:{type:Number,default:1},dynamicOverlays:{type:Array,default:()=>[]},defaultInterval:{type:Number,default:3},stopArrivedFlag:{type:String,default:"time"},positionPrecision:{type:Number,default:1e-7},timePrecision:{type:Number,default:.01}},F6={...ye,"update:currentTime":e=>!0,"update:shouldAnimate":e=>!0,"update:canAnimate":e=>!0,"update:clockRange":e=>!0,"update:clockStep":e=>!0,"update:multiplier":e=>!0,"update:startTime":e=>!0,"update:stopTime":e=>!0,onStop:e=>!0,stopArrived:(e,t)=>!0};var sg=a.defineComponent({name:"VcOverlayDynamic",props:ag,emits:F6,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="VcOverlayDynamic",i.cesiumEvents=[];const n=Le(e,t,i);if(n===void 0)return;const{$services:o}=n,r=a.ref([]),s=a.ref({}),{emit:l}=t,c=a.ref(null),u=a.ref(null);let d=[];d.push(a.watch(()=>e.show,g=>{const v=i.cesiumObject;v&&(v.show=g)})),d.push(a.watch(()=>e.name,g=>{const v=i.cesiumObject;v&&(v.name=g)})),d.push(a.watch(()=>e.startTime,g=>{const{viewer:v}=o;Cesium.defined(v)&&g&&(v.clock.startTime=on(g))})),d.push(a.watch(()=>e.stopTime,g=>{const{viewer:v}=o;Cesium.defined(v)&&g&&(v.clock.stopTime=on(g))})),d.push(a.watch(()=>e.currentTime,g=>{const{viewer:v}=o;Cesium.defined(v)&&g&&(v.clock.currentTime=on(g))})),d.push(a.watch(()=>e.multiplier,g=>{const{viewer:v}=o;Cesium.defined(v)&&(v.clock.multiplier=g)})),d.push(a.watch(()=>e.clockStep,g=>{const{viewer:v}=o;Cesium.defined(v)&&(v.clock.clockStep=g)})),d.push(a.watch(()=>e.clockRange,g=>{const{viewer:v}=o;Cesium.defined(v)&&(v.clock.clockRange=g)})),d.push(a.watch(()=>e.canAnimate,g=>{const{viewer:v}=o;Cesium.defined(v)&&(v.clock.canAnimate=g)})),d.push(a.watch(()=>e.shouldAnimate,g=>{const{viewer:v}=o;Cesium.defined(v)&&(v.clock.shouldAnimate=g)})),d.push(a.watch(()=>tn(e.dynamicOverlays),(g,v)=>{if(!i.mounted)return;const w=i.cesiumObject;if(g.length===v.length){const C=[];for(let P=0;P<g.length;P++){const _=g[P],E=v[P],S=(x,T)=>{if(x!=="nodeTransformations"&&x!=="_definitionChanged")return T};JSON.stringify(_,S)!==JSON.stringify(E,S)&&C.push({newOptions:_,oldOptions:E})}C.forEach(P=>{const _=w.entities.getById(P.oldOptions.id);if(Cesium.defined(_)){if(P.oldOptions.id===P.newOptions.id)_&&Object.keys(P.newOptions).forEach(S=>{P.oldOptions[S]!==P.newOptions[S]&&(_[S]=n.transformProp(S,P.newOptions[S]))});else if(_){w.entities.remove(_),Ud(r.value,x=>x.id===_.id);const S=P.newOptions;h(w,[S])}const E=Ts(r.value,S=>S.id===_.id);if(Cesium.defined(E)){const S=P.oldOptions.sampledPositions,x=P.newOptions.sampledPositions,T=Pt(x,S,"id");Pt(S,x,"id").forEach(I=>{I.time&&E._sampledPosition.removeSample(I.time)}),T.forEach(I=>{I.time?E.addPosition(I.position,I.time):I.interval&&E.addPosition(I.position,I.interval||e.defaultInterval)})}}})}else{const C=Pt(g,v,"id"),P=Pt(v,g,"id"),_=[];for(let E=0;E<P.length;E++){const S=w.entities.getById(P[E].id);_.push(S)}_.forEach(E=>{w.entities.remove(E),Ud(r.value,S=>S.id===E.id)}),h(w,C)}},{deep:!0})),i.createCesiumObject=async()=>new Cesium.CustomDataSource(e.name);const m=g=>{let v=Ee(i,"update:currentTime");v&&l("update:currentTime",g.currentTime),v=Ee(i,"update:shouldAnimate"),v&&l("update:shouldAnimate",g.shouldAnimate),v=Ee(i,"update:canAnimate"),v&&l("update:canAnimate",g.canAnimate),v=Ee(i,"update:clockRange"),v&&l("update:clockRange",g.clockRange),v=Ee(i,"update:clockStep"),v&&l("update:clockStep",g.clockStep),v=Ee(i,"update:multiplier"),v&&l("update:multiplier",g.multiplier),v=Ee(i,"update:startTime"),v&&l("update:startTime",g.startTime),v=Ee(i,"update:stopTime"),v&&l("update:stopTime",g.stopTime),f(g);const{JulianDate:w,Cartesian3:C}=Cesium;if(v=Ee(i,"stopArrived"),v&&e.shouldAnimate)for(let P=0;P<r.value.length;P++){const _=r.value[P],E=_._sampledPosition.getValue(g.currentTime),S=e.dynamicOverlays[P];for(let x=0;x<S.sampledPositions.length;x++){const T=S.sampledPositions[x],V=Ze(T.position),I=on(T.time),R=C.equalsEpsilon(E,V,e.positionPrecision),L=w.equalsEpsilon(g.currentTime,I,e.timePrecision);let j=!1;switch(e.stopArrivedFlag){case"time":j=L;break;case"position":j=R;break;case"both":j=L&&R;break;case"or":j=L||R;break}if(j){l("stopArrived",_,T);break}}}},h=(g,v)=>{for(let w=0;w<v.length;w++){const C=v[w],P=n.transformProps(C),_=new Ba(P);r.value.push(_);const E=g.entities.add(_._entity);P.sampledPositions.forEach(S=>{S.time?_.addPosition(S.position,S.time):S.interval&&(S.time=_.addPosition(S.position,S.interval||e.defaultInterval))}),C.id!==E.id&&(C.id=E.id),nn(E,P,["id"])}};i.mount=async()=>{const{viewer:g}=o,v=i.cesiumObject;return v.show=e.show,h(v,e.dynamicOverlays),g.dataSources.add(v).then(()=>{s.value.startTime=g.clock.startTime,s.value.stopTime=g.clock.stopTime,s.value.currentTime=g.clock.currentTime,s.value.multiplier=g.clock.multiplier,s.value.clockStep=g.clock.clockStep,s.value.clockRange=g.clock.clockRange,s.value.canAnimate=g.clock.canAnimate,s.value.shouldAnimate=g.clock.shouldAnimate,e.startTime&&(g.clock.startTime=on(e.startTime)),e.stopTime&&(g.clock.stopTime=on(e.stopTime)),e.currentTime&&(g.clock.currentTime=on(e.currentTime)),g.clock.multiplier=e.multiplier,g.clock.clockStep=e.clockStep,g.clock.clockRange=e.clockRange,g.clock.canAnimate=!1,g.clock.shouldAnimate=e.shouldAnimate,g.clock.onTick.addEventListener(m);const w=Ee(i,"onStop");return w&&g.clock.onStop.addEventListener(w),!0})},i.unmount=async()=>{const{viewer:g}=o,v=i.cesiumObject;g.dataSources.remove(v,!0),g.clock.startTime=s.value.startTime,g.clock.stopTime=s.value.stopTime,g.clock.multiplier=s.value.multiplier,g.clock.clockStep=s.value.clockStep,g.clock.clockRange=s.value.clockRange,g.clock.canAnimate=s.value.canAnimate,g.clock.shouldAnimate=s.value.shouldAnimate,r.value.length=0,g.clock.onTick.removeEventListener(m);const w=Ee(i,"onStop");return w&&g.clock.onStop.removeEventListener(w),c.value&&(g.trackedEntity=void 0),!0};const f=g=>{var v,w,C,P,_,E,S,x;if(u.value&&c.value){const{viewer:T}=o;if(Cesium.JulianDate.greaterThan(g.currentTime,g.stopTime)){T.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),c.value=null;return}const V=c.value._sampledPosition.getValue(g.currentTime);let I=new Cesium.HeadingPitchRange;switch(u.value.mode){case"TP":I.heading=0,I.pitch=((w=(v=u.value)==null?void 0:v.offset)==null?void 0:w.pitch)||Cesium.Math.toRadians(-90),I.range=((P=(C=u.value)==null?void 0:C.offset)==null?void 0:P.range)||1e3;break;case"FP":{const R=Cesium.JulianDate.addSeconds(g.currentTime,.016666666666666666,new Cesium.JulianDate),L=c.value._sampledPosition.getValue(R)||V;I.heading=Cesium.Math.toRadians(im(V,L)),I.pitch=(((E=(_=u.value)==null?void 0:_.offset)==null?void 0:E.pitch)||Cesium.Math.toRadians(-45))+nm(V,L),I.range=((x=(S=u.value)==null?void 0:S.offset)==null?void 0:x.range)||500;break}case"CUSTOM":I=tm(u.value.offset)}T.camera.lookAt(V,I)}},p=(g,v)=>{var w;const{viewer:C}=o;if(g=g||{mode:"FREE"},g.mode==="FREE"){C.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),c.value&&(C.trackedEntity=void 0,c.value=null,u.value=null);return}v instanceof Ba?c.value=v:typeof v=="string"||typeof v=="number"?c.value=Ts(r.value,P=>P.id===v):r.value.length&&(c.value=r.value[0]),C.trackedEntity=a.toRaw(c.value._entity),g.mode==="TRACKED"?(((w=g==null?void 0:g.viewFrom)==null?void 0:w.length)&&(C.trackedEntity.viewFrom=new Cesium.Cartesian3(g.viewFrom[0],g.viewFrom[1],g.viewFrom[2])),u.value=null):u.value=g},y=(g,v)=>{const{viewer:w}=o;c.value&&(w.trackedEntity=void 0,c.value=null);let C;return Array.isArray(v)&&v.length?v[0]instanceof Ba?C=v.map(P=>a.toRaw(P._entity)):C=v.map(P=>a.toRaw(Ts(r.value,_=>_.id===P)._entity)):C=i.cesiumObject,w.zoomTo(C,Cesium.defined(g)?tm(g):void 0)};return a.onUnmounted(()=>{d.forEach(g=>g()),d=[]}),Object.assign(i.proxy,{getOverlays:()=>r.value,trackOverlay:p,zoomToOverlay:y}),()=>{var g;return a.createCommentVNode(ne(((g=i.proxy)==null?void 0:g.$options.name)||""))}}});[Op,Yp,Kp,rg,sg].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const gn=Op,lg=Yp,cg=Kp,ug=rg,dg=sg,mg={...aa,...sa,...Se,...et,...Ti,...Oi,billboards:{type:Array,default:()=>[]}};var hg=a.defineComponent({name:"VcCollectionBillboard",props:mg,emits:fi,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="BillboardCollection";const n=Bn(e,t,i);let o=[];o.push(a.watch(()=>tn(e.billboards),(s,l)=>{if(!i.mounted)return;const c=i.cesiumObject;if(s.length===l.length){const u=[];for(let d=0;d<s.length;d++){const m=s[d],h=l[d];JSON.stringify(m)!==JSON.stringify(h)&&u.push({newOptions:m,oldOptions:h})}u.forEach(d=>{const m=c._billboards.find(h=>h.id===d.oldOptions.id);m&&Object.keys(d.newOptions).forEach(h=>{d.oldOptions[h]!==d.newOptions[h]&&(m[h]=n==null?void 0:n.transformProp(h,d.newOptions[h]))})})}else{const u=Pt(s,l,"id"),d=Pt(l,s,"id"),m=[];for(let h=0;h<d.length;h++){const f=c._billboards.find(p=>p.id===d[h].id);f&&m.push(f)}m.forEach(h=>{c.remove(h)}),r(c,u)}},{deep:!0})),i.alreadyListening.push("billboards");const r=(s,l)=>{for(let c=0;c<l.length;c++){const u=l[c];u.id=Cesium.defined(u.id)?u.id:Cesium.createGuid();const d=n==null?void 0:n.transformProps(u),m=s.add(d);nn(m,d)}};return i.createCesiumObject=async()=>{const s=n==null?void 0:n.transformProps(e),l=new Cesium.BillboardCollection(s);return r(l,e.billboards),l},a.onUnmounted(()=>{o.forEach(s=>s()),o=[]}),()=>{var s,l;return t.slots.default?a.h("i",{class:ne(((s=i.proxy)==null?void 0:s.$options.name)||""),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(((l=i.proxy)==null?void 0:l.$options.name)||""))}}});const fg={...zs,...zi,...En,...at,...Ro,...It,...zt,...Lo,...an,...Br,...Hn,...Bo,...On,...$i,...Mn,...Sn,...Se,...jr,...xn,...jo,...yi,...et};var pg=a.defineComponent({name:"VcBillboard",props:fg,emits:fi,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="Billboard",Ln(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const gg={brightness:{type:Number,default:1},...zi,maximumSize:{type:Object,watcherOptions:{cesiumObjectBuilder:Ze}},...On,scale:{type:Object,watcherOptions:{cesiumObjectBuilder:lt}},...Se,slice:{type:Number,default:-1}};var Ga=a.defineComponent({name:"VcCumulusCloud",props:gg,emits:fi,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="CumulusCloud",Ln(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const vg={...Se,noiseDetail:{type:Number,default:16},noiseOffset:{type:Object},debugBillboards:{type:Boolean,default:!1},debugEllipsoids:{type:Boolean,default:!1},clouds:{type:Array,default:()=>[]}};var yg=a.defineComponent({name:"VcCollectionCloud",props:vg,emits:ye,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="CloudCollection";const o=Bn(e,t,n);if(o===void 0)return;n.alreadyListening.push("clouds");let r=[];r.push(a.watch(()=>tn(e.clouds),(c,u)=>{if(!n.mounted)return;const d=n.cesiumObject;if(c.length===u.length){const m=[];for(let h=0;h<c.length;h++){const f=c[h],p=u[h];JSON.stringify(f)!==JSON.stringify(p)&&m.push({newOptions:f,oldOptions:p})}m.forEach(h=>{const f=d._clouds.find(p=>p.id===h.oldOptions.id);f&&Object.keys(h.newOptions).forEach(p=>{h.oldOptions[p]!==h.newOptions[p]&&(f[p]=o.transformProp(p,h.newOptions[p]))})})}else{const m=Pt(c,u,"id"),h=Pt(u,c,"id"),f=[];for(let p=0;p<h.length;p++){const y=d._clouds.find(g=>g.id===h[p].id);y&&f.push(y)}f.forEach(p=>{d.remove(p)}),s(d,m)}},{deep:!0}));const s=(c,u)=>{for(let d=0;d<u.length;d++){const m=u[d];m.id=Cesium.defined(m.id)?m.id:Cesium.createGuid();const h=o.transformProps(m,Ga.props),f=c.add(h);nn(f,h)}};n.createCesiumObject=async()=>{const c=o.transformProps(e,Ga.props),u=new Cesium.CloudCollection(c);return s(u,e.clouds),u},a.onUnmounted(()=>{r.forEach(c=>c()),r=[]});const l=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>t.slots.default?a.h("i",{class:ne(l),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(l))}});const Cg={...Ti,...Oi,...aa,...sa,...Se,...et,labels:{type:Array,default:()=>[]}};var bg=a.defineComponent({name:"VcCollectionLabel",props:Cg,emits:fi,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="LabelCollection";const o=Bn(e,t,n);if(o===void 0)return;n.alreadyListening.push("labels");let r=[];r.push(a.watch(()=>tn(e.labels),(c,u)=>{if(!n.mounted)return;const d=n.cesiumObject;if(c.length===u.length){const m=[];for(let h=0;h<c.length;h++){const f=c[h],p=u[h];JSON.stringify(f)!==JSON.stringify(p)&&m.push({newOptions:f,oldOptions:p})}m.forEach(h=>{const f=d._labels.find(p=>p.id===h.oldOptions.id);f&&Object.keys(h.newOptions).forEach(p=>{h.oldOptions[p]!==h.newOptions[p]&&(f[p]=o.transformProp(p,h.newOptions[p]))})})}else{const m=Pt(c,u,"id"),h=Pt(u,c,"id"),f=[];for(let p=0;p<h.length;p++){const y=d._labels.find(g=>g.id===h[p].id);y&&f.push(y)}f.forEach(p=>{d.remove(p)}),s(d,m)}},{deep:!0}));const s=(c,u)=>{for(let d=0;d<u.length;d++){const m=u[d];m.id=Cesium.defined(m.id)?m.id:Cesium.createGuid();const h=o.transformProps(m),f=c.add(h);nn(f,h)}};n.createCesiumObject=async()=>{const c=o.transformProps(e),u=new Cesium.LabelCollection(c);return s(u,e.labels),u},a.onUnmounted(()=>{r.forEach(c=>c()),r=[]});const l=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>t.slots.default?a.h("i",{class:ne(l),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(l))}});const wg={...Ws,...qs,...En,...at,...Ro,...Zs,...Gs,...zt,...Lo,...an,...$t,...Gt,...Hn,...Bo,...On,...Mn,...Sn,...Se,...Hs,...Us,...$s,totalScale:{type:Number,default:1},...xn,...jo,...et};var _g=a.defineComponent({name:"VcLabel",props:wg,emits:fi,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="Label",Ln(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Pg={...Ti,...Oi,...sa,...Se,...et,points:{type:Array,default:()=>[]}};var Og=a.defineComponent({name:"VcCollectionPoint",props:Pg,emits:fi,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="PointPrimitiveCollection";const n=Bn(e,t,i);if(n===void 0)return;i.alreadyListening.push("points");let o=[];o.push(a.watch(()=>tn(e.points),(s,l)=>{if(!i.mounted)return;const c=i.cesiumObject;if(s.length===l.length){const u=[];for(let d=0;d<s.length;d++){const m=s[d],h=l[d];JSON.stringify(m)!==JSON.stringify(h)&&u.push({newOptions:m,oldOptions:h})}u.forEach(d=>{const m=c._pointPrimitives.find(h=>h&&h.id===d.oldOptions.id);m&&Object.keys(d.newOptions).forEach(h=>{d.oldOptions[h]!==d.newOptions[h]&&(m[h]=n.transformProp(h,d.newOptions[h]))})})}else{const u=Pt(s,l,"id"),d=Pt(l,s,"id"),m=[];for(let h=0;h<d.length;h++){const f=c._pointPrimitives.find(p=>p.id===d[h].id);f&&m.push(f)}m.forEach(h=>{c.remove(h)}),r(c,u)}},{deep:!0}));const r=(s,l)=>{for(let c=0;c<l.length;c++){const u=l[c];u.id=Cesium.defined(u.id)?u.id:Cesium.createGuid();const d=n.transformProps(u),m=s.add(d);nn(m,d)}};return i.createCesiumObject=async()=>{const s=n.transformProps(e),l=new Cesium.PointPrimitiveCollection(s);return r(l,e.points),l},a.onUnmounted(()=>{o.forEach(s=>s()),o=[]}),()=>{var s,l;return t.slots.default?a.h("i",{class:ne(((s=i.proxy)==null?void 0:s.$options.name)||""),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(((l=i.proxy)==null?void 0:l.$options.name)||""))}}});const Eg={...zi,...En,...at,...an,...$t,...Gt,...rl,...On,...Sn,...Se,...xn,...et};var Mg=a.defineComponent({name:"VcPoint",props:Eg,emits:fi,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="PointPrimitive",Ln(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const V6={...Ti,...Oi,...Se,...et,polylines:{type:Array,default:()=>[]}};var Sg=a.defineComponent({name:"VcCollectionPolyline",props:V6,emits:fi,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="PolylineCollection";const o=Bn(e,t,n);if(o===void 0)return;n.alreadyListening.push("polylines");let r=[];r.push(a.watch(()=>tn(e.polylines),(c,u)=>{if(!n.mounted)return;const d=n.cesiumObject;if(c.length===u.length){const m=[];for(let h=0;h<c.length;h++){const f=c[h],p=u[h];JSON.stringify(f)!==JSON.stringify(p)&&m.push({newOptions:f,oldOptions:p})}m.forEach(h=>{const f=d._polylines.find(p=>p.id===h.oldOptions.id);f&&Object.keys(h.newOptions).forEach(p=>{h.oldOptions[p]!==h.newOptions[p]&&(f[p]=o.transformProp(p,h.newOptions[p]))})})}else{const m=Pt(c,u,"id"),h=Pt(u,c,"id"),f=[];for(let p=0;p<h.length;p++){const y=d._polylines.find(g=>g.id===h[p].id);y&&f.push(y)}f.forEach(p=>{d.remove(p)}),s(d,m)}},{deep:!0}));const s=(c,u)=>{for(let d=0;d<u.length;d++){const m=u[d];m.id=Cesium.defined(m.id)?m.id:Cesium.createGuid();const h=o.transformProps(m),f=c.add(h);nn(f,h)}};n.createCesiumObject=async()=>{const c=o.transformProps(e),u=new Cesium.PolylineCollection(c);return s(u,e.polylines),u},a.onUnmounted(()=>{r.forEach(c=>c()),r=[]});const l=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>t.slots.default?a.h("i",{class:ne(l),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(l))}});const xg={...at,...an,...yl,...Xt,...Yt,...Se,...yi,...et};var Tg=a.defineComponent({name:"VcPolyline",props:xg,emits:fi,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="Polyline",Ln(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Ag={...Se,destroyPrimitives:{type:Boolean,default:!0},...et,polygons:{type:Array,default:()=>[]}};var Ig=a.defineComponent({name:"VcCollectionPrimitive",props:Ag,emits:fi,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="PrimitiveCollection";const o=Bn(e,t,n);if(o===void 0)return;n.alreadyListening.push("polygons");let r=[];r.push(a.watch(()=>tn(e.polygons),(c,u)=>{if(!n.mounted)return;const d=n.cesiumObject;if(c.length===u.length){const m=[];for(let h=0;h<c.length;h++){const f=c[h],p=u[h];JSON.stringify(f)!==JSON.stringify(p)&&m.push({newOptions:f,oldOptions:p})}m.forEach(h=>{const f=d._primitives.find(p=>p._id===h.oldOptions.id);f&&Object.keys(h.newOptions).forEach(p=>{h.oldOptions[p]!==h.newOptions[p]&&(f[p]=o.transformProp(p,h.newOptions[p]))})})}else{const m=Pt(c,u,"id"),h=Pt(u,c,"id"),f=[];for(let p=0;p<h.length;p++){const y=d._primitives.find(g=>g.id===h[p].id);y&&f.push(y)}f.forEach(p=>{d.remove(p)}),s(d,m)}},{deep:!0}));const s=(c,u)=>{for(let d=0;d<u.length;d++){const m=u[d];m.id=Cesium.defined(m.id)?m.id:Cesium.createGuid();const h=o.transformProps(m),f=new Fc(h);f._vcParent=c,nn(f,h),c.add(f)}};n.createCesiumObject=async()=>{const c=o.transformProps(e),u=new Cesium.PrimitiveCollection(c);return s(u,e.polygons),u},a.onUnmounted(()=>{r.forEach(c=>c()),r=[]});const l=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>t.slots.default?a.h("i",{class:ne(l),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(l))}});const Dg={...Yt,...Rn,...Yn,...vl,...Se,...an,...wi,...Vo,...Ie,...In,...Dn,...et};var Rg=a.defineComponent({name:"VcPolygon",props:Dg,emits:fi,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="PolygonPrimitive";const n=Ln(e,t,i);if(n===void 0)return;let o=[];return o.push(a.watch(()=>e.clampToGround,r=>{const s=i.cesiumObject;s&&(s.clampToGround=r)})),o.push(a.watch(()=>e.positions,r=>{const s=i.cesiumObject;s&&(s.positions=ki(r))})),o.push(a.watch(()=>e.polygonHierarchy,r=>{const s=i.cesiumObject;s&&(s.polygonHierarchy=Ls(r))})),o.push(a.watch(()=>e.appearance,r=>{const s=i.cesiumObject;s&&(s.appearance=Lr.call(i,r))})),o.push(a.watch(()=>e.depthFailAppearance,r=>{const s=i.cesiumObject;s&&(s.depthFailAppearance=Lr.call(i,r))})),o.push(a.watch(()=>e.show,r=>{const s=i.cesiumObject;s&&(s.show=r)})),o.push(a.watch(()=>e.classificationType,r=>{const s=i.cesiumObject;s&&(s.classificationType=r)})),i.createCesiumObject=async()=>{const r=n.transformProps(e);return new Fc(r)},i.mount=async()=>{const r=n.$services.primitives,s=i.cesiumObject;return s._vcParent=r,r&&r.add(s)},i.unmount=async()=>{const r=n.$services.primitives,s=i.cesiumObject;return r&&!r.isDestroyed()&&r.remove(s)},a.onUnmounted(()=>{o.forEach(r=>r()),o=[]}),()=>{var r;return a.createCommentVNode(ne(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});[hg,yg,bg,Og,Sg,Ig,Ga,pg,_g,Mg,Tg,Rg].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const qc=hg,Lg=yg,fr=bg,pr=Og,Bg=Sg,yo=Ig,jg=pg,Fg=Ga,Vg=_g,Ng=Mg,kg=Tg,Ua=Rg,zg={geometry:Object,...Ti,...an,attributes:Object},N6={...ye,"update:geometry":e=>!0};var Ha=a.defineComponent({name:"VcGeometryInstance",props:zg,emits:N6,setup(e,t){const i=a.getCurrentInstance();i.renderByParent=!0,i.cesiumClass="GeometryInstance",i.cesiumEvents=[];const n=Le(e,t,i);if(n===void 0)return;const{emit:o}=t,r=a.ref(0);i.createCesiumObject=async()=>{const c=n.transformProps(e);return c.geometry||(c.geometry=new Cesium.Geometry({attributes:new Cesium.GeometryAttributes})),new Cesium.GeometryInstance(c)},i.mount=async()=>{var c;const u=Ct(i).proxy;u.__childCount!==void 0&&(r.value=u.__childCount.value||0,u.__childCount.value+=1);const d=i.cesiumObject;return(c=u.__updateGeometryInstances)==null||c.call(u,d,r.value),!0},i.unmount=async()=>{var c;const u=i.cesiumObject,d=Ct(i).proxy;return(c=d.__removeGeometryInstances)==null||c.call(d,u),!0};const s=c=>{if(Ee(i,"update:geometry"))o("update:geometry",c);else{const d=i.cesiumObject;d.geometry=c}return!0},l=()=>_n(n.getServices(),{get geometryInstance(){return i.cesiumObject}});return a.provide(Ji,l()),i.appContext.config.globalProperties.$VueCesium=l(),Object.assign(i.proxy,{__updateGeometry:s}),()=>{var c,u;return t.slots.default?a.h("i",{class:ne(((c=i.proxy)==null?void 0:c.$options.name)||""),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(((u=i.proxy)==null?void 0:u.$options.name)||"v-if"))}}});Ha.install=e=>{e.component(Ha.name,Ha)};const $g=Ha;var k6=$g;const Xi=$g,Gg={...Fr,...Dt};var Ug=a.defineComponent({name:"VcGeometryBox",props:Gg,emits:ye,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="BoxGeometry";const n=Fe(e,t,i);return i.createCesiumObject=async()=>{const o=n==null?void 0:n.transformProps(e);return Cesium.BoxGeometry.fromDimensions(o)},()=>{var o;return a.createCommentVNode(ne(((o=i.proxy)==null?void 0:o.$options.name)||""))}}});const Hg={...Fr};var Wg=a.defineComponent({name:"VcGeometryBoxOutline",props:Hg,emits:ye,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="BoxOutlineGeometry";const n=Fe(e,t,i);return i.createCesiumObject=async()=>{const o=n==null?void 0:n.transformProps(e);return Cesium.BoxOutlineGeometry.fromDimensions(o)},()=>{var o;return a.createCommentVNode(ne(((o=i.proxy)==null?void 0:o.$options.name)||"v-if"))}}});const qg={...Uo,...Ho,...Ie,...It,...Ke,...Dt,...Ut,...xi};var Zg=a.defineComponent({name:"VcGeometryCircle",props:qg,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="CircleGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const Xg={...Uo,...Ho,...Ie,...It,...Ke,...Ut,...qn};var Yg=a.defineComponent({name:"VcGeometryCircleOutline",props:Xg,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="CircleOutlineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const Qg={...Rn,...Ie,...Dt,...xi};var Kg=a.defineComponent({name:"VcGeometryPolygonCoplanar",props:Qg,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="CoplanarPolygonGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const Jg={...Rn};var e0=a.defineComponent({name:"VcGeometryPolygonCoplanarOutline",props:Jg,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="CoplanarPolygonOutlineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const t0={...Yt,...yi,...Ie,...Ke,...It,...Ut,...Dt,...Tn};var i0=a.defineComponent({name:"VcGeometryCorridor",props:t0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="CorridorGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const n0={...Yt,...yi,...Ie,...Ke,...It,...Ut,...Tn};var o0=a.defineComponent({name:"VcGeometryCorridorOutline",props:n0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="CorridorOutlineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const r0={...Vr,...Nr,...kr,...zr,...Dt};var a0=a.defineComponent({name:"VcGeometryCylinder",props:r0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="CylinderGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const s0={...Vr,...Nr,...kr,...zr,...qn};var l0=a.defineComponent({name:"VcGeometryCylinderOutline",props:s0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="CylinderOutlineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const c0={...Uo,...$r,...Gr,...Ie,...It,...Ut,...$i,...xi,...Ke,...Dt};var u0=a.defineComponent({name:"VcGeometryEllipse",props:c0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="EllipseGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const d0={...Uo,...$r,...Gr,...Ie,...It,...Ut,...$i,...xi,...Ke,...qn};var m0=a.defineComponent({name:"VcGeometryEllipseOutline",props:d0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="EllipseOutlineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const h0={...Ur,...Hr,...Wr,...qr,...Zr,...Xr,...Zn,...Xn,...Dt};var f0=a.defineComponent({name:"VcGeometryEllipsoid",props:h0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="EllipsoidGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const z6={...Ur,...Hr,...Wr,...qr,...Zr,...Xr,...Zn,...Xn,...Yr};var p0=a.defineComponent({name:"VcGeometryEllipsoidOutline",props:z6,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="EllipsoidOutlineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const g0={...bl,...wl,...ks,...Dt};var v0=a.defineComponent({name:"VcGeometryFrustum",props:g0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="FrustumGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const y0={...bl,...wl,...ks};var C0=a.defineComponent({name:"VcGeometryFrustumOutline",props:y0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="FrustumOutlineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const b0={...Yt,...yi,...Ke,...yl,...rn};var w0=a.defineComponent({name:"VcGeometryGroundPolyline",props:b0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="GroundPolylineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const _0={...Dt};var P0=a.defineComponent({name:"VcGeometryPlane",props:_0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="PlaneGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}}),O0=a.defineComponent({name:"VcGeometryPlaneOutline",emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="PlaneOutlineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const E0={...Rn,...It,...Ut,...Dt,...xi,...Ie,...Ke,...Jr,...al,...sl,...rn};var M0=a.defineComponent({name:"VcGeometryPolygon",props:E0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="PolygonGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const S0={...Rn,...It,...Ut,...Dt,...Ie,...Ke,...Jr,...rn};var x0=a.defineComponent({name:"VcGeometryPolygonOutline",props:S0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="PolygonOutlineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const T0={...Yt,...yi,...xl,colorsPerVertex:{type:Boolean,default:!1},...rn,...Ke,...Dt,...Ie};var A0=a.defineComponent({name:"VcGeometryPolyline",props:T0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="PolylineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const I0={...Pl,..._l,...Ie,...Ke,...Dt,...Tn};var D0=a.defineComponent({name:"VcGeometryPolylineVolume",props:I0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="PolylineVolumeGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const R0={...Pl,..._l,...Ie,...Ke,...Tn};var L0=a.defineComponent({name:"VcGeometryPolylineVolumeOutline",props:R0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="PolylineVolumeOutlineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const B0={...Ot,...Dt,...Ie,...Ke,...It,...$i,...xi,...Ut};var j0=a.defineComponent({name:"VcGeometryRectangle",props:B0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="RectangleGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const F0={...Ot,...Ie,...Ke,...It,...$i,...Ut};var V0=a.defineComponent({name:"VcGeometryRectangleOutline",props:F0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="RectangleOutlineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const N0={...Yt,...xl,colorsPerVertex:{type:Boolean,default:!1},...rn,...Ke,...Ie};var k0=a.defineComponent({name:"VcGeometrySimplePolyline",props:N0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="SimplePolylineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const z0={...Ho,...Zn,...Xn,...Dt};var $0=a.defineComponent({name:"VcGeometrySphere",props:z0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="SphereGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const G0={...Ho,...Zn,...Xn,...Yr};var U0=a.defineComponent({name:"VcGeometrySphereOutline",props:G0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="SphereOutlineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const H0={...Yt,...Ke,...ta,...ea,...Ie,...Dt};var W0=a.defineComponent({name:"VcGeometryWall",props:H0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="WallGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const q0={...Yt,...Ke,...ta,...ea,...Ie};var Z0=a.defineComponent({name:"VcGeometryWallOutline",props:q0,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="WallOutlineGeometry",Fe(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});[Ug,Wg,Zg,Yg,Kg,e0,i0,o0,a0,l0,u0,m0,f0,p0,v0,C0,w0,P0,O0,M0,x0,A0,D0,L0,j0,V0,k0,$0,U0,W0,Z0].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const X0=Ug,Y0=Wg,Q0=Zg,K0=Yg,J0=Kg,ev=e0,tv=i0,iv=o0,nv=a0,ov=l0,rv=u0,av=m0,sv=f0,Wa=p0,lv=v0,cv=C0,qa=w0,uv=P0,dv=O0,Zc=M0,mv=x0,Nn=A0,hv=D0,fv=L0,pv=j0,gv=V0,vv=k0,yv=$0,Cv=U0,bv=W0,wv=Z0;var $6={fragmentShader:String,uniforms:Object,textureScale:{type:Number,default:1},forcePowerOfTwo:{type:Boolean,default:!1},sampleMode:Number,pixelFormat:Number,pixelDatatype:Number,...Om,...Em,name:String};const _v=$6;var Xc=a.defineComponent({name:"VcPostProcessStage",props:_v,emits:ye,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="PostProcessStage",i.cesiumEvents=[];const n=Le(e,t,i);if(n===void 0)return;const{$services:o}=n;return i.mount=async()=>{const{postProcessStages:r}=o,s=r.add(i.cesiumObject);return r.contains(s)},i.unmount=async()=>{const{postProcessStages:r}=o;return r==null?void 0:r.remove(i.cesiumObject)},()=>{var r;return a.createCommentVNode(ne(((r=i.proxy)==null?void 0:r.$options.name)||""))}}}),G6=`
  uniform sampler2D colorTexture;
  uniform sampler2D depthTexture;
  varying vec2 v_textureCoordinates;
  uniform vec4 u_scanCenterEC;
  uniform vec3 u_scanPlaneNormalEC;
  uniform vec3 u_scanLineNormalEC;
  uniform float u_radius;
  uniform vec4 u_scanColor;
  vec4 toEye(in vec2 uv, in float depth)
  {
    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));
    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);
    posInCamera =posInCamera / posInCamera.w;
    return posInCamera;
  }
  bool isPointOnLineRight(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)
  {
    vec3 v01 = testPt - ptOnLine;
    normalize(v01);
    vec3 temp = cross(v01, lineNormal);
    float d = dot(temp, u_scanPlaneNormalEC);
    return d > 0.5;
  }
  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)
  {
    vec3 v01 = point -planeOrigin;
    float d = dot(planeNormal, v01) ;
    return (point - planeNormal * d);
  }
  float distancePointToLine(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)
  {
    vec3 tempPt = pointProjectOnPlane(lineNormal, ptOnLine, testPt);
    return length(tempPt - ptOnLine);
  }
  float getDepth(in vec4 depth)
  {
    float z_window = czm_unpackDepth(depth);
    z_window = czm_reverseLogDepth(z_window);
    float n_range = czm_depthRange.near;
    float f_range = czm_depthRange.far;
    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
  }
  void main()
  {
    gl_FragColor = texture2D(colorTexture, v_textureCoordinates);
    float depth = getDepth( texture2D(depthTexture, v_textureCoordinates));
    vec4 viewPos = toEye(v_textureCoordinates, depth);
    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);
    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);
    float twou_radius = u_radius * 2.0;
    if(dis < u_radius)
    {
      float f0 = 1.0 -abs(u_radius - dis) / u_radius;
      f0 = pow(f0, 64.0);
      vec3 lineEndPt = vec3(u_scanCenterEC.xyz) + u_scanLineNormalEC * u_radius;
      float f = 0.0;
      if(isPointOnLineRight(u_scanCenterEC.xyz, u_scanLineNormalEC.xyz, prjOnPlane.xyz))
      {
        float dis1= length(prjOnPlane.xyz - lineEndPt);
        f = abs(twou_radius -dis1) / twou_radius;
        f = pow(f, 3.0);
      }
      gl_FragColor = mix(gl_FragColor, u_scanColor, f + f0);
    }
  }
`;function U6(e){return{webgl:i=>{const{viewer:n}=e,o=Cesium.Cartographic.fromCartesian(i.position,n.scene.globe.ellipsoid),r=Cesium.Cartographic.toCartesian(o,n.scene.globe.ellipsoid),s=new Cesium.Cartesian4(r.x,r.y,r.z,1),l=new Cesium.Cartographic(o.longitude,o.latitude,o.height+500),c=Cesium.Cartographic.toCartesian(l,n.scene.globe.ellipsoid),u=new Cesium.Cartesian4(c.x,c.y,c.z,1),d=new Cesium.Cartographic(o.longitude+Cesium.Math.toRadians(.001),o.latitude,o.height),m=Cesium.Cartographic.toCartesian(d,n.scene.globe.ellipsoid),h=new Cesium.Cartesian4(m.x,m.y,m.z,1),f=new Cesium.Quaternion,p=new Cesium.Matrix3,y=new Date().getTime(),g=new Cesium.Cartesian4,v=new Cesium.Cartesian4,w=new Cesium.Cartesian4,C=new Cesium.Cartesian3,P=new Cesium.Cartesian3,_={u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,s,g)},u_scanPlaneNormalEC:function(){const E=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,s,g),S=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,u,v);return C.x=S.x-E.x,C.y=S.y-E.y,C.z=S.z-E.z,Cesium.Cartesian3.normalize(C,C),C},u_radius:i.radius,u_scanLineNormalEC:function(){const E=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,s,g),S=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,u,v),x=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,h,w);C.x=S.x-E.x,C.y=S.y-E.y,C.z=S.z-E.z,Cesium.Cartesian3.normalize(C,C),P.x=x.x-E.x,P.y=x.y-E.y,P.z=x.z-E.z;const T=(new Date().getTime()-y)%i.interval/i.interval;return Cesium.Quaternion.fromAxisAngle(C,T*Cesium.Math.PI*2,f),Cesium.Matrix3.fromQuaternion(f,p),Cesium.Matrix3.multiplyByVector(p,P,P),Cesium.Cartesian3.normalize(P,P),P},u_scanColor:i.color};return{shaderSource:G6,uniforms:_}}}}var H6=`
  uniform sampler2D colorTexture;
  uniform sampler2D depthTexture;
  varying vec2 v_textureCoordinates;
  uniform vec4 u_scanCenterEC;
  uniform vec3 u_scanPlaneNormalEC;
  uniform float u_radius;
  uniform vec4 u_scanColor;
  vec4 toEye(in vec2 uv, in float depth)
  {
    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));
    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);
    posInCamera =posInCamera / posInCamera.w;
    return posInCamera;
  }
  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)
  {
    vec3 v01 = point -planeOrigin;
    float d = dot(planeNormal, v01) ;
    return (point - planeNormal * d);
  }
  float getDepth(in vec4 depth)
  {
    float z_window = czm_unpackDepth(depth);
    z_window = czm_reverseLogDepth(z_window);
    float n_range = czm_depthRange.near;
    float f_range = czm_depthRange.far;
    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
  }
  void main()
  {
    gl_FragColor = texture2D(colorTexture, v_textureCoordinates);
    float depth = getDepth( texture2D(depthTexture, v_textureCoordinates));
    vec4 viewPos = toEye(v_textureCoordinates, depth);
    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);
    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);
    if(dis < u_radius)
    {
      float f = 1.0 -abs(u_radius - dis) / u_radius;
      f = pow(f, 4.0);
      gl_FragColor = mix(gl_FragColor, u_scanColor, f);
    }
  }
`;function W6(e){return{webgl:i=>{const{viewer:n}=e,o=Cesium.Cartographic.fromCartesian(i.position,n.scene.globe.ellipsoid),r=Cesium.Cartographic.toCartesian(o,n.scene.globe.ellipsoid),s=new Cesium.Cartesian4(r.x,r.y,r.z,1),l=new Cesium.Cartographic(o.longitude,o.latitude,o.height+500),c=Cesium.Cartographic.toCartesian(l,n.scene.globe.ellipsoid),u=new Cesium.Cartesian4(c.x,c.y,c.z,1),d=new Date().getTime(),m=new Cesium.Cartesian4,h=new Cesium.Cartesian4,f=new Cesium.Cartesian3,p={u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,s,m)},u_scanPlaneNormalEC:function(){const y=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,s,m),g=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,u,h);return f.x=g.x-y.x,f.y=g.y-y.y,f.z=g.z-y.z,Cesium.Cartesian3.normalize(f,f),f},u_radius:function(){return i.radius*((new Date().getTime()-d)%i.interval)/i.interval},u_scanColor:i.color};return{shaderSource:H6,uniforms:p}}}}const q6={position:[0,0],radius:1500,interval:3500,color:[0,0,0,255]},Pv={type:{type:String,default:"radar"},options:Object};var Ov=a.defineComponent({name:"VcPostProcessStageScan",props:Pv,emits:ye,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="VcPostProcessStageScan",i.cesiumEvents=[];const n=Le(e,t,i);if(n===void 0)return;const o=a.ref(""),r=a.ref(null),{$services:s}=n,l=U6(s),c=W6(s);let u=[];const d=a.computed(()=>Object.assign({},q6,e.options));return u.push(a.watch(()=>d,m=>{i.mounted&&i.proxy.reload()},{deep:!0})),i.createCesiumObject=async()=>{const m=n.transformProps(d.value);let h;return e.type==="radar"?h=l.webgl(m):e.type==="circle"&&(h=c.webgl(m)),o.value=h.shaderSource,r.value=h.uniforms,!0},a.onUnmounted(()=>{u.forEach(m=>m()),u=[]}),()=>a.h(Xc,{fragmentShader:o.value,uniforms:r.value})}});const Ev={postProcesses:{type:Array,default:()=>[]}};var Mv=a.defineComponent({name:"VcPostProcessStageCollection",props:Ev,emits:ye,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="PostProcessStageCollection",i.cesiumEvents=[];const n=Le(e,t,i);if(n===void 0)return;const{$services:o}=n,r=[];let s=[];return s.push(a.watch(()=>e.postProcesses,l=>{var c,u;i.mounted&&((u=(c=i.proxy).reload)==null||u.call(c))},{deep:!0})),i.createCesiumObject=async()=>r,i.mount=async()=>{const{postProcessStages:l}=o;return e.postProcesses.forEach(c=>{const u=n.transformProps(c);r.push(l.add(new Cesium.PostProcessStage(u)))}),!0},i.unmount=async()=>{const{postProcessStages:l}=o;return r.forEach(c=>{l.remove(c)}),r.length=0,!0},a.onUnmounted(()=>{s.forEach(l=>l()),s=[]}),()=>{var l,c;return t.slots.default?a.h("i",{class:ne(((l=i.proxy)==null?void 0:l.$options.name)||""),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(((c=i.proxy)==null?void 0:c.$options.name)||""))}}});[Xc,Ov,Mv].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const Yc=Xc,Sv=Ov,xv=Mv;function Qc(e,t,i,n,o){i.cesiumClass=n,i.cesiumEvents=[];const{t:r}=gt(),{emit:s}=t,l=ne(n).split("-");n==="VcMeasurementDistance"&&e.showComponentLines&&(l[2]="component-distance"),(n==="VcDrawingRegular"||n==="VcMeasurementRegular")&&(e.edge===4&&(l[2]="rectangle"),e.edge===360&&(l[2]="circle"));let c=l[2];l[3]&&(c=`${l[2]}-${l[3]}`);const u=a.ref(""),d=a.ref({drawingTipStart:e.drawtip.drawingTipStart||r(`${l[0]}.${l[1]}.${l[2]}.drawingTipStart`),drawingTipEnd:e.drawtip.drawingTipEnd||r(`${l[0]}.${l[1]}.${l[2]}.drawingTipEnd`),drawingTipEditing:e.drawtip.drawingTipEditing||r(`${l[0]}.${l[1]}.${l[2]}.drawingTipEditing`)}),m=a.ref(be.BeforeDraw),h=a.ref(!1),f=a.ref([0,0,0]),p=a.ref(!1),y=a.ref([0,0,0]),g=a.ref(null),v=a.ref(null),w=a.ref(null),C=a.ref(""),{registerTimeout:P,removeTimeout:_}=nh();return i.createCesiumObject=async()=>w,{drawingType:c,drawTip:u,drawTipOpts:d,drawStatus:m,canShowDrawTip:h,drawTipPosition:f,showEditor:p,editorPosition:y,mouseoverPoint:g,editingPoint:v,primitiveCollectionRef:w,editorType:C,onMouseoverPoints:j=>{var M,b;const{drawingHandlerActive:B,viewer:A}=o;e.editable&&m.value!==be.Drawing&&B&&(j.pickedFeature.primitive.pixelSize=((M=e.pointOpts)==null?void 0:M.pixelSize)*1.5,_(),P(()=>{g.value=j.pickedFeature.primitive,y.value=j.pickedFeature.primitive.position,p.value=!0,h.value=!1,f.value=[0,0,0]},(b=e.editorOpts)==null?void 0:b.delay)),s("mouseEvt",{type:j.type,name:c,target:j},A)},onMouseoutPoints:j=>{var M,b;const{viewer:B,selectedDrawingActionInstance:A}=o;e.editable&&(j.pickedFeature.primitive.pixelSize=((M=e.pointOpts)==null?void 0:M.pixelSize)*1,_(),P(()=>{y.value=[0,0,0],g.value=void 0,p.value=!1},(b=e.editorOpts)==null?void 0:b.hideDelay),A&&(h.value=!0)),s("mouseEvt",{type:j.type,name:c,target:j},B)},onMouseenterEditor:j=>{_()},onMouseleaveEditor:j=>{var M;_(),P(()=>{var b;y.value=[0,0,0],g.value.pixelSize=((b=e.pointOpts)==null?void 0:b.pixelSize)*1,g.value=void 0,p.value=!1},(M=e.editorOpts)==null?void 0:M.hideDelay)},onPrimitiveCollectionReady:j=>{j.cesiumObject._vcId=n},onVcCollectionPointReady:function(j){const{cesiumObject:M}=j,b=M.update;M.update=function(B){const A=B.commandList.length;b.call(this,B);const Z=B.commandList.length;for(let F=A;F<Z;++F)B.commandList[F].pass=Cesium.Pass.TRANSLUCENT,B.commandList[F].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1})}},onVcPrimitiveReady:j=>{if(e.disableDepthTest)return;const M=j.cesiumObject,b=M.update;M.update=function(B){const A=B.commandList.length;b.call(this,B);const Z=B.commandList.length;for(let F=A;F<Z;++F)B.commandList[F].pass===Cesium.Pass.TRANSLUCENT&&(B.commandList[F].pass=Cesium.Pass.OPAQUE,B.commandList[F].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND}))}},onVcCollectionLabelReady:j=>{if(e.disableDepthTest)return;const M=j.cesiumObject,b=M.update;M.update=function(B){const A=B.commandList.length;b.call(this,B);const Z=B.commandList.length;for(let F=A;F<Z;++F)B.commandList[F].pass=Cesium.Pass.OVERLAY,B.commandList[F].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND})}}}}function Yi(e,t,i,n){const o=a.getCurrentInstance(),r=Le(e,t,o);if(r===void 0)return;const{t:s}=gt(),l=r.$services,{emit:c}=t,u=a.ref({x:.01,y:.01,z:.01});let d,m;i==="VcAnalysisViewshed"&&(d=new Cesium.Camera(l.viewer.scene),d.frustum.near=1,d.frustum.far=400,d.frustum.fov=Cesium.Math.PI/3,d.frustum.aspectRatio=3,m=new Cesium.ShadowMap({context:l.viewer.scene.context,lightCamera:d,enabled:!0,isPointLight:!0,pointLightRadius:400,cascadesEnabled:!1,size:2048,softShadows:!0,normalOffset:!1,fromLightSource:!1}));const{drawingType:h,drawTip:f,drawTipOpts:p,drawStatus:y,canShowDrawTip:g,drawTipPosition:v,showEditor:w,editorPosition:C,mouseoverPoint:P,editingPoint:_,primitiveCollectionRef:E,editorType:S,onMouseoverPoints:x,onMouseoutPoints:T,onMouseenterEditor:V,onMouseleaveEditor:I,onPrimitiveCollectionReady:R,onVcCollectionPointReady:L,onVcCollectionLabelReady:j,onVcPrimitiveReady:M}=Qc(e,t,o,i,l),b=a.ref([]);e.preRenderDatas&&e.preRenderDatas.length&&e.preRenderDatas.forEach(U=>{const k={positions:ki(U),show:!0,drawStatus:be.AfterDraw,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};i==="VcMeasurementVertical"&&Object.assign(k,{draggingPlane:new Cesium.Plane(Cesium.Cartesian3.UNIT_X,0),surfaceNormal:new Cesium.Cartesian3}),b.value.push(k)});let B;const A=a.computed(()=>{const U=[],{Cartesian3:k,Cartographic:ee,Rectangle:X,createGuid:Q,defined:te,Math:le,Ray:se}=Cesium,{viewer:ue}=l;return b.value.forEach(ce=>{var fe,ge,pe,de,me,D,J,re,ae,ve,Pe,De,_e,Oe,ze,ht,Ue,$e,Ve;const Je=ce.positions[0],Tt=ce.positions[1];if(k.equals(Je,Tt))return;const Mi=[],Li=((fe=e.polylineOpts)==null?void 0:fe.arcType)===0?k.distance(Je,Tt):Vs(Je,Tt,l.viewer.scene.globe.ellipsoid),su=k.midpoint(Je,Tt,{}),Ka=im(Je,Tt),Ja=nm(Je,Tt);ce.points=ce.positions.map(We=>({position:We}));const Ge={...ce,distance:Li,heading:Ka,pitch:Ja},es=Object.assign({},e.labelOpts,Ge.labelOpts);if(i==="VcDrawingRectangle"||i==="VcMeasurementRectangle"){const We=ee.fromCartesian(Je,ue.scene.globe.ellipsoid),Te=ee.fromCartesian(Tt,ue.scene.globe.ellipsoid),yt=We.height;!e.clampToGround&&(Te.height=yt);const je=X.fromCartesianArray(ce.positions,ue.scene.globe.ellipsoid),ft=[je.west,je.north,yt,je.east,je.north,yt,je.east,je.south,yt,je.west,je.south,yt,je.west,je.north,yt],Me=k.fromRadiansArrayHeights(ft,ue.scene.globe.ellipsoid);Object.assign(Ge,{polygonPositions:Me,height:yt})}else if(i==="VcDrawingRegular"||i==="VcMeasurementRegular"){const We=ce.positions[0],Te=ce.positions[1],yt=u5(We,Te,ue.scene);if(!ii(yt)&&te(yt)){const je=[],ft=ee.fromCartesian(We,ue.scene.globe.ellipsoid),Me=ee.fromCartesian(Te,ue.scene.globe.ellipsoid);!e.clampToGround&&(Me.height=ft.height),je.push(ee.toCartesian(Me,ue.scene.globe.ellipsoid));for(let Ki=0;Ki<(e.edge||4)-1;Ki++){const Bi=d5(We,yt[0]+=Math.PI*2/(e.edge||4),Li,ue.scene.globe.ellipsoid);je.push(Bi)}Object.assign(Ge,{polygonPositions:je,height:ft.height})}}else if(i==="VcAnalysisViewshed"){const We=Ze(Je);d.position=We,d.frustum.near=.001*Li,d.frustum.far=Li;const Te=le.toRadians(e.ellipsoidOpts.horizontalViewAngle),yt=le.toRadians(e.ellipsoidOpts.verticalViewAngle),je=Ge.distance*Math.tan(Te/2)*2/(Li*Math.tan(yt/2)*2);d.frustum.fov=Te>yt?Te:yt,d.frustum.aspectRatio=je,d.setView({destination:We,orientation:{heading:le.toRadians(Ka||0),pitch:le.toRadians(Ja||0),roll:0}}),m._pointLightRadius=Li,ue.scene.shadowMap=m}else if(i==="VcAnalysisSightline")if(e.sightlineType==="segment"){const We=[];We.push(Je);const Te=[];E.value.cesiumObject._primitives.forEach(Me=>{Me instanceof Cesium.PointPrimitiveCollection&&Te.push(...Me._pointPrimitives),Me instanceof Cesium.Primitive&&Te.push(Me)});const je=om(Je,Tt,l.viewer,Te);te(je)&&We.push(je),We.push(Tt);let ft=0;for(let Me=0;Me<We.length-1;Me++){const Ki=k.distance(We[Me],We[Me+1]);ft=ft+Ki}Object.assign(Ge,{positions:We,distance:ft})}else e.sightlineType==="circle";else Mi.push({position:su,id:Q(),text:nt.distanceToString(Li,(ge=e.measureUnits)==null?void 0:ge.distanceUnits,e.locale,(pe=e.decimals)==null?void 0:pe.distance),...es});if(Ge.polygonPositions&&Ge.polygonPositions.length){const We=Object.assign({},e.labelsOpts,Ge.labelsOpts),Te=Ge.polygonPositions.slice();e.loop&&Te.length>2&&Te.push(Te[0]);for(let je=0;je<Te.length-1;je++){let ft=0;if(((de=e.polylineOpts)==null?void 0:de.arcType)===0?ft=Vs(Te[je],Te[je+1],l.viewer.scene.globe.ellipsoid):ft=k.distance(Te[je],Te[je+1]),ft>0&&Te.length>2&&e.showDistanceLabel&&Mi.push({text:nt.distanceToString(ft,(me=e.measureUnits)==null?void 0:me.distanceUnits,e.locale,(D=e.decimals)==null?void 0:D.distance),position:k.midpoint(Te[je],Te[je+1],{}),id:Q(),...We}),Te.length>2&&e.showAngleLabel&&(je>0||e.loop)){const Me=Te[je===0?Te.length-2:je-1],Ki=Te[je],Bi=Te[je+1],lu=k.subtract(Me,Ki,{}),vn=k.subtract(Bi,Ki,{});let Po=0;k.ZERO.equals(lu)||k.ZERO.equals(vn)||(Po=k.angleBetween(lu,vn)),Mi.push({text:nt.angleToString(Po,(J=e.measureUnits)==null?void 0:J.angleUnits,e.locale,(re=e.decimals)==null?void 0:re.angle),position:Ki,id:Q(),...We})}}const yt=em(Te);Mi.push({text:nt.areaToString(yt,(ae=e.measureUnits)==null?void 0:ae.areaUnits,e.locale,(ve=e.decimals)==null?void 0:ve.area),position:ce.positions[0],id:Q(),...es})}e.showComponentLines&&(Object.assign(Ge,{xyPolylinePositions:[new k,new k,new k],xyBoxPositions:[new k,new k,new k],xDistance:0,yDistance:0,xAngle:0,yAngle:0}),F(Ge),Mi.push({position:Ge.xLabelPosition,id:Q(),text:nt.distanceToString(Ge.xDistance||0,(Pe=e.measureUnits)==null?void 0:Pe.distanceUnits,e.locale,(De=e.decimals)==null?void 0:De.distance),...e.xLabelOpts}),Mi.push({position:Ge.yLabelPosition,id:Q(),text:nt.distanceToString(Ge.yDistance||0,(_e=e.measureUnits)==null?void 0:_e.distanceUnits,e.locale,(Oe=e.decimals)==null?void 0:Oe.distance),...e.yLabelOpts}),Mi.push({position:Ge.xAnglePosition,id:Q(),text:nt.angleToString(Ge.xAngle||0,(ze=e.measureUnits)==null?void 0:ze.angleUnits,e.locale,(ht=e.decimals)==null?void 0:ht.angle),...e.xAngleLabelOpts}),Mi.push({position:Ge.yAnglePosition,id:Q(),text:nt.angleToString(Ge.yAngle||0,(Ue=e.measureUnits)==null?void 0:Ue.angleUnits,e.locale,($e=e.decimals)==null?void 0:$e.angle),...e.yAngleLabelOpts})),Object.assign(Ge,{labels:Mi}),Ge.positionsDegreesArray=Ge.positions.map(We=>{const Te=Cesium.Cartographic.fromCartesian(We,ue.scene.globe.ellipsoid);return[le.toDegrees(Te.longitude),le.toDegrees(Te.latitude),Te.height]}),((Ve=Ge==null?void 0:Ge.polygonPositions)==null?void 0:Ve.length)&&(Ge.polygonPositionsDegreesArray=Ge.polygonPositions.map(We=>{const Te=Cesium.Cartographic.fromCartesian(We,ue.scene.globe.ellipsoid);return[le.toDegrees(Te.longitude),le.toDegrees(Te.latitude),Te.height]})),U.push(Ge)}),U});o.createCesiumObject=async()=>E,o.mount=async()=>{const{viewer:U}=l;return e.autoUpdateLabelPosition&&(i==="VcMeasurementDistance"&&U.scene.preRender.addEventListener(N),(i==="VcMeasurementRegular"||i==="VcMeasurementRectangle")&&U.scene.preRender.addEventListener($)),!0},o.unmount=async()=>{const{viewer:U}=l;return e.autoUpdateLabelPosition&&(i==="VcMeasurementDistance"&&U.scene.preRender.removeEventListener(N),(i==="VcMeasurementRegular"||i==="VcMeasurementRectangle")&&U.scene.preRender.removeEventListener($)),!0};const Z=(U,k)=>{const{defined:ee,SceneMode:X,Cartesian3:Q,IntersectionTests:te,Plane:le,SceneTransforms:se,Ray:ue}=Cesium,{viewer:ce}=l,fe=ce.scene,ge=fe.camera,pe=ge.direction,de=fe.frameState.mapProjection.ellipsoid,me=U.positions,D=me[0];let J=D,re=me[1],ae=U.draggingPlane,ve=U.surfaceNormal,Pe=ve;if(fe.mode===X.COLUMBUS_VIEW){Pe=Q.UNIT_X;const Oe=de.cartesianToCartographic(D,{});J=fe.mapProjection.project(Oe,{}),Q.fromElements(J.z,J.x,J.y,J)}let De=Q.cross(Pe,pe,{});De=Q.cross(Pe,De,De),De=Q.normalize(De,De),ae=le.fromPointNormal(J,De,ae);const _e=ge.getPickRay(k,new ue);if(re=te.rayPlane(_e,ae,{}),ee(re)){if(fe.mode===X.COLUMBUS_VIEW){re=Q.fromElements(re.y,re.z,re.x,re);const ze=fe.mapProjection.unproject(re,{});re=de.cartographicToCartesian(ze,re)}se.wgs84ToWindowCoordinates(fe,me[0],{}).y<k.y&&(ve=Q.negate(ve,{}));let Oe=Q.subtract(re,D,{});return Oe=Q.projectVector(Oe,ve,Oe),re=Q.add(D,Oe,re),re}},F=U=>{const{Cartesian3:k,Math:ee,defined:X}=Cesium,{viewer:Q}=l,te=Q.scene.frameState.mapProjection.ellipsoid,le=U.positions[0],se=U.positions[1],ue=te.cartesianToCartographic(le,{});if(!X(ue))return;const ce=te.cartesianToCartographic(se,{}),fe=ue.height,ge=ce.height;let pe,de,me,D;fe<ge?(pe=le,de=se,D=ge,me=fe):(pe=se,de=le,D=fe,me=ge);const J=U.xyPolylinePositions;if(J===void 0)return;J[0]=pe,J[2]=de;let re=te.geodeticSurfaceNormal(pe,{});re=k.multiplyByScalar(re,D-me,re);const ae=k.add(pe,re,J[1]);if(!(k.equalsEpsilon(ae,de,ee.EPSILON10)&&k.equalsEpsilon(ae,pe,ee.EPSILON10))){let ve=k.subtract(de,ae,{}),Pe=k.subtract(pe,ae,{});const De=Math.min(k.magnitude(ve),k.magnitude(Pe)),_e=15<De?.15*De:.25*De;ve=k.normalize(ve,ve),Pe=k.normalize(Pe,Pe),ve=k.multiplyByScalar(ve,_e,ve),Pe=k.multiplyByScalar(Pe,_e,Pe);const Oe=U.xyBoxPositions;if(Oe===void 0)return;k.add(ae,ve,Oe[0]),k.add(Oe[0],Pe,Oe[1]),k.add(ae,Pe,Oe[2]),U.xLabelPosition=k.midpoint(ae,de,{}),U.yLabelPosition=k.midpoint(pe,ae,{}),U.xAnglePosition=de,U.yAnglePosition=pe;const ze=k.subtract(ae,de,{}),ht=k.subtract(ae,pe,{});let Ue=k.subtract(de,pe,{});U.yAngle=k.angleBetween(ht,Ue),Ue=k.negate(Ue,Ue),U.xAngle=k.angleBetween(ze,Ue),U.xDistance=k.magnitude(ze),U.yDistance=k.magnitude(ht)}},$=()=>{A.value.forEach((U,k)=>{var ee;const X=U.polygonPositions;if(!(X.length<2)){const{defined:Q,SceneTransforms:te,Cartesian2:le,HorizontalOrigin:se}=Cesium,{viewer:ue}=l,ce=ue.scene;let fe=U.positions[0];const ge=te.wgs84ToWindowCoordinates(ce,fe,{});let pe=Q(ge)?le.clone(ge,{}):le.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),de=pe.y;const J=((ee=E.value)==null?void 0:ee.cesiumObject)._primitives.filter(ae=>ae instanceof Cesium.LabelCollection)[k]._labels,re=J[J.length-1];for(let ae=1;ae<X.length;ae++){const ve=te.wgs84ToWindowCoordinates(ce,X[ae],{});if(Q(ve)){const Pe=(pe.y-ve.y)/(ve.x-pe.x),De=J[ae-1];De&&De!==re&&(De.horizontalOrigin=0<Pe?se.LEFT:se.RIGHT),ve.y<de&&(de=ve.y,fe=X[ae]),pe=le.clone(ve,pe)}U.drawStatus===be.AfterDraw&&(re.position=fe)}}})},N=()=>{A.value.forEach((U,k)=>{var ee,X,Q;const{defined:te,SceneTransforms:le,HorizontalOrigin:se}=Cesium,{viewer:ue}=l,ce=ue.scene,fe=(ee=E.value)==null?void 0:ee.cesiumObject,ge=U.positions,pe=ge[0],de=ge[1],me=le.wgs84ToWindowCoordinates(ce,pe,{}),D=le.wgs84ToWindowCoordinates(ce,de,{});if(te(me)&&te(D)){const J=fe._primitives.filter(re=>re instanceof Cesium.LabelCollection);if(J.length){const re=J[k].get(0);let ae,ve,Pe,De;e.showComponentLines&&(ae=J[k].get(2),ve=J[k].get(3),Pe=lt((X=e.yLabelOpts)==null?void 0:X.pixelOffset),De=lt((Q=e.xAngleLabelOpts)==null?void 0:Q.pixelOffset)),(me.y-D.y)/(D.x-me.x)>0?(!ii(ae)&&!ii(Pe)&&(Pe.x=-9,ae.pixelOffset=Pe,ae.horizontalOrigin=se.RIGHT),!ii(ve)&&!ii(De)&&(De.x=12,ve.pixelOffset=De,ve.horizontalOrigin=se.LEFT),re.horizontalOrigin=se.LEFT):(!ii(ae)&&!ii(Pe)&&(Pe.x=9,ae.pixelOffset=Pe,ae.horizontalOrigin=se.LEFT),!ii(ve)&&!ii(De)&&(De.x=-12,ve.pixelOffset=De,ve.horizontalOrigin=se.RIGHT),re.horizontalOrigin=se.RIGHT)}}})},z=(U,k)=>{const{defined:ee,defaultValue:X,Cartesian3:Q}=Cesium,{viewer:te}=l,le=te.scene,se=U.positions;se[0]=k;const ue=le.frameState.mapProjection.ellipsoid,ce=ue.cartesianToCartographic(k,{}),fe=le.globe;ce.height=ee(fe)?X(fe.getHeight(ce),0):0,se[1]=ue.cartographicToCartesian(ce,{}),U.distance=Q.distance(se[0],se[1]),U.labelPosition=Q.midpoint(se[0],se[1],{})},G=()=>{const{Cartesian3:U,Plane:k}=Cesium,ee={positions:[new U,new U],show:!1,drawStatus:be.BeforeDraw,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};i==="VcAnalysisViewshed"&&q(),i==="VcMeasurementVertical"&&Object.assign(ee,{draggingPlane:new k(U.UNIT_X,0),surfaceNormal:new U}),b.value.push(ee),y.value=be.BeforeDraw,g.value=!0,f.value=p.value.drawingTipStart},H=(U=!0)=>{U&&y.value===be.Drawing&&b.value.pop();const k=_.value?_.value._vcPolylineIndx:b.value.length-1,ee=b.value[k];ee&&(ee.drawStatus=be.AfterDraw),y.value=be.AfterDraw,g.value=!1,v.value=[0,0,0]},oe=(U,k)=>{var ee;const{viewer:X,drawingFabInstance:Q,selectedDrawingActionInstance:te,getWorldPosition:le}=l,se=Q==null?void 0:Q.proxy;if(k.button===2&&k.ctrl){const J=se.getDrawingActionInstance(h);se.toggleAction(J),a.nextTick(()=>{c("drawEvt",{name:h,finished:!0,windowPoistion:U,type:"cancel"},X)});return}y.value===be.AfterDraw&&G();const ue=_.value?_.value._vcPolylineIndx:b.value.length-1,ce=b.value[ue],fe=ce.positions;if(k.button===2&&_.value){se.editingActionName=void 0,ce.positions[_.value._index]=B,y.value=be.AfterDraw,ce.drawStatus=be.AfterDraw,_.value=void 0,f.value=p.value.drawingTipStart,i==="VcMeasurementHeight"&&z(ce,B),a.nextTick(()=>{c("drawEvt",Object.assign({name:h,index:ue,renderDatas:b,finished:!0,windowPoistion:U,type:"cancel"},A.value[ue]),X)});return}if(k.button!==0)return;const{defined:ge}=Cesium;let pe="new",de,me=!1;const D=X.scene;if(y.value===be.BeforeDraw){const J=le(D,U,{});if(!ge(J))return;if(fe[0]=J,fe[1]=J,ce.show=!0,y.value=be.Drawing,ce.drawStatus=be.Drawing,f.value=p.value.drawingTipEnd,de=J,me=!1,i==="VcMeasurementVertical"){const re=D.frameState.mapProjection.ellipsoid;ce.surfaceNormal=re.geodeticSurfaceNormal(J,ce.surfaceNormal)}i==="VcMeasurementHeight"&&(z(ce,J),me=!0,ce.drawStatus=be.AfterDraw,y.value=be.AfterDraw,f.value=p.value.drawingTipStart,e.mode===1&&se.toggleAction(te))}else{if(ce.drawStatus=be.AfterDraw,y.value=be.AfterDraw,_.value){if(Mt().hasTouch===!0){const J=le(D,U,{});ge(J)&&(ce.positions.splice(_.value._index,1,J),_.value.pixelSize=((ee=e.pointOpts)==null?void 0:ee.pixelSize)*1)}_.value=void 0,se.editingActionName=void 0,g.value=!1,v.value=[0,0,0],pe=S.value,te&&(f.value=p.value.drawingTipStart,g.value=!0)}else{if(Mt().hasTouch===!0){const J=le(D,U,{});if(ge(J)){const re=ce.positions;re[1]=J}}e.mode===1&&se.toggleAction(te)}me=!0,de=ce.positions[1]}a.nextTick(()=>{c("drawEvt",Object.assign({index:ue,renderDatas:b,name:h,finished:me,position:de,windowPoistion:U,type:pe},A.value[ue]),X)})},Y=U=>{const{viewer:k,getWorldPosition:ee}=l,X=k.scene,Q=ee(X,U,{}),{defined:te,Cartographic:le}=Cesium;if(!te(Q)||(v.value=Q,y.value!==be.Drawing)||i==="VcMeasurementVertical"&&X.mode===Cesium.SceneMode.SCENE2D)return;const se=_.value?_.value._vcPolylineIndx:b.value.length-1,ue=b.value[se];if(i==="VcMeasurementVertical"){const ce=Z(ue,U);if(!ii(ce)&&te(ce)){const fe=ue.positions;fe[_.value?_.value._index:1]=ce}}else if(i==="VcMeasurementHeight")z(ue,Q);else if(i==="VcDrawingRectangle"||i==="VcDrawingRegular"||i==="VcMeasurementRegular"||i==="VcMeasurementRectangle"){const ce=ue.positions,fe=ce[0],ge=le.fromCartesian(fe,k.scene.globe.ellipsoid),pe=le.fromCartesian(Q,k.scene.globe.ellipsoid);!e.clampToGround&&(pe.height=ge.height),ce[_.value?_.value._index:1]=le.toCartesian(pe,k.scene.globe.ellipsoid)}else if(i==="VcAnalysisSightline"){const ce=ue.positions;if(_.value){const fe=_.value._index>0?1:0;ce[fe]=Q}else ce[1]=Q}else{const ce=ue.positions.slice();ce[_.value?_.value._index:1]=Q,ue.positions=ce}a.nextTick(()=>{c("drawEvt",Object.assign({index:se,renderDatas:b,name:h,finished:!1,position:ue.positions[1],windowPoistion:U,type:_.value?S:"new"},A.value[se]),k)})},W=U=>{var k,ee,X;if(C.value=[0,0,0],w.value=!1,!e.editable)return;S.value=U;const{viewer:Q,drawingFabInstance:te}=l;if(U==="move"){f.value=p.value.drawingTipEditing,y.value=be.Drawing,_.value=P.value,B=b.value[_.value._vcPolylineIndx].positions[_.value._index],g.value=!0;const le=te==null?void 0:te.proxy;le.editingActionName=h}else if(U==="remove"){const le=P.value._vcPolylineIndx;b.value[le].positions.splice(P.value._index,1)}else if(U==="removeAll"){const le=P.value._vcPolylineIndx;b.value.splice(le,1)}else{const le=P.value._vcPolylineIndx,se=b.value[le];(X=(ee=(k=e.editorOpts)==null?void 0:k[U])==null?void 0:ee.callback)==null||X.call(ee,le,se)}c("editorEvt",{type:U,renderDatas:b,name:h,index:P.value._vcPolylineIndx},Q)},q=()=>{b.value=[],H()},K={computedRenderDatas:A,renderDatas:b,startNew:G,stop:H,clear:q,handleMouseClick:oe,handleMouseMove:Y};return Object.assign(o.proxy,K),()=>{var U,k,ee;const{ColorGeometryInstanceAttribute:X,createGuid:Q,Math:te,Matrix4:le,Cartesian3:se,Transforms:ue,HeadingPitchRoll:ce,PerInstanceColorAppearance:fe,Cartesian4:ge,Cartesian2:pe}=Cesium,de=[];if(A.value.forEach((me,D)=>{var J;const re=i==="VcDrawingRectangle"||i==="VcDrawingRegular"||i==="VcMeasurementRegular"||i==="VcMeasurementRectangle",ae=re?(J=me.polygonPositions)==null?void 0:J.slice():me.positions;re&&(ae==null||ae.push(ae[0]));const ve=Object.assign({},e.polylineOpts,me.polylineOpts);e.clampToGround&&delete ve.arcType;const Pe=Object.assign({},e.primitiveOpts,me.primitiveOpts);if((ae==null?void 0:ae.length)&&(ae==null?void 0:ae.length)>1&&(de.push(a.h(e.clampToGround?ka:Zi,{show:me.show&&Pe.show||e.editable||me.drawStatus===be.Drawing,...Pe,onReady:_e=>{var Oe;(Oe=Pe==null?void 0:Pe.onReady)==null||Oe.call(Pe,_e),_e.cesiumObject._vcPolylineIndex=D}},()=>a.h(Xi,{id:Q()},()=>a.h(e.clampToGround?qa:Nn,{positions:ae,...ve})))),i==="VcAnalysisViewshed")){const{viewer:_e}=l,Oe=le.fromTranslationQuaternionRotationScale(me.positions[0],ue.headingPitchRollQuaternion(me.positions[0],ce.fromDegrees(me.heading-e.ellipsoidOpts.horizontalViewAngle,me.pitch,0),_e.scene.globe.ellipsoid),new se(1,1,1)),ze=X.fromColor(e.ellipsoidOpts.color);de.push(a.h(Yc,{fragmentShader:n,uniforms:{shadowMap_textureCube:function(){return m.update(_e.scene.frameState),m._shadowMapTexture},shadowMap_matrix:function(){return m.update(_e.scene.frameState),m._shadowMapMatrix},shadowMap_lightPositionEC:function(){return m.update(_e.scene.frameState),m._lightPositionEC},shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness:function(){m.update(_e.scene.frameState);const Ue=m._pointBias;return ge.fromElements(Ue.normalOffsetScale,m._distance,m.maximumDistance,0,new ge)},shadowMap_texelSizeDepthBiasAndNormalShadingSmooth:function(){m.update(_e.scene.frameState);const Ue=m._pointBias,Ve=new pe;return Ve.x=1/m._textureSize.x,Ve.y=1/m._textureSize.y,ge.fromElements(Ve.x,Ve.y,Ue.depthBias,Ue.normalShadingSmooth,new ge)},camera_projection_matrix:d.frustum.projectionMatrix,camera_view_matrix:d.viewMatrix,vc_viewDistance:function(){return me.distance},vc_visibleAreaColor:e.visibleAreaColor||Cesium.Color.LIME,vc_invisibleAreaColor:e.invisibleAreaColor||Cesium.Color.RED}}));const ht={x:me.distance,y:me.distance,z:me.distance};de.push(a.h(Zi,{show:me.show&&e.ellipsoidOpts.show||e.editable||me.drawStatus===be.Drawing,enableMouseEvent:e.enableMouseEvent,appearance:new fe({flat:!0}),asynchronous:!1},()=>[a.h(Xi,{id:Q(),modelMatrix:Oe,attributes:{color:ze}},()=>a.h(Wa,{radii:ht,minimumClock:te.toRadians(-e.ellipsoidOpts.horizontalViewAngle/2),maximumClock:te.toRadians(e.ellipsoidOpts.horizontalViewAngle/2),minimumCone:te.toRadians(e.ellipsoidOpts.verticalViewAngle+7.75),maximumCone:te.toRadians(180-e.ellipsoidOpts.verticalViewAngle-7.75),subdivisions:256,stackPartitions:64,slicePartitions:64}))])),de.push(a.h(Zi,{show:me.show&&e.ellipsoidOpts.show||e.editable||me.drawStatus===be.Drawing,enableMouseEvent:e.enableMouseEvent,appearance:new fe({flat:!0}),asynchronous:!1},()=>a.h(Xi,{id:Q(),modelMatrix:Oe,attributes:{color:ze}},()=>a.h(Wa,{radii:ht,innerRadii:u.value,minimumClock:te.toRadians(-e.ellipsoidOpts.horizontalViewAngle/2),maximumClock:te.toRadians(e.ellipsoidOpts.horizontalViewAngle/2),minimumCone:te.toRadians(e.ellipsoidOpts.verticalViewAngle+7.75),maximumCone:te.toRadians(180-e.ellipsoidOpts.verticalViewAngle-7.75),subdivisions:128,stackPartitions:10,slicePartitions:8}))))}if(me.polygonPositions&&me.polygonPositions.length>2){const _e=Object.assign({},e==null?void 0:e.polygonOpts,me==null?void 0:me.polygonOpts);de.push(a.h(Ua,{positions:ae,show:me.show&&(_e==null?void 0:_e.show),..._e,onReady:Oe=>{var ze;M(Oe),(ze=_e==null?void 0:_e.onReady)==null||ze.call(_e,Oe),Oe.cesiumObject._vcPolylineIndex=D}}))}me.xyPolylinePositions&&me.xyPolylinePositions.length>1&&de.push(a.h(Zi,{show:me.show&&Pe||e.editable||me.drawStatus===be.Drawing,...Pe,onReady:_e=>{var Oe;(Oe=Pe==null?void 0:Pe.onReady)==null||Oe.call(Pe,_e),_e.cesiumObject._vcPolylineIndex=D}},()=>a.h(Xi,{id:Q()},()=>a.h(Nn,{positions:me.xyPolylinePositions,...ve})))),me.xyBoxPositions&&me.xyBoxPositions.length>1&&de.push(a.h(Zi,{show:me.show&&Pe||e.editable||me.drawStatus===be.Drawing,...Pe},()=>a.h(Xi,{id:Q()},()=>a.h(Nn,{positions:me.xyBoxPositions,...ve}))));const De=Object.assign({},e.pointOpts,me.pointOpts);de.push(a.h(pr,{enableMouseEvent:e.enableMouseEvent,show:me.show,points:me.points.map((_e,Oe)=>{const ze=_e.position,ht=Object.assign({},De,_e);return{position:ze,id:Q(),_vcPolylineIndx:D,...ht,show:((ht==null?void 0:ht.show)||e.editable||me.drawStatus===be.Drawing)&&(i==="VcAnalysisSightline"&&me.positions.length===3?Oe!==1:!0)}}),onMouseover:x,onMouseout:T,onReady:L})),i.includes("VcMeasurement")&&de.push(a.h(fr,{enableMouseEvent:e.enableMouseEvent,show:me.show,labels:me.labels,onReady:j}))}),((U=e.drawtip)==null?void 0:U.show)&&g.value){const{viewer:me}=l;de.push(a.h(gn,{position:v.value,pixelOffset:(k=e.drawtip)==null?void 0:k.pixelOffset,teleport:{to:me.container}},()=>a.h("div",{class:"vc-drawtip vc-tooltip--style"},f.value)))}if(w.value){const me=[];if(P.value){const J=e.editorOpts;for(const re in J)if(!Array.isArray(J[re])&&typeof J[re]!="number"){const ae={...J[re]};delete ae.color,me.push(a.h(Kt,{style:{color:J[re].color,background:J[re].background},...ae,onclick:W.bind(void 0,re)},()=>a.h(wt,{...J[re].tooltip},()=>{var ve;return a.h("strong",null,((ve=J[re].tooltip)==null?void 0:ve.tip)||s(`vc.measurement.editor.${re}`))})))}}const{viewer:D}=l;de.push(a.h(gn,{position:C.value,pixelOffset:(ee=e.editorOpts)==null?void 0:ee.pixelOffset,teleport:{to:D.container},onMouseenter:V,onMouseleave:I},()=>a.h("div",{class:"vc-editor"},me)))}return a.h(yo,{ref:E,show:e.show,onReady:R},()=>de)}}var Tv=a.defineComponent({name:"VcMeasurementDistance",props:{...Bt,showComponentLines:{type:Boolean,default:!1},measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,xLabelOpts:Object,xAngleLabelOpts:Object,yLabelOpts:Object,yAngleLabelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:ct,setup(e,t){return Yi(e,t,"VcMeasurementDistance")}});function Co(e,t,i){const n=a.getCurrentInstance(),o=Le(e,t,n);if(o===void 0)return;const{t:r}=gt(),s=o.$services,{emit:l}=t,{drawingType:c,drawTip:u,drawTipOpts:d,drawStatus:m,canShowDrawTip:h,drawTipPosition:f,showEditor:p,editorPosition:y,mouseoverPoint:g,editingPoint:v,primitiveCollectionRef:w,editorType:C,onMouseoverPoints:P,onMouseoutPoints:_,onMouseenterEditor:E,onMouseleaveEditor:S,onPrimitiveCollectionReady:x,onVcCollectionPointReady:T,onVcCollectionLabelReady:V,onVcPrimitiveReady:I}=Qc(e,t,n,i,s);let R,L;const j=10,M=a.ref([]);e.preRenderDatas&&e.preRenderDatas.length&&e.preRenderDatas.forEach(W=>{const q={show:!0,positions:ki(W),tempPositions:[],drawStatus:be.AfterDraw,loop:e.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};M.value.push(q)});const b=a.computed(()=>{const{Cartesian3:W,createGuid:q,defined:K,Math:U}=Cesium,k=[],{viewer:ee}=s;return M.value.forEach((X,Q)=>{var te,le,se,ue,ce,fe,ge,pe,de;const me=[],D=[],J=[];let re=0;const ae=[];X.points=X.positions.map(Pe=>({position:Pe}));const ve=X.positions.slice();if(i==="VcAnalysisSightline"){const Pe=ve.shift();Pe&&ve.forEach(_e=>{const Oe=[];Oe.push(Pe);const ze=[];w.value.cesiumObject._primitives.forEach(Je=>{Je instanceof Cesium.PointPrimitiveCollection&&ze.push(...Je._pointPrimitives),Je instanceof Cesium.Primitive&&ze.push(Je)});const Ue=om(Pe,_e,s.viewer,ze);K(Ue)&&Oe.push(Ue),Oe.push(_e);let $e=0;const Ve=[];for(let Je=0;Je<Oe.length-1;Je++){const Tt=W.distance(Oe[Je],Oe[Je+1]);Ve.push(Tt),$e=$e+Tt}k.push({...X,positions:Oe,distance:$e,distances:Ve})})}else{e.loop&&ve.length>2&&ve.push(ve[0]);for(let _e=0;_e<ve.length-1;_e++){let Oe=0;((te=e.polylineOpts)==null?void 0:te.arcType)===0?Oe=Vs(ve[_e],ve[_e+1],s.viewer.scene.globe.ellipsoid):Oe=W.distance(ve[_e],ve[_e+1]),D.push(Oe),re=re+Oe;const ze=Object.assign({},e.labelsOpts,X.labelsOpts);if(Oe>0&&ve.length>2&&e.showDistanceLabel&&me.push({text:nt.distanceToString(Oe,(le=e.measureUnits)==null?void 0:le.distanceUnits,e.locale,(se=e.decimals)==null?void 0:se.distance),position:W.midpoint(ve[_e],ve[_e+1],{}),id:q(),...ze}),ve.length>2&&e.showAngleLabel&&(_e>0||e.loop)){const ht=ve[_e===0?ve.length-2:_e-1],Ue=ve[_e],$e=ve[_e+1],Ve=W.subtract(ht,Ue,{}),Je=W.subtract($e,Ue,{});let Tt=0;W.ZERO.equals(Ve)||W.ZERO.equals(Je)||(Tt=W.angleBetween(Ve,Je)),J.push(Tt),me.push({text:nt.angleToString(Tt,(ue=e.measureUnits)==null?void 0:ue.angleUnits,e.locale,(ce=e.decimals)==null?void 0:ce.angle),position:Ue,id:q(),...ze})}e.showDashedLine&&(ae.push({positions:[ve[_e],B(ve[_e])]}),_e===ve.length-2&&ae.push({positions:[ve[_e+1],B(ve[_e+1])]}))}const Pe=em(ve),De=Object.assign({},e.labelOpts,X.labelOpts);i.includes("Area")?me.push({text:nt.areaToString(Pe,(fe=e.measureUnits)==null?void 0:fe.areaUnits,e.locale,(ge=e.decimals)==null?void 0:ge.area),position:ve[ve.length-1],id:q(),...De}):me.push({text:nt.distanceToString(re,(pe=e.measureUnits)==null?void 0:pe.distanceUnits,e.locale,(de=e.decimals)==null?void 0:de.distance),position:ve[ve.length-1],id:q(),...De}),X.positionsDegreesArray=X.positions.map(_e=>{const Oe=Cesium.Cartographic.fromCartesian(_e,ee.scene.globe.ellipsoid);return[U.toDegrees(Oe.longitude),U.toDegrees(Oe.latitude),Oe.height]}),k.push({...X,labels:me,distance:re,distances:D,area:Pe,angles:J,dashedLines:ae})}}),k});n.mount=async()=>{const{viewer:W}=s;return e.autoUpdateLabelPosition&&i.includes("VcMeasurement")&&W.scene.preRender.addEventListener(A),!0},n.unmount=async()=>{const{viewer:W}=s;return e.autoUpdateLabelPosition&&i.includes("VcMeasurement")&&W.scene.preRender.removeEventListener(A),!0};const B=W=>{const{defined:q,defaultValue:K}=Cesium,{viewer:U}=s,k=U.scene,ee=k.globe,X=k.frameState.mapProjection.ellipsoid,Q=X.cartesianToCartographic(W);return Q.height=q(ee)?K(ee.getHeight(Q),0):0,X.cartographicToCartesian(Q)},A=()=>{b.value.forEach((W,q)=>{var K;const U=W.positions;if(!(U.length<2)){const{defined:k,SceneTransforms:ee,Cartesian2:X,HorizontalOrigin:Q}=Cesium,{viewer:te}=s,le=te.scene;let se=U[0];const ue=ee.wgs84ToWindowCoordinates(le,se,{});let ce=k(ue)?X.clone(ue,{}):X.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),fe=ce.y;const de=((K=w.value)==null?void 0:K.cesiumObject)._primitives.filter(D=>D instanceof Cesium.LabelCollection)[q]._labels,me=de[de.length-1];for(let D=1;D<U.length;D++){const J=ee.wgs84ToWindowCoordinates(le,U[D],{});if(k(J)){const re=(ce.y-J.y)/(J.x-ce.x);de[D-1]!==me&&(de[D-1].horizontalOrigin=0<re?Q.LEFT:Q.RIGHT),J.y<fe&&(fe=J.y,se=U[D]),ce=X.clone(J,ce)}W.drawStatus===be.AfterDraw&&(me.position=se)}}})},Z=()=>{const W={show:!1,positions:[],tempPositions:[],drawStatus:be.BeforeDraw,loop:e.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};if(i==="VcMeasurementHorizontal"){const{Cartesian3:q,Plane:K}=Cesium;Object.assign(W,{dashedLines:[],heightPlane:new K(q.UNIT_X,0),heightPlaneCV:new K(q.UNIT_X,0),height:0,firstMove:!1,tempNextPos:new q})}m.value=be.BeforeDraw,M.value.push(W),h.value=!0,u.value=d.value.drawingTipStart},F=(W=!0)=>{W&&m.value===be.Drawing&&M.value.pop();const q=v.value?v.value._vcPolylineIndex:M.value.length-1,K=M.value[q];K&&(K.positions=K.tempPositions,K.drawStatus=be.AfterDraw),m.value=be.AfterDraw,h.value=!1,f.value=[0,0,0]},$=(W,q)=>{var K;const{viewer:U,drawingFabInstance:k,getWorldPosition:ee,selectedDrawingActionInstance:X}=s,Q=k==null?void 0:k.proxy;if(q.button===2&&q.ctrl){const J=Q.getDrawingActionInstance(c);Q.toggleAction(J),a.nextTick(()=>{l("drawEvt",{name:c,finished:!0,windowPoistion:W,type:"cancel"},U)});return}m.value===be.AfterDraw&&Z();const{defined:te,Cartesian2:le,Plane:se,Cartesian3:ue}=Cesium,ce=v.value?v.value._vcPolylineIndex:M.value.length-1,fe=M.value[ce],ge=fe.tempPositions;if(q.button===2&&v.value){C.value==="insert"?fe.positions.splice(v.value._index,1):fe.positions[v.value._index]=L,m.value=be.AfterDraw,fe.drawStatus=be.AfterDraw,v.value=void 0,u.value=d.value.drawingTipStart,Q.editingActionName=void 0,h.value=te(X),a.nextTick(()=>{l("drawEvt",Object.assign({index:ce,name:c,renderDatas:M,finished:!0,windowPoistion:W,type:"cancel"},b.value[ce]),U)});return}if(R=R||new Cesium.Cartesian2(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),le.magnitude(le.subtract(R,W,{}))<j||(q.button===2&&m.value===be.Drawing&&ge.length>1&&(ge.pop(),N(W)),q.button!==0))return;const pe=U.scene,de=ee(pe,W,{});if(!te(de))return;let me=!1,D="new";if(i==="VcMeasurementHorizontal"){if(v.value)m.value=be.AfterDraw,v.value=void 0,me=!0,D=C.value,u.value=d.value.drawingTipStart;else if(ge.length===0){const J=pe.frameState.mapProjection.ellipsoid;ge.push(de),fe.positions=ge,fe.heightPlane=se.fromPointNormal(de,J.geodeticSurfaceNormal(de,{}),fe.heightPlane);const re=J.cartesianToCartographic(de,{}),ae=pe.mapProjection.project(re,{}),ve=ue.fromElements(ae.z,ae.x,ae.y,ae);fe.heightPlaneCV=se.fromPointNormal(ve,ue.UNIT_X,fe.heightPlaneCV),fe.height=re.height,fe.firstMove=!0,fe.drawStatus=be.Drawing,fe.show=!0,m.value=be.Drawing}else ge.push(fe.tempNextPos),fe.positions=ge,fe.firstMove=!0;u.value=d.value.drawingTipEnd}else{if(v.value){if(Mt().hasTouch===!0){const J=ee(pe,W,{});te(J)&&(fe.positions.splice(v.value._index,1,J),v.value.pixelSize=((K=e.pointOpts)==null?void 0:K.pixelSize)*1)}m.value=be.AfterDraw,v.value=void 0,me=!0,D=C.value,u.value=d.value.drawingTipStart}else ge.push(de),fe.positions=ge,fe.show=!0,fe.drawStatus=be.Drawing,m.value=be.Drawing,h.value=!0,u.value=d.value.drawingTipEnd;D!=="new"&&(Q.editingActionName=void 0,h.value=te(X))}le.clone(W,R),a.nextTick(()=>{l("drawEvt",Object.assign({index:ce,name:c,renderDatas:M,finished:me,position:i==="VcMeasurementHorizontal"?fe.positions[fe.positions.length-1]:de,windowPoistion:W,type:D},b.value[ce]),U)})},N=(W,q)=>{const{viewer:K,getWorldPosition:U}=s,k=K.scene,ee=U(k,W,{}),{defined:X}=Cesium;if(!X(ee)||(f.value=ee,m.value!==be.Drawing))return;const Q=v.value?v.value._vcPolylineIndex:M.value.length-1,te=M.value[Q];let le="new";if(i==="VcMeasurementHorizontal"){const{SceneMode:se,IntersectionTests:ue,Cartesian3:ce}=Cesium,fe=k.frameState.mapProjection.ellipsoid,ge=te.positions,pe=k.camera.getPickRay(W);let de,me;if(k.mode===se.SCENE3D&&te.heightPlane)de=ue.rayPlane(pe,te.heightPlane);else if(k.mode===se.COLUMBUS_VIEW&&te.heightPlaneCV)de=ue.rayPlane(pe,te.heightPlaneCV),de=ce.fromElements(de.y,de.z,de.x,de),me=k.mapProjection.unproject(de),de=fe.cartographicToCartesian(me);else if(de=k.camera.pickEllipsoid(W,fe),X(de)){const D=fe.cartesianToCartographic(de);D.height=te.height||0,de=fe.cartographicToCartesian(D,de)}if(!X(de))return;if(!te.firstMove&&(q==null?void 0:q.shift)){const D=ge[ge.length-2],J=te.tempNextPos,re=ce.subtract(J,D,{});let ae=ce.subtract(de,D,{});ae=ce.projectVector(ae,re,ae),de=ce.add(D,ae,de)}if(v.value)te.positions.splice(v.value._index,1,de),le=C.value;else{const D=te.tempPositions.slice();D.push(de),te.positions=D,te.firstMove=!1,te.tempNextPos=Object.assign(de),u.value=d.value.drawingTipEnd}}else if(v.value)te.positions.splice(v.value._index,1,ee),le=C.value;else{const se=te.tempPositions.slice();se.push(ee),te.positions=se}a.nextTick(()=>{l("drawEvt",Object.assign({index:Q,name:c,renderDatas:M,finished:!1,position:i==="VcMeasurementHorizontal"?te.positions[te.positions.length-1]:ee,windowPoistion:W,type:le},b.value[Q]),K)})},z=W=>{const{drawingFabInstance:q,selectedDrawingActionInstance:K,viewer:U}=s;if(m.value===be.Drawing){const k=v.value?v.value._vcPolylineIndex:M.value.length-1,ee=M.value[k];F(!1),u.value=d.value.drawingTipStart,a.nextTick(()=>{l("drawEvt",Object.assign({index:k,name:c,renderDatas:M,finished:!0,position:ee.positions[ee.positions.length-1],windowPoistion:W,type:"new"},b.value[k]),U),e.mode===1&&(q==null?void 0:q.proxy).toggleAction(K)})}},G=()=>{let W=v.value._vcPolylineIndex,q=v.value._index;if(i==="VcAnalysisSightline")for(let K=0;K<M.value.length;K++){const U=M.value[K];for(let k=0;k<U.positions.length;k++){const ee=U.positions[k];v.value.position.equals(ee)&&(W=K,q=k)}}return[W,q]},H=W=>{var q,K,U;if(y.value=[0,0,0],p.value=!1,!e.editable)return;const{viewer:k,drawingFabInstance:ee}=s,X=ee==null?void 0:ee.proxy;if(C.value=W,W==="move"){u.value=d.value.drawingTipEditing,m.value=be.Drawing,v.value=g.value,h.value=!0;const Q=G();v.value._vcPolylineIndex=Q[0],v.value._index=Q[1],L=M.value[Q[0]].positions[Q[1]],X.editingActionName=c}else if(W==="insert"){const Q=g.value._vcPolylineIndex;M.value[Q].positions.splice(g.value._index,0,g.value.position),v.value=g.value,h.value=!0,m.value=be.Drawing,u.value=d.value.drawingTipEditing,X.editingActionName=c}else if(W==="remove"){const Q=g.value._vcPolylineIndex,te=M.value[Q];te.positions.length>2&&te.positions.splice(g.value._index,1)}else if(W==="removeAll"){const Q=g.value._vcPolylineIndex;M.value.splice(Q,1)}else{const Q=g.value._vcPolylineIndex,te=M.value[Q];(U=(K=(q=e.editorOpts)==null?void 0:q[W])==null?void 0:K.callback)==null||U.call(K,Q,te)}l("editorEvt",{type:W,renderDatas:M,name:c,index:g.value._vcPolylineIndex},k)},Y={computedRenderDatas:b,renderDatas:M,startNew:Z,stop:F,clear:()=>{M.value=[],F()},handleMouseClick:$,handleMouseMove:N,handleDoubleClick:z};return Object.assign(n.proxy,Y),()=>{var W,q;const{createGuid:K,Cartesian3:U}=Cesium,k=[],ee=[];if(b.value.forEach((X,Q)=>{var te,le;const se=X.positions.slice();if(se.length>1){X.loop&&se.push(se[0]);const ge=Object.assign({},e.polylineOpts,X.polylineOpts);e.clampToGround&&delete ge.arcType;const pe=Object.assign({},e.primitiveOpts,X.primitiveOpts);k.push(a.h(e.clampToGround?ka:Zi,{show:X.show&&pe.show||e.editable||X.drawStatus===be.Drawing,...pe,onReady:de=>{var me;(me=pe==null?void 0:pe.onReady)==null||me.call(pe,de),de.cesiumObject._vcPolylineIndex=Q}},()=>a.h(Xi,{id:K()},()=>a.h(e.clampToGround?qa:Nn,{positions:se,...ge}))))}const ue=Object.assign({},e.dashLineOpts,X.dashLineOpts),ce=Object.assign({},e.dashLinePrimitiveOpts,X.dashLinePrimitiveOpts);(te=X.dashedLines)==null||te.forEach(ge=>{k.push(a.h(Zi,{show:X.show&&e.dashLinePrimitiveOpts.show||e.editable||X.drawStatus===be.Drawing,...ce},()=>a.h(Xi,{id:K()},()=>a.h(Nn,{positions:ge.positions,...ue}))))});const fe=Object.assign({},e.pointOpts,X.pointOpts);if(k.push(a.h(pr,{enableMouseEvent:e.enableMouseEvent,show:X.show,points:X.points.map((ge,pe)=>{var de;const me=ge.position;let D=!1;for(let ae=0;ae<ee.length;ae++)U.equals(me,ee[ae])&&(D=!0);const J=(((de=e.pointOpts)==null?void 0:de.show)||e.editable||X.drawStatus===be.Drawing)&&(i==="VcAnalysisSightline"&&X.positions.length===3?pe!==1:!0)&&!D;i==="VcAnalysisSightline"&&ee.push(me);const re=Object.assign({},fe,ge);return{position:me,id:K(),_vcPolylineIndex:Q,show:J,...re}}),onMouseover:P,onMouseout:_,onReady:T})),i.includes("VcMeasurement")&&k.push(a.h(fr,{enableMouseEvent:e.enableMouseEvent,show:X.show,labels:X.labels,onReady:V})),se.length>2&&(i.includes("Polygon")||i.includes("Area"))){const ge=Object.assign({},e.polygonOpts,X.polygonOpts);k.push(a.h(Ua,{positions:se,clampToGround:e.clampToGround,show:X.show&&((le=e.polygonOpts)==null?void 0:le.show),...ge,onReady:pe=>{var de;I(pe),(de=ge==null?void 0:ge.onReady)==null||de.call(ge,pe),pe.cesiumObject._vcPolylineIndex=Q}}))}}),((W=e.drawtip)==null?void 0:W.show)&&h.value){const{viewer:X}=s;k.push(a.h(gn,{position:f.value,pixelOffset:e.drawtip.pixelOffset,teleport:{to:X.container}},()=>a.h("div",{class:"vc-drawtip vc-tooltip--style"},u.value)))}if(p.value){const X=[];if(g.value){const te=e.editorOpts;for(const le in te)if(!Array.isArray(te[le])&&typeof te[le]!="number"){const se={...te[le]};delete se.color,X.push(a.h(Kt,{style:{color:te[le].color,background:te[le].background},...se,onclick:H.bind("polyline",le)},()=>a.h(wt,{...te[le].tooltip},()=>{var ue;return a.h("strong",null,((ue=te[le].tooltip)==null?void 0:ue.tip)||r(`vc.drawing.editor.${le}`))})))}}const{viewer:Q}=s;k.push(a.h(gn,{position:y.value,pixelOffset:(q=e.editorOpts)==null?void 0:q.pixelOffset,teleport:{to:Q.container},onMouseenter:E,onMouseleave:S},()=>a.h("div",{class:"vc-editor"},X)))}return a.h(yo,{ref:w,show:e.show,onReady:x},()=>k)}}var Av=a.defineComponent({name:"VcMeasurementPolyline",props:{...Bt,polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean,measureUnits:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showAngleLabel:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean},emits:ct,setup(e,t){return Co(e,t,"VcMeasurementPolyline")}}),Iv=a.defineComponent({name:"VcMeasurementHorizontal",props:{...Bt,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,dashLineOpts:Object,dashLinePrimitiveOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showAngleLabel:Boolean,showDashedLine:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean},emits:ct,setup(e,t){return Co(e,t,"VcMeasurementHorizontal")}}),Dv=a.defineComponent({name:"VcMeasurementVertical",props:{...Bt,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:ct,setup(e,t){return Yi(e,t,"VcMeasurementVertical")}}),Rv=a.defineComponent({name:"VcMeasurementHeight",props:{...Bt,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:ct,setup(e,t){return Yi(e,t,"VcMeasurementHeight")}});function Kc(e,t,i){const n=a.getCurrentInstance(),o=Le(e,t,n);if(o===void 0)return;const{t:r}=gt(),s=o.$services,{emit:l}=t,{drawingType:c,drawTip:u,drawTipOpts:d,drawStatus:m,canShowDrawTip:h,drawTipPosition:f,showEditor:p,editorPosition:y,mouseoverPoint:g,editingPoint:v,primitiveCollectionRef:w,editorType:C,onMouseoverPoints:P,onMouseoutPoints:_,onMouseenterEditor:E,onMouseleaveEditor:S,onPrimitiveCollectionReady:x,onVcCollectionPointReady:T,onVcCollectionLabelReady:V}=Qc(e,t,n,i,s),I=a.ref([]);let R,L=[];i==="VcDrawingPin"&&e.billboardOpts.image===""&&(e.billboardOpts.image=Cesium.buildModuleUrl("Assets/Textures/pin.svg")),L.push(a.watch(()=>e.editable,G=>{const{drawingFabInstance:H,selectedDrawingActionInstance:oe}=s;G&&(oe==null?void 0:oe.name)===c&&(H==null?void 0:H.proxy).toggleAction(oe)}));const j=()=>{const{Cartesian3:G}=Cesium,H={drawStatus:be.Drawing,show:!1,position:new G,lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}};I.value.push(H),m.value=be.Drawing,h.value=!0,u.value=d.value.drawingTipStart},M=(G=!0)=>{G&&m.value===be.Drawing&&I.value.pop();const H=v.value?v.value._vcPolylineIndx:I.value.length-1,oe=I.value[H];oe&&(oe.drawStatus=be.AfterDraw),m.value=be.AfterDraw,h.value=!1,f.value=[0,0,0]},b=(G,H)=>{const{viewer:oe,drawingFabInstance:Y,getWorldPosition:W,selectedDrawingActionInstance:q}=s,K=Y==null?void 0:Y.proxy;if(H.button===2&&H.ctrl){const Q=K==null?void 0:K.getDrawingActionInstance(c);K==null||K.toggleAction(Q),a.nextTick(()=>{l("drawEvt",{name:c,finished:!0,windowPoistion:G,type:"cancel"},oe)});return}const U=v.value?v.value._vcPolylineIndx:I.value.length-1,k=I.value[U];if(H.button===2&&v.value){K.editingActionName=void 0,I.value[U]=R,m.value=be.AfterDraw,I.value[U].drawStatus=be.AfterDraw,v.value=void 0,u.value=d.value.drawingTipStart,a.nextTick(()=>{l("drawEvt",{name:c,index:U,renderDatas:I,finished:!0,windowPoistion:G,type:"cancel"},oe)});return}if(H.button!==0)return;const{defined:ee}=Cesium;let X="new";if(m.value===be.BeforeDraw){const Q=oe.scene,te=W(Q,G,{});if(!ee(te))return;k.position=te,k.show=!0,k.drawStatus=be.AfterDraw,m.value=be.AfterDraw,u.value=d.value.drawingTipStart,a.nextTick(()=>{l("drawEvt",{index:U,renderDatas:I,name:c,finished:!0,position:te,windowPoistion:G,type:X},oe)})}else{m.value=be.AfterDraw,k.drawStatus=be.AfterDraw,v.value?(v.value=void 0,K.editingActionName=void 0,h.value=!1,X=C.value):e.mode===1&&K.toggleAction(q);const Q=oe.scene;if(Mt().hasTouch===!0){const te=W(Q,G,{});ee(te)&&(k.position=te,k.show=!0)}q&&(u.value=d.value.drawingTipStart,h.value=!0),a.nextTick(()=>{l("drawEvt",{index:U,renderDatas:I,name:c,finished:!0,position:I.value[U].position,positionDegrees:I.value[U].positionDegrees,windowPoistion:G,type:X},oe)})}},B=G=>{const{viewer:H,getWorldPosition:oe}=s,Y=H.scene,{defined:W,SceneMode:q}=Cesium;if(Y.mode!==q.MORPHING){const K=oe(Y,G,{});if(!W(K)||(f.value=K,m.value===be.AfterDraw&&j(),m.value!==be.Drawing))return;const U=v.value?v.value._vcPolylineIndx:I.value.length-1,k=I.value[U];k.position=K;const ee=Cesium.Cartographic.fromCartesian(K,Y.globe.ellipsoid),X=[Cesium.Math.toDegrees(ee.longitude),Cesium.Math.toDegrees(ee.latitude),ee.height];k.positionDegrees=X,A(k,G);const Q=v.value?C.value:"new";a.nextTick(()=>{l("drawEvt",{index:U,renderDatas:I,name:c,finished:!1,position:K,positionDegrees:X,windowPoistion:G,type:Q},H)})}},A=(G,H)=>{const{viewer:oe}=s,Y=oe.scene,{defined:W,defaultValue:q,Math:K,SceneMode:U}=Cesium,ee=Y.frameState.mapProjection.ellipsoid.cartesianToCartographic(G.position,{}),X=Y.globe;let Q=W(X)?q(X.getHeight(ee),0):0;Q=e.heightReference===0?ee.height:ee.height-Q,K.equalsEpsilon(Q,0,K.EPSILON3)&&(Q=0);let te=0;Y.mode!==U.SCENE2D&&(H||(H=Y.cartesianToCanvasCoordinates(G.position,{})),te=Z(Y,H)),G.show=!0,G.lng=ee.longitude,G.lat=ee.latitude,G.height=Q,G.slope=te},Z=(G,H)=>{const{getWorldPosition:oe}=s,{defined:Y,Cartesian2:W,Cartesian3:q,Math:K}=Cesium,U=oe(G,H,{});if(Y(U)){const k=G.camera.position,ee=q.distance(U,k),X=[new q,new q,new q,new q,new q],Q=new q,te=new q;if(!(1e4<ee)){const le=X[0],se=X[1],ue=X[2],ce=X[3];let fe=G.frameState.mapProjection.ellipsoid.geodeticSurfaceNormal(U,Q);fe=q.negate(fe,fe);const ge=W.clone(H,X[0]);ge.x-=2,ge.y-=2;const pe=W.clone(H,X[1]);pe.x-=2,pe.y+=2;const de=W.clone(H,X[2]);de.x+=2,de.y+=2;const me=W.clone(H,X[3]);me.x+=2,me.y-=2;const D=oe(G,ge,le),J=oe(G,pe,se),re=oe(G,de,ue),ae=oe(G,me,ce);let ve,Pe,De,_e,Oe,ze,ht,Ue;Y(D)&&(ve=q.subtract(D,U,le),Pe=q.magnitude(ve)/ee<=.05?q.normalize(ve,le):void 0),Y(J)&&(De=q.subtract(J,U,se),_e=q.magnitude(De)/ee<=.05?q.normalize(De,se):void 0),Y(re)&&(Oe=q.subtract(re,U,ue),ze=q.magnitude(Oe)/ee<=.05?q.normalize(Oe,ue):void 0),Y(ae)&&(ht=q.subtract(ae,U,ce),Ue=q.magnitude(ht)/ee<=.05?q.normalize(ht,ce):void 0);let $e=q.clone(q.ZERO,te),Ve=X[4];if(Y(Pe)&&Y(_e)&&(Ve=q.normalize(q.cross(Pe,_e,Ve),Ve),$e=q.add($e,Ve,$e)),Y(_e)&&Y(ze)&&(Ve=q.normalize(q.cross(_e,ze,Ve),Ve),$e=q.add($e,Ve,$e)),Y(ze)&&Y(Ue)&&(Ve=q.normalize(q.cross(ze,Ue,Ve),Ve),$e=q.add($e,Ve,$e)),Y(Ue)&&Y(Pe)&&(Ve=q.normalize(q.cross(Ue,Pe,Ve),Ve),$e=q.add($e,Ve,$e)),!$e.equals(q.ZERO))return $e=q.normalize($e,$e),K.asinClamped(Math.abs(Math.sin(q.angleBetween($e,fe))))}}return 0},F=G=>{var H,oe,Y;if(y.value=[0,0,0],p.value=!1,!e.editable)return;C.value=G;const{viewer:W,drawingFabInstance:q}=s,K=q==null?void 0:q.proxy;if(G==="move")u.value=d.value.drawingTipEditing,m.value=be.Drawing,v.value=g.value,h.value=!0,R=Object.assign({},I.value[v.value._vcPolylineIndx]),K.editingActionName=c;else if(G==="remove"){const U=g.value._vcPolylineIndx;I.value.splice(U,1)}else{const U=g.value._vcPolylineIndx,k=I.value[U];(Y=(oe=(H=e.editorOpts)==null?void 0:H[G])==null?void 0:oe.callback)==null||Y.call(oe,U,k)}l("editorEvt",{type:G,name:c,renderDatas:I,index:g.value._vcPolylineIndx},W)},$=()=>{I.value=[],M()},N=G=>{var H,oe,Y,W,q,K,U,k;const{viewer:ee}=s,Q=ee.scene.frameState.mapProjection.ellipsoid.cartesianToCartographic(G.position,{});return Cesium.defined(Q)?`${r("vc.measurement.point.lng")}${nt.angleToString(Q.longitude,(H=e.measureUnits)==null?void 0:H.angleUnits,e.locale,(oe=e.decimals)==null?void 0:oe.lng)}
${r("vc.measurement.point.lat")}${nt.angleToString(Q.latitude,(Y=e.measureUnits)==null?void 0:Y.angleUnits,e.locale,(W=e.decimals)==null?void 0:W.lat)}
${r("vc.measurement.point.height")}${nt.distanceToString(G.height,(q=e.measureUnits)==null?void 0:q.distanceUnits,e.locale,(K=e.decimals)==null?void 0:K.height)}
${r("vc.measurement.point.slope")}${nt.angleToString(G.slope,(U=e.measureUnits)==null?void 0:U.slopeUnits,e.locale,(k=e.decimals)==null?void 0:k.slope)}`:""};if(e.preRenderDatas&&e.preRenderDatas.length){const{viewer:G}=s;e.preRenderDatas.forEach(H=>{const oe={drawStatus:be.AfterDraw,show:!0,position:Ze(H),lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}},Y=Cesium.Cartographic.fromCartesian(oe.position,G.scene.globe.ellipsoid);oe.positionDegrees=[Cesium.Math.toDegrees(Y.longitude),Cesium.Math.toDegrees(Y.latitude),Y.height],A(oe),I.value.push(oe)})}a.onUnmounted(()=>{L.forEach(G=>G()),L=[]});const z={renderDatas:I,startNew:j,stop:M,clear:$,handleMouseClick:b,handleMouseMove:B};return Object.assign(n.proxy,z),()=>{var G,H,oe;const{createGuid:Y}=Cesium,W=[],q=[],K=[],U=[];if(I.value.forEach((k,ee)=>{var X;const Q=Object.assign({},e.pointOpts,k.pointOpts);q.push({position:k.position,id:Y(),_vcPolylineIndx:ee,...Q,show:k.show&&((X=e.pointOpts)==null?void 0:X.show)||e.editable||k.drawStatus===be.Drawing});const te=Object.assign({},e.labelOpts,k.labelOpts);if(i.includes("VcMeasurement")&&K.push({position:k.position,id:Y(),text:N(k),...te}),i==="VcDrawingPin"){const le=Object.assign({},e.billboardOpts,k.billboardOpts);U.push({position:k.position,id:Y(),_vcPolylineIndx:ee,...le}),e.labelOpts.text&&K.push({position:k.position,id:Y(),...te})}}),W.push(a.h(pr,{enableMouseEvent:e.enableMouseEvent,points:q,onMouseover:P,onMouseout:_,onReady:T})),(i.includes("VcMeasurement")||i==="VcDrawingPin")&&W.push(a.h(fr,{enableMouseEvent:e.enableMouseEvent,labels:K,onReady:V})),i==="VcDrawingPin"&&W.push(a.h(qc,{enableMouseEvent:e.enableMouseEvent,billboards:U})),((G=e.drawtip)==null?void 0:G.show)&&h.value){const{viewer:k}=s;W.push(a.h(gn,{position:f.value,pixelOffset:(H=e.drawtip)==null?void 0:H.pixelOffset,teleport:{to:k.container}},()=>a.h("div",{class:"vc-drawtip vc-tooltip--style"},u.value)))}if(p.value){const k=[];if(g.value){const X=e.editorOpts;for(const Q in X)if(!Array.isArray(X[Q])&&typeof X[Q]!="number"){const te={...X[Q]};delete te.color,k.push(a.h(Kt,{style:{color:X[Q].color,background:X[Q].background},...te,onclick:F.bind(void 0,Q)},()=>a.h(wt,{...X[Q].tooltip},()=>{var le;return a.h("strong",null,((le=X[Q].tooltip)==null?void 0:le.tip)||r(`vc.drawing.editor.${Q}`))})))}}const{viewer:ee}=s;W.push(a.h(gn,{position:y.value,pixelOffset:(oe=e.editorOpts)==null?void 0:oe.pixelOffset,teleport:{to:ee.container},onMouseenter:E,onMouseleave:S},()=>a.h("div",{class:"vc-editor"},k)))}return a.h(yo,{ref:w,show:e.show,onReady:x},()=>W)}}var Lv=a.defineComponent({name:"VcMeasurementPoint",props:{...Bt,measureUnits:Object,labelOpts:Object,locale:String,decimals:Object,heightReference:Number},emits:ct,setup(e,t){return Kc(e,t,"VcMeasurementPoint")}}),Bv=a.defineComponent({name:"VcMeasurementArea",props:{...Bt,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,clampToGround:Boolean,autoUpdateLabelPosition:Boolean},emits:ct,setup(e,t){return Co(e,t,"VcMeasurementArea")}}),jv=a.defineComponent({name:"VcMeasurementRectangle",props:{...Bt,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,locale:String,decimals:Object,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:ct,setup(e,t){return Yi(e,t,"VcMeasurementRectangle")}}),Fv=a.defineComponent({name:"VcMeasurementRegular",props:{...Bt,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,measureUnits:Object,locale:String,decimals:Object,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:ct,setup(e,t){return Yi(e,t,"VcMeasurementRegular")}});function Jc(e,t,i,n,o,r,s){i.cesiumEvents=[];const l=Le(e,t,i);if(l===void 0)return;const{t:c}=gt(),{$services:u}=l,{emit:d}=t,m=a.ref(!1),h=a.reactive({}),f=oi(e),p=a.ref(null),y=a.ref(null),g=a.ref(!1),v=a.ref(null);let w,C;const P=(N,z)=>{var G,H;const oe=C==null?void 0:C.cmpRef.value;(G=oe==null?void 0:oe.handleMouseClick)==null||G.call(oe,N.position,z);let Y;const W=i.proxy;if(W.editingActionName&&(Y=M(W.editingActionName)),Y&&Y!==C){const q=Y.cmpRef.value;(H=q==null?void 0:q.handleMouseClick)==null||H.call(q,N.position,z)}},_=(N,z)=>{var G,H;const oe=C==null?void 0:C.cmpRef.value;(G=oe==null?void 0:oe.handleMouseMove)==null||G.call(oe,N.endPosition,z);let Y;const W=i.proxy;if(W.editingActionName&&(Y=M(W.editingActionName)),Y&&Y!==C){const q=Y.cmpRef.value;(H=q==null?void 0:q.handleMouseMove)==null||H.call(q,N.endPosition,z)}},E=(N,z)=>{var G,H;const oe=C==null?void 0:C.cmpRef.value;(G=oe==null?void 0:oe.handleDoubleClick)==null||G.call(oe,N.position,z);let Y;const W=i.proxy;if(W.editingActionName&&(Y=M(W.editingActionName)),Y&&Y!==C){const q=Y.cmpRef.value;(H=q==null?void 0:q.handleDoubleClick)==null||H.call(q,N.position,z)}},{activate:S,deactivate:x,destroy:T,isActive:V}=Nm(u,{handleMouseClick:P,handleMouseMove:_,handleDoubleClick:E});i.createCesiumObject=async()=>(m.value=!0,w=new dp,n.value),i.mount=async()=>(R(),g.value=!0,S(),!0),i.unmount=async()=>(C&&(j(C),C=void 0),x(),T(),g.value=!1,!0);const I=(N,z,G)=>{const{Cesium3DTileFeature:H,Cesium3DTileset:oe,Cartesian3:Y,defined:W,Model:q,Ray:K}=Cesium;if(Cesium.SuperMapVersion)return N.pickPosition(z);let U;const k={},ee=new K;if(N.pickPositionSupported){w.hide(N);const X=N.pick(z,1,1);if(w.restore(N),W(X)&&(X instanceof H||X.primitive instanceof oe||X.primitive instanceof q||X.primitive instanceof Cesium.S3MTilesLayer)&&(U=N.pickPosition(z,k),W(U)))return Y.clone(U,G)}if(W(N.globe)){const X=N.camera.getPickRay(z,ee);return U=N.globe.pick(X,N,k),W(U)?Y.clone(U,G):void 0}},R=()=>{var N;const z=f.style.value;h.left=z.left,h.top=z.top,h.transform=z.transform;const G=f.attach.value,H=(N=ie(y))==null?void 0:N.$el;if(H!==void 0){const oe=H.getBoundingClientRect();z.width=`${oe.width}px`,z.height=`${oe.height}px`,(G.bottom||G.top)&&!G.left&&!G.right&&(z.left="50%",z.transform="translate(-50%, 0)"),(G.left||G.right)&&!G.top&&!G.bottom&&(z.top="50%",z.transform="translate(0, -50%)")}Object.assign(h,z)},L=a.ref(null),j=N=>{var z;const{viewer:G}=u;if(si(N)&&(N=M(N)),!N){l.logger.error("Invalid drawingActionOption or drawingActionOption name");return}const H=b(N.name);if(H!==-1){if(C!==void 0){C.actionOpts.color=L.value||"";const oe=C.cmpRef.value;(z=oe.stop)==null||z.call(oe),C.isActive=!1,d("activeEvt",{type:C.name,option:C,isActive:!1},G)}(C==null?void 0:C.name)===(N==null?void 0:N.name)?(C=void 0,n.value[H].actionOpts.color=L.value||"red"):a.nextTick(()=>{n.value[H].cmpRef.value.startNew(),L.value=n.value[H].actionOpts.color,n.value[H].actionOpts.color=e.activeColor,n.value[H].isActive=!0,C=n.value[H],d("activeEvt",{type:C.name,option:C,isActive:!0},G)})}},M=N=>n.value.find(z=>z.name===N),b=N=>n.value.findIndex(z=>z.name===N),B=N=>{N?S():(C&&j(C),x()),o.modelValue=N,d("fabUpdated",N)},A=()=>{n.value.forEach(N=>{var z;(z=N.cmpRef.value)==null||z.clear()}),C&&j(C)},Z=()=>_n(l.getServices(),{get drawingFabInstance(){return i},get selectedDrawingActionInstance(){return C},get getWorldPosition(){return I},get drawingHandlerActive(){return V}}),F=({cesiumObject:N})=>{N._vcId=s};return a.provide(Ji,Z()),i.appContext.config.globalProperties.$VueCesium=Z(),Object.assign(i.proxy,{clearAll:A,deactivate:x,activate:S,toggleAction:j,getFabRef:()=>y.value,getDrawingActionInstance:M,getDrawingActionInstances:()=>n.value,getSelectedDrawingActionInstance:()=>C}),{renderContent:()=>{if(m.value){const N=[],z=[];n.value.forEach(H=>{N.push(a.h(ya,{ref:H.actionRef,style:H.actionStyle,class:H.actionClass,...H.actionOpts,onClick:()=>{j(H)}},()=>a.h(wt,{...H.actionOpts.tooltip},()=>a.h("strong",null,H.tip)))),H.cmp&&z.push(a.h(H.cmp,{ref:H.cmpRef,editable:e.editable,clampToGround:e.clampToGround,mode:e.mode,onDrawEvt:(oe,Y)=>{d("drawEvt",oe,Y)},onEditorEvt:(oe,Y)=>{d("editorEvt",oe,Y)},onMouseEvt:(oe,Y)=>{d("mouseEvt",oe,Y)},...H.cmpOpts}))}),n.value.length&&N.push(a.h(ya,{style:{background:r.color,color:r.textColor},class:"vc-draw-button vc-draw-clear",...r,onClick:A},()=>a.h(wt,{...r.tooltip},()=>a.h("strong",null,r.tooltip.tip||c(`vc.${s}.clear.tip`)))));const G=[];return g.value&&G.push(a.h("div",{ref:p,class:"vc-drawings-container "+f.classes.value,style:h},t.slots.body!==void 0?t.slots.body(n.value):a.h(lc,{ref:y,class:"vc-draw-button",style:{background:o.color,color:o.textColor},...o,"onUpdate:modelValue":B},{default:()=>N,tooltip:()=>a.h(wt,{...o.tooltip},()=>a.h("strong",null,o.tooltip.tip||(o.modelValue?c("vc.drawing.collapse"):c("vc.drawing.expand"))))}))),G.push(a.h(yo,{ref:v,show:e.show,onReady:F},()=>z)),G}else return a.createCommentVNode("v-if")}}}const Z6={...ct,fabUpdated:e=>!0};var Za=a.defineComponent({name:"VcMeasurements",props:$c,emits:Z6,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="VcMeasurements";const{t:o}=gt(),r=a.reactive(Object.assign({},ot.clearActionOpts,e.clearActionOpts)),s=a.reactive(Object.assign({},ot.mainFabOpts,e.mainFabOpts)),l=a.reactive(Object.assign({},ot.distanceActionOpts,e.distanceActionOpts)),c=a.reactive(Object.assign({},ot.distanceMeasurementOpts,e.distanceMeasurementOpts)),u=a.reactive(Object.assign({},ot.componentDistanceActionOpts,e.componentDistanceActionOpts)),d=a.reactive(Object.assign({},ot.componentDistanceMeasurementOpts,e.componentDistanceMeasurementOpts)),m=a.reactive(Object.assign({},ot.polylineActionOpts,e.polylineActionOpts)),h=a.reactive(Object.assign({},ot.polylineMeasurementOpts,e.polylineMeasurementOpts)),f=a.reactive(Object.assign({},ot.horizontalActionOpts,e.horizontalActionOpts)),p=a.reactive(Object.assign({},ot.horizontalMeasurementOpts,e.horizontalMeasurementOpts)),y=a.reactive(Object.assign({},ot.verticalActionOpts,e.verticalActionOpts)),g=a.reactive(Object.assign({},ot.verticalMeasurementOpts,e.verticalMeasurementOpts)),v=a.reactive(Object.assign({},ot.heightActionOpts,e.heightActionOpts)),w=a.reactive(Object.assign({},ot.heightMeasurementOpts,e.heightMeasurementOpts)),C=a.reactive(Object.assign({},ot.areaActionOpts,e.areaActionOpts)),P=a.reactive(Object.assign({},ot.areaMeasurementOpts,e.areaMeasurementOpts)),_=a.reactive(Object.assign({},ot.pointActionOpts,e.pointActionOpts)),E=a.reactive(Object.assign({},ot.pointMeasurementOpts,e.pointMeasurementOpts)),S=a.reactive(Object.assign({},ot.rectangleActionOpts,e.rectangleActionOpts)),x=a.reactive(Object.assign({},ot.rectangleMeasurementOpts,e.rectangleMeasurementOpts)),T=a.reactive(Object.assign({},ot.regularActionOpts,e.regularActionOpts)),V=a.reactive(Object.assign({},ot.regularMeasurementOpts,e.regularMeasurementOpts)),I=a.reactive(Object.assign({},ot.circleActionOpts,e.circleActionOpts)),R=a.reactive(Object.assign({},ot.circleMeasurementOpts,e.circleMeasurementOpts)),L={};L.distanceActionOpts=l,L.distanceMeasurementOpts=c,L.componentDistanceActionOpts=u,L.componentDistanceMeasurementOpts=d,L.polylineActionOpts=m,L.polylineMeasurementOpts=h,L.horizontalActionOpts=f,L.horizontalMeasurementOpts=p,L.verticalActionOpts=y,L.verticalMeasurementOpts=g,L.heightActionOpts=v,L.heightMeasurementOpts=w,L.areaActionOpts=C,L.areaMeasurementOpts=P,L.pointActionOpts=_,L.pointMeasurementOpts=E,L.rectangleActionOpts=S,L.rectangleMeasurementOpts=x,L.regularActionOpts=T,L.regularMeasurementOpts=V,L.circleActionOpts=I,L.circleMeasurementOpts=R,L.clearActionOpts=r;const j=a.computed(()=>e.measurements.map(b=>({name:b,type:"measurement",actionStyle:{background:L[`${At(b)}ActionOpts`].color,color:L[`${At(b)}ActionOpts`].textColor},actionClass:`vc-measure-${b} vc-measure-button`,actionRef:a.ref(null),actionOpts:L[`${At(b)}ActionOpts`],cmp:M(b),cmpRef:a.ref(null),cmpOpts:L[`${At(b)}MeasurementOpts`],tip:L[`${At(b)}ActionOpts`].tooltip.tip||o(`vc.measurement.${b}.tip`),isActive:!1})));function M(b){switch(b){case"distance":case"component-distance":return Tv;case"polyline":return Av;case"horizontal":return Iv;case"vertical":return Dv;case"height":return Rv;case"point":return Lv;case"area":return Bv;case"rectangle":return jv;case"regular":case"circle":return Fv;default:return}}return(i=Jc(e,t,n,j,s,r,"measurement"))==null?void 0:i.renderContent}});Za.install=e=>{e.component(Za.name,Za)};const Vv=Za;var X6=Vv;const Y6=Vv,Q6=Object.assign({},st,{icon:"vc-icons-drawing-point"}),K6=Object.assign({},st,{icon:"vc-icons-drawing-polyline"}),J6=Object.assign({},st,{icon:"vc-icons-drawing-polygon"}),eI=Object.assign({},st,{icon:"vc-icons-drawing-rectangle"}),tI=Object.assign({},st,{icon:"vc-icons-drawing-pin"}),iI=Object.assign({},ja,{pointOpts:Object.assign({},pn,{show:!1}),billboardOpts:WA,labelOpts:Object.assign({},Zt,{pixelOffset:[0,-30],verticalOrigin:1})}),nI=Object.assign({},st,{direction:"right",icon:"vc-icons-drawing-button",activeIcon:"vc-icons-drawing-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),Nv=["pin","point","polyline","polygon","rectangle","regular","circle"],eu={...kc,drawings:{type:Array,default:()=>Nv,validator:e=>{let t=!0;return e.forEach(i=>{Nv.includes(i)||(console.error(`VueCesium: unknown drawing type: ${i}`),t=!1)}),t}},mainFabOpts:{type:Object,default:()=>nI},pinActionOpts:{type:Object,default:()=>tI},pinDrawingOpts:{type:Object,default:()=>iI},pointActionOpts:{type:Object,default:()=>Q6},pointDrawingOpts:{type:Object,default:()=>ja},polylineActionOpts:{type:Object,default:()=>K6},polylineDrawingOpts:{type:Object,default:()=>gp},polygonActionOpts:{type:Object,default:()=>J6},polygonDrawingOpts:{type:Object,default:()=>Fa},rectangleActionOpts:{type:Object,default:()=>eI},rectangleDrawingOpts:{type:Object,default:()=>Nc},circleActionOpts:{type:Object,default:()=>yp},circleDrawingOpts:{type:Object,default:()=>ZA},regularActionOpts:{type:Object,default:()=>vp},regularDrawingOpts:{type:Object,default:()=>XA}},Nt=ci(eu);var kv=a.defineComponent({name:"VcDrawingPin",props:{...Bt,billboardOpts:Object,labelOpts:Object,heightReference:Number},emits:ct,setup(e,t){return Kc(e,t,"VcDrawingPin")}}),zv=a.defineComponent({name:"VcDrawingPoint",props:{...Bt,heightReference:Number},emits:ct,setup(e,t){return Kc(e,t,"VcDrawingPoint")}}),$v=a.defineComponent({name:"VcDrawingPolyline",props:{...Bt,polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean},emits:ct,setup(e,t){return Co(e,t,"VcDrawingPolyline")}}),Gv=a.defineComponent({name:"VcDrawingPolygon",props:{...Bt,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,loop:Boolean,clampToGround:Boolean},emits:ct,setup(e,t){return Co(e,t,"VcDrawingPolygon")}}),tu=a.defineComponent({name:"VcDrawingRegular",props:{...Bt,polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,clampToGround:Boolean,edge:Number},emits:ct,setup(e,t){return Yi(e,t,"VcDrawingRegular")}}),Uv=a.defineComponent({name:"VcDrawingRectangle",props:{...Bt,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,clampToGround:Boolean},emits:ct,setup(e,t){return Yi(e,t,"VcDrawingRectangle")}});const oI={...ct,fabUpdated:e=>!0};var Xa=a.defineComponent({name:"VcDrawings",props:eu,emits:oI,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="VcDrawings";const{t:o}=gt(),r={},s=a.reactive(Object.assign({},Nt.clearActionOpts,e.clearActionOpts)),l=a.reactive(Object.assign({},Nt.mainFabOpts,e.mainFabOpts)),c=a.reactive(Object.assign({},Nt.pointActionOpts,e.pointActionOpts)),u=a.reactive(Object.assign({},Nt.pointDrawingOpts,e.pointDrawingOpts)),d=a.reactive(Object.assign({},Nt.polylineActionOpts,e.polylineActionOpts)),m=a.reactive(Object.assign({},Nt.polylineDrawingOpts,e.polylineDrawingOpts)),h=a.reactive(Object.assign({},Nt.polygonActionOpts,e.polygonActionOpts)),f=a.reactive(Object.assign({},Nt.polygonDrawingOpts,e.polygonDrawingOpts)),p=a.reactive(Object.assign({},Nt.rectangleActionOpts,e.rectangleActionOpts)),y=a.reactive(Object.assign({},Nt.rectangleDrawingOpts,e.rectangleDrawingOpts)),g=a.reactive(Object.assign({},Nt.circleActionOpts,e.circleActionOpts)),v=a.reactive(Object.assign({},Nt.circleDrawingOpts,e.circleDrawingOpts)),w=a.reactive(Object.assign({},Nt.regularActionOpts,e.regularActionOpts)),C=a.reactive(Object.assign({},Nt.regularDrawingOpts,e.regularDrawingOpts)),P=a.reactive(Object.assign({},Nt.pinActionOpts,e.pinActionOpts)),_=a.reactive(Object.assign({},Nt.pinDrawingOpts,e.pinDrawingOpts));r.pointActionOpts=c,r.pointDrawingOpts=u,r.polylineActionOpts=d,r.polylineDrawingOpts=m,r.polygonActionOpts=h,r.polygonDrawingOpts=f,r.rectangleActionOpts=p,r.rectangleDrawingOpts=y,r.circleActionOpts=g,r.circleDrawingOpts=v,r.regularActionOpts=w,r.regularDrawingOpts=C,r.pinActionOpts=P,r.pinDrawingOpts=_,r.clearActionOpts=s;const E=a.computed(()=>e.drawings.map(x=>({name:x,type:"drawing",actionStyle:{background:r[`${At(x)}ActionOpts`].color,color:r[`${At(x)}ActionOpts`].textColor},actionClass:`vc-draw-${x} vc-draw-button`,actionRef:a.ref(null),actionOpts:r[`${At(x)}ActionOpts`],cmp:S(x),cmpRef:a.ref(null),cmpOpts:r[`${At(x)}DrawingOpts`],tip:r[`${At(x)}ActionOpts`].tooltip.tip||o(`vc.drawing.${At(x)}.tip`),isActive:!1})));function S(x){switch(x){case"pin":return kv;case"point":return zv;case"polyline":return $v;case"polygon":return Gv;case"rectangle":return y.regular?tu:Uv;case"circle":case"regular":return tu;default:return}}return(i=Jc(e,t,n,E,l,s,"drawing"))==null?void 0:i.renderContent}});Xa.install=e=>{e.component(Xa.name,Xa)};const Hv=Xa;var rI=Hv;const aI=Hv;class sI{constructor(t){const{Resource:i,defaultValue:n,Credit:o,Event:r}=Cesium;this._url=t.url;const s=i.createIfNeeded(this._url);s.appendForwardSlash(),this._ready=!1,this._resource=s,this._tileDiscardPolicy=t.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=t.maximumLevel||0,this._maximumLevel=t.maximumLevel||20,this._tilingScheme=t.tilingScheme||new Cesium.WebMercatorTilingScheme,this._rectangle=t.rectangle||this._tilingScheme.rectangle;let l=t.credit;typeof l=="string"&&(l=new o(l)),this._credit=l,this.enablePickFeatures=n(t.enablePickFeatures,!1),this._hasAlphaChannel=n(t.hasAlphaChannel,!0),this._errorEvent=new r,this._readyPromise=Jn(),this._ready=!0,this._readyPromise.resolve(!0),this._subdomains=t.subdomains||["01","02","03","04"],this._domain=t.domain||"webst",this._style=t.mapStyle||"6",this._lang=t.lang||"zh_cn",this._scl=t.scl||"1",this._ltype=t.ltype||"0"}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(t,i,n){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(t,i,n,o){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,lI.call(this,t,i,n,o))}pickFeatures(t,i,n,o,r){}}function lI(e,t,i,n){let o=this._url;const r=this._subdomains;return o=o.replace("{domain}",this._domain).replace("{s}",r[(e+t+i)%r.length]).replace("{lang}",this._lang).replace("{style}",this._style).replace("{scl}",this._scl).replace("{ltype}",this._ltype).replace("{x}",e).replace("{y}",t).replace("{z}",i),this._resource.getDerivedResource({url:o,request:n})}var cI=sI;const Wv={url:{type:String,default:"https://{domain}{s}.is.autonavi.com/appmaptile?lang={lang}&size=1&style={style}&scl={scl}&ltype={ltype}&x={x}&y={y}&z={z}"},subdomains:{type:Array,default:()=>["01","02","03","04"]},domain:{type:String,default:"webst"},lang:{type:String,default:"zh_cn"},mapStyle:{type:String,default:"6"},scl:{type:String,default:"1"},ltype:{type:String,default:"0"},...bt,...ni,...Qt,...Ot,...Pi,...An};var qv=a.defineComponent({name:"VcImageryProviderAmap",props:Wv,emits:it,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="AMapImageryProvider";const n=tt(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{Cesium.AMapImageryProvider=Cesium.AMapImageryProvider||cI,n.unwatchFns.length===0&&n.setPropsWatcher(!0);const o=n.transformProps(e);return new Cesium.AMapImageryProvider(o)},()=>{var o;return a.createCommentVNode(ne(((o=i.proxy)==null?void 0:o.$options.name)||""))}}});const Zv={url:{type:[String,Object],default:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},...cl,...No,usePreCachedTilesIfAvailable:{type:Boolean,default:!0},...ul,...ia,...Ot,...Pi,...Ie,...bt,...Gi,...Ui,...Qt};var Xv=a.defineComponent({name:"VcImageryProviderArcgis",props:Zv,emits:it,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="ArcGisMapServerImageryProvider",tt(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});class Yv{constructor(t,i){isNaN(t)&&(t=isNaN(t)?0:t),si(t)&&(t=parseFloat(t)),isNaN(i)&&(i=isNaN(i)?0:i),si(i)&&(i=parseFloat(i)),this.lng=t,this.lat=i}equals(t){return t&&this.lat===t.lat&&this.lng===t.lng}}Yv.isInRange=function(e){return e&&e.lng<=180&&e.lng>=-180&&e.lat<=74&&e.lat>=-74};var Qi=Yv;class uI{constructor(t,i){this.x=t||0,this.y=i||0}equals(t){return t&&t.x===this.x&&t.y===this.y}}var Qv=uI;const Be=class{lngLatToMercator(e,t){return Be.convertLL2MC(e)}lngLatToPoint(e){const t=Be.convertLL2MC(e);return new Qv(t.lng,t.lat)}mercatorToLngLat(e,t){return Be.convertMC2LL(e)}pointToLngLat(e){const t=new Qi(e.x,e.y);return Be.convertMC2LL(t)}pointToPixel(e,t,i,n,o){if(!e)return;e=this.lngLatToMercator(e,o),i=this.lngLatToMercator(i);const r=this.getZoomUnits(t),s=Math.round((e.lng-i.lng)/r+n.width/2),l=Math.round((i.lat-e.lat)/r+n.height/2);return new Qv(s,l)}pixelToPoint(e,t,i,n,o){if(!e)return;const r=this.getZoomUnits(t),s=i.lng+r*(e.x-n.width/2),l=i.lat-r*(e.y-n.height/2),c=new Qi(s,l);return this.mercatorToLngLat(c,o)}getZoomUnits(e){return Math.pow(2,18-e)}};let kt=Be;kt.EARTHRADIUS=637099681e-2,kt.MCBAND=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],kt.LLBAND=[75,60,45,30,15,0],kt.MC2LL=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],kt.LL2MC=[[-.0015702102444,111320.7020616939,1704480524535203,-10338987376042340,26112667856603880,-35149669176653700,26595700718403920,-10725012454188240,1800819912950474,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],kt.getDistanceByMC=function(e,t){if(!e||!t||(e=Be.convertMC2LL(e),!e))return 0;const i=Be.toRadians(e.lng),n=Be.toRadians(e.lat);if(t=Be.convertMC2LL(t),!t)return 0;const o=Be.toRadians(t.lng),r=Be.toRadians(t.lat);return Be.getDistance(i,o,n,r)},kt.getDistanceByLL=function(e,t){if(!e||!t)return 0;e.lng=Be.getLoop(e.lng,-180,180),e.lat=Be.getRange(e.lat,-74,74),t.lng=Be.getLoop(t.lng,-180,180),t.lat=Be.getRange(t.lat,-74,74);const i=Be.toRadians(e.lng),n=Be.toRadians(e.lat),o=Be.toRadians(t.lng),r=Be.toRadians(t.lat);return Be.getDistance(i,o,n,r)},kt.convertMC2LL=function(e){let t;const i=new Qi(Math.abs(e.lng),Math.abs(e.lat));for(let o=0;o<Be.MCBAND.length;o++)if(i.lat>=Be.MCBAND[o]){t=Be.MC2LL[o];break}const n=Be.convertor(e,t);return new Qi(n==null?void 0:n.lng.toFixed(6),n==null?void 0:n.lat.toFixed(6))},kt.convertLL2MC=function(e){let t;e.lng=Be.getLoop(e.lng,-180,180),e.lat=Be.getRange(e.lat,-74,74);const i=new Qi(e.lng,e.lat);for(let o=0;o<Be.LLBAND.length;o++)if(i.lat>=Be.LLBAND[o]){t=Be.LL2MC[o];break}if(!t){for(let o=Be.LLBAND.length-1;o>=0;o--)if(i.lat<=-Be.LLBAND[o]){t=Be.LL2MC[o];break}}const n=Be.convertor(e,t);return new Qi(n==null?void 0:n.lng.toFixed(2),n==null?void 0:n.lat.toFixed(2))},kt.convertor=function(e,t){if(!e||!t)return;let i=t[0]+t[1]*Math.abs(e.lng);const n=Math.abs(e.lat)/t[9];let o=t[2]+t[3]*n+t[4]*n*n+t[5]*n*n*n+t[6]*n*n*n*n+t[7]*n*n*n*n*n+t[8]*n*n*n*n*n*n;return i*=e.lng<0?-1:1,o*=e.lat<0?-1:1,new Qi(i,o)},kt.getDistance=function(e,t,i,n){return Be.EARTHRADIUS*Math.acos(Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos(t-e))},kt.toRadians=function(e){return Math.PI*e/180},kt.toDegrees=function(e){return 180*e/Math.PI},kt.getRange=function(e,t,i){return t!=null&&(e=Math.max(e,t)),i!=null&&(e=Math.min(e,i)),e},kt.getLoop=function(e,t,i){for(;e>i;)e-=i-t;for(;e<t;)e+=i-t;return e};var dI=kt;class mI{constructor(t){const{defaultValue:i,Ellipsoid:n,WebMercatorProjection:o,Cartesian2:r,Cartographic:s,Math:l,Rectangle:c}=Cesium;t=t||{},this._ellipsoid=i(t.ellipsoid,n.WGS84),this._projection=new o(this._ellipsoid);const u=new dI;this._projection.project=function(h,f){return f=f||{},t.projectionTransforms&&t.projectionTransforms.from!==t.projectionTransforms.to&&(t.projectionTransforms.to.toUpperCase()==="WGS84"?(f=km(l.toDegrees(h.longitude),l.toDegrees(h.latitude)),f=Fl(f[0],f[1])):f=Fl(l.toDegrees(h.longitude),l.toDegrees(h.latitude))),f[0]=Math.min(f[0],180),f[0]=Math.max(f[0],-180),f[1]=Math.min(f[1],74.000022),f[1]=Math.max(f[1],-71.988531),f=u.lngLatToPoint(new Qi(f[0],f[1])),new r(f.x,f.y)},this._projection.unproject=function(h,f){return f=f||{},f=u.mercatorToLngLat(new Qi(h.x,h.y)),f[0]=(f[0]+180)%360-180,t.projectionTransforms&&t.projectionTransforms.from!==t.projectionTransforms.to&&(t.projectionTransforms.to.toUpperCase()==="WGS84"?(f=jl(f.lng,f.lat),f=Vl(f[0],f[1])):f=jl(f.lng,f.lat)),new s(Cesium.Math.toRadians(f[0]),Cesium.Math.toRadians(f[1]))},this._rectangleSouthwestInMeters=new r(-2003772637e-2,-1247410417e-2),this._rectangleNortheastInMeters=new r(2003772637e-2,1247410417e-2);const d=this._projection.unproject(this._rectangleSouthwestInMeters),m=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new c(d.longitude,d.latitude,m.longitude,m.latitude),this.resolutions=[];for(let h=0;h<19;h++)this.resolutions[h]=256*Math.pow(2,18-h)}getNumberOfXTilesAtLevel(t){return 1<<t}getNumberOfYTilesAtLevel(t){return 1<<t}rectangleToNativeRectangle(t,i){const{defined:n,Rectangle:o}=Cesium,r=this._projection,s=r.project(o.southwest(t)),l=r.project(o.northeast(t));return n(i)?(i.west=s.x,i.south=s.y,i.east=l.x,i.north=l.y,i):new o(s.x,s.y,l.x,l.y)}tileXYToNativeRectangle(t,i,n,o){const{defined:r,Rectangle:s}=Cesium,l=this.resolutions[n],c=t*l,u=(t+1)*l,d=((i=-i)+1)*l,m=i*l;return r(o)?(o.west=c,o.south=m,o.east=u,o.north=d,o):new s(c,m,u,d)}tileXYToRectangle(t,i,n,o){const{Cartesian2:r}=Cesium,s=this.tileXYToNativeRectangle(t,i,n,o),l=this._projection,c=l.unproject(new r(s.west,s.south)),u=l.unproject(new r(s.east,s.north));return s.west=c.longitude,s.south=c.latitude,s.east=u.longitude,s.north=u.latitude,s}positionToTileXY(t,i,n){const{Rectangle:o,defined:r,Cartesian2:s}=Cesium,l=this._rectangle;if(!o.contains(l,t))return;const u=this._projection.project(t);if(!r(u))return;const d=this.resolutions[i],m=Math.floor(u.x/d),h=-Math.floor(u.y/d);return r(n)?(n.x=m,n.y=h,n):new s(m,h)}get ellipsoid(){return this._ellipsoid}get rectangle(){return this._rectangle}get projection(){return this._projection}}var hI=mI;class fI{constructor(t){const{Resource:i,defaultValue:n,Credit:o,Event:r}=Cesium;this._subdomains=n(t.subdomains,["0","1","2","3","4","5","6","7","8","9"]),t.url?this._url=t.url:t.customid==="img"?(this._url=`${t.protocol}://shangetu{s}.map.bdimg.com/it/u=x={x};y={y};z={z};v=009;type=sate&fm=46`,this._subdomains=["0","1","2","3","4","5","6","7","8","9"]):t.customid==="vec"?(this._url=`${t.protocol}://online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles=sl&v=020`,this._subdomains=["0","1","2","3","4","5","6","7","8","9"]):t.customid==="traffic"?(this._subdomains=["0","1","2"],this._url=`${t.protocol}://its.map.baidu.com/traffic/TrafficTileService?time={time}&label={labelStyle}&v=016&level={z}&x={x}&y={y}&scaler=2`):(this._url=`${t.protocol}://api.map.baidu.com/customimage/tile?&x={x}&y={y}&z={z}&udt={udt}&scale=${t.scale}&ak=${t.ak}&customid=${t.customid}`,this._subdomains=["0","1","2"]);const s=i.createIfNeeded(this._url);s.appendForwardSlash(),this._ready=!1,this._resource=s,this._tileDiscardPolicy=t.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=t.maximumLevel||0,this._maximumLevel=t.maximumLevel||18,this._tilingScheme=new hI(t),this._rectangle=n(t.rectangle,this._tilingScheme.rectangle);let l=t.credit;typeof l=="string"&&(l=new o(l)),this._credit=l,this.enablePickFeatures=n(t.enablePickFeatures,!1),this._hasAlphaChannel=n(t.hasAlphaChannel,!0),this._errorEvent=new r,this._readyPromise=Jn(),this._ready=!0,this._readyPromise.resolve(!0),this._style=t.bdStyle,this._labelStyle=t.labelStyle||"web2D"}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(t,i,n){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(t,i,n,o){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,pI.call(this,t,i,n,o))}pickFeatures(t,i,n,o,r){}}function pI(e,t,i,n){let o=this._url;const r=this._subdomains;return o=o.replace("{s}",r[(e+t+i)%r.length]).replace("{style}",this._style).replace("{x}",e).replace("{y}",-t).replace("{z}",i).replace("{labelStyle}",this._labelStyle).replace("{time}",String(new Date().getTime())).replace("{udt}",String(new Date().getTime())),this._resource.getDerivedResource({url:o,request:n})}var gI=fI;const Kv={..._i,...Ot,...Ie,...No,...bt,...ni,...Qt,protocol:{type:String,default:"https"},projectionTransforms:{type:[Boolean,Object],default:()=>({from:"BD09",to:"WGS84"})},scale:{type:Number,default:1},ak:{type:String,default:"E4805d16520de693a3fe707cdc962045"},customid:{type:String,default:"normal"}};var Jv=a.defineComponent({name:"VcImageryProviderBaidu",props:Kv,emits:it,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="BaiduMapImageryProvider";const n=tt(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{Cesium.BaiduMapImageryProvider=Cesium.BaiduMapImageryProvider||gI,n.unwatchFns.length===0&&n.setPropsWatcher(!0);const o=n.transformProps(e);return new Cesium.BaiduMapImageryProvider(o)},()=>{var o;return a.createCommentVNode(ne(((o=i.proxy)==null?void 0:o.$options.name)||""))}}});const ey={url:{type:[String,Object],default:"https://dev.virtualearth.net"},bmKey:String,tileProtocol:String,mapStyle:{type:String,default:"Aerial"},culture:{type:String,default:""},...Ie,...No};var ty=a.defineComponent({name:"VcImageryProviderBing",props:ey,emits:it,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="BingMapsImageryProvider",tt(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const iy={..._i,...Ie,...No,...bt,metadata:Object};var ny=a.defineComponent({name:"VcImageryProviderGoogle",props:iy,emits:it,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="GoogleEarthEnterpriseImageryProvider",tt(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const oy={...Pi,...Ie,cells:{type:Number,default:8},color:{type:[String,Object,Array],default:()=>[1,1,1,.4],watcherOptions:{cesiumObjectBuilder:Ae}},...Pm,glowWidth:{type:Number,default:6},backgroundColor:{type:[String,Array,Object],default:()=>[0,.5,0,.2],watcherOptions:{cesiumObjectBuilder:Ae}},...Gi,...Ui,canvasSize:{type:Number,default:256}};var ry=a.defineComponent({name:"VcImageryProviderGrid",props:oy,emits:it,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="GridImageryProvider",tt(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const vI={};var ay=a.defineComponent({name:"VcImageryProviderIon",props:{assetId:Number,...ml,server:[String,Object]},emits:it,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="IonImageryProvider",tt(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const sy={url:{type:[String,Object],default:"https://api.mapbox.com/styles/v1/"},username:{type:String,default:"mapbox"},styleId:String,...ml,tilesize:{type:Number,default:512},scaleFactor:Boolean,...Ie,...ni,...Qt,...Ot,...bt};var ly=a.defineComponent({name:"VcImageryProviderMapbox",props:sy,emits:it,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="MapboxStyleImageryProvider",tt(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const cy={url:{type:String,default:"https://a.tile.openstreetmap.org"},...dl,...Ot,...ni,...Qt,...Ie,credit:{type:[String,Object],default:"MapQuest, Open Street Map and contributors, CC-BY-SA"}};var uy=a.defineComponent({name:"VcImageryProviderOsm",props:cy,emits:it,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="OpenStreetMapImageryProvider",tt(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const dy={..._i,...Ot,...bt,...Ie};var my=a.defineComponent({name:"VcImageryProviderSingletile",props:dy,emits:it,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="SingleTileImageryProvider",tt(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const gr={NONE:0,STORING:1,STORED:2,FAILED:3};class yI{constructor(t){if(!Cesium.defined(t.name))throw new Cesium.DeveloperError("options.name is required.");const i=window.indexedDB.open(this.dbname);this.layer=t.layer||null,this.storageType=t.storageType||"arrayBuffer",this.creatingTable=!1,this.cachestatus={},this.dbname=t.name;const n=this;return new Promise((o,r)=>{i.onsuccess=s=>{n.db=s.target.result,n.version=n.db.version,n.cachestatus=n.cachestatus||{},o(n)},i.onupgradeneeded=s=>{n.db=s.target.result,n.version=n.db.version,o(n)},i.onerror=s=>{n.db=null,r("create database fail, error code : "+s.target.errorcode)}})}checkObjectStoreExist(t){return Cesium.defined(this.db)?this.db.objectStoreNames.contains(t):!1}createObjectStore(t){return new Promise((i,n)=>{if(this.creatingTable)n(!1);else{if(this.db.objectStoreNames.contains(t)){n(!1);return}this.creatingTable=!0;const o=parseInt(this.db.version);this.db.close();const r=this,s=window.indexedDB.open(this.dbname,o+1);s.onupgradeneeded=l=>{const c=l.target.result;r.db=c;const u=c.createObjectStore(t,{keyPath:"id"});if(Cesium.defined(u)){u.createIndex("value","value",{unique:!1}),r.creatingTable=!1,r.cachestatus=r.cachestatus||{},r.cachestatus[t]={},r.db.close();const d=window.indexedDB.open(r.dbname);d.onsuccess=m=>{r.db=m.target.result,i(!0)}}else r.creatingTable=!1,i(!1)},s.onsuccess=l=>{l.target.result.close(),i(!0)},s.onerror=l=>{r.creatingTable=!1,n(!1)}}})}putElementInDB(t,i,n){return new Promise((o,r)=>{if(!Cesium.defined(this.db)){r(!1);return}const{cachestatus:s,db:l}=this;if(Cesium.defined(s[t])&&Cesium.defined(s[t][i]&&(s[t][i]===gr.STORING||s[t][i]===gr.STORED))){o(!1);return}if(l.objectStoreNames.contains(t)){s[t]=s[t]||{};try{const c=l.transaction([t],"readwrite").objectStore(t).add({id:i,value:n});s[t][i]=gr.STORING,c.onsuccess=u=>{s[t][i]=gr.STORED,o(!0)},c.onerror=u=>{s[t][i]=gr.FAILED,o(!1)}}catch(c){r(null);return}}else this.createObjectStore(t).then(()=>{const c=l.transaction([t],"readwrite").objectStore(t).add({id:i,value:n});c.onsuccess=function(u){o(!0)},c.onerror=function(u){r(!1)}},()=>{r(!1)})})}getElementFromDB(t,i){return new Promise((n,o)=>{const{db:r}=this;if(!Cesium.defined(r)||!r.objectStoreNames.contains(t))return null;try{const c=r.transaction([t]).objectStore(t).get(i);c.onsuccess=u=>Cesium.defined(u.target.result)?n(u.target.result.value):o(null),c.onerror=u=>{o(null)}}catch(s){o(null)}})}updateElementInDB(t,i,n){return new Promise((o,r)=>{const{db:s}=this;if(!Cesium.defined(s)){o(!1);return}if(!s.objectStoreNames.contains(t)){o(!1);return}try{const l=s.transaction([t],"readwrite").objectStore(t).put({id:i,value:n});l.onsuccess=()=>{o(!0)},l.onerror=()=>{o(!1)}}catch(l){o(!1)}})}removeElementFromDB(t,i){return new Promise((n,o)=>{const{db:r}=this;if(!Cesium.defined(r)){n(!1);return}if(!r.objectStoreNames.contains(t)){n(!1);return}try{const s=r.transaction([t],"readwrite").objectStore(t).delete(i);s.onsuccess=()=>{n(!0)},s.onerror=()=>{n(!1)}}catch(s){n(!1)}})}clear(t){return new Promise((i,n)=>{const{db:o}=this;if(!Cesium.defined(o)){i(!1);return}if(!o.objectStoreNames.contains(t)){i(!1);return}try{const r=o.transaction([t],"readwrite").objectStore(t).clear();r.onsuccess=()=>{i(!0)},r.onerror=()=>{i(!1)}}catch(r){i(!1)}})}}var CI=yI;class bI{constructor(t){const{appendForwardSlash:i,Credit:n,defaultValue:o,defined:r,DeveloperError:s,Event:l,Resource:c,Math:u}=Cesium;t=o(t,{});const{url:d}=t;if(!r(d))throw new s("options.url is required.");const m=d.substring(0,d.indexOf("datas"));this.tablename=d.substring(0,d.indexOf("datas/")+6,d.length);const h=this;new CI({name:m+this.tablename}).then(g=>{h._indexedDBScheduler=g}),this._indexedDBSetting={isOpen:!1,clear:()=>{h._indexedDBScheduler.clear(h.tablename)}},this.isSci=!1,this.isTileMap=!1;const p=i(d);if(p.indexOf("rest/maps")>-1)this.isTileMap=!0,this.layersID=t.layersID;else{if(!(p.indexOf("rest/realspace")>-1))throw new s("The url type is not supported!");this.isSci=!0,this.layersID=void 0}this._url=p,this._resource=c.createIfNeeded(p),this._transparent=o(t.transparent,!0),this._name=t.name||"",this._urlTemplate=void 0,this._errorEvent=new l,this._fileExtension="png",this._tileWidth=256,this._tileHeight=256,this._minimumLevel=o(t.minimumLevel,0),this._maximumLevel=t.maximumLevel,this._rectangle=void 0,this._tilingScheme=void 0,this._tileDiscardPolicy=t.tileDiscardPolicy,this._fRatio=o(t.ratio,u.DEGREES_PER_RADIAN/6378137),this._scales=[],this._coordUnit="DEGREE";let y=o(t.credit,new n("MapQuest, SuperMap iServer Imagery"));typeof y=="string"&&(y=new n(y)),this._credit=y,this._ready=!1,this._readyPromise=Jn(),this._options=t,fy.call(this)}get url(){return this._url}get name(){return this._name}set name(t){this._name=t}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this._ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this._ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get credit(){return this._credit}get hasAlphaChannel(){return!0}get readyPromise(){return this._readyPromise.promise}get ratio(){return this._fRatio}set ratio(t){this._fRatio=t}get tileDiscardPolicy(){return this._tileDiscardPolicy}getTileCredits(t,i,n){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(t,i,n,o){const{defined:r,DeveloperError:s,ImageryProvider:l,when:c}=Cesium;if(!this.ready)throw new s("requestImage must not be called before the imagery provider is ready.");const u=_I.call(this,t,i,n),d=this._resource.getDerivedResource({url:u,request:o}),m=this;if(this._indexedDBSetting.isOpen&&r(this._indexedDBScheduler)){const h=this._indexedDBScheduler.getElementFromDB(this.tablename,u);return r(h)?c(h,f=>{if(r(f)){const p=new Image;return p.src=f,p}return l.loadImage(m,d)},f=>l.loadImage(m,d)):l.loadImage(m,d)}return l.loadImage(this,d)}pickFeatures(t,i,n,o,r){}}let hy={};const iu=["1.690163571602655E-9","3.3803271432053056E-9","6.760654286410611E-9","1.3521308572821242E-8","2.7042617145642484E-8","5.408523429128511E-8","1.0817046858256998E-7","2.1634093716513974E-7","4.3268187433028044E-7","8.653637486605571E-7","1.7307274973211203E-6","3.4614549946422405E-6","6.9229099892844565E-6","1.3845819978568952E-5","2.7691639957137904E-5","5.53832799142758E-5","1.107665598285516E-4","2.215331196571032E-4","4.430662393142064E-4","8.861324786284128E-4","1.772264957256826E-3","3.544529914513652E-3"],wI=[1690163571602655e-24,33803271432053056e-25,6760654286410611e-24,13521308572821242e-24,27042617145642484e-24,5408523429128511e-23,10817046858256998e-23,21634093716513974e-23,43268187433028044e-23,8653637486605571e-22,17307274973211203e-22,34614549946422405e-22,69229099892844565e-22,13845819978568952e-21,27691639957137904e-21,553832799142758e-19,.0001107665598285516,.0002215331196571032,.0004430662393142064,.0008861324786284128,.001772264957256826,.003544529914513652];function _I(e,t,i){let n;if(this.isTileMap){if(this._coordUnit==="DEGREE"){const o=iu[i+1]||iu[i];n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",o)}else if(this._coordUnit==="METER"){const o=iu[i];n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",o)}}else n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{level}",i).replace("{fileExtension}",this._fileExtension);return n}function fy(){const{Resource:e,when:t}=Cesium;if(this.isTileMap){const i=e.fetchJsonp({url:this._options.url+".jsonp",queryParameters:{f:"json"}});t(i,SI.bind(this),gy.bind(this))}else t(e.fetchText({url:this.url+"config"}),OI.bind(this),gy.bind(this))}function PI(e){for(let t=wI.length;t--;)if(e[t]<=e)return t}function OI(e){const t=EI.call(this,e),{defaultValue:i,defined:n,GeographicTilingScheme:o,Math:r,Rectangle:s}=Cesium;this._fileExtension=i(t.fileExtentName,"png"),this._tileWidth=i(t.imageSizeWidth,256),this._tileHeight=i(t.imageSizeHeight,256);const l=t.levels,c=l.length;if(this._minimumLevel=i(l[0],0),this._maximumLevel=i(l[c-1],c-1),n(this._tilingScheme)||(this._tilingScheme=new o({ellipsoid:this._options.ellipsoid})),!n(this._rectangle)&&t.left&&t.right&&t.top&&t.bottom){const f=r.toRadians(t.left),p=r.toRadians(t.right),y=r.toRadians(t.bottom),g=r.toRadians(t.top);this._rectangle=new s(f,y,p,g)}const u=this._tilingScheme;this._rectangle.west<u.rectangle.west&&(this._rectangle.west=u.rectangle.west),this._rectangle.east>u.rectangle.east&&(this._rectangle.east=u.rectangle.east),this._rectangle.south<u.rectangle.south&&(this._rectangle.south=u.rectangle.south),this._rectangle.north>u.rectangle.north&&(this._rectangle.north=u.rectangle.north);const d=u.positionToTileXY(s.southwest(this._rectangle),this._minimumLevel),m=u.positionToTileXY(s.northeast(this._rectangle),this._minimumLevel);(window.Math.abs(m.x-d.x)+1)*(window.Math.abs(m.y-d.y)+1)>4&&(this._minimumLevel=0),this._tilingScheme=u,this._urlTemplate=this._url+"data/index/{y}/{x}.{fileExtension}?level={level}",this._ready=!0,this._readyPromise.resolve(!0)}function EI(e){e=new DOMParser().parseFromString(e,"application/xml");const i="http://www.supermap.com/SuperMapCache/sci3d",n=e.childNodes[0],o=Ya(n,"Levels",i),r=MI(o,"Level",i)||[],s=[];for(let g=0;g<r.length;g++)s.push(parseInt(r[g].textContent,10));const l=Ya(n,"Bounds",i),c=bo(l,"Left",i),u=bo(l,"Right",i),d=bo(l,"Top",i),m=bo(l,"Bottom",i),h=py(n,"FileExtentName",i),f=bo(n,"CellWidth",i),p=bo(n,"CellHeight",i),y=py(n,"CacheName",i);return this._name=y||"",{left:c,right:u,top:d,bottom:m,fileExtentName:h,levels:s,imageSizeWidth:f,imageSizeHeight:p}}function py(e,t,i){const n=Ya(e,t,i);return Cesium.defined(n)?n.textContent.trim():void 0}function bo(e,t,i){const n=Ya(e,t,i);if(Cesium.defined(n)){const o=parseFloat(n.textContent);return isNaN(o)?void 0:o}}function Ya(e,t,i){if(Cesium.defined(e)){const n=e.childNodes,o=n.length;for(let r=0;r<o;r++){const s=n[r];if(s.localName===t&&i.indexOf(s.namespaceURI)!==-1)return s}}}function MI(e,t,i){if(Cesium.defined(e)){const n=[],o=e.getElementsByTagNameNS("*",t),r=o.length;for(let s=0;s<r;s++){const l=o[s];l.localName===t&&i.indexOf(l.namespaceURI)!==-1&&n.push(l)}return n}}function SI(e){const{Cartesian3:t,defaultValue:i,defined:n,GeographicTilingScheme:o,Math:r,Rectangle:s,WebMercatorTilingScheme:l}=Cesium,c=e.prjCoordSys.coordUnit;this._coordUnit=c;const u=e.bounds,d=e.visibleScales;if(n(d)&&d.length>1&&n(this._maximumLevel)){const m=d[d.length-1];this._maximumLevel=PI(m)}if(c==="DEGREE")this._tilingScheme=new o,u.left=r.clamp(u.left,-180,180),u.bottom=r.clamp(u.bottom,-90,90),u.right=r.clamp(u.right,-180,180),u.top=r.clamp(u.top,-90,90),this._rectangle=s.fromDegrees(u.left,u.bottom,u.right,u.top),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-180,"y":90}';else{const m=new t(u.left,u.bottom,0);m.x=Math.max(-20037508342789244e-9,m.x),m.y=Math.max(-20037508342789244e-9,m.y);const h=new t(u.right,u.top,0);h.x=Math.min(20037508342789244e-9,h.x),h.y=Math.min(20037508342789244e-9,h.y),this._tilingScheme=new l;const f=this._tilingScheme.projection.unproject(m),p=this._tilingScheme.projection.unproject(h);this._rectangle=new s(f.longitude,f.latitude,p.longitude,p.latitude),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-20037508.342789248 ,"y":20037508.342789095}'}this._urlTemplate=this._urlTemplate.replace("{transparent}",this._transparent),this.layersID&&(this._urlTemplate=this._urlTemplate+"&layersID="+this.layersID),this._rectangle||(this._rectangle=i(this._options.rectangle,this._tilingScheme.rectangle)),this._ready=!0,this._readyPromise.resolve(!0)}function gy(){const{TileProviderError:e,RuntimeError:t}=Cesium,i="An error occurred while accessing "+this._url+".";hy=e.handleError(hy,this,this._errorEvent,i,0,0,0,fy.bind(this)),this._readyPromise.reject(new t(i))}var xI=bI;const vy={url:String,...ni,...Qt,name:String,transparent:{type:Boolean,default:!0},credit:{type:[String,Object],default:"MapQuest, SuperMap iServer Imagery"},...An};var yy=a.defineComponent({name:"VcImageryProviderSupermap",props:vy,emits:it,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="SuperMapImageryProvider";const n=tt(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{Cesium.SuperMapImageryProvider=Cesium.SuperMapImageryProvider||xI,n.unwatchFns.length===0&&n.setPropsWatcher(!0);const o=n.transformProps(e);return new Cesium.SuperMapImageryProvider(o)},()=>{var o;return a.createCommentVNode(ne(((o=i.proxy)==null?void 0:o.$options.name)||""))}}});const Cy={img:"//p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",terrain:"//p{s}.map.gtimg.com/demTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",vector:"//rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&type=vector&styleid={style}&scene=0"};class TI{constructor(t){const{Resource:i,defaultValue:n,Credit:o,Event:r}=Cesium;this._subdomains=t.subdomains||["1","2","3"],this._url=t.url||[t.protocol||"",Cy[t.mapStyle]||Cy.vector].join("");const s=i.createIfNeeded(this._url);s.appendForwardSlash(),this._ready=!1,this._resource=s,this._tileDiscardPolicy=t.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=t.maximumLevel||0,this._maximumLevel=t.maximumLevel||20,this._tilingScheme=new Cesium.WebMercatorTilingScheme,this._rectangle=n(t.rectangle,this._tilingScheme.rectangle);let l=t.credit;typeof l=="string"&&(l=new o(l)),this._credit=l,this.enablePickFeatures=n(t.enablePickFeatures,!1),this._hasAlphaChannel=n(t.hasAlphaChannel,!0),this._errorEvent=new r,this._readyPromise=Jn(),this._ready=!0,this._readyPromise.resolve(!0),this._style=t.styleId}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(t,i,n){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(t,i,n,o){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,AI.call(this,t,i,n,o))}pickFeatures(t,i,n,o,r){}}function AI(e,t,i,n){let o=this._url;const r=this._subdomains,s=this.tilingScheme.getNumberOfYTilesAtLevel(i)-t-1;return o=o.replace("{s}",r[(e+t+i)%r.length]).replace("{style}",this._style).replace("{x}",e).replace("{y}",-t).replace("{z}",i).replace("{sx}",e>>4).replace("{sy}",(1<<i)-t>>4).replace("{reverseY}",s),this._resource.getDerivedResource({url:o,request:n})}var II=TI;const by={..._i,subdomains:{type:Array,default:()=>["1","2","3"]},mapStyle:{type:String,default:"vector"},styleId:{type:String,default:"1"},protocol:String,...bt,...ni,...Qt,...Ot,...Pi,...An};var wy=a.defineComponent({name:"VcImageryProviderTencent",props:by,emits:it,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="TencentImageryProvider";const n=tt(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{Cesium.TencentImageryProvider=Cesium.TencentImageryProvider||II,n.unwatchFns.length===0&&n.setPropsWatcher(!0);const o=n.transformProps(e);return new Cesium.TencentImageryProvider(o)},()=>{var o;return a.createCommentVNode(ne(((o=i.proxy)==null?void 0:o.$options.name)||""))}}}),jt={IMG_W:"img_w",IMG_C:"img_c",CIA_W:"cia_w",CIA_C:"cia_c",VEC_W:"vec_w",VEC_C:"vec_c",TER_W:"ter_w",TER_C:"ter_c",CVA_W:"cva_w",CVA_C:"cva_c",CTA_W:"cta_w",CTA_C:"cta_c",EIA_W:"eia_w",EIA_C:"eia_c",EVA_W:"eva_w",EVA_C:"eva_c",IBO_C:"ibo_c",IBO_W:"ibo_w"};const _y={},Py={},nu={},Oy={},ou={},wo={};class DI{constructor(t){Object.keys(jt).forEach(u=>{switch(_y[jt[u]]=t.protocol+"://{s}.tianditu.gov.cn/"+jt[u]+"/wmts",Py[jt[u]]=jt[u].slice(0,3),nu[jt[u]]=jt[u].slice(4),Oy[jt[u]]="tiles",nu[jt[u]]==="w"?ou[jt[u]]="900913":ou[jt[u]]="4490",jt[u]){case"img_w":case"img_c":case"cia_w":case"cia_c":case"cta_w":case"cta_c":wo[jt[u]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18"];break;case"vec_w":case"vec_c":case"cva_w":case"cva_c":wo[jt[u]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"];break;case"ter_w":case"ter_c":wo[jt[u]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14"];break;case"eia_w":case"eia_c":case"eva_w":case"eva_c":case"ibo_c":case"ibo_w":wo[jt[u]]=["1","2","3","4","5","6","7","8","9","10"];break}});const{Credit:i,defaultValue:n,Event:o,GeographicTilingScheme:r,WebMercatorTilingScheme:s,when:l}=Cesium;t=n(t,{}),this._mapStyle=n(t.mapStyle,jt.IMG_W),this._url=t.url||n(t.url,_y[this._mapStyle]),this._token=t.token,this._layer=n(t.layer,Py[this._mapStyle]),this._style=n(t.style,"default"),this._tileMatrixSetID=n(t.tileMatrixSetID,nu[this._mapStyle]),this._tileMatrixLabels=n(t.tileMatrixLabels,wo[this._mapStyle]),this._format=n(t.format,Oy[this._mapStyle]),this._epsgCode=ou[this._mapStyle],this._tilingScheme=this._epsgCode==="900913"?new s:new r,this._tileWidth=n(t.tileWidth,256),this._tileHeight=n(t.tileHeight,256),this._minimumLevel=n(t.minimumLevel,0),this._maximumLevel=n(t.maximumLevel,wo[this._mapStyle].length),this._rectangle=n(t.rectangle,this.tilingScheme.rectangle),this._readyPromise=Promise.resolve(!0),this._errorEvent=new o;const c=n(t.credit,"\u5929\u5730\u56FE\u5168\u7403\u5F71\u50CF\u670D\u52A1");this._credit=typeof c=="string"?new i(c):c,this._subdomains=n(t.subdomains,["t0","t1","t2","t3","t4","t5","t6","t7"]),this._tileDiscardPolicy=t.tileDiscardPolicy}requestImage(t,i,n){const o=RI.call(this,t,i,n);return Cesium.ImageryProvider.loadImage(this,o)}pickFeatures(t,i,n,o,r){}get url(){return this._url}get mapStyle(){return this._mapStyle}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}get maximumLevel(){return this._maximumLevel}get minimumLevel(){return this._minimumLevel}get tilingScheme(){return this._tilingScheme}get rectangle(){return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return!0}get readyPromise(){return this._readyPromise}get credit(){return this._credit}get hasAlphaChannel(){return!0}get tileDiscardPolicy(){return this._tileDiscardPolicy}}function RI(e,t,i){var n;const{combine:o,defined:r,defaultValue:s,queryToObject:l,objectToQuery:c,Uri:u}=Cesium,m=Object.freeze({service:"WMTS",version:"1.0.0",request:"GetTile"});this._epsgCode==="900913"&&(i-=1);const h=this._tileMatrixLabels,f=r(h)?h[i]:i.toString(),p=this._subdomains;let y=this._url.replace("{s}",p[(e+t+i)%p.length]);const g=new u(y);let v=l(s((n=g.query)==null?void 0:n.call(g),""));v=o(m,v),v.tilematrix=f,v.layer=this._layer,v.style=this._style,v.tilerow=t,v.tilecol=e,v.tilematrixset=this._tileMatrixSetID,v.format=this._format;const w=c(v);return y=g.toString()+"?"+w,r(this._proxy)&&(y=this._proxy.getURL(y)),r(this._token)&&(y+="&tk="+this._token),y}var LI=DI;const Ey={..._i,...ni,...Qt,...Ot,mapStyle:{type:String,default:"img_w",validator:e=>["cia_c","cia_w","cta_c","cta_w","cva_c","cva_w","ela_c","ela_w","eva_c","eva_w","img_c","img_w","ter_c","ter_w","vec_c","vec_w","ibo_c","ibo_w"].includes(e)},token:String,protocol:{type:String,default:"https"},credit:{type:[String,Object],default:"\u5929\u5730\u56FE\u5168\u7403\u5F71\u50CF\u670D\u52A1"},...An};var My=a.defineComponent({name:"VcImageryProviderTianditu",props:Ey,emits:it,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="TiandituImageryProvider";const n=tt(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{Cesium.TiandituImageryProvider=Cesium.TiandituImageryProvider||LI,n.unwatchFns.length===0&&n.setPropsWatcher(!0);const o=n.transformProps(e);return new Cesium.TiandituImageryProvider(o)},()=>{var o;return a.createCommentVNode(ne(((o=i.proxy)==null?void 0:o.$options.name)||""))}}});const Sy={...Pi,...Ie,color:{type:[Object,String,Array],default:"YELLOW"},...Gi,...Ui};var xy=a.defineComponent({name:"VcImageryProviderTileCoordinates",props:Sy,emits:it,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="TileCoordinatesImageryProvider",tt(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Ty={url:[String,Object],...dl,...bt,...ni,...Qt,...Ot,...Pi,...Ie,...Gi,...Ui,flipXY:Boolean,...An};var Ay=a.defineComponent({name:"VcImageryProviderTms",props:Ty,emits:it,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="TileMapServiceImageryProvider",tt(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Iy={..._i,...hl,...bt,...ni,...Qt,...Ot,...Pi,...Ie,...Gi,...Ui,dir:{type:String,reqiured:!0},scales:{type:Array,default:()=>[1/295829355,1/147914678,1/73957339,1/36978669,1/18489335,1/9244667,1/4622334,1/2311167,1/1155583,1/577792,1/288896,1/144448,1/72224,1/36112,1/18056,1/9026,1/4514]}};var Dy=a.defineComponent({name:"VcImageryProviderTiledcache",props:Iy,emits:it,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="UrlTemplateImageryProvider";const n=tt(e,t,i);if(n===void 0)return;i.createCesiumObject=async()=>{const r=n.transformProps(e),{Credit:s,defined:l,defaultValue:c,DeveloperError:u,Ellipsoid:d,GeographicTilingScheme:m,Rectangle:h,Resource:f,UrlTemplateImageryProvider:p}=Cesium,{url:y,dir:g,format:v}=r;if(!l(y))throw new u("options.url is required.");if(!l(g))throw new u("options.dir is required.");const w=f.createIfNeeded(y);w.url+=`?dir=${g}&scale={scale}&col={x}&row={y}&format=${v}`;const C=c(r.tilingScheme,new m({ellipsoid:c(r.ellipsoid,d.WGS84),numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1})),P=c(r.tileWidth,256),_=c(r.tileHeight,256),E=r.maximumLevel,S=c(r.minimumLevel,0),x=c(r.rectangle,C.rectangle),T=C.positionToTileXY(h.southwest(x),S),V=C.positionToTileXY(h.northeast(x),S),I=(Math.abs(V.x-T.x)+1)*(Math.abs(V.y-T.y)+1);if(I>4)throw new u("The rectangle and minimumLevel indicate that there are "+I+" tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.");let R=c(r.credit,"");return typeof R=="string"&&(R=new s(R)),new p({url:w,credit:R,tilingScheme:C,tileWidth:P,tileHeight:_,minimumLevel:S,maximumLevel:E,rectangle:x,customTags:{scale:(L,j,M,b)=>{const B=1/e.scales[b];return o(L,"{scale}",B)}}})};const o=(r,s,l)=>{if(r&&r.urlSchemeZeroPadding&&Object.prototype.hasOwnProperty.call(r.urlSchemeZeroPadding,s)){const c=r.urlSchemeZeroPadding[s];if(typeof c=="string"){const u=c.length;u>1&&(l=l.length>=u?l:new Array(u-l.toString().length+1).join("0")+l)}}return l};return()=>{var r;return a.createCommentVNode(ne(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});const Ry={..._i,pickFeaturesUrl:[String,Object],urlSchemeZeroPadding:Object,...na,...bt,...ni,...Qt,...Ot,...Pi,...Ie,...Gi,...Ui,hasAlphaChannel:{type:Boolean,default:!0},...fl,...ia,customTags:Object,...An};var Ly=a.defineComponent({name:"VcImageryProviderUrltemplate",props:Ry,emits:it,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="UrlTemplateImageryProvider",tt(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const By={..._i,...ul,parameters:Object,getFeatureInfoParameters:Object,...ia,...fl,...Ot,...Pi,...Ie,...Gi,...Ui,...ni,...Qt,crs:String,srs:String,...bt,...na,...pl,...gl,getFeatureInfoUrl:[String,Object]};var jy=a.defineComponent({name:"VcImageryProviderWms",props:By,emits:it,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="WebMapServiceImageryProvider",tt(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Fy={..._i,...hl,layer:{type:String,required:!0},wmtsStyle:{type:String,required:!0},tileMatrixSetID:{type:String,required:!0},tileMatrixLabels:Array,...pl,...gl,dimensions:Object,...Gi,...Ui,...Pi,...Ot,...ni,...Qt,...Ie,...bt,...na};var Vy=a.defineComponent({name:"VcImageryProviderWmts",props:Fy,emits:it,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="WebMapTileServiceImageryProvider",tt(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Ny={url:[String,Object],requestVertexNormals:{type:Boolean,default:!1},requestWaterMask:{type:Boolean,default:!1},requestMetadata:{type:Boolean,default:!0},...Ie,...bt};var ky=a.defineComponent({name:"VcTerrainProviderCesium",props:Ny,emits:it,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="CesiumTerrainProvider";const n=tt(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{n.unwatchFns.length===0&&n.setPropsWatcher(!0);const o=n.transformProps(e);return Cesium.defined(o.url)?new Cesium.CesiumTerrainProvider(o):Cesium.createWorldTerrain({requestVertexNormals:o.requestVertexNormals,requestWaterMask:o.requestWaterMask})},()=>{var o;return a.createCommentVNode(ne(((o=i.proxy)==null?void 0:o.$options.name)||""))}}});const zy={url:{type:[String,Object],default:"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"},...Ie,...cl};var $y=a.defineComponent({name:"VcTerrainProviderArcgis",props:zy,emits:it,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="ArcGISTiledElevationTerrainProvider",tt(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Gy={url:{type:[String,Object],default:"https://www.vr-theworld.com/vr-theworld/tiles1.0.0/73/"},...Ie,...bt};var Uy=a.defineComponent({name:"VcTerrainProviderVrTheworld",props:Gy,emits:it,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="VRTheWorldTerrainProvider",tt(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Hy={url:{type:String,default:"https://{s}.tianditu.gov.cn/"},subdomains:{type:Array,default:()=>["t0","t1","t2","t3","t4","t5","t6","t7"]},pluginPath:{type:String,default:"https://api.tianditu.gov.cn/cdn/plugins/cesium/cesiumTdt.js"},dataType:{type:String,default:"int",validator:e=>["int","float"].includes(e)},tileType:{type:String,default:"heightmap",validator:e=>["heightmap","quantized-mesh"].includes(e)},token:String};var Wy=a.defineComponent({name:"VcTerrainProviderTianditu",props:Hy,emits:it,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="GeoTerrainProvider";const n=tt(e,t,i);if(n===void 0)return;const{emit:o}=t,r=Nl();let s;return i.createCesiumObject=async()=>new Promise((l,c)=>{s=document.createElement("script"),document.body.appendChild(s),s.src=e.pluginPath,s.onload=()=>{n.unwatchFns.length===0&&n.setPropsWatcher(!0);const u=[];for(let d=0;d<e.subdomains.length;d++){const m=e.url.replace("{s}",e.subdomains[d])+"mapservice/swdx?tk="+e.token;u.push(m)}l(new Cesium.GeoTerrainProvider({urls:u}))}}),i.unmount=async()=>{const l=new Cesium.EllipsoidTerrainProvider;return l.readyPromise.then(()=>{Ee(i,"readyPromise")&&o("readyPromise",l,r==null?void 0:r.viewer,i.proxy)}),r&&(r.viewer.terrainProvider=l),s==null||s.parentNode.removeChild(s),!0},()=>{var l;return a.createCommentVNode(ne(((l=i.proxy)==null?void 0:l.$options.name)||""))}}});[qv,Xv,Jv,ty,ny,ry,ay,ly,uy,my,yy,wy,My,xy,Ay,Dy,Ly,jy,Vy,ky,$y,Uy,Wy].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const qy=qv,Zy=Xv,Xy=Jv,Yy=ty,Qy=ny,Ky=ry,Jy=ay,eC=ly,tC=uy,iC=my,nC=yy,oC=wy,rC=My,aC=xy,sC=Ay,lC=Dy,cC=Ly,uC=jy,dC=Vy,mC=ky,hC=$y,fC=Uy,pC=Wy,gC={...Se,...et,entities:{type:Array,default:()=>[]},name:String,destroy:{type:Boolean,default:!1}};var vC=a.defineComponent({name:"VcDatasourceCustom",props:gC,emits:Qo,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="CustomDataSource",Wo(e,t,i),i.createCesiumObject=async()=>new Cesium.CustomDataSource(e.name),()=>{var n,o;return t.slots.default?a.h("i",{class:ne(((n=i.proxy)==null?void 0:n.$options.name)||""),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(((o=i.proxy)==null?void 0:o.$options.name)||""))}}});const yC={...Se,...et,entities:{type:Array,default:()=>[]},czml:{type:[String,Object],required:!0},...la,...bt,destroy:{type:Boolean,default:!1}};var CC=a.defineComponent({name:"VcDatasourceCzml",props:yC,emits:Qo,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="CzmlDataSource";const n=Wo(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{const o=n.transformProps(e);return Cesium.CzmlDataSource.load(e.czml,o)},()=>{var o,r;return t.slots.default?a.h("i",{class:ne(((o=i.proxy)==null?void 0:o.$options.name)||""),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});const bC={...Se,...et,entities:{type:Array,default:()=>[]},...Tl,...la,describe:[Function,Object],markerSize:{type:Number,default:48},markerSymbol:String,markerColor:{type:[Object,String,Array],default:()=>({x:.2549019607843137,y:.4117647058823529,z:.8823529411764706}),watcherOptions:{cesiumObjectBuilder:Ae}},stroke:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0}),watcherOptions:{cesiumObjectBuilder:Ae}},strokeWidth:{type:Number,default:2},fill:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0,w:.39215686274509803}),watcherOptions:{cesiumObjectBuilder:Ae}},...Vo,...bt,destroy:{type:Boolean,default:!1}};var wC=a.defineComponent({name:"VcDatasourceGeojson",props:bC,emits:Qo,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="GeoJsonDataSource";const n=Wo(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{const o=n.transformProps(e);return Cesium.GeoJsonDataSource.load(e.data,o)},()=>{var o,r;return t.slots.default?a.h("i",{class:ne(((o=i.proxy)==null?void 0:o.$options.name)||""),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});const _C={...Se,...et,entities:{type:Array,default:()=>[]},...Tl,camera:Object,canvas:HTMLCanvasElement,...la,...Vo,...Ie,...bt,destroy:{type:Boolean,default:!1},screenOverlayContainer:[Element,String]};var PC=a.defineComponent({name:"VcDatasourceKml",props:_C,emits:Qo,setup(e,t){const i=a.getCurrentInstance();i.cesiumClass="KmlDataSource";const n=Wo(e,t,i),o=Nl();return i.createCesiumObject=async()=>{const r=n==null?void 0:n.transformProps(e);return r.camera||(r.camera=o==null?void 0:o.viewer.camera),r.canvas||(r.canvas=o==null?void 0:o.viewer.canvas),Cesium.KmlDataSource.load(e.data||"",r)},()=>{var r,s;return t.slots.default?a.h("i",{class:ne(((r=i.proxy)==null?void 0:r.$options.name)||""),style:{display:"none !important"}},Xe(t.slots.default)):a.createCommentVNode(ne(((s=i.proxy)==null?void 0:s.$options.name)||""))}}});[vC,CC,wC,PC].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const OC=vC,EC=CC,MC=wC,SC=PC,xC={...Br,...Mn,...Hn,...Ro,...Lo,...jo,...zt,...zi,...$i,...zs,...jr,...yi,...It,...Sn,...xn,...Bo,...En,...Se,...at,...am};var TC=a.defineComponent({name:"VcGraphicsBillboard",props:xC,emits:Yo,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="BillboardGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const AC={...Se,...Fr,...zt,...Ci,...Xt,...bi,...$t,...Gt,...Ft,...at};var IC=a.defineComponent({name:"VcGraphicsBox",props:AC,emits:Yo,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="BoxGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const BI={...Se,...Yt,...yi,...It,...zt,...Ut,...Fo,...Tn,...Ke,...Ci,...Xt,...bi,...$t,...Gt,...Ft,...at,...wi,...Wn};var RC=a.defineComponent({name:"VcGraphicsCorridor",props:BI,emits:Yo,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="CorridorGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const LC={...Se,...Vr,...Nr,...kr,...zt,...Ci,...Xt,...bi,...$t,...Gt,...qn,...zr,...Ft,...at};var BC=a.defineComponent({name:"VcGraphicsCylinder",props:LC,emits:Yo,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="CylinderGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const jC={...Se,...$r,...Gr,...It,...zt,...Ut,...Fo,...$i,...xi,...Ke,...Ci,...Xt,...bi,...$t,...Gt,...qn,...Ft,...at,...wi,...Wn};var FC=a.defineComponent({name:"VcGraphicsEllipse",props:jC,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="EllipseGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const VC={...Se,...Ur,...Hr,...Wr,...qr,...Zr,...Xr,...zt,...Ci,...Xt,...bi,...$t,...Gt,...Zn,...Xn,...Yr,...Ft,...at};var NC=a.defineComponent({name:"VcGraphicsEllipsoid",props:VC,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="EllipsoidGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const kC={...Se,...$s,...Gs,...Us,...Mn,...Hs,...Ws,...qs,...Hn,...Ro,...Lo,...jo,...zt,...Zs,...$t,...Gt,...xn,...Bo,...Sn,...at,...En};var zC=a.defineComponent({name:"VcGraphicsLabel",props:kC,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="LabelGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const $C={...Se,...Xs,...Mn,...Ys,...Qs,...Ks,...sm,...Js,...Ft,...zt,...el,...tl,...zi,...il,...nl,...Qr,...ol,...at,...lm,...cm,...Kr};var GC=a.defineComponent({name:"VcGraphicsModel",props:$C,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="ModelGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const UC={...Se,leadTime:[Number,Object,Function],trailTime:[Number,Object,Function],...yi,resolution:{type:[Number,Object,Function],default:60},...Xt,...at};var HC=a.defineComponent({name:"VcGraphicsPath",props:UC,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="PathGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const WC={...Se,...um,dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:lt}},...Ci,...Xt,...bi,...$t,...Gt,...Ft,...at};var qC=a.defineComponent({name:"VcGraphicsPlane",props:WC,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="PlaneGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const ZC={...Se,...rl,...zt,...zi,...$t,...Gt,...Sn,...xn,...at,...En};var XC=a.defineComponent({name:"VcGraphicsPoint",props:ZC,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="PointGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const YC={...Se,...dm,...It,...zt,...Ut,...Fo,...xi,...Ke,...Ci,...Xt,...bi,...$t,...Gt,...Jr,...al,...sl,...rn,...Ft,...at,...wi,...Wn};var QC=a.defineComponent({name:"VcGraphicsPolygon",props:YC,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="PolygonGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const KC={...Se,...Yt,...yi,...Ke,...Xt,...mm,...rn,...Vo,...Ft,...at,...wi,...Wn};var JC=a.defineComponent({name:"VcGraphicsPolyline",props:KC,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="PolylineGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const eb={...Se,...Yt,...hm,...Tn,...Ke,...Ci,...Xt,...bi,...$t,...Gt,...Ft,...at};var tb=a.defineComponent({name:"VcGraphicsPolylineVolume",props:eb,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="PolylineVolumeGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const ib={...Se,...fm,...It,...zt,...Ut,...Fo,...$i,...xi,...Ke,...Ci,...Xt,...bi,...$t,...Gt,...Ft,...at,...wi,...Wn};var nb=a.defineComponent({name:"VcGraphicsRectangle",props:ib,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="RectangleGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const ob={...Se,...Xs,...ll};var rb=a.defineComponent({name:"VcGraphicsTileset",props:ob,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="Cesium3DTilesetGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const ab={...Se,...Yt,...ea,...ta,...Ke,...Ci,...Xt,...bi,...$t,...Gt,...Ft,...at};var sb=a.defineComponent({name:"VcGraphicsWall",props:ab,emits:ye,setup(e,t){const i=a.getCurrentInstance();return i.cesiumClass="WallGraphics",Et(e,t,i),()=>{var n;return a.createCommentVNode(ne(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});[TC,IC,RC,BC,FC,NC,zC,GC,HC,qC,XC,QC,JC,tb,nb,rb,sb].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const lb=TC,cb=IC,ub=RC,db=BC,mb=FC,hb=NC,fb=zC,pb=GC,gb=HC,vb=qC,yb=XC,Cb=QC,bb=JC,wb=tb,_b=nb,Pb=rb,Ob=sb;var Qa=a.defineComponent({name:"VcConfigProvider",props:{locale:{type:Object,default:()=>Sm},cesiumPath:{type:String,default:"https://cdn.jsdelivr.net/npm/cesium@latest/Build/Cesium/Cesium.js"},accessToken:{type:String,default:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"}},setup(e,{slots:t}){const i=Wd(e);return()=>a.renderSlot(t,"default",{config:i==null?void 0:i.value})}});Qa.install=e=>{e.component(Qa.name,Qa)};const Eb=Qa;var jI=Eb;const FI=Eb,VI={...ye,stop:e=>!0};var Mb=a.defineComponent({name:"VcAnalysisFlood",props:{minHeight:{type:Number,default:-1},maxHeight:{type:Number,default:8888},speed:{type:Number,default:10},loop:{type:Boolean,default:!1},color:{type:[Object,Array,String],default:"rgba(40,150,200,0.6)"},...Rn},emits:VI,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="VcAnalysisFlood",n.cesiumEvents=[];const o=Le(e,t,n);if(o===void 0)return;const{emit:r}=t,s=a.ref(!1);(i=Ct(n).proxy.creatingPromise)==null||i.then(()=>{s.value=!0});const c=a.ref(!1),u=a.ref(null),d=a.ref(-1),m=a.ref(null);let h=!1,f=[];f.push(a.watch(()=>e.minHeight,w=>{d.value=w})),n.createCesiumObject=async()=>{const{ColorGeometryInstanceAttribute:w}=Cesium;return u.value={color:w.fromColor(Ae(e.color))},m.value},n.mount=async()=>{const{viewer:w}=o.$services;return w.clock.onTick.addEventListener(p),!0},n.unmount=async()=>{const{viewer:w}=o.$services;return w.clock.onTick.removeEventListener(p),d.value=-1,c.value=!1,!0};const p=()=>{c.value&&(d.value<=e.maxHeight?(d.value+=e.speed,h=!1):(Ee(n,"stop")&&r("stop",m.value),h=!0,e.loop?d.value=e.minHeight:c.value=!1))},y=()=>{d.value=e.minHeight,c.value=!0},g=()=>{c.value=!c.value,h&&(d.value=e.minHeight)},v=()=>{d.value=-1,c.value=!1};return a.onUnmounted(()=>{f.forEach(w=>w()),f=[]}),Object.assign(n.proxy,{start:y,pause:g,stop:v}),()=>{if(s.value){const{createGuid:w}=Cesium;return a.h(Gc,{asynchronous:!1,ref:m},()=>a.h(Xi,{id:w(),attributes:u.value},()=>a.h(Zc,{extrudedHeight:d.value,polygonHierarchy:e.polygonHierarchy})))}else return a.createCommentVNode("v-if")}}});const NI=Object.assign({},st,{icon:"vc-icons-analysis-sightline"}),kI=Object.assign({},Vc,{polylineOpts:Object.assign({},go,{colors:["#51ff00","red"]}),primitiveOpts:Object.assign({},Vn,{appearance:{type:"PolylineColorAppearance"},depthFailAppearance:{type:"PolylineColorAppearance"}}),sightlineType:"polyline"}),zI=Object.assign({},st,{icon:"vc-icons-analysis-viewshed"}),$I=Object.assign({},Fa,{pointOpts:Object.assign({},pn,{show:!1}),polylineOpts:Object.assign({},go,{width:15}),primitiveOpts:Object.assign({},Vn,{show:!1,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}}}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},vt),removeAll:Object.assign({},vt,{icon:"vc-icons-delete"})},ellipsoidOpts:{show:!0,horizontalViewAngle:90,verticalViewAngle:60,color:"#fff"}}),GI=Object.assign({},st,{direction:"right",icon:"vc-icons-analysis-button",activeIcon:"vc-icons-analysis-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),Sb=["sightline","viewshed"],ru={...kc,analyses:{type:Array,default:()=>Sb,validator:e=>{let t=!0;return e.forEach(i=>{Sb.includes(i)||(console.error(`VueCesium: unknown analysis type: ${i}`),t=!1)}),t}},mainFabOpts:{type:Object,default:()=>GI},sightlineActionOpts:{type:Object,default:()=>NI},sightlineAnalysisOpts:{type:Object,default:()=>kI},viewshedActionOpts:{type:Object,default:()=>zI},viewshedAnalysisOpts:{type:Object,default:()=>$I}},_o=ci(ru);var xb=a.defineComponent({name:"VcAnalysisSightline",props:{...Bt,polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,sightlineType:{type:String,default:"polyline"}},emits:ct,setup(e,t){if(e.sightlineType==="segment"||e.sightlineType==="circle")return Yi(e,t,"VcAnalysisSightline");if(e.sightlineType==="polyline")return Co(e,t,"VcAnalysisSightline")}}),UI=`
#define USE_CUBE_MAP_SHADOW true
 uniform sampler2D colorTexture;
 uniform sampler2D depthTexture;
 varying vec2 v_textureCoordinates;
 uniform mat4 camera_projection_matrix;
 uniform mat4 camera_view_matrix;
 uniform samplerCube shadowMap_textureCube;
 uniform mat4 shadowMap_matrix;
 uniform vec4 shadowMap_lightPositionEC;
 uniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness;
 uniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth;
 uniform float vc_viewDistance;
 uniform vec4 vc_visibleAreaColor;
 uniform vec4 vc_invisibleAreaColor;
 struct zx_shadowParameters
 {
     vec3 texCoords;
     float depthBias;
     float depth;
     float nDotL;
     vec2 texelStepSize;
     float normalShadingSmooth;
     float darkness;
 };
 float czm_shadowVisibility(samplerCube shadowMap, zx_shadowParameters shadowParameters)
 {
     float depthBias = shadowParameters.depthBias;
     float depth = shadowParameters.depth;
     float nDotL = shadowParameters.nDotL;
     float normalShadingSmooth = shadowParameters.normalShadingSmooth;
     float darkness = shadowParameters.darkness;
     vec3 uvw = shadowParameters.texCoords;
     depth -= depthBias;
     float visibility = czm_shadowDepthCompare(shadowMap, uvw, depth);
     return czm_private_shadowVisibility(visibility, nDotL, normalShadingSmooth, darkness);
 }
 vec4 getPositionEC(){
     return czm_windowToEyeCoordinates(gl_FragCoord);
 }
 vec3 getNormalEC(){
     return vec3(1.);
 }
 vec4 toEye(in vec2 uv,in float depth){
     vec2 xy=vec2((uv.x*2.-1.),(uv.y*2.-1.));
     vec4 posInCamera=czm_inverseProjection*vec4(xy,depth,1.);
     posInCamera=posInCamera/posInCamera.w;
     return posInCamera;
 }
 vec3 pointProjectOnPlane(in vec3 planeNormal,in vec3 planeOrigin,in vec3 point){
     vec3 v01=point-planeOrigin;
     float d=dot(planeNormal,v01);
     return(point-planeNormal*d);
 }
 float getDepth(in vec4 depth){
     float z_window=czm_unpackDepth(depth);
     z_window=czm_reverseLogDepth(z_window);
     float n_range=czm_depthRange.near;
     float f_range=czm_depthRange.far;
     return(2.*z_window-n_range-f_range)/(f_range-n_range);
 }
 float shadow(in vec4 positionEC){
     vec3 normalEC=getNormalEC();
     zx_shadowParameters shadowParameters;
     shadowParameters.texelStepSize=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy;
     shadowParameters.depthBias=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z;
     shadowParameters.normalShadingSmooth=shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w;
     shadowParameters.darkness=shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w;
     vec3 directionEC=positionEC.xyz-shadowMap_lightPositionEC.xyz;
     float distance=length(directionEC);
     directionEC=normalize(directionEC);
     float radius=shadowMap_lightPositionEC.w;
     if(distance>radius)
     {
         return 2.0;
     }
     vec3 directionWC=czm_inverseViewRotation*directionEC;
     shadowParameters.depth=distance/radius-0.0003;
     shadowParameters.nDotL=clamp(dot(normalEC,-directionEC),0.,1.);
     shadowParameters.texCoords=directionWC;
     float visibility=czm_shadowVisibility(shadowMap_textureCube,shadowParameters);
     return visibility;
 }
 bool visible(in vec4 result)
 {
     result.x/=result.w;
     result.y/=result.w;
     result.z/=result.w;
     return result.x>=-1.&&result.x<=1.
     &&result.y>=-1.&&result.y<=1.
     &&result.z>=-1.&&result.z<=1.;
 }
 void main(){
     // \u91C9\u8272 = \u7ED3\u6784\u4E8C\u7EF4(\u989C\u8272\u7EB9\u7406, \u7EB9\u7406\u5750\u6807)
     gl_FragColor = texture2D(colorTexture, v_textureCoordinates);
     // \u6DF1\u5EA6 = \u83B7\u53D6\u6DF1\u5EA6(\u7ED3\u6784\u4E8C\u7EF4(\u6DF1\u5EA6\u7EB9\u7406, \u7EB9\u7406\u5750\u6807))
     float depth = getDepth(texture2D(depthTexture, v_textureCoordinates));
     // \u89C6\u89D2 = (\u7EB9\u7406\u5750\u6807, \u6DF1\u5EA6)
     vec4 viewPos = toEye(v_textureCoordinates, depth);
     // \u4E16\u754C\u5750\u6807
     vec4 wordPos = czm_inverseView * viewPos;
     // \u865A\u62DF\u76F8\u673A\u4E2D\u5750\u6807
     vec4 vcPos = camera_view_matrix * wordPos;
     float near = .001 * vc_viewDistance;
     float dis = length(vcPos.xyz);
     if(dis > near && dis < vc_viewDistance){
         // \u900F\u89C6\u6295\u5F71
         vec4 posInEye = camera_projection_matrix * vcPos;
         // \u53EF\u89C6\u533A\u989C\u8272
         // vec4 vc_visibleAreaColor=vec4(0.,1.,0.,.5);
         // vec4 vc_invisibleAreaColor=vec4(1.,0.,0.,.5);
         if(visible(posInEye)){
             float vis = shadow(viewPos);
             if(vis > 0.3){
                 gl_FragColor = mix(gl_FragColor,vc_visibleAreaColor,.5);
             } else{
                 gl_FragColor = mix(gl_FragColor,vc_invisibleAreaColor,.5);
             }
         }
     }
 }
`,Tb=a.defineComponent({name:"VcAnalysisViewshed",props:{...Bt,polylineOpts:Object,primitiveOpts:Object,ellipsoidOpts:Object},emits:ct,setup(e,t){return Yi(e,t,"VcAnalysisViewshed",UI)}});const HI={...ct,fabUpdated:e=>!0};var Ab=a.defineComponent({name:"VcAnalyses",props:ru,emits:HI,setup(e,t){var i;const n=a.getCurrentInstance();n.cesiumClass="VcAnalyses";const{t:o}=gt(),r={},s=a.reactive(Object.assign({},_o.clearActionOpts,e.clearActionOpts)),l=a.reactive(Object.assign({},_o.mainFabOpts,e.mainFabOpts)),c=a.reactive(Object.assign({},_o.sightlineActionOpts,e.sightlineActionOpts)),u=a.reactive(Object.assign({},_o.sightlineAnalysisOpts,e.sightlineAnalysisOpts)),d=a.reactive(Object.assign({},_o.viewshedActionOpts,e.viewshedActionOpts)),m=a.reactive(Object.assign({},_o.viewshedAnalysisOpts,e.viewshedAnalysisOpts));r.sightlineActionOpts=c,r.sightlineAnalysisOpts=u,r.viewshedActionOpts=d,r.viewshedAnalysisOpts=m,r.clearActionOpts=s;const h=a.computed(()=>e.analyses.map(p=>({name:p,type:"analysis",actionStyle:{background:r[`${At(p)}ActionOpts`].color,color:r[`${At(p)}ActionOpts`].textColor},actionClass:`vc-analysis-${p} vc-analysis-button`,actionRef:a.ref(null),actionOpts:r[`${At(p)}ActionOpts`],cmp:f(p),cmpRef:a.ref(null),cmpOpts:r[`${At(p)}AnalysisOpts`],tip:r[`${At(p)}ActionOpts`].tooltip.tip||o(`vc.analysis.${At(p)}.tip`),isActive:!1})));function f(p){switch(p){case"sightline":return xb;case"viewshed":return Tb;default:return}}return(i=Jc(e,t,n,h,l,s,"analysis"))==null?void 0:i.renderContent}});[Mb,Ab].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const Ib=Mb,Db=Ab;var WI=[Dh,Jf,ep,tp,ip,np,op,rp,ap,sp,lp,cp,up,X6,rI,Ip,qy,Zy,Xy,Yy,Qy,Ky,Jy,eC,tC,iC,nC,oC,rC,aC,sC,lC,cC,uC,dC,mC,hC,fC,pC,OC,EC,MC,SC,xp,lb,cb,ub,db,mb,hb,fb,pb,gb,vb,yb,Cb,bb,wb,_b,Pb,Ob,Gc,Uc,ka,Wp,Zi,qp,Zp,qc,Lg,fr,pr,Bg,yo,jg,Fg,Vg,Ng,kg,Ua,k6,X0,Y0,Q0,K0,J0,ev,tv,iv,nv,ov,rv,av,sv,Wa,lv,cv,qa,uv,dv,Zc,mv,Nn,hv,fv,pv,gv,vv,yv,Cv,bv,wv,gn,lg,ug,dg,cg,Yc,Sv,xv,Kt,cn,wt,Ah,sc,Oh,va,Eh,Mh,Sh,ic,nc,oc,rc,xh,ac,Th,lc,ya,jI,Ib,Db],au=Zd([...WI]);const qI=au.install,ZI=au.version;O.AngleUnits=mt,O.AreaUnits=dt,O.DistanceUnits=_t,O.DrawStatus=be,O.DynamicOverlay=Ba,O.MeasureUnits=nt,O.PolygonPrimitive=Fc,O.Ripple=Fm,O.Spinner=ha,O.SpinnerBall=zl,O.SpinnerBars=$l,O.SpinnerDots=Gl,O.SpinnerGears=Ul,O.SpinnerHourglass=Hl,O.SpinnerIos=Wl,O.SpinnerOrbit=ql,O.SpinnerOval=Zl,O.SpinnerPuff=Xl,O.SpinnerRings=Yl,O.SpinnerTail=Ql,O.TouchHold=ca,O.TouchRepeat=C5,O.VcAjaxBar=Ah,O.VcAnalyses=Db,O.VcAnalysisFlood=Ib,O.VcAnalysisSightline=xb,O.VcAnalysisViewshed=Tb,O.VcBillboard=jg,O.VcBtn=Kt,O.VcCollectionBillboard=qc,O.VcCollectionCloud=Lg,O.VcCollectionLabel=fr,O.VcCollectionPoint=pr,O.VcCollectionPolyline=Bg,O.VcCollectionPrimitive=yo,O.VcCompass=Jf,O.VcCompassSm=ap,O.VcConfigProvider=FI,O.VcCumulusCloud=Fg,O.VcDatasourceCustom=OC,O.VcDatasourceCzml=EC,O.VcDatasourceGeojson=MC,O.VcDatasourceKml=SC,O.VcDistanceLegend=op,O.VcDrawingPin=kv,O.VcDrawingPoint=zv,O.VcDrawingPolygon=Gv,O.VcDrawingPolyline=$v,O.VcDrawingRectangle=Uv,O.VcDrawingRegular=tu,O.VcDrawings=aI,O.VcEntity=v6,O.VcFab=lc,O.VcFabAction=ya,O.VcGeometryBox=X0,O.VcGeometryBoxOutline=Y0,O.VcGeometryCircle=Q0,O.VcGeometryCircleOutline=K0,O.VcGeometryCorridor=tv,O.VcGeometryCorridorOutline=iv,O.VcGeometryCylinder=nv,O.VcGeometryCylinderOutline=ov,O.VcGeometryEllipse=rv,O.VcGeometryEllipseOutline=av,O.VcGeometryEllipsoid=sv,O.VcGeometryEllipsoidOutline=Wa,O.VcGeometryFrustum=lv,O.VcGeometryFrustumOutline=cv,O.VcGeometryGroundPolyline=qa,O.VcGeometryInstance=Xi,O.VcGeometryPlane=uv,O.VcGeometryPlaneOutline=dv,O.VcGeometryPolygon=Zc,O.VcGeometryPolygonCoplanar=J0,O.VcGeometryPolygonCoplanarOutline=ev,O.VcGeometryPolygonOutline=mv,O.VcGeometryPolyline=Nn,O.VcGeometryPolylineVolume=hv,O.VcGeometryPolylineVolumeOutline=fv,O.VcGeometryRectangle=pv,O.VcGeometryRectangleOutline=gv,O.VcGeometrySimplePolyline=vv,O.VcGeometrySphere=yv,O.VcGeometrySphereOutline=Cv,O.VcGeometryWall=bv,O.VcGeometryWallOutline=wv,O.VcGraphicsBillboard=lb,O.VcGraphicsBox=cb,O.VcGraphicsCorridor=ub,O.VcGraphicsCylinder=db,O.VcGraphicsEllipse=mb,O.VcGraphicsEllipsoid=hb,O.VcGraphicsLabel=fb,O.VcGraphicsModel=pb,O.VcGraphicsPath=gb,O.VcGraphicsPlane=vb,O.VcGraphicsPoint=yb,O.VcGraphicsPolygon=Cb,O.VcGraphicsPolyline=bb,O.VcGraphicsPolylineVolume=wb,O.VcGraphicsRectangle=_b,O.VcGraphicsTileset=Pb,O.VcGraphicsWall=Ob,O.VcIcon=cn,O.VcImageryProviderAmap=qy,O.VcImageryProviderArcgis=Zy,O.VcImageryProviderBaidu=Xy,O.VcImageryProviderBing=Yy,O.VcImageryProviderGoogle=Qy,O.VcImageryProviderGrid=Ky,O.VcImageryProviderIon=Jy,O.VcImageryProviderMapbox=eC,O.VcImageryProviderOsm=tC,O.VcImageryProviderSingletile=iC,O.VcImageryProviderSupermap=nC,O.VcImageryProviderTencent=oC,O.VcImageryProviderTianditu=rC,O.VcImageryProviderTileCoordinates=aC,O.VcImageryProviderTiledcache=lC,O.VcImageryProviderTms=sC,O.VcImageryProviderUrltemplate=cC,O.VcImageryProviderWms=uC,O.VcImageryProviderWmts=dC,O.VcLabel=Vg,O.VcLayerImagery=b6,O.VcMeasurementArea=Bv,O.VcMeasurementDistance=Tv,O.VcMeasurementHeight=Rv,O.VcMeasurementHorizontal=Iv,O.VcMeasurementPoint=Lv,O.VcMeasurementPolyline=Av,O.VcMeasurementRectangle=jv,O.VcMeasurementRegular=Fv,O.VcMeasurementVertical=Dv,O.VcMeasurements=Y6,O.VcMyLocation=ip,O.VcNavigation=rp,O.VcNavigationSm=lp,O.VcOverlayDynamic=dg,O.VcOverlayEcharts=cg,O.VcOverlayHeatmap=lg,O.VcOverlayHtml=gn,O.VcOverlayWind=ug,O.VcOverviewMap=cp,O.VcPoint=Ng,O.VcPolygon=Ua,O.VcPolyline=kg,O.VcPostProcessStage=Yc,O.VcPostProcessStageCollection=xv,O.VcPostProcessStageScan=Sv,O.VcPrimitive=Zi,O.VcPrimitiveClassification=Gc,O.VcPrimitiveGround=Uc,O.VcPrimitiveGroundPolyline=ka,O.VcPrimitiveModel=Wp,O.VcPrimitiveParticle=Zp,O.VcPrimitiveTileset=qp,O.VcPrint=tp,O.VcSelectionIndicator=up,O.VcSkeleton=sc,O.VcSpinner=Th,O.VcSpinnerBall=Oh,O.VcSpinnerBars=va,O.VcSpinnerDots=Eh,O.VcSpinnerGears=Mh,O.VcSpinnerHourglass=Sh,O.VcSpinnerIos=ic,O.VcSpinnerOrbit=nc,O.VcSpinnerOval=oc,O.VcSpinnerPuff=rc,O.VcSpinnerRings=xh,O.VcSpinnerTail=ac,O.VcStatusBar=np,O.VcTerrainProviderArcgis=hC,O.VcTerrainProviderCesium=mC,O.VcTerrainProviderTianditu=pC,O.VcTerrainProviderVrTheworld=fC,O.VcTooltip=wt,O.VcViewer=Dh,O.VcZoomControl=ep,O.VcZoomControlSm=sp,O.VisibilityState=dp,O.VolumeUnits=Lt,O.ajaxBarProps=dh,O.amapImageryProviderProps=Wv,O.analysesProps=ru,O.arcgisImageryProviderProps=Zv,O.arcgisTerrainProviderProps=zy,O.baiduImageryProviderProps=Kv,O.billboarGraphicsProps=xC,O.billboardCollectionProps=mg,O.billboardProps=fg,O.bingImageryProviderProps=ey,O.boxGeometryProps=Gg,O.boxGraphicsProps=AC,O.boxOutlineGeometryProps=Hg,O.btnProps=Km,O.buildLocaleContext=Am,O.buildTranslator=xm,O.cesiumTerrainProviderProps=Ny,O.circleGeometryProps=qg,O.circleOutlineGeometryProps=Xg,O.classificationPrimitiveProps=Dp,O.cloudCollectionProps=vg,O.commonEmits=ye,O.compassProps=Vh,O.compassSmProps=Gf,O.corridorGeometryProps=t0,O.corridorOutlineGeometryProps=n0,O.cumulusCloudProps=gg,O.customDatasourceProps=gC,O.cylinderGeometryProps=r0,O.cylinderGraphicsProps=LC,O.cylinderOutlineGeometryProps=s0,O.czmlDatasourceProps=yC,O.datasourceEmits=Qo,O.default=au,O.distanceLegendProps=Nf,O.drawingEmit=ct,O.drawingsProps=eu,O.dynamicOverlayProps=ag,O.echartsOverlayProps=Qp,O.ellipseGeometryProps=c0,O.ellipseGraphicsProps=jC,O.ellipseOutlineGeometryProps=d0,O.ellipsoidGeometryProps=h0,O.ellipsoidGraphicsProps=VC,O.entityProps=Mp,O.fabActionProps=_h,O.fabProps=Ch,O.frustumGeometryProps=g0,O.frustumOutlineGeometryProps=y0,O.geojsonDatasourceProps=bC,O.geometryInstanceProps=zg,O.googleImageryProviderProps=iy,O.graphicsEmits=Yo,O.gridImageryProviderProps=oy,O.groundPolylineGeometryProps=b0,O.groundPolylinePrimitiveProps=jp,O.groundPrimitiveProps=Lp,O.heatmapOverlayProps=Xp,O.htmlOverlayProps=Pp,O.iconProps=Xm,O.imageryLayerProps=Tp,O.install=qI,O.ionImageryProviderProps=vI,O.kmlDatasourceProps=_C,O.labelCollectionProps=Cg,O.labelGraphicsProps=kC,O.labelProps=wg,O.makeInstaller=Zd,O.mapboxImageryProviderProps=sy,O.measurementsProps=$c,O.modelGraphicsProps=$C,O.modelPrimitiveProps=Vp,O.myLocationProps=Hh,O.navigationProps=zf,O.navigationSmProps=qf,O.osmImageryProviderProps=cy,O.overviewProps=Xf,O.particlePrimitiveProps=Up,O.pathGraphicsProps=UC,O.pickEventEmits=Xo,O.planeGeometryProps=_0,O.planeGraphicsProps=WC,O.pointCollectionProps=Pg,O.pointGraphicsProps=ZC,O.pointProps=Eg,O.polygonCoplanarOutlineProps=Jg,O.polygonCoplanarProps=Qg,O.polygonGeometryProps=E0,O.polygonGraphicsProps=YC,O.polygonOutlineGeometryProps=S0,O.polygonProps=Dg,O.polylineGeometryProps=T0,O.polylineGraphicsProps=KC,O.polylineProps=xg,O.polylineVolumeGeometryProps=I0,O.polylineVolumeGraphicsProps=eb,O.polylineVolumeOutlineGeometryProps=R0,O.postProcessStageCollectionProps=Ev,O.postProcessStageProps=_v,O.postProcessStageScanProps=Pv,O.primitiveCollectionEmits=fi,O.primitiveCollectionProps=Ag,O.primitiveEmits=un,O.primitiveProps=kp,O.printProps=zh,O.providerEmits=it,O.rectangleGeometryProps=B0,O.rectangleGraphicsProps=ib,O.rectangleOutlineGeometryProps=F0,O.selectionIndicatorProps=Qf,O.simplePolylineGeometryProps=N0,O.singletileImageryProviderProps=dy,O.skeletonAnimations=fh,O.skeletonProps=ph,O.skeletonTypes=hh,O.sphereGeometryOutlineProps=G0,O.sphereGeometryProps=z0,O.statusBarProps=Ff,O.supermapImageryProviderProps=vy,O.tencentImageryProviderProps=by,O.tiandituImageryProviderProps=Ey,O.tiandituTerrainProviderProps=Hy,O.tileCoordinatesImageryProviderProps=Sy,O.tiledcacheImageryProviderProps=Iy,O.tilesetGraphicsProps=ob,O.tilesetPrimitiveProps=$p,O.tmsImageryProviderProps=Ty,O.tooltipProps=lh,O.translate=Tm,O.urltemplateImageryProviderProps=Ry,O.useCommon=Le,O.useDatasources=Wo,O.useEvents=Al,O.useGeometries=Fe,O.useGraphics=Et,O.useHandler=Nm,O.useLocale=gt,O.usePrimitiveCollectionItems=Ln,O.usePrimitiveCollections=Bn,O.usePrimitives=ln,O.useProviders=tt,O.useVueCesium=Nl,O.version=ZI,O.viewerProps=Hm,O.vrTheworldImageryProviderProps=Gy,O.wallGeometryProps=H0,O.wallGraphicsProps=ab,O.wallOutlineProps=q0,O.windmapOverlayProps=og,O.wmsImageryProviderProps=By,O.wmtsImageryProviderProps=Fy,O.zoomControlProps=Nh,O.zoomControlSmProps=Uf,Object.defineProperty(O,"__esModule",{value:!0})});
//# sourceMappingURL=index.full.min.js.map
