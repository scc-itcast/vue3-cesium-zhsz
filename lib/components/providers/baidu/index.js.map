{"version":3,"file":"index.js","sources":["../../../../../../packages/components/providers/baidu/index.ts"],"sourcesContent":["/*\n * @Author: zouyaoji@https://github.com/zouyaoji\n * @Date: 2021-09-16 09:28:13\n * @LastEditTime: 2022-04-08 11:49:20\n * @LastEditors: zouyaoji\n * @Description:\n * @FilePath: \\vue-cesium@next\\packages\\components\\providers\\baidu\\index.ts\n */\nimport { createCommentVNode, defineComponent, getCurrentInstance } from 'vue'\nimport type { PropType } from 'vue'\nimport type {\n  ProjectionTransforms,\n  VcComponentInternalInstance,\n  VcComponentPublicInstance,\n  VcImageryProvider,\n  VcReadyObject,\n  VcRectangle\n} from '@vue-cesium/utils/types'\nimport BaiduMapImageryProvider from './BaiduMapImageryProvider'\nimport { useProviders } from '@vue-cesium/composables'\nimport { url, rectangle, ellipsoid, tileDiscardPolicy, credit, minimumLevel, maximumLevel } from '@vue-cesium/utils/cesium-props'\nimport { kebabCase } from '@vue-cesium/utils/util'\nimport { providerEmits } from '@vue-cesium/utils/emits'\n\nexport const baiduImageryProviderProps = {\n  ...url,\n  ...rectangle,\n  ...ellipsoid,\n  ...tileDiscardPolicy,\n  ...credit,\n  ...minimumLevel,\n  ...maximumLevel,\n  protocol: {\n    type: String,\n    default: 'https'\n  },\n  projectionTransforms: {\n    type: [Boolean, Object] as PropType<ProjectionTransforms>,\n    default: () => {\n      return {\n        from: 'BD09',\n        to: 'WGS84'\n      }\n    }\n  },\n  scale: {\n    type: Number,\n    default: 1\n  },\n  ak: {\n    type: String,\n    default: 'E4805d16520de693a3fe707cdc962045'\n  },\n  // https://lbsyun.baidu.com/custom/list.htm\n  customid: {\n    type: String as PropType<\n      | 'img'\n      | 'vec'\n      | 'traffic'\n      | 'normal'\n      | 'light'\n      | 'dark'\n      | 'redalert'\n      | 'googlelite'\n      | 'grassgreen'\n      | 'midnight'\n      | 'pink'\n      | 'darkgreen'\n      | 'bluish'\n      | 'grayscale'\n      | 'hardedge'\n    >,\n    default: 'normal' // img vec traffic normal light dark redalert googlelite grassgreen midnight pink darkgreen bluish grayscale hardedge\n  }\n}\nexport default defineComponent({\n  name: 'VcImageryProviderBaidu',\n  props: baiduImageryProviderProps,\n  emits: providerEmits,\n  setup(props, ctx) {\n    // state\n    const instance = getCurrentInstance() as VcComponentInternalInstance\n    instance.cesiumClass = 'BaiduMapImageryProvider'\n    const providersState = useProviders(props, ctx, instance)\n\n    if (undefined === providersState) {\n      return\n    }\n    // methods\n    instance.createCesiumObject = async () => {\n      Cesium.BaiduMapImageryProvider = Cesium.BaiduMapImageryProvider || BaiduMapImageryProvider\n      if (providersState.unwatchFns.length === 0) {\n        providersState.setPropsWatcher(true)\n      }\n      const options = providersState.transformProps(props)\n      return new Cesium.BaiduMapImageryProvider(options)\n    }\n\n    return () => createCommentVNode(kebabCase(instance.proxy?.$options.name || ''))\n  }\n})\n\nexport type VcImageryProviderBaiduProps = {\n  /**\n   * The URL of the Baidu Imagery service.\n   */\n  url?: string | Cesium.Resource\n  /**\n   * The rectangle of the layer. This parameter is ignored when accessing a tiled layer.\n   */\n  rectangle?: VcRectangle\n  /**\n   * The ellipsoid. If the tilingScheme is specified and used, this parameter is ignored and the tiling scheme's ellipsoid is used instead. If neither parameter is specified, the WGS84 ellipsoid is used.\n   */\n  ellipsoid?: Cesium.Ellipsoid\n  /**\n   * The policy that determines if a tile is invalid and should be discarded. If this value is not specified, a default DiscardMissingTileImagePolicy is used for tiled map servers, and a NeverTileDiscardPolicy is used for non-tiled map servers. In the former case, we request tile 0,0 at the maximum tile level and check pixels (0,0), (200,20), (20,200), (80,110), and (160, 130). If all of these pixels are transparent, the discard check is disabled and no tiles are discarded. If any of them have a non-transparent color, any tile that has the same values in these pixel locations is discarded. The end result of these defaults should be correct tile discarding for a standard ArcGIS Server. To ensure that no tiles are discarded, construct and pass a NeverTileDiscardPolicy for this parameter.\n   */\n  tileDiscardPolicy?: Cesium.DiscardMissingTileImagePolicy | Cesium.NeverTileDiscardPolicy\n  /**\n   * A credit for the data source, which is displayed on the canvas. This parameter is ignored when accessing a tiled server.\n   */\n  credit?: string | Cesium.Credit\n  /**\n   * The minimumLevel tile level to request, or undefined if there is no minimumLevel. This parameter is ignored when accessing a tiled server.\n   */\n  minimumLevel?: number\n  /**\n   * The maximum tile level to request, or undefined if there is no maximum. This parameter is ignored when accessing a tiled server.\n   */\n  maximumLevel?: number\n  /**\n   * Specify protocol of service.\n   * Default value: https\n   */\n  protocol?: string\n  /**\n   * Specify the scale\n   */\n  scale?: number\n  /**\n   * Specify the baidumap key\n   */\n  ak?: string\n  /**\n   * Specify the customid\n   */\n  customid?:\n    | 'img'\n    | 'vec'\n    | 'traffic'\n    | 'normal'\n    | 'light'\n    | 'dark'\n    | 'redalert'\n    | 'googlelite'\n    | 'grassgreen'\n    | 'midnight'\n    | 'pink'\n    | 'darkgreen'\n    | 'bluish'\n    | 'grayscale'\n    | 'hardedge'\n  /**\n   * Specify the projection transformation parameters. such as { from: 'BD09', to: 'WGS84' }\n   */\n  projectionTransforms?: ProjectionTransforms\n  /**\n   * Triggers before the VcImageryProviderArcgis is loaded.\n   */\n  onBeforeLoad?: (instance: VcComponentInternalInstance) => void\n  /**\n   * Triggers when the VcImageryProviderArcgis is successfully loaded.\n   */\n  onReady?: (readyObject: VcReadyObject) => void\n  /**\n   * Triggers when the VcImageryProviderArcgis is destroyed.\n   */\n  onDestroyed?: (instance: VcComponentInternalInstance) => void\n  /**\n   * Triggers when the imagery provider encounters an asynchronous error.\n   */\n  onErrorEvent?: (evt: Cesium.TileProviderError) => void\n  /**\n   * Triggers when the provider is ready for use.\n   */\n  onReadyPromise?: (evt: boolean | VcImageryProvider, viewer: Cesium.Viewer, instance: VcComponentPublicInstance) => void\n}\n\nexport type VcImageryProviderBaiduRef = VcComponentPublicInstance<VcImageryProviderBaiduProps>\n"],"names":["url","rectangle","ellipsoid","tileDiscardPolicy","credit","minimumLevel","maximumLevel","defineComponent","providerEmits","getCurrentInstance","useProviders","BaiduMapImageryProvider","createCommentVNode","kebabCase"],"mappings":";;;;;;;;;;;;AAMY,MAAC,yBAAyB,GAAG;AACzC,EAAE,GAAGA,eAAG;AACR,EAAE,GAAGC,qBAAS;AACd,EAAE,GAAGC,qBAAS;AACd,EAAE,GAAGC,6BAAiB;AACtB,EAAE,GAAGC,kBAAM;AACX,EAAE,GAAGC,wBAAY;AACjB,EAAE,GAAGC,wBAAY;AACjB,EAAE,QAAQ,EAAE;AACZ,IAAI,IAAI,EAAE,MAAM;AAChB,IAAI,OAAO,EAAE,OAAO;AACpB,GAAG;AACH,EAAE,oBAAoB,EAAE;AACxB,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC;AAC3B,IAAI,OAAO,EAAE,MAAM;AACnB,MAAM,OAAO;AACb,QAAQ,IAAI,EAAE,MAAM;AACpB,QAAQ,EAAE,EAAE,OAAO;AACnB,OAAO,CAAC;AACR,KAAK;AACL,GAAG;AACH,EAAE,KAAK,EAAE;AACT,IAAI,IAAI,EAAE,MAAM;AAChB,IAAI,OAAO,EAAE,CAAC;AACd,GAAG;AACH,EAAE,EAAE,EAAE;AACN,IAAI,IAAI,EAAE,MAAM;AAChB,IAAI,OAAO,EAAE,kCAAkC;AAC/C,GAAG;AACH,EAAE,QAAQ,EAAE;AACZ,IAAI,IAAI,EAAE,MAAM;AAChB,IAAI,OAAO,EAAE,QAAQ;AACrB,GAAG;AACH,EAAE;AACF,2BAAeC,mBAAe,CAAC;AAC/B,EAAE,IAAI,EAAE,wBAAwB;AAChC,EAAE,KAAK,EAAE,yBAAyB;AAClC,EAAE,KAAK,EAAEC,mBAAa;AACtB,EAAE,KAAK,CAAC,KAAK,EAAE,GAAG,EAAE;AACpB,IAAI,MAAM,QAAQ,GAAGC,sBAAkB,EAAE,CAAC;AAC1C,IAAI,QAAQ,CAAC,WAAW,GAAG,yBAAyB,CAAC;AACrD,IAAI,MAAM,cAAc,GAAGC,gBAAY,CAAC,KAAK,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;AAC9D,IAAI,IAAI,cAAc,KAAK,KAAK,CAAC,EAAE;AACnC,MAAM,OAAO;AACb,KAAK;AACL,IAAI,QAAQ,CAAC,kBAAkB,GAAG,YAAY;AAC9C,MAAM,MAAM,CAAC,uBAAuB,GAAG,MAAM,CAAC,uBAAuB,IAAIC,kCAAuB,CAAC;AACjG,MAAM,IAAI,cAAc,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;AAClD,QAAQ,cAAc,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;AAC7C,OAAO;AACP,MAAM,MAAM,OAAO,GAAG,cAAc,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;AAC3D,MAAM,OAAO,IAAI,MAAM,CAAC,uBAAuB,CAAC,OAAO,CAAC,CAAC;AACzD,KAAK,CAAC;AACN,IAAI,OAAO,MAAM;AACjB,MAAM,IAAI,EAAE,CAAC;AACb,MAAM,OAAOC,sBAAkB,CAACC,cAAS,CAAC,CAAC,CAAC,EAAE,GAAG,QAAQ,CAAC,KAAK,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,KAAK,EAAE,CAAC,CAAC,CAAC;AAC9G,KAAK,CAAC;AACN,GAAG;AACH,CAAC,CAAC;;;;;"}