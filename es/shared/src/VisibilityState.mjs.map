{"version":3,"file":"VisibilityState.mjs","sources":["../../../../../packages/shared/src/VisibilityState.ts"],"sourcesContent":["class VisibilityState {\n  states: any\n  count: number\n  constructor() {\n    this.states = new Cesium.ManagedArray()\n    this.count = 0\n  }\n\n  hidePrimitiveCollection(primitiveCollection: Cesium.PrimitiveCollection) {\n    const { PrimitiveCollection, Cesium3DTileset, Model } = Cesium\n    const length = primitiveCollection.length\n    for (let i = 0; i < length; i++) {\n      const primitive = primitiveCollection.get(i)\n      if (primitive instanceof PrimitiveCollection) {\n        this.hidePrimitiveCollection(primitive)\n      } else {\n        this.states.push(primitive.show)\n        primitive instanceof Cesium3DTileset || primitive instanceof Model || (primitive.show = false)\n      }\n    }\n  }\n\n  restorePrimitiveCollection(primitiveCollection: Cesium.PrimitiveCollection) {\n    const { PrimitiveCollection } = Cesium\n    const length = primitiveCollection.length\n    for (let i = 0; i < length; i++) {\n      const primitive = primitiveCollection.get(i)\n      if (primitive instanceof PrimitiveCollection) {\n        this.restorePrimitiveCollection(primitive)\n      } else {\n        primitive.show = this.states.get(this.count++)\n      }\n    }\n  }\n\n  hide(scene: Cesium.Scene) {\n    this.states.length = 0\n    this.hidePrimitiveCollection(scene.primitives)\n    this.hidePrimitiveCollection(scene.groundPrimitives)\n  }\n\n  restore(scene: Cesium.Scene) {\n    this.count = 0\n    this.restorePrimitiveCollection(scene.primitives)\n    this.restorePrimitiveCollection(scene.groundPrimitives)\n  }\n}\n\nexport default VisibilityState\n"],"names":[],"mappings":"AAAA,MAAM,eAAe,CAAC;AACtB,EAAE,WAAW,GAAG;AAChB,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CAAC,YAAY,EAAE,CAAC;AAC5C,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;AACnB,GAAG;AACH,EAAE,uBAAuB,CAAC,mBAAmB,EAAE;AAC/C,IAAI,MAAM,EAAE,mBAAmB,EAAE,eAAe,EAAE,KAAK,EAAE,GAAG,MAAM,CAAC;AACnE,IAAI,MAAM,MAAM,GAAG,mBAAmB,CAAC,MAAM,CAAC;AAC9C,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;AACrC,MAAM,MAAM,SAAS,GAAG,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACnD,MAAM,IAAI,SAAS,YAAY,mBAAmB,EAAE;AACpD,QAAQ,IAAI,CAAC,uBAAuB,CAAC,SAAS,CAAC,CAAC;AAChD,OAAO,MAAM;AACb,QAAQ,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;AACzC,QAAQ,SAAS,YAAY,eAAe,IAAI,SAAS,YAAY,KAAK,KAAK,SAAS,CAAC,IAAI,GAAG,KAAK,CAAC,CAAC;AACvG,OAAO;AACP,KAAK;AACL,GAAG;AACH,EAAE,0BAA0B,CAAC,mBAAmB,EAAE;AAClD,IAAI,MAAM,EAAE,mBAAmB,EAAE,GAAG,MAAM,CAAC;AAC3C,IAAI,MAAM,MAAM,GAAG,mBAAmB,CAAC,MAAM,CAAC;AAC9C,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;AACrC,MAAM,MAAM,SAAS,GAAG,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACnD,MAAM,IAAI,SAAS,YAAY,mBAAmB,EAAE;AACpD,QAAQ,IAAI,CAAC,0BAA0B,CAAC,SAAS,CAAC,CAAC;AACnD,OAAO,MAAM;AACb,QAAQ,SAAS,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;AACvD,OAAO;AACP,KAAK;AACL,GAAG;AACH,EAAE,IAAI,CAAC,KAAK,EAAE;AACd,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;AAC3B,IAAI,IAAI,CAAC,uBAAuB,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AACnD,IAAI,IAAI,CAAC,uBAAuB,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;AACzD,GAAG;AACH,EAAE,OAAO,CAAC,KAAK,EAAE;AACjB,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;AACnB,IAAI,IAAI,CAAC,0BAA0B,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AACtD,IAAI,IAAI,CAAC,0BAA0B,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;AAC5D,GAAG;AACH;;;;"}